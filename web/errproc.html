<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>13. Error Processing &mdash; Programmer&#39;s Guide  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="14. Triggers" href="triggers.html" />
    <link rel="prev" title="12. Internationalization" href="internatn.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
	  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
		      <input type="text" name="q" placeholder="Search" />
		          <input type="hidden" name="check_keywords" value="yes" />
			      <input type="hidden" name="area" value="default" />
			        </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://yottadb.com/resources/documentation">Main YottaDB Documentation Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="man.html">About this Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">1. About YottaDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="langext.html">2. YottaDB Language Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="devcycle.html">3. Development Cycle</a></li>
<li class="toctree-l1"><a class="reference internal" href="opdebug.html">4. Operating and Debugging in Direct Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="langfeat.html">5. General Language Features of M</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands.html">6. Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">7. Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="isv.html">8. Intrinsic Special Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="ioproc.html">9. Input/Output Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="utility.html">10. Utility Routines</a></li>
<li class="toctree-l1"><a class="reference internal" href="extrout.html">11. Integrating External Routines</a></li>
<li class="toctree-l1"><a class="reference internal" href="internatn.html">12. Internationalization</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="errproc.html#">13. Error Processing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="errproc.html#compile-time-error-message-format">Compile Time Error Message Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="errproc.html#processing-compile-time-errors">Processing Compile Time Errors</a></li>
<li class="toctree-l2"><a class="reference internal" href="errproc.html#run-time-error-message-format">Run Time Error Message Format</a></li>
<li class="toctree-l2"><a class="reference internal" href="errproc.html#processing-run-time-errors">Processing Run-Time Errors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#run-time-errors-in-direct-mode">Run-Time Errors in Direct Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#run-time-errors-outside-of-direct-mode">Run-Time Errors Outside of Direct Mode</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="errproc.html#program-handling-of-errors">Program Handling of Errors</a><ul>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#summary-of-yottadb-error-handling-facilities">Summary of YottaDB Error-Handling Facilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#ecode">$ECODE</a></li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#zstatus-content">$ZSTATUS Content</a></li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#zerror-and-zyerror">$ZERROR and $ZYERROR</a></li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#etrap-behavior">$ETRAP Behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#nesting-etrap-and-using-estack">Nesting $ETRAP and using $ESTACK</a></li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#ztrap-behavior">$ZTRAP Behavior</a></li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#differences-between-etrap-and-ztrap">Differences between $ETRAP and $ZTRAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#ztrap-interaction-with-etrap">$ZTRAP Interaction With $ETRAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#choosing-etrap-or-ztrap">Choosing $ETRAP or $ZTRAP</a><ul>
<li class="toctree-l4"><a class="reference internal" href="errproc.html#example-1-returning-control-to-a-specific-execution-level">Example 1: Returning control to a specific execution level</a></li>
<li class="toctree-l4"><a class="reference internal" href="errproc.html#example-2-ignoring-an-error">Example 2: Ignoring an Error</a></li>
<li class="toctree-l4"><a class="reference internal" href="errproc.html#example-3-nested-error-handlers">Example 3: Nested Error Handlers</a></li>
<li class="toctree-l4"><a class="reference internal" href="errproc.html#example-4-access-to-cause-of-error">Example 4: Access to “cause of error”</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#error-processing-cautions">Error Processing Cautions</a></li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#input-output-errors">Input/Output Errors</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="errproc.html#error-actions">Error Actions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#break-on-an-error">Break on an Error</a></li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#unconditional-transfer-on-an-error">Unconditional Transfer on an Error</a></li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#setting-ztrap-for-each-level">Setting $ZTRAP for each level</a></li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#nested-error-handling">Nested Error Handling</a></li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#terminating-execution-on-an-error">Terminating Execution on an Error</a></li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#setting-ztrap-to-other-actions">Setting $ZTRAP to Other Actions</a></li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#summary-of-etrap-ztrap-error-handling-options">Summary of $ETRAP &amp; $ZTRAP Error-Handling Options</a></li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#errors-in-ztrap">Errors in $ZTRAP</a></li>
<li class="toctree-l3"><a class="reference internal" href="errproc.html#recording-information-about-errors">Recording Information about Errors</a><ul>
<li class="toctree-l4"><a class="reference internal" href="errproc.html#program-to-record-information-on-an-error-using-ztrap">Program to Record Information on an Error using $ZTRAP</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="triggers.html">14. Triggers</a></li>
<li class="toctree-l1"><a class="reference internal" href="encrypt.html">15. Database Encryption Extensions to the YottaDB External Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix A: M Coding Standards - Do’s and Don’ts</a></li>
<li class="toctree-l1"><a class="reference internal" href="LICENSE.html">LICENSE</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Programmer's Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>13. Error Processing</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="internatn.html" class="btn btn-neutral float-left" title="12. Internationalization" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="triggers.html" class="btn btn-neutral float-right" title="14. Triggers" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="error-processing">
<span id="index-0"></span><h1><a class="toc-backref" href="errproc.html#id3">13. Error Processing</a><a class="headerlink" href="errproc.html#error-processing" title="Permalink to this heading">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="errproc.html#error-processing" id="id3">13. Error Processing</a></p>
<ul>
<li><p><a class="reference internal" href="errproc.html#compile-time-error-message-format" id="id4">Compile Time Error Message Format</a></p></li>
<li><p><a class="reference internal" href="errproc.html#processing-compile-time-errors" id="id5">Processing Compile Time Errors</a></p></li>
<li><p><a class="reference internal" href="errproc.html#run-time-error-message-format" id="id6">Run Time Error Message Format</a></p></li>
<li><p><a class="reference internal" href="errproc.html#processing-run-time-errors" id="id7">Processing Run-Time Errors</a></p>
<ul>
<li><p><a class="reference internal" href="errproc.html#run-time-errors-in-direct-mode" id="id8">Run-Time Errors in Direct Mode</a></p></li>
<li><p><a class="reference internal" href="errproc.html#run-time-errors-outside-of-direct-mode" id="id9">Run-Time Errors Outside of Direct Mode</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="errproc.html#program-handling-of-errors" id="id10">Program Handling of Errors</a></p>
<ul>
<li><p><a class="reference internal" href="errproc.html#summary-of-yottadb-error-handling-facilities" id="id11">Summary of YottaDB Error-Handling Facilities</a></p></li>
<li><p><a class="reference internal" href="errproc.html#ecode" id="id12">$ECODE</a></p></li>
<li><p><a class="reference internal" href="errproc.html#zstatus-content" id="id13">$ZSTATUS Content</a></p></li>
<li><p><a class="reference internal" href="errproc.html#zerror-and-zyerror" id="id14">$ZERROR and $ZYERROR</a></p></li>
<li><p><a class="reference internal" href="errproc.html#etrap-behavior" id="id15">$ETRAP Behavior</a></p></li>
<li><p><a class="reference internal" href="errproc.html#nesting-etrap-and-using-estack" id="id16">Nesting $ETRAP and using $ESTACK</a></p></li>
<li><p><a class="reference internal" href="errproc.html#ztrap-behavior" id="id17">$ZTRAP Behavior</a></p></li>
<li><p><a class="reference internal" href="errproc.html#differences-between-etrap-and-ztrap" id="id18">Differences between $ETRAP and $ZTRAP</a></p></li>
<li><p><a class="reference internal" href="errproc.html#ztrap-interaction-with-etrap" id="id19">$ZTRAP Interaction With $ETRAP</a></p></li>
<li><p><a class="reference internal" href="errproc.html#choosing-etrap-or-ztrap" id="id20">Choosing $ETRAP or $ZTRAP</a></p>
<ul>
<li><p><a class="reference internal" href="errproc.html#example-1-returning-control-to-a-specific-execution-level" id="id21">Example 1: Returning control to a specific execution level</a></p></li>
<li><p><a class="reference internal" href="errproc.html#example-2-ignoring-an-error" id="id22">Example 2: Ignoring an Error</a></p></li>
<li><p><a class="reference internal" href="errproc.html#example-3-nested-error-handlers" id="id23">Example 3: Nested Error Handlers</a></p></li>
<li><p><a class="reference internal" href="errproc.html#example-4-access-to-cause-of-error" id="id24">Example 4: Access to “cause of error”</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="errproc.html#error-processing-cautions" id="id25">Error Processing Cautions</a></p></li>
<li><p><a class="reference internal" href="errproc.html#input-output-errors" id="id26">Input/Output Errors</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="errproc.html#error-actions" id="id27">Error Actions</a></p>
<ul>
<li><p><a class="reference internal" href="errproc.html#break-on-an-error" id="id28">Break on an Error</a></p></li>
<li><p><a class="reference internal" href="errproc.html#unconditional-transfer-on-an-error" id="id29">Unconditional Transfer on an Error</a></p></li>
<li><p><a class="reference internal" href="errproc.html#setting-ztrap-for-each-level" id="id30">Setting $ZTRAP for each level</a></p></li>
<li><p><a class="reference internal" href="errproc.html#nested-error-handling" id="id31">Nested Error Handling</a></p></li>
<li><p><a class="reference internal" href="errproc.html#terminating-execution-on-an-error" id="id32">Terminating Execution on an Error</a></p></li>
<li><p><a class="reference internal" href="errproc.html#setting-ztrap-to-other-actions" id="id33">Setting $ZTRAP to Other Actions</a></p></li>
<li><p><a class="reference internal" href="errproc.html#summary-of-etrap-ztrap-error-handling-options" id="id34">Summary of $ETRAP &amp; $ZTRAP Error-Handling Options</a></p></li>
<li><p><a class="reference internal" href="errproc.html#errors-in-ztrap" id="id35">Errors in $ZTRAP</a></p></li>
<li><p><a class="reference internal" href="errproc.html#recording-information-about-errors" id="id36">Recording Information about Errors</a></p>
<ul>
<li><p><a class="reference internal" href="errproc.html#program-to-record-information-on-an-error-using-ztrap" id="id37">Program to Record Information on an Error using $ZTRAP</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<p>This chapter describes YottaDB features and techniques for handling errors. Errors in programs may be classified as “predictable” meaning foreseen, or “unpredictable” meaning unforeseen.</p>
<p>M programs may attempt to recover from predictable errors. Device errors that can be remedied by an operator are the most common class of errors for which recovery provides a large benefit. Predictable errors from which the program does not attempt to recover are generally treated the same as unpredictable errors.</p>
<p>A typical application handles unpredictable errors by logging as much information about the error as the designer considers useful, then terminating or restarting the application from a known point.</p>
<p>Because YottaDB invokes error handling when things are not normal, careful design and implementation of error handling are required to minimize the impact of errors and the cost of subsequent prevention.</p>
<p>The YottaDB compiler detects and reports syntax errors at:</p>
<ul class="simple">
<li><p>Compile time while producing the object module from a source file.</p></li>
<li><p>Run time while compiling code for M indirection and XECUTEs.</p></li>
<li><p>Run time when the user is working in Direct Mode.</p></li>
</ul>
<p>The YottaDB run-time system:</p>
<ul class="simple">
<li><p>Recognizes and reports execution errors when they occur.</p></li>
<li><p>Reports errors flagged by the compiler when they fall in the execution path.</p></li>
</ul>
<section id="compile-time-error-message-format">
<h2><a class="toc-backref" href="errproc.html#id4">Compile Time Error Message Format</a><a class="headerlink" href="errproc.html#compile-time-error-message-format" title="Permalink to this heading">¶</a></h2>
<p>To understand the compile-time error message format, consider this incorrect source line:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>S=B+C
</pre></div>
</div>
<p>If this were line 7 of a source file ADD2.m, the compiler reports the compile-time error with the message:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>S=B+C
    ^-----
At column 4, line 7, source module ADD2
Variable expected in this context
</pre></div>
</div>
<p>The compile-time error message format consists of three lines. The first two lines tell you the line and location where the error occurred. The last line describes the M syntax error. The positioning accuracy of the carat pointing to the location of an issue in a source line depends on your terminal settings, particularly in UTF-8 mode where character widths are not uniform. If the line exceeds the terminal width as understood by YottaDB, it replaces the carat line with an ARROWNTDSP error.</p>
<p>If you requested a listing file, it contains the same information and looks as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>.
.
6 .  .  .
7 S=B+C
    ^-----
Variable expected in this context
8 . . .
.
.
</pre></div>
</div>
</section>
<section id="processing-compile-time-errors">
<h2><a class="toc-backref" href="errproc.html#id5">Processing Compile Time Errors</a><a class="headerlink" href="errproc.html#processing-compile-time-errors" title="Permalink to this heading">¶</a></h2>
<p>At compile-time, the compiler stops processing a routine line as soon as it detects the first error on that line. By default, the compiler displays the line in error on stderr, and also in a listing file when the compiler options include -list. By default, the compiler processes the remaining source lines until it exceeds the maximum error count of 127.</p>
<p>The compile-time error message format displays the line containing the error and the location of the error on the line. The error message also indicates what was incorrect about the M statement. For more information on the error message format, refer to the <a class="reference external" href="../MessageRecovery/index.html">Messages and Recovery Procedures Reference Manual</a>.</p>
<p>You may correct compile-time errors immediately by activating an editor and entering the correct syntax in the source program. Because several errors may occur on a line, examine the line carefully to avoid compiling the routine several times.</p>
<p>The yottadb command qualifier -ignore, which is the default, instructs YottaDB to produce an object file even if the compiler detects errors in the source code. As long as the execution path does not encounter the compile-time errors, the YottaDB run-time system executes the compiled-as-written routine. You may take advantage of this feature to exercise some parts of your program before correcting errors detected by the compiler.</p>
</section>
<section id="run-time-error-message-format">
<h2><a class="toc-backref" href="errproc.html#id6">Run Time Error Message Format</a><a class="headerlink" href="errproc.html#run-time-error-message-format" title="Permalink to this heading">¶</a></h2>
<p>To understand the run-time error message format, consider this short program printsum.m:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>     SET A=17
GO   SET B=21
     WRITE A+C
</pre></div>
</div>
<p>When you try to execute this program, the last statement causes an error since the variable C is undefined. If $ETRAP=”B”, YottaDB displays the run-time error message:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ yottadb -run printsum
%YDB-E-UNDEF, Undefined <span class="nb">local</span> variable: C
At yottadb <span class="nb">source</span> location GO+1^printsum
YDB&gt;
</pre></div>
</div>
<p>YottaDB informs you of the error (Undefined local variable) and where in the routine the error occurred (GO+1). Note that the run-time system displays the YDB&gt; prompt, indicating that the process has entered Direct Mode. YottaDB places run time error information in the intrinsic special variables $ECODE and $ZSTATUS.</p>
<p>Compile-time error messages may appear at run time. This is because errors in indirection and the compile-as-written feature leave errors that are subsequently reported at run time.</p>
<p>The YottaDB utilities use portions of the run-time system and therefore may issue run-time errors as well as their own unique errors.</p>
</section>
<section id="processing-run-time-errors">
<h2><a class="toc-backref" href="errproc.html#id7">Processing Run-Time Errors</a><a class="headerlink" href="errproc.html#processing-run-time-errors" title="Permalink to this heading">¶</a></h2>
<p>YottaDB does not detect certain types of errors associated with indirection, the functioning of I/O devices, and program logic until run-time. Also, the compile-as-written feature may leave errors which YottaDB reports at run-time when it encounters them in the execution path. At run-time, YottaDB reports any error encountered to stderr. The run-time system suspends normal execution of the routine as soon as it detects an error.</p>
<p>YottaDB responds to errors differently depending on whether it encounters them in Direct Mode (at the command line) or during normal program execution.</p>
<p>When an executing YottaDB image encounters an error:</p>
<ul class="simple">
<li><p>if Direct Mode is active at the top of the invocation stack, YottaDB stays in Direct Mode.</p></li>
<li><p>otherwise, if the error comes from a device that has an EXCEPTION, YottaDB executes the EXCEPTION string.</p></li>
<li><p>otherwise, if $ETRAP’=”” YottaDB transfers control to the code defined by $ETRAP as if it had been inserted at the point of the error, unless $ECODE’=””, in which case it executes a TROLLBACK:$TLEVEL followed by a QUIT:$QUIT “” QUIT.</p></li>
<li><p>otherwise, if $ZTRAP’=”” YottaDB executes $ZTRAP.</p></li>
<li><p>otherwise, YottaDB performs a QUIT:$QUIT “” QUIT and reissues the error at the new stack level, if no other error traps ($ETRAP or $ZTRAP) are uncovered by descending the stack, YottaDB reports the error on the principal device and terminates the image.</p></li>
</ul>
<p>After the action, if any, invoked by $ETRAP, $ZTRAP or EXCEPTION:</p>
<ul class="simple">
<li><p>if the process ends in Direct Mode – as a result either of performing a BREAK in the executed string or of starting in Direct Mode – YottaDB reports the error on the principal device.</p></li>
<li><p>otherwise, if the executed string contains an unstacked transfer of control, the only implicit behavior is that as long as $ECODE’=”” and $ZTRAP’=”” an attempt to QUIT from the level of the current error causes that error to be reissued at the new stack level.</p></li>
<li><p>otherwise, if $ETRAP’=”” YottaDB performs a QUIT$QUIT “” QUIT and reissues the error at the new stack level.</p></li>
<li><p>otherwise, $ZTRAP must contain code and YottaDB retries the line of M on which the error occurred.</p></li>
</ul>
<p>YottaDB checks the syntax of code assigned to $ETRAP, $ZSTEP, $ZTRAP, and EXCEPTION at the time they are specified. Note that $ZTRAP and EXCEPTION are subject to ydb_ztrap_form, and, if that specifies entryref or adaptive, YottaDB does not check the syntax. Also, the environment variables $ydb_etrap, $ydb_trigger_etrap, and $ydb_zstep provide ways of setting some of the ISVs, so their values are verified at process initiation. Further, a SET $ETRAP uses a temporary default value of “IF $ZJOBEXAM” when shifting from $ZTRAP to $ETRAP in case the specified value has compilation errors.</p>
<section id="run-time-errors-in-direct-mode">
<h3><a class="toc-backref" href="errproc.html#id8">Run-Time Errors in Direct Mode</a><a class="headerlink" href="errproc.html#run-time-errors-in-direct-mode" title="Permalink to this heading">¶</a></h3>
<p>When YottaDB detects an error in Direct Mode, it reports the error with a message and leaves the process at the YDB&gt; prompt.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;ZW
ZW
^_____
%YDB-E-INVCMD, Invalid <span class="nb">command</span> keyword encountered
YDB&gt;
</pre></div>
</div>
<p>In Direct Mode, YottaDB provides access to the RECALL command. RECALL allows you to retrieve a Direct Mode command line with a minimum of typing. The YottaDB line editor allows you to make quick changes or corrections to the command line. For more information on RECALL and the line editor, see <a class="reference external" href="opdebug.html">Chapter 4: “Operating and Debugging in Direct Mode”</a>.</p>
</section>
<section id="run-time-errors-outside-of-direct-mode">
<h3><a class="toc-backref" href="errproc.html#id9">Run-Time Errors Outside of Direct Mode</a><a class="headerlink" href="errproc.html#run-time-errors-outside-of-direct-mode" title="Permalink to this heading">¶</a></h3>
<p>If YottaDB encounters an error outside of code entered in Direct Mode, YottaDB executes the $ETRAP or $ZTRAP special variable, if either of them have a length greater than zero, which only one can have at a given point in time.</p>
<p>The $ETRAP and $ZTRAP special variables specify an action that YottaDB should perform when an error occurs during routine execution. $ETRAP and $ZTRAP can establish one or more error handling “actions”.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The environment variable ydb_etrap specifies an initial value of $ETRAP to override the default value of “B” for $ZTRAP as the base level error handler. The ydb_env_set script sets ydb_etrap to “Write:(0=$STACK) “”Error occurred: “”,$ZStatus,!” which you can customize to suit your needs. For more information, refer to “Processing Errors from Direct Mode and Shell”.</p>
</div>
</section>
</section>
<section id="program-handling-of-errors">
<h2><a class="toc-backref" href="errproc.html#id10">Program Handling of Errors</a><a class="headerlink" href="errproc.html#program-handling-of-errors" title="Permalink to this heading">¶</a></h2>
<p>YottaDB provides the error handling facilities described in the M standard. In addition, YottaDB provides a number of extensions for error handling. Both are discussed in the following sections. The following table summarizes some of the tools, which are then described in more detail within the context of various techniques and examples.</p>
<section id="summary-of-yottadb-error-handling-facilities">
<h3><a class="toc-backref" href="errproc.html#id11">Summary of YottaDB Error-Handling Facilities</a><a class="headerlink" href="errproc.html#summary-of-yottadb-error-handling-facilities" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Extension</p></th>
<th class="head"><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>OPEN/USE/CLOSE EXCEPTION</p></td>
<td><p>Provides a deviceparameter specifying an XECUTE string or entryref that YottaDB invokes upon encountering a device-related exception condition.</p></td>
</tr>
<tr class="row-odd"><td><p>yottadb -list ZLINK :”-list”</p></td>
<td><p>Creates a listing file of all the errors detected by the compiler and detects syntax errors. Useful in the process of re-editing program to correct errors.</p></td>
</tr>
<tr class="row-even"><td><p>Zgoto</p></td>
<td><p>Provides for removing multiple levels from the M invocation stack.</p></td>
</tr>
<tr class="row-odd"><td><p>ZMESSAGE</p></td>
<td><p>Creates or emulates arbitrary errors.</p></td>
</tr>
<tr class="row-even"><td><p>$STACK</p></td>
<td><p>Contains the current level of M execution stack depth.</p></td>
</tr>
<tr class="row-odd"><td><p>$STACK()</p></td>
<td><p>Returns values describing aspects of the execution environment.</p></td>
</tr>
<tr class="row-even"><td><p>$ECODE</p></td>
<td><p>Contains a list of error codes for “active” errors; these are the errors that have occurred, but have not yet been cleared.</p></td>
</tr>
<tr class="row-odd"><td><p>$ESTACK</p></td>
<td><p>Contains an integer count of M virtual machine stack levels that have been activated and not removed, since the last time $ESTACK was NEW’d.</p></td>
</tr>
<tr class="row-even"><td><p>$ETRAP</p></td>
<td><p>Contains a string value that YottaDB invokes when an error occurs during routine execution.</p></td>
</tr>
<tr class="row-odd"><td><p>$QUIT</p></td>
<td><p>Indicates whether the current block of code was called as an extrinsic function or a subroutine.</p></td>
</tr>
<tr class="row-even"><td><p>$ZCSTATUS</p></td>
<td><p>Holds the value of the status code for the last compilation performed by a ZCOMPILE command.</p></td>
</tr>
<tr class="row-odd"><td><p>$ZEDIT</p></td>
<td><p>Holds the value of the status code for the last edit session invoked by a ZEDIT command.</p></td>
</tr>
<tr class="row-even"><td><p>$ZEOF</p></td>
<td><p>Holds the value ‘1’ (TRUE) if the last READ on the current device reached end-of-file, otherwise holds a ‘0’ (FALSE).</p></td>
</tr>
<tr class="row-odd"><td><p>$ZERROR</p></td>
<td><p>Contains a string supplied by the application, typically one generated by the code specified in $ZYERROR.</p></td>
</tr>
<tr class="row-even"><td><p>$ZLEVEL</p></td>
<td><p>Contains current level of DO/EXECUTE nesting ($STACK+1).</p></td>
</tr>
<tr class="row-odd"><td><p>$ZMESSAGE()</p></td>
<td><p>Translates a UNIX/YottaDB condition code into text form.</p></td>
</tr>
<tr class="row-even"><td><p>$ZSTATUS</p></td>
<td><p>Contains the error condition code and location of last exception condition occurring during routine execution.</p></td>
</tr>
<tr class="row-odd"><td><p>$ZTRAP</p></td>
<td><p>Contains an XECUTE string or entryref that YottaDB invokes upon encountering an exception condition.</p></td>
</tr>
<tr class="row-even"><td><p>$ZYERROR</p></td>
<td><p>Contains an entryref to invoke when an error occurs; typically used to maintain $ZERROR.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="ecode">
<h3><a class="toc-backref" href="errproc.html#id12">$ECODE</a><a class="headerlink" href="errproc.html#ecode" title="Permalink to this heading">¶</a></h3>
<p>The value of $ECODE is a string that may reflect multiple error conditions. As long as no error has occured, the value of $ECODE is equal to the empty string.</p>
<p>$ECODE contains a list of errors codes for “active” errors - the error conditions which are not yet resolved. If there are no active errors, $ECODE contains the empty string. The value of $ECODE can be SET.</p>
<p>The most recent error in $ECODE appears first, the oldest last. If the error is defined by the M standard, the code starts with an “M”, YottaDB error codes including those provided by OS services start with “Z”, and application defined codes must start with “U”. Every code is separated by a comma (,) and there is always a comma at the beginning and at the end of a list. YottaDB provided codes are those reported in $ZSTATUS, interpreted by $ZMESSAGE() and recognized as arguments to ZMESSAGE command. When YottaDB supplies a standard error code in $ECODE, it also supplies a corresponding ‘Z’ code.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See “$ECode” for a detailed description of $ECODE.</p>
</div>
<p>Example (setting $ECODE):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SET $ECODE=&quot;&quot; ;sets $ECODE to the empty string
SET $ECODE=&quot;,M20,&quot; ;an ANSI M standardized error code
SET $ECODE=&quot;,U14,&quot; ;user defined error code
SET $PIECE($ECODE,&quot;,&quot;,2)=&quot;Z3,&quot; ;insert a non-ANSI error code
SET $PIECE($ECODE,&quot;,&quot;,$LENGTH($ECODE,&quot;,&quot;)+1)=&quot;An..,&quot; ;append
</pre></div>
</div>
<p>Standard Error processing affects the flow of control in the following manner. Detection of an error causes GOTO implicit sub-routine. When $ECODE=””, the implicit subroutine is $ETRAP and QUIT:$QUIT “” QUIT. Otherwise, the implicit subroutine is $ETRAP followed by TROLLBACK:$TLEVEL and then QUIT:$QUIT “” QUIT.</p>
<p>The QUIT command behaves in a special fashion while the value of $ECODE is non-empty. If a QUIT command is executed that returns control to a less nested level than the one where the error occurred, and the value of $ECODE is still non-empty, first all normal activity related to the QUIT command occurs (especially the unstacking of NEWed variables) and then the current value of $ETRAP is executed. Note that, if $ETRAP had been NEWed at the current or intervening level, the unstacked value of $ETRAP is executed.</p>
<p>SETting $ECODE to an invalid value is an error. SETting $ECODE to a valid error behaves like detection of error. SETting $ECODE=”” does not cause a change in the flow, but effects $STACK(), subsequent $QUITs and errors.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To force execution of an error trap or to flag a user-defined error (“U” errors), make the value of $ECODE non-empty:</p>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>SET $ECODE=&quot;,U13-User defined error trap,&quot;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The value of $ECODE provides information about errors that have occurred since the last time it was reset to an empty string. In addition to the information in this variable, more detailed information can be obtained from the intrinsic function $STACK. For more information, see the section on “$STack()”.</p>
</div>
</section>
<section id="zstatus-content">
<h3><a class="toc-backref" href="errproc.html#id13">$ZSTATUS Content</a><a class="headerlink" href="errproc.html#zstatus-content" title="Permalink to this heading">¶</a></h3>
<p>$ZSTATUS contains a string value specifying the error condition code and location of the last exception condition that occurred during routine execution. For further details, see <a class="reference internal" href="isv.html#zstatus-isv"><span class="std std-ref">$ZSTATUS</span></a>.</p>
</section>
<section id="zerror-and-zyerror">
<h3><a class="toc-backref" href="errproc.html#id14">$ZERROR and $ZYERROR</a><a class="headerlink" href="errproc.html#zerror-and-zyerror" title="Permalink to this heading">¶</a></h3>
<p>After an error occurs, if $ZYERROR is set to a valid entryref that exists in the current environment, YottaDB invokes the routine at that entryref with an implicit DO before returning control to M code specified by a device EXCEPTION, $ETRAP or $ZTRAP. It is intended that the code invoked by $ZYERROR use the value of $ZSTATUS to select or construct a value to which it SETs $ZERROR.</p>
<p>If $ZYERROR is empty, $ZYERROR=”unprocessed $ZERROR, see $ZSTATUS”.</p>
<p>If there is a problem with the content of $ZYERROR or if the execution of the code it invokes, YottaDB sets $ZERROR=$ZSTATUS for the secondary error and terminates the attempt to use $ZYERROR. During code evoked by $ZYERROR, the value of $ZERROR is the empty string.</p>
</section>
<section id="etrap-behavior">
<h3><a class="toc-backref" href="errproc.html#id15">$ETRAP Behavior</a><a class="headerlink" href="errproc.html#etrap-behavior" title="Permalink to this heading">¶</a></h3>
<p>If, at the time of any error, the value of $ETRAP is non-empty, YottaDB proceeds as if the next instruction to be excuted were the first one on “the next line” and the code on that next line would be the same as the text in the value of $ETRAP. Furthermore, YottaDB behaves as if the line following “the next line” looks like:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>QUIT:$QUIT &quot;&quot; QUIT
</pre></div>
</div>
<p>When SET assigns a value to $ETRAP, the new value replaces the previous value, and if $ZTRAP was not empty (in control), the value of $ZTRAP becomes equal to the empty string without being stacked.</p>
</section>
<section id="nesting-etrap-and-using-estack">
<h3><a class="toc-backref" href="errproc.html#id16">Nesting $ETRAP and using $ESTACK</a><a class="headerlink" href="errproc.html#nesting-etrap-and-using-estack" title="Permalink to this heading">¶</a></h3>
<p>When you need to set up a stratified scheme where one level of subroutines use one error trap setting and another more nested subroutine uses a different one; the more nested subroutine must NEW $ETRAP. When $ETRAP is NEWed, its old value is saved and copied to the current value. A subsequent SET $ETRAP=&lt;new-value&gt; then establishes the error trapping code for the current execution level.</p>
<p>The QUIT command that reverts to the calling routine causes the NEWed values to be unstacked, including the one for $ETRAP.</p>
<p>If an error occurs while executing at the current execution level (or at an execution level farther from the initial base stack frame), YottaDB executes the code from the current $ETRAP. Unless a GOTO or ZGOTO in $ETRAP or any code it invokes redirects the flow of execution, when the execution of the $ETRAP code completes, control reverts to the implicit QUIT command, which returns to the routine that invoked the code that encountered the error. At this time, the QUIT reinstates any prior value of $ETRAP.</p>
<p>While at the more nested execution level(s), if an error occurs, YottaDB executes the code from the current $ETRAP. After the QUIT to a less nested level, YottaDB invokes the code from the now current $ETRAP. The current $ETRAP may be different from the $ETRAP at the time of the error due to unstacking. This behavior continues until one of the following possible situations occur:</p>
<ul class="simple">
<li><p>$ECODE is empty. When the value of $ECODE is equal to the empty string, error processing is no longer active, and normal processing resumes.</p></li>
<li><p>A QUIT reaches an execution level where the value of $ETRAP is empty ($ZTRAP might be non-empty at that level). When the values of both $ZTRAP and $ETRAP are equal to the empty string, no error trapping is active and the QUIT repeats until it unstacks a $ETRAP or $ZTRAP.</p></li>
<li><p>The stack is reduced to an empty state. When there is no previous level left to QUIT into, YottaDB returns to the operating system level shell. A frame that is in direct mode stops the process by putting the user back into the Direct Mode shell.</p></li>
</ul>
<p>When dealing with stratified error trapping, it is important to be aware of two additional intrinsic variables: $STACK and $ESTACK. The values of both of these variables indicate the current execution level. The value of $STACK is an “absolute” value that counts from the start of the YottaDB process, whereas the value of $ESTACK restarts at zero (0) each time $ESTACK is NEWed.</p>
<p>It is often beneficial to NEW both $ETRAP and $ESTACK a the same time.</p>
</section>
<section id="ztrap-behavior">
<h3><a class="toc-backref" href="errproc.html#id17">$ZTRAP Behavior</a><a class="headerlink" href="errproc.html#ztrap-behavior" title="Permalink to this heading">¶</a></h3>
<p>If, at the time of any error, the value of $ZTRAP is non-empty, YottaDB uses the $ZTRAP contents to direct execution of the next action. Refer to the $ZTRAP section in <a class="reference external" href="isv.html">Chapter 8: “Intrinsic Special Variables”</a>.</p>
<p>By default, execution proceeds as if the next instruction to be executed were the first one on “the next line”, and the code on that next line would be the same as the text in the value of $ZTRAP. Unless $ZTRAP or any code it invokes issues a GOTO or ZGOTO, after YottaDB has executed the code in $ZTRAP, YottaDB attempts to execute the line with the error again. When a value is assigned to $ZTRAP, the new value replaces the previous value. If the value of $ETRAP is a non-empty one, $ETRAP is implicitly NEWed, and the value of $ETRAP becomes equal to the empty string; this ensures that at most one of $ETRAP and $ZTRAP is not the empty string. If the environment variable ydb_ztrap_new evaluates to Boolean TRUE (case insensitive string “TRUE”, or case insensitive string “YES”, or a non-zero number), $ZTRAP is NEWed when $ZTRAP is SET; otherwise $ZTRAP is not stacked when it is SET.</p>
<p>Other than the default behavior, $ZTRAP settings are controlled by the environment variable ydb_ztrap_form as described in the following table.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 88%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>ydb_ztrap_form</p></th>
<th class="head"><p>$ZTRAP and EXCEPTION Behavior</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>code</p></td>
<td><p>Content is code executed after the error; in the absence of GOTO, ZGOTO, or QUIT, execution resumes at the beginning of the line containing the error - note that the default
behavior tends to create an indefinite loop.</p></td>
</tr>
<tr class="row-odd"><td><p>entryref</p></td>
<td><p>Content is an entryref to which control is transferred by an implicit GOTO</p></td>
</tr>
<tr class="row-even"><td><p>adaptive</p></td>
<td><p>If content is valid code treat it as described for “code”, otherwise attempt to treat it as an entryref</p></td>
</tr>
<tr class="row-odd"><td><p>popentryref</p></td>
<td><p>Content is entryref - remove M virtual stack levels until the level at which $ZTRAP was SET, then GOTO the entryref; the stack manipulation occurs only for $ZTRAP and not for
EXCEPTION</p></td>
</tr>
<tr class="row-even"><td><p>popadaptive</p></td>
<td><p>If content is valid code treat it as described for code, otherwise attempt to treat it as an entryref used as described for popentryref</p></td>
</tr>
</tbody>
</table>
<p>Although the “adaptive” and “popadaptive” behaviors permit mixing of two behaviors based on the current value of $ZTRAP, the $ZTRAP behavior type is selected at process startup from ydb_ztrap_form and cannot be modified during the life of the process.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Like $ZTRAP values, invocation of device EXCEPTION values, with the exception noted, follow the pattern specified by the current ydb_ztrap_form setting.</p>
</div>
</section>
<section id="differences-between-etrap-and-ztrap">
<h3><a class="toc-backref" href="errproc.html#id18">Differences between $ETRAP and $ZTRAP</a><a class="headerlink" href="errproc.html#differences-between-etrap-and-ztrap" title="Permalink to this heading">¶</a></h3>
<p>The activation of $ETRAP and $ZTRAP are the same, however there are a number of differences in their subsequent behavior.</p>
<p>For subsequent errors the then current $ZTRAP is invoked, while with $ETRAP, behavior is controlled by the state of $ECODE. This means that when using $ZTRAP, it is important to change $ZTRAP, possibly to the empty string, at the beginning of the action in order to protect against recursion caused by any errors in $ZTRAP itself or in the code it invokes.</p>
<p>If there is no explicit or implicit GOTO or ZGOTO in the action, once a $ZTRAP action completes, execution resumes at the beginning of the line where the error occurred, while once a $ETRAP action completes, there is an implicit QUIT. This means that $ZTRAP actions that are not intended to permit a successful retry of the failing code should contain a GOTO, or more typically a ZGOTO. In contrast, $ETRAP actions that are intended to cause a retry must explicitly reinvoke the code where the error occurred.</p>
<p>For QUITs from the level at which an error occurred, $ZTRAP has no effect, where $ETRAP behavior is controlled by the state of $ECODE. This means that to invoke an error handler nested at the lower level, $ZTRAP actions need to use an explicit ZMESSAGE command, while $ETRAP does such invocations implicitly unless $ECODE is SET to the empty string.</p>
</section>
<section id="ztrap-interaction-with-etrap">
<h3><a class="toc-backref" href="errproc.html#id19">$ZTRAP Interaction With $ETRAP</a><a class="headerlink" href="errproc.html#ztrap-interaction-with-etrap" title="Permalink to this heading">¶</a></h3>
<p>It is important to be aware of which of the trap mechanisms is in place to avoid unintended interactions, and aware of which conditions may cause a switch-over from one mode of error handling to the other.</p>
<p>When a SET command assigns a value to either $ZTRAP or $ETRAP, YottaDB examines the value of the other error handling variable. If the other value is non-empty, YottaDB executes an implicit NEW command that saves the current value of that variable, and then assigns that variable to the empty string, then makes the requested assignment effective.</p>
<p>For example, re-setting $ETRAP is internally processed as:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>NEW:$LENGTH($ZTRAP) $ZTRAP $ETRAP SET $ETRAP=code
</pre></div>
</div>
<p>Whereas, SET $ZTRAP=value is internally processed as:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>NEW:$LENGTH($ETRAP) $ETRAP SET:$LENGTH($ETRAP)=&quot;&quot; SET $ZTRAP=value
</pre></div>
</div>
<p>Note that, after saving the prior value, YottaDB ensures the superseded $ETRAP or $ZTRAP implicitly gets the value of the empty string. As a result, at most one of the two error handling mechanisms can be effective at any given point in time.</p>
<p>If an error handling procedure was invoked through the $ETRAP method, and the value of $ECODE is non-empty when QUITing from the level of which the error occurred, the behavior is to transfer control to the error handler associated with the newly unstacked level. However, if the QUIT command at the end of error level happens to unstack a saved value of $ZTRAP (and thus cause the value of $ETRAP to become empty), the error handling mechanism switches from $ETRAP-based to $ZTRAP-based.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>At the end of an error handling procedure invoked through $ZTRAP, the value of $ECODE is not examined, and this value (if any) does not cause any transfer to another error handling procedure. However, if not cleared it may later trigger a $ETRAP unstacked by a QUIT.</p>
</div>
</section>
<section id="choosing-etrap-or-ztrap">
<h3><a class="toc-backref" href="errproc.html#id20">Choosing $ETRAP or $ZTRAP</a><a class="headerlink" href="errproc.html#choosing-etrap-or-ztrap" title="Permalink to this heading">¶</a></h3>
<p>Making a choice between the two mechanisms for error handling is mostly a matter of compatibility. If compatibility with existing YottaDB code is important, and that code happens to use $ZTRAP, then $ZTRAP is the best effort choice. If compatibility with code written in M dialects from other vendors is important, then $ETRAP or a non-default form of $ZTRAP probably is the better choice.</p>
<p>When no pre-existing code exists that favors one mechanism, the features of the mechanisms themselves should be examined.</p>
<p>Almost any effect that can be achieved using one mechanism can also be achieved using the other. However, some effects are easier to achieve using one method, and some are easier using with the other.</p>
<p>If the mechanisms are mixed, or there is a desire to refer to $ECODE in an environment using $ZTRAP, it is recommended to have $ZTRAP error code SET $ECODE=”” at some appropriate time, so that $ECODE does not become cluttered with errors that have been successfully handled.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A device EXCEPTION gets control after a non-fatal device error and $ETRAP/$ZTRAP get control after other non-fatal errors.</p>
</div>
<section id="example-1-returning-control-to-a-specific-execution-level">
<h4><a class="toc-backref" href="errproc.html#id21">Example 1: Returning control to a specific execution level</a><a class="headerlink" href="errproc.html#example-1-returning-control-to-a-specific-execution-level" title="Permalink to this heading">¶</a></h4>
<p>The following example returns control to the execution level “level” and then to an error processing routine “proc^prog”.</p>
<p>With $ZTRAP: Set $ZTRAP=”ZGOTO “_level_”:proc^prog”</p>
<p>With $ETRAP: Set $ETRAP=”Quit:$STACK&gt;”_level_” Do proc^prog”</p>
<p>Note that, ZGOTO can be used with $ETRAP and $STACK with $ZTRAP. Alternatively if $ESTACK were NEWed at LEVEL:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Set $ETRAP=&quot;Quit:$ESTACK&gt;0 Do proc^prog&quot;
</pre></div>
</div>
</section>
<section id="example-2-ignoring-an-error">
<h4><a class="toc-backref" href="errproc.html#id22">Example 2: Ignoring an Error</a><a class="headerlink" href="errproc.html#example-2-ignoring-an-error" title="Permalink to this heading">¶</a></h4>
<p>With $ZTRAP: Set $ZTRAP=”Quit”</p>
<p>With $ETRAP: Set $ETRAP=”Set $ECODE=”””” Quit”</p>
<p>Note that, while it is not necessary to SET $ECODE=”” when using $ZTRAP it is advisable to do it in order to permit mixing of the two mechanisms.</p>
</section>
<section id="example-3-nested-error-handlers">
<h4><a class="toc-backref" href="errproc.html#id23">Example 3: Nested Error Handlers</a><a class="headerlink" href="errproc.html#example-3-nested-error-handlers" title="Permalink to this heading">¶</a></h4>
<p>With $ZTRAP: New $ZTRAP Set $ZTRAP=…</p>
<p>With $ETRAP: New $ETRAP Set $ETRAP=…</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In both cases, QUITting to a lower level may effectively make the other mechanism active.</p>
</div>
</section>
<section id="example-4-access-to-cause-of-error">
<h4><a class="toc-backref" href="errproc.html#id24">Example 4: Access to “cause of error”</a><a class="headerlink" href="errproc.html#example-4-access-to-cause-of-error" title="Permalink to this heading">¶</a></h4>
<p>With $ZTRAP: If $ZSTATUS[…</p>
<p>With $ETRAP: If $ECODE[…</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The value of $ZSTATUS reflects only the most recent error, while the value of $ECODE is the cumulative list of all errors since its value was explicitly set to empty. Both values are always maintained and can be used with either mechanism.</p>
</div>
</section>
</section>
<section id="error-processing-cautions">
<h3><a class="toc-backref" href="errproc.html#id25">Error Processing Cautions</a><a class="headerlink" href="errproc.html#error-processing-cautions" title="Permalink to this heading">¶</a></h3>
<p>$ETRAP and $ZTRAP offer many features for catching, recognizing, and recovering from errors. Any code within an error processing subroutine may cause its own errors and these need to be processed without causing an infinite loop (where an error is caught, which, while being processed causes another error, which is caught, and so on).</p>
<p>During the debugging phase, such loops are typically the result of typographical errors in code. Once these typographical errors are corrected, the risk remains that an error trapping subroutine was designed specifically to deal with an expected condition; such as the loss of a network connection. This then creates an unexpected error of its own, such as:</p>
<ul class="simple">
<li><p>a device that had not yet been opened because the loss of network connectivity occured sooner than expected</p></li>
<li><p>an unexpected data configuration caused by the fact that an earlier instance of the same program did not complete its task for the same reason</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is important to remain aware of any issues that may arise within an error trapping procedure, and also of the conditions that might cause the code in question to be invoked.</p>
</div>
<p>$ETRAP is recursively invoked if it invokes a GOTO or a ZGOTO and the error condition persists in the code path and the code SETs $ECODE=””. $ZTRAP is recursively invoked if the error condition persists in the code path.</p>
</section>
<section id="input-output-errors">
<h3><a class="toc-backref" href="errproc.html#id26">Input/Output Errors</a><a class="headerlink" href="errproc.html#input-output-errors" title="Permalink to this heading">¶</a></h3>
<p>When YottaDB encounters an error in the operation of an I/O device, YottaDB executes the EXCEPTION deviceparameter for the OPEN/USE/CLOSE commands. An EXCEPTION deviceparameter specifies an action to take when an error occurs in the operation of an I/O device. The form of the EXCEPTION action is subject to the ydb_ztrap_form setting described for $ZTRAP, except that there is never any implicit popping with EXCEPTION actions. If a device has no current EXCEPTION, YottaDB uses $ETRAP or $ZTRAP to handle an error from that device.</p>
<p>YottaDB provides the option to:</p>
<ul class="simple">
<li><p>Trap or process an exception based on device error.</p></li>
<li><p>Trap or process an exception based on terminal input.</p></li>
</ul>
<p>An EXCEPTION based on an error for the device applies only to that device, and provides a specific error handler for a specific I/O device.</p>
<p>The CTRAP deviceparameter for USE establishes a set of trap characters for terminal input. When YottaDB encounters an input character in that set, YottaDB executes the EXCEPTION deviceparamenter, or, $ETRAP or $ZTRAP if the device has no current EXCEPTION.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;ZPRINT ^EP12
EP12    WRITE !,<span class="s2">&quot;THIS IS &quot;</span>,<span class="nv">$TEXT</span><span class="o">(</span>+0<span class="o">)</span>
        SET <span class="nv">$ECODE</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span>this only affects <span class="nv">$ETRAP</span>
        SET <span class="nv">$ETRAP</span><span class="o">=</span><span class="s2">&quot;GOTO ET&quot;</span>
        <span class="p">;</span>N <span class="nv">$ZT</span> S <span class="nv">$ZT</span><span class="o">=</span><span class="s2">&quot;W !,&quot;</span>CAN<span class="s1">&#39;T TAKE RECIPROCAL OF 0&quot;&quot;,*7&quot;</span>
<span class="s1">        USE $P:(EXCEPTION=&quot;D BYE&quot;:CTRAP=$C(3))</span>
<span class="s1">        WRITE !,&quot;TYPE &lt;CTRL-C&gt; TO STOP&quot;</span>
<span class="s1">LOOP    FOR  DO</span>
<span class="s1">        . READ !,&quot;TYPE A NUMBER: &quot;,X</span>
<span class="s1">        . WRITE ?20,&quot;HAS RECIPROCAL OF: &quot;,1/X</span>
<span class="s1">        . QUIT</span>
<span class="s1">ET      . WRITE !,&quot;CAN&#39;</span>T TAKE RECIRPOCAL OF <span class="m">0</span><span class="s2">&quot;,*7</span>
<span class="s2">        . SET </span><span class="nv">$ECODE</span><span class="s2">=&quot;&quot;</span>
<span class="s2">        QUIT</span>
<span class="s2">BYE     WRITE !,&quot;</span>YOU TYPED &lt;CTRL-C&gt; YOU MUST BE DONE!<span class="s2">&quot;</span>
<span class="s2">        USE </span><span class="nv">$P</span><span class="s2">:(EXCEPTION=&quot;&quot;:CTRAP=&quot;&quot;)</span>
<span class="s2">        WRITE !,&quot;</span><span class="nv">$ZSTATUS</span><span class="o">=</span><span class="s2">&quot;,</span><span class="nv">$ZSTATUS</span><span class="s2"></span>
<span class="s2">        ZGOTO 1</span>
<span class="s2">YDB&gt;DO ^EP12</span>
<span class="s2">THIS IS EP12</span>
<span class="s2">TYPE &lt;CTRL-C&gt; TO STOP</span>
<span class="s2">TYPE A NUMBER: 1 HAS RECIPROCAL OF: 1</span>
<span class="s2">TYPE A NUMBER: 2 HAS RECIRPOCAL OF: .5</span>
<span class="s2">TYPE A NUMBER: 3 HAS RECIPROCAL OF: .33333333333333</span>
<span class="s2">TYPE A NUMBER: 4 HAS RECIPROCAL OF: .25</span>
<span class="s2">TYPE A NUMBER: HAS RECIPROCAL OF:</span>
<span class="s2">CAN&#39;T TAKE RECIPROCAL OF 0</span>
<span class="s2">TYPE A NUMBER:</span>
<span class="s2">YOU TYPED &lt;CTRL-C&gt; YOU MUST BE DONE!</span>
<span class="nv">$ZSTATUS</span><span class="s2">=150372498,LOOP+1^EP12,%YDB-E-CTRAP,Character trap </span><span class="nv">$C</span><span class="s2">(3) encountered</span>
<span class="s2">YDB&gt;</span>
</pre></div>
</div>
<p>This routine prompts the user to enter a number at the terminal. If the user enters a zero, YottaDB encounters an error and executes $ETRAP (or $ZTRAP). The action specified reports the error and returns to prompt the user to enter a number. With $ZTRAP, this is very straightforward. With $ETRAP, some care is required to get the code to resume at the proper place. The CTRAP deviceparameter establishes &lt;CTRL-C&gt; as a trap character. When YottaDB encounters a &lt;CTRL-C&gt;, YottaDB executes the EXCEPTION string whcih transfers control to the label BYE. At the label BYE, the routine terminates execution with an error message. Using the EXCEPTION deviceparameter with CTRAP generally simplifies $ETRAP or $ZTRAP handling.</p>
<p>$ZSTATUS allows the routine to find out which trap character YottaDB encountered. When a routine has several character traps set, $ZSTATUS provides useful information for identifying which character triggered the trap, and thereby allows a custom response to a specific input.</p>
</section>
</section>
<section id="error-actions">
<h2><a class="toc-backref" href="errproc.html#id27">Error Actions</a><a class="headerlink" href="errproc.html#error-actions" title="Permalink to this heading">¶</a></h2>
<p>In the following examples (and the previous one as well), $ETRAP and $ZTRAP in most cases have similar behavior. The most prominent difference is that, when $ETRAP is active, $ECODE determines whether or not a second error in an M stack level triggers an immediate implicit QUIT from that level. For additional information, see the sections on $ECODE and $ETRAP in <a class="reference external" href="isv.html">Chapter 8: “Intrinsic Special Variables”</a>. Because of the effect of $ECODE on the processing flow when $ETRAP is active, there is a benefit to including appropriate $ECODE maintenance in $ZTRAP related code, so that things stay well behaved when the two mechanisms are intermixed. Other differences are discussed in some of the examples.</p>
<section id="break-on-an-error">
<h3><a class="toc-backref" href="errproc.html#id28">Break on an Error</a><a class="headerlink" href="errproc.html#break-on-an-error" title="Permalink to this heading">¶</a></h3>
<p>When $ZTRAP is set to a BREAK command and an error occurs, YottaDB puts the process into Direct Mode. The default for $ZTRAP is a BREAK command. When developing a program, $ZTRAP=”BREAK” allows you to investigate the cause of the error from Direct Mode. For information on YottaDB debugging tools, see <a class="reference external" href="opdebug.html">Chapter 4: “Operating and Debugging in Direct Mode”</a>.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;zprint ^EP1
EP1    WRITE !,<span class="s2">&quot;THIS IS &quot;</span>_<span class="nv">$TEXT</span><span class="o">(</span>+0<span class="o">)</span>
       KILL A
BAD    WRITE A
       WRITE !,<span class="s2">&quot;THIS IS NOT DISPLAYED&quot;</span>
       QUIT

YDB&gt;do ^EP1
THIS IS EP1%YDB-E-UNDEF, Undefined <span class="nb">local</span> variable: A
At M <span class="nb">source</span> location BAD^EP1
YDB&gt;ZSHOW
BAD^EP1    <span class="o">(</span><span class="nv">$ZTRAP</span><span class="o">)</span>
   <span class="o">(</span>Direct mode<span class="o">)</span>
+1^GTM<span class="nv">$DMOD</span>    <span class="o">(</span>Direct mode<span class="o">)</span>
YDB&gt;QUIT
YDB&gt;ZSHOW
EP1+1^EP1    <span class="o">(</span>Direct mode<span class="o">)</span>
+1^GTM<span class="nv">$DMOD</span>    <span class="o">(</span>Direct mode<span class="o">)</span>
YDB&gt;
</pre></div>
</div>
<p>Because by default $ETRAP=”” and $ZTRAP=”B”, this example does not explicitly set either $ETRAP or $ZTRAP. When the routine encounters an error at BAD^EP1, YottaDB initiates Direct Mode. The ZSHOW displays the M stack that has, at the bottom, the base Direct Mode frame and, at the top, EP1 with a notation that $ZTRAP has been invoked. The QUIT command at the prompt removes EP1 from the stack.</p>
<p>To prevent a program such as a production image from accessing Direct Mode, assign an action other than “BREAK” to $ETRAP or $ZTRAP. The following sections discuss various alternative values for $ETRAP or $ZTRAP.</p>
<p>In order to prevent inappropriate access to Direct Mode, eliminate all BREAKs from the production code. If the code contains BREAK commands, the commands should be subject to a postconditional flag that is only turned on for debugging. ZBREAK serves as an alternative debugging tool that effects only the current process and lasts only for the duration of an image activation.</p>
</section>
<section id="unconditional-transfer-on-an-error">
<h3><a class="toc-backref" href="errproc.html#id29">Unconditional Transfer on an Error</a><a class="headerlink" href="errproc.html#unconditional-transfer-on-an-error" title="Permalink to this heading">¶</a></h3>
<p>The GOTO command instructs YottaDB to transfer execution permanently to another line within the routine or to another routine. When stopping to investigate an error is undesirable, use the GOTO command in $ETRAP or $ZTRAP to continue execution at some other point.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;ZPRINT ^EP2
EP2     WRITE !,<span class="s2">&quot;THIS IS &quot;</span>_<span class="nv">$TEXT</span><span class="o">(</span>+0<span class="o">)</span>
        SET <span class="nv">$ECODE</span><span class="o">=</span><span class="s2">&quot;&quot;</span>        <span class="p">;</span>this affects only <span class="nv">$ETRAP</span>
        SET <span class="nv">$ETRAP</span><span class="o">=</span><span class="s2">&quot;GOTO ET&quot;</span>        <span class="p">;</span>this implicitly stacks <span class="nv">$ZTRAP</span>
        <span class="p">;</span>N <span class="nv">$ZT</span> S <span class="nv">$ZT</span><span class="o">=</span><span class="s2">&quot;GOTO ET&quot;</span>  <span class="p">;</span>would give a similar result
        DO SUB1
        WRITE !,<span class="s2">&quot;THIS IS THE END&quot;</span>
        QUIT
SUB1    WRITE !,<span class="s2">&quot;THIS IS SUB1&quot;</span>
        DO SUB2
        QUIT
SUB2    WRITE !,<span class="s2">&quot;THIS IS SUB2&quot;</span>
        KILL A
BAD     WRITE A
        WRITE !,<span class="s2">&quot;THIS IS NOT DISPLAYED&quot;</span>
        QUIT
ET      <span class="p">;</span>SET <span class="nv">$ZTRAP</span><span class="o">=</span><span class="s2">&quot;&quot;</span>         <span class="p">;</span><span class="k">if</span> using <span class="nv">$ZTRAP</span> to prevent recursion
        WRITE !,<span class="s2">&quot;CONTINUING WITH ERROR TRAP AFTER AN ERROR&quot;</span>
        WRITE !,<span class="s2">&quot;</span><span class="nv">$STACK</span><span class="s2">: &quot;</span>,<span class="nv">$STACK</span>
        WRITE !,<span class="s2">&quot;</span><span class="nv">$STACK</span><span class="s2">(-1): &quot;</span>,<span class="nv">$STACK</span><span class="o">(</span>-1<span class="o">)</span>
        WRITE !,<span class="s2">&quot;</span><span class="nv">$ZLEVEL</span><span class="s2">: &quot;</span>,<span class="nv">$ZLEVEL</span>
        FOR <span class="nv">I</span><span class="o">=</span><span class="nv">$STACK</span><span class="o">(</span>-1<span class="o">)</span>:-1:1 DO
        . WRITE !,<span class="s2">&quot;LEVEL: &quot;</span>,I
        . SET <span class="nv">K</span><span class="o">=</span><span class="m">10</span>
        . FOR <span class="nv">J</span><span class="o">=</span><span class="s2">&quot;PLACE&quot;</span>,<span class="s2">&quot;MCODE&quot;</span>,<span class="s2">&quot;ECODE&quot;</span> DO
        . . WRITE ?K,<span class="s2">&quot; &quot;</span>,J,<span class="s2">&quot;: &quot;</span>,<span class="nv">$STACK</span><span class="o">(</span>I,J<span class="o">)</span>
        . . SET <span class="nv">K</span><span class="o">=</span>K+20
        WRITE !,<span class="nv">$ZSTATUS</span>,!
        ZSHOW <span class="s2">&quot;S&quot;</span>
        SET <span class="nv">$ECODE</span><span class="o">=</span><span class="s2">&quot;&quot;</span>        <span class="p">;</span>this affects only <span class="nv">$ETRAP</span>
        QUIT

YDB&gt;do ^EP2
THIS IS EP2
THIS IS SUB1
THIS IS SUB2
CONTINUING WITH ERROR TRAP AFTER AN ERROR
<span class="nv">$STACK</span>: <span class="m">3</span>
<span class="nv">$STACK</span><span class="o">(</span>-1<span class="o">)</span>: <span class="m">3</span>
<span class="nv">$ZLEVEL</span>: <span class="m">4</span>
LEVEL: <span class="m">3</span>   PLACE: BAD^EP2      MCODE: BAD     WRITE A  ECODE: ,M6,Z150373850,
LEVEL: <span class="m">2</span>   PLACE: SUB1+1^EP2   MCODE:         DO SUB2  ECODE:
LEVEL: <span class="m">1</span>   PLACE: EP2+4^EP2    MCODE:         DO SUB1  ECODE:
<span class="m">150373850</span>,BAD^EP2,%YDB-E-UNDEF, Undefined <span class="nb">local</span> variable: A
ET+12^EP2
SUB1+1^EP2
EP2+4^EP2
+1^GTM<span class="nv">$DMOD</span>    <span class="o">(</span>Direct mode<span class="o">)</span>
THIS IS THE END
YDB&gt;
</pre></div>
</div>
<p>This routine specifies a GOTO command transferring execution to the ET label when an error occurs. The $ZLEVEL special variable contains an integer indicating the M stack level.</p>
<p>The ZGOTO command is similar to the GOTO command, however, the ZGOTO allows the removal of multiple levels from the program stack. ZGOTO can ensure that execution returns to a specific point, such as a menu.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;ZPRINT ^EP3
EP3     <span class="p">;</span>
MENU    WRITE !,<span class="s2">&quot;THIS IS MENU IN &quot;</span>,<span class="nv">$TEXT</span><span class="o">(</span><span class="m">0</span><span class="o">)</span>
        SET <span class="nv">$ECODE</span><span class="o">=</span><span class="s2">&quot;&quot;</span>        <span class="p">;</span>this affects only <span class="nv">$ETRAP</span>
        SET <span class="nv">$ETRAP</span><span class="o">=</span><span class="s2">&quot;SET </span><span class="nv">$ECODE</span><span class="s2">=&quot;&quot;&quot;&quot; ZGOTO 2&quot;</span>
        <span class="p">;</span>N <span class="nv">$ZT</span> S <span class="nv">$ZT</span><span class="o">=</span><span class="s2">&quot;ZGOTO 2&quot;</span> <span class="p">;</span>would give a similar result
        DO SUB1
        WRITE !,<span class="s2">&quot;&#39;MENU&#39; AFTER </span><span class="nv">$ETRAP</span><span class="s2">&quot;</span>
        WRITE !,<span class="s2">&quot;</span><span class="nv">$STACK</span><span class="s2">: &quot;</span>,<span class="nv">$STACK</span>
        WRITE !,<span class="s2">&quot;</span><span class="nv">$ZLEVEL</span><span class="s2">: &quot;</span>,<span class="nv">$ZLEVEL</span>
        QUIT
SUB1    WRITE !,<span class="s2">&quot;THIS IS SUB1&quot;</span>
        DO SUB2
        WRITE !,<span class="s2">&quot;THIS IS SKIPPED BY ZGOTO&quot;</span>
        QUIT
SUB2    WRITE !,<span class="s2">&quot;THIS IS SUB2&quot;</span>
        KILL A
        BAD     WRITE A
        WRITE !,<span class="s2">&quot;THIS IS NOT DISPLAYED&quot;</span>
        QUIT

YDB&gt;do ^EP3
THIS IS MENU IN
THIS IS SUB1
THIS IS SUB2
<span class="s1">&#39;MENU&#39;</span> AFTER <span class="nv">$ETRAP</span>
<span class="nv">$STACK</span>: <span class="m">1</span>
<span class="nv">$ZLEVEL</span>: <span class="m">2</span>
</pre></div>
</div>
<p>This routine instructs YottaDB to reset the execution to level 2 if it encounters an error. YottaDB removes all intermediate levels.</p>
<p>In general, coding ZGOTO level information based on $ZLEVEL provides a more robust technique than the “hard-coding” shown in the previous example.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;ZPRINT ^EP4
EP4     WRITE !,<span class="s2">&quot;THIS IS &quot;</span>_<span class="nv">$TEXT</span><span class="o">(</span>+0<span class="o">)</span>
        SET <span class="nv">$ECODE</span><span class="o">=</span><span class="s2">&quot;&quot;</span>        <span class="p">;</span>this affects only <span class="nv">$ETRAP</span>
        DO MAIN
        WRITE !,<span class="s2">&quot;THIS IS &quot;</span>,<span class="nv">$TEXT</span><span class="o">(</span>+0<span class="o">)</span>,<span class="s2">&quot; AFTER THE ERROR&quot;</span>
        WRITE !,<span class="s2">&quot;</span><span class="nv">$ZLEVEL</span><span class="s2">: &quot;</span>,<span class="nv">$ZLEVEL</span>
        QUIT
MAIN    WRITE !,<span class="s2">&quot;THIS IS MAIN&quot;</span>
        WRITE !,<span class="s2">&quot;</span><span class="nv">$ZLEVEL</span><span class="s2">: &quot;</span>,<span class="nv">$ZLEVEL</span>
        SET <span class="nv">$ETRAP</span><span class="o">=</span><span class="s2">&quot;ZGOTO &quot;</span>_<span class="nv">$ZLEVEL_</span><span class="s2">&quot;:ET&quot;</span>
        <span class="p">;</span>N <span class="nv">$ZT</span> S <span class="nv">$ZT</span><span class="o">=</span><span class="s2">&quot;ZGOTO &quot;</span>_<span class="nv">$ZLEVEL_</span><span class="s2">&quot;:ET ;alternative</span>
<span class="s2">        DO SUB1</span>
<span class="s2">        QUIT</span>
<span class="s2">SUB1    WRITE !,&quot;</span>THIS IS SUB1<span class="s2">&quot;</span>
<span class="s2">        WRITE !,&quot;</span><span class="nv">$ZLEVEL</span>: <span class="s2">&quot;,</span><span class="nv">$ZLEVEL</span><span class="s2"></span>
<span class="s2">        DO SUB2</span>
<span class="s2">        QUIT</span>
<span class="s2">SUB2    WRITE !,&quot;</span>THIS IS SUB2<span class="s2">&quot;</span>
<span class="s2">        WRITE !,&quot;</span><span class="nv">$ZLEVEL</span> :<span class="s2">&quot;,</span><span class="nv">$ZLEVEL</span><span class="s2"></span>
<span class="s2">        KILL A</span>
<span class="s2">BAD     WRITE A</span>
<span class="s2">        WRITE !,&quot;</span>THIS IS NOT DISPLAYED<span class="s2">&quot;</span>
<span class="s2">        QUIT</span>
<span class="s2">ET     ;SET </span><span class="nv">$ZTRAP</span><span class="s2">=&quot;&quot; ;if using </span><span class="nv">$ZTRAP</span><span class="s2"> to prevent recursion</span>
<span class="s2">        WRITE !,&quot;</span>CONTINUING WITH ERROR TRAP AFTER AN ERROR<span class="s2">&quot;</span>
<span class="s2">        WRITE !,&quot;</span><span class="nv">$STACK</span>: <span class="s2">&quot;,</span><span class="nv">$STACK</span><span class="s2"></span>
<span class="s2">        WRITE !,&quot;</span><span class="nv">$STACK</span><span class="o">(</span>-1<span class="o">)</span>: <span class="s2">&quot;,</span><span class="nv">$STACK</span><span class="s2">(-1)</span>
<span class="s2">        WRITE !,&quot;</span><span class="nv">$ZLEVEL</span>: <span class="s2">&quot;,</span><span class="nv">$ZLEVEL</span><span class="s2"></span>
<span class="s2">        FOR I=</span><span class="nv">$STACK</span><span class="s2">(-1):-1:1 DO</span>
<span class="s2">        . WRITE !,&quot;</span>LEVEL: <span class="s2">&quot;,I</span>
<span class="s2">        . SET K=10</span>
<span class="s2">        . FOR J=&quot;</span>PLACE<span class="s2">&quot;,&quot;</span>MCODE<span class="s2">&quot;,&quot;</span>ECODE<span class="s2">&quot; DO</span>
<span class="s2">        . . WRITE ?K,&quot;</span> <span class="s2">&quot;,J,&quot;</span>: <span class="s2">&quot;,</span><span class="nv">$STACK</span><span class="s2">(I,J)</span>
<span class="s2">        . . SET K=K+20</span>
<span class="s2">        WRITE !,</span><span class="nv">$ZSTATUS</span><span class="s2">,!</span>
<span class="s2">        ZSHOW &quot;</span>S<span class="s2">&quot;</span>
<span class="s2">        SET ECODE=&quot;&quot;        ;this affects only </span><span class="nv">$ETRAP</span><span class="s2"></span>
<span class="s2">        QUIT</span>

<span class="s2">YDB&gt;do ^EP4</span>
<span class="s2">THIS IS EP4</span>
<span class="s2">THIS IS MAIN</span>
<span class="nv">$ZLEVEL</span><span class="s2">: 3</span>
<span class="s2">THIS IS SUB1</span>
<span class="nv">$ZLEVEL</span><span class="s2">: 4</span>
<span class="s2">THIS IS SUB2</span>
<span class="nv">$ZLEVEL</span><span class="s2"> :5</span>
<span class="s2">CONTINUING WITH ERROR TRAP AFTER AN ERROR</span>
<span class="nv">$STACK</span><span class="s2">: 2</span>
<span class="nv">$STACK</span><span class="s2">(-1): 4</span>
<span class="nv">$ZLEVEL</span><span class="s2">: 3</span>
<span class="s2">LEVEL: 4   PLACE: BAD^EP4      MCODE: BAD     WRITE A  ECODE: ,M6,Z150373850,</span>
<span class="s2">LEVEL: 3   PLACE: SUB1+2^EP4   MCODE:         DO SUB2  ECODE:</span>
<span class="s2">LEVEL: 2   PLACE: MAIN+4^EP4   MCODE:         DO SUB1  ECODE:</span>
<span class="s2">LEVEL: 1   PLACE: EP4+2^EP4    MCODE:         DO MAIN  ECODE:</span>
<span class="s2">150373850,BAD^EP4,%YDB-E-UNDEF, Undefined local variable: A</span>
<span class="s2">ET+12^EP4</span>
<span class="s2">EP4+2^EP4</span>
<span class="s2">+1^GTM</span><span class="nv">$DMOD</span><span class="s2">    (Direct mode)</span>
<span class="s2">THIS IS EP4 AFTER THE ERROR</span>
<span class="nv">$ZLEVEL</span><span class="s2">: 2</span>
<span class="s2">YDB&gt;</span>
</pre></div>
</div>
<p>This routine sets $ETRAP or $ZTRAP to a ZGOTO specifying the current level. When the routine encounters an error at label BAD, YottaDB switches control to label ET at the level where $ETRAP (or $ZTRAP) was established. At this point in the execution, ET replaces SUB1+2^EP4 as the program stack entry for the level specified, that is, $ZLEVEL=3. The QUIT command then returns control to the level where $ZLEVEL=2.</p>
</section>
<section id="setting-ztrap-for-each-level">
<h3><a class="toc-backref" href="errproc.html#id30">Setting $ZTRAP for each level</a><a class="headerlink" href="errproc.html#setting-ztrap-for-each-level" title="Permalink to this heading">¶</a></h3>
<p>The command NEW $ETRAP or NEW $ZTRAP stacks the current value of $ETRAP or $ZTRAP respectively and, in the case of $ZTRAP, sets the value equal to the empty string. Normally, a SET $ETRAP or $ZTRAP immediately follows a NEW $ETRAP or $ZTRAP. When YottaDB encounters a QUIT command that leaves a level where $ETRAP or $ZTRAP had been NEWed, YottaDB deletes any value set to the ISV after the NEW command and restores the value that the ISV held previous to the NEW. NEW $ETRAP or $ZTRAP enables the construction of error handlers corresponding to the nesting of routines. A SET $ETRAP or $ZTRAP implicitly NEWs the other variable if it does not already have the value of the empty string. This enables the interleaving of $ETRAP and $ZTRAP at different levels, although (as mentioned above) such interleaving requires that $ZTRAP handlers deal appropriately with $ECODE.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;ZPRINT ^EP5
EP5     WRITE !,<span class="s2">&quot;THIS IS &quot;</span>_<span class="nv">$TEXT</span><span class="o">(</span>+0<span class="o">)</span>
        SET <span class="nv">$ECODE</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span>this affects only <span class="nv">$ETRAP</span>
        WRITE !,<span class="s2">&quot;STARTING </span><span class="nv">$ETRAP</span><span class="s2">: &quot;</span>,<span class="nv">$ETRAP</span>
        WRITE !,<span class="s2">&quot;STARTING </span><span class="nv">$ZTRAP</span><span class="s2">: &quot;</span>,<span class="nv">$ZTRAP</span>
        DO SUB1
        WRITE !,<span class="s2">&quot;ENDING </span><span class="nv">$ETRAP</span><span class="s2">: &quot;</span>,<span class="nv">$ETRAP</span>
        WRITE !,<span class="s2">&quot;ENDING </span><span class="nv">$ZTRAP</span><span class="s2">: &quot;</span>,<span class="nv">$ZTRAP</span>
        QUIT
MAIN    WRITE !,<span class="s2">&quot;THIS IS MAIN&quot;</span>
        WRITE !,<span class="s2">&quot;</span><span class="nv">$ZLEVEL</span><span class="s2">: &quot;</span>,<span class="nv">$ZLEVEL</span>
        DO SUB1
        QUIT
SUB1    WRITE !,<span class="s2">&quot;THIS IS SUB1&quot;</span>
        NEW <span class="nv">$ETRAP</span> SET <span class="nv">$ETRAP</span><span class="o">=</span><span class="s2">&quot;GOTO ET1&quot;</span>
        <span class="p">;</span>NEW <span class="nv">$ZTRAP</span> SET <span class="nv">$ZTRAP</span><span class="o">=</span><span class="s2">&quot;GOTO ET1&quot;</span> <span class="p">;</span>alternative
        WRITE !,<span class="s2">&quot;</span><span class="nv">$ETRAP</span><span class="s2"> FOR SUB1: &quot;</span>,<span class="nv">$ETRAP</span>
        KILL A
BAD     WRITE A
        WRITE !,<span class="s2">&quot;THIS IS NOT DISPLAYED&quot;</span>
        QUIT
ET1     WRITE !,<span class="s2">&quot;ERROR TRAP 1&quot;</span>
        WRITE !,<span class="s2">&quot;</span><span class="nv">$ETRAP</span><span class="s2"> AFTER THE TRAP: &quot;</span>,<span class="nv">$ETRAP</span>
        WRITE !,<span class="s2">&quot;</span><span class="nv">$ZTRAP</span><span class="s2"> AFTER THE TRAP: &quot;</span>,<span class="nv">$ZTRAP</span>
        SET <span class="nv">$ECODE</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span>this affects only <span class="nv">$ETRAP</span>
        QUIT

YDB&gt;do ^EP5
THIS IS EP5
STARTING <span class="nv">$ETRAP</span>:
STARTING <span class="nv">$ZTRAP</span>: B
THIS IS SUB1
<span class="nv">$ETRAP</span> FOR SUB1: GOTO ET1
ERROR TRAP <span class="m">1</span>
<span class="nv">$ETRAP</span> AFTER THE TRAP: GOTO ET1
<span class="nv">$ZTRAP</span> AFTER THE TRAP:
ENDING <span class="nv">$ETRAP</span>:
ENDING <span class="nv">$ZTRAP</span>: B
YDB&gt;
</pre></div>
</div>
<p>At SUB1, this routine NEWs $ETRAP and assigns it a value, which implicitly NEWs $ZTRAP. When the routine encounters an error at the SUB1 level, YottaDB transfers control to label ET1 without modifying the value of $ETRAP or $ZTRAP. When the routine encounters a QUIT command in routine ET1, YottaDB transfers control to the command after the DO that invoked ET1 and restores $ETRAP or $ZTRAP to the values they held before the NEW and the SET.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the transfer to ET1 was accomplished with a ZGOTO that reduced the stack level, after the trap, $ETRAP would have the value of the empty string and $ZTRAP would be “B”.</p>
</div>
</section>
<section id="nested-error-handling">
<h3><a class="toc-backref" href="errproc.html#id31">Nested Error Handling</a><a class="headerlink" href="errproc.html#nested-error-handling" title="Permalink to this heading">¶</a></h3>
<p>$ETRAP or $ZTRAP set to a DO command instructs YottaDB to transfer execution temporarily to another line within this or another routine when it encounters an error. A QUIT command within the scope of the DO transfers control back to the code specified by the $ETRAP or $ZTRAP. When the code in the ISV terminates due to an explicit or implicit QUIT, the behavior of $ETRAP and $ZTRAP is different. When $ETRAP is in control, the level at which the error occurred is removed, and control returns to the invoking level. When $ZTRAP contains code, execution picks up at the beginning of the line with the error. A DO command within $ZTRAP is normally used for I/O errors that an operator may resolve, because a DO command permits re-execution of the line containing the error.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;ZPRINT ^EP6
EP6     WRITE !,<span class="s2">&quot;THIS IS &quot;</span>_<span class="nv">$TEXT</span><span class="o">(</span>+0<span class="o">)</span>
        NEW
        NEW <span class="nv">$ZTRAP</span> SET <span class="nv">$ZTRAP</span><span class="o">=</span><span class="s2">&quot;DO ET&quot;</span>
        SET <span class="o">(</span>CB,CE<span class="o">)=</span><span class="m">0</span>
BAD     SET <span class="nv">CB</span><span class="o">=</span>CB+1 WRITE A SET <span class="nv">CE</span><span class="o">=</span>CE+1
        WRITE !,<span class="s2">&quot;AFTER SUCCESSFUL EXECUTION OF BAD:&quot;</span>,!
        SET <span class="nv">A</span><span class="o">=</span><span class="s2">&quot;A IS NOT DEFINED&quot;</span>
        ZWRITE
        QUIT
ET      W !,<span class="s2">&quot;CONTINUING WITH ERROR TRAP AFTER AN ERROR&quot;</span>,!
        ZWRITE
        SET <span class="nv">A</span><span class="o">=</span><span class="s2">&quot;A IS NOW DEFINED&quot;</span>
        YDB&gt;do ^EP6
        THIS IS EP6
        CONTINUING WITH ERROR TRAP AFTER AN ERROR
        <span class="nv">CB</span><span class="o">=</span><span class="m">1</span>
        <span class="nv">CE</span><span class="o">=</span><span class="m">0</span>
        A IS NOW DEFINED
        AFTER SUCCESSFUL EXECUTION OF BAD:
        <span class="nv">A</span><span class="o">=</span><span class="s2">&quot;A IS NOT DEFINED&quot;</span>
        <span class="nv">CB</span><span class="o">=</span><span class="m">2</span>
        <span class="nv">CE</span><span class="o">=</span><span class="m">1</span>
        YDB&gt;
</pre></div>
</div>
<p>This example sets $ZTRAP to a DO command. When the routine encounters an error in the middle of the line at label BAD, YottaDB transfers control to label ET. After QUITting from routine ET, YottaDB returns control to the beginning of the line at label BAD.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;ZPRINT ^EP6A
EP6A    WRITE !,<span class="s2">&quot;THIS IS &quot;</span>_<span class="nv">$TEXT</span><span class="o">(</span>+0<span class="o">)</span>
        NEW
        NEW <span class="nv">$ETRAP</span> SET <span class="nv">$ETRAP</span><span class="o">=</span><span class="s2">&quot;GOTO ET&quot;</span>
        SET <span class="o">(</span>CB,CE<span class="o">)=</span><span class="m">0</span>
BAD     SET <span class="nv">CB</span><span class="o">=</span>CB+1 WRITE A SET <span class="nv">CE</span><span class="o">=</span>CE+1
        WRITE !,<span class="s2">&quot;AFTER SUCCESSFUL EXECUTION OF BAD:&quot;</span>,!
        ZWRITE
        QUIT
ET      W !,<span class="s2">&quot;CONTINUING WITH ERROR TRAP AFTER AN ERROR&quot;</span>,!
        ZWRITE
        SET <span class="nv">A</span><span class="o">=</span><span class="s2">&quot;A IS NOW DEFINED&quot;</span>
        SET <span class="nv">RETRY</span><span class="o">=</span><span class="nv">$STACK</span><span class="o">(</span><span class="nv">$STACK</span>,<span class="s2">&quot;PLACE&quot;</span><span class="o">)</span>
        SET <span class="nv">$ECODE</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
        GOTO @RETRY

YDB&gt;DO ^EP6A
THIS IS EP6A
CONTINUING WITH ERROR TRAP AFTER AN ERROR
<span class="nv">CB</span><span class="o">=</span><span class="m">1</span>
<span class="nv">CE</span><span class="o">=</span><span class="m">0</span>
A IS NOW DEFINED
AFTER SUCCESSFUL EXECUTION OF BAD:
<span class="nv">A</span><span class="o">=</span><span class="s2">&quot;A IS NOW DEFINED&quot;</span>
<span class="nv">CB</span><span class="o">=</span><span class="m">2</span>
<span class="nv">CE</span><span class="o">=</span><span class="m">1</span>
<span class="nv">RETRY</span><span class="o">=</span><span class="s2">&quot;BAD^EP6A&quot;</span>
YDB&gt;
</pre></div>
</div>
<p>This routine is an example of how $ETRAP handling can be coded to perform the same kind of resumption of the original execution stream that occurs by default with $ZTRAP when there is no unconditional transfer of control.</p>
</section>
<section id="terminating-execution-on-an-error">
<h3><a class="toc-backref" href="errproc.html#id32">Terminating Execution on an Error</a><a class="headerlink" href="errproc.html#terminating-execution-on-an-error" title="Permalink to this heading">¶</a></h3>
<p>If both $ETRAP and $ZTRAP are set to the empty string upon encountering an error, the current level is discarded and the error is reissued at the invoking level. When already at the lowest M stack level, YottaDB terminates routine execution and returns control to the shell level. If $ZTRAP is used exclusively, $ZTRAP=”” suppresses the unstacking of NEWed values of $ZTRAP associated with lower levels. $ETRAP values are always unstacked, however if the lowest level $ETRAP is the empty string (which it is by default when YottaDB starts), YottaDB performs the same termination as it does with $ZTRAP. These terminations with both ISVs empty provides a mechanism for returning to the shell with a status message when YottaDB encounters an error.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;ZPRINT ^EP7
EP7     WRITE !,<span class="s2">&quot;THIS IS &quot;</span>,<span class="nv">$TEXT</span><span class="o">(</span>+0<span class="o">)</span>
        SET <span class="nv">$ECODE</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span>this only affects <span class="nv">$ETRAP</span>
        SET <span class="nv">$ETRAP</span><span class="o">=</span><span class="s2">&quot;&quot;</span>,<span class="nv">$ZTRAP</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
        KILL A
BAD     WRITE A
        WRITE !,<span class="s2">&quot;THIS IS NOT DISPLAYED&quot;</span>
        QUIT

YDB&gt;do ^EP7
THIS IS EP7
%YDB-E-UNDEF, Undefined <span class="nb">local</span> variable: A
%YDB-I-RTSLOC, At M <span class="nb">source</span> location BAD^EP7
$
</pre></div>
</div>
<p>YottaDB issues a message describing the M error and releases control to the shell.</p>
<p>When the action specified by $ZTRAP results in another run-time error before changing the value of $ZTRAP, the routine may iteratively invoke $ZTRAP until a stack overflow terminates the YottaDB image. SETting $ZTRAP=”” at the beginning of error processing ensures that this type of infinite loop does not occur. Because $ETRAP is implicitly followed by a QUIT it does not have the tendency to recurse. While $ETRAP is resistant to recursion, it is not completely immune, because a GOTO or a ZGOTO within the same level can evade the implicit QUIT. $ETRAP error handling involving errors on more than one stack level can also be induced to recurse if $ECODE is inappropriately cleared before the errors at all levels have been properly dealt with.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;ZPRINT ^EP8
EP8     WRITE !,<span class="s2">&quot;THIS IS &quot;</span>,<span class="nv">$TEXT</span><span class="o">(</span>+0<span class="o">)</span>
        NEW <span class="nv">$ZTRAP</span> SET <span class="nv">$ZTRAP</span><span class="o">=</span><span class="s2">&quot;DO ET&quot;</span>
        KILL A
BAD     WRITE A
        WRITE !,<span class="s2">&quot;THIS IS NOT DISPLAYED&quot;</span>
        QUIT
ET      WRITE <span class="m">2</span>/0
        QUIT

YDB&gt;DO ^EP8
THIS IS EP8
%YDB-E-STACKCRIT, Stack space critical
%YDB-E-ERRWZTRAP, Error <span class="k">while</span> processing <span class="nv">$ZTRAP</span>
YDB&gt;
</pre></div>
</div>
<p>When the routine encounters an error at label BAD, YottaDB transfers control to label ET. When the routine encounters an error at label ET, it recursively does ET until a stack overflow condition terminates the YottaDB image.</p>
<p>A set $ZTRAP=”” command as soon as the program enters an error-handling routine prevents this type of “infinite” recursion.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;zprint ^EP8A
EP8A    WRITE !,<span class="s2">&quot;THIS IS &quot;</span>,<span class="nv">$TEXT</span><span class="o">(</span>+0<span class="o">)</span>
        SET <span class="nv">$ECODE</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
        SET <span class="nv">$ZTRAP</span><span class="o">=</span><span class="s2">&quot;&quot;</span>,<span class="nv">$ETRAP</span><span class="o">=</span><span class="s2">&quot;DO ET&quot;</span>
        KILL A
BAD     WRITE A
        WRITE !,<span class="s2">&quot;THIS IS NOT DISPLAYED&quot;</span>
        QUIT
ET      WRITE !,<span class="s2">&quot;CONTINUING WITH ERROR TRAP AFTER AN ERROR&quot;</span>
        ZSHOW <span class="s2">&quot;S&quot;</span>
        WRITE !,<span class="s2">&quot;HERE COMES AN ERROR IN THE TRAP CODE&quot;</span>
        WRITE <span class="m">2</span>/0
        QUIT

YDB&gt;DO ^EP8A
THIS IS EP8A
CONTINUING WITH ERROR TRAP AFTER AN ERRORET+1^EP8A
BAD^EP8A    <span class="o">(</span><span class="nv">$ZTRAP</span><span class="o">)</span>
+1^GTM<span class="nv">$DMOD</span>    <span class="o">(</span>Direct mode<span class="o">)</span>
HERE COMES AN ERROR IN THE TRAP CODE
%YDB-E-DIVZERO, Attempt to divide by zero
YDB&gt;
</pre></div>
</div>
<p>This demonstrates how $ETRAP behavior in this circumstance is more appropriate. Note that the $ZTRAP=”” at the lowest level, prevents execution from returning to Direct Mode when the initial value of $ZTRAP (“B”) is unstacked; this step takes $ZTRAP out of the equation and should be part of initialization when the intention is to use $ETRAP exclusively.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;ZPRINT ^EP9
EP9     WRITE !,<span class="s2">&quot;THIS IS &quot;</span>,<span class="nv">$TEXT</span><span class="o">(</span>+0<span class="o">)</span>
        SET <span class="nv">$ZTRAP</span><span class="o">=</span><span class="s2">&quot;DO ET&quot;</span>
        KILL A
BAD     WRITE A
        WRITE !,<span class="s2">&quot;THIS IS NOT DISPLAYED&quot;</span>
        QUIT
ET      SET <span class="nv">$ZT</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
        WRITE !,<span class="s2">&quot;THIS IS THE ERROR TRAP&quot;</span>
        ERROR   WRITE !,<span class="s2">&quot;HERE COMES AN ERROR IN THE ERROR TRAP&quot;</span>
        WRITE <span class="m">2</span>/0
        QUIT

YDB&gt;DO ^EP9
THIS IS EP9
THIS IS THE ERROR TRAP
HERE COMES AN ERROR IN THE ERROR TRAP
%YDB-E-DIVZERO, Attempt to divide by zero
%YDB-I-RTSLOC,                 At M <span class="nb">source</span> location ERROR+1^EP9
$
</pre></div>
</div>
<p>This routine sets the value of $ZTRAP to null as soon as the program enters the error handler. This ensures program termination when an error occurs in the error handler.</p>
</section>
<section id="setting-ztrap-to-other-actions">
<h3><a class="toc-backref" href="errproc.html#id33">Setting $ZTRAP to Other Actions</a><a class="headerlink" href="errproc.html#setting-ztrap-to-other-actions" title="Permalink to this heading">¶</a></h3>
<p>The QUIT, HALT and ZHALT commands also serve as useful $ETRAP or $ZTRAP actions.</p>
<p>The QUIT command terminates execution at that invocation level.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;zprint ^EP10
EP10    WRITE !,<span class="s2">&quot;THIS IS &quot;</span>,<span class="nv">$TEXT</span><span class="o">(</span>+0<span class="o">)</span>
        SET <span class="nv">$ECODE</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span>this affects only <span class="nv">$ETRAP</span>
        S <span class="nv">$ET</span><span class="o">=</span><span class="s2">&quot;S </span><span class="nv">$EC</span><span class="s2">=&quot;&quot;&quot;&quot; Q&quot;</span> <span class="p">;</span>this implicitly stacks <span class="nv">$ZTRAP</span>
        <span class="p">;</span>N <span class="nv">$ZT</span> S <span class="nv">$ZT</span><span class="o">=</span><span class="s2">&quot;QUIT&quot;</span> <span class="p">;</span>would give a similar result
        DO SUB1
        QUIT
SUB1    WRITE !,<span class="s2">&quot;THIS IS SUB1&quot;</span>
        DO SUB2
        WRITE !,<span class="s2">&quot;THIS IS SUB1 AFTER THE ERROR WAS &#39;IGNORED&#39;&quot;</span>
        QUIT
SUB2    WRITE !,<span class="s2">&quot;THIS IS SUB2&quot;</span>
        KILL A
        BAD     WRITE A
        WRITE !,<span class="s2">&quot;THIS IS NOT DISPLAYED&quot;</span>
        QUIT

YDB&gt;do ^EP10
THIS IS EP10
THIS IS SUB1
THIS IS SUB2
THIS IS SUB1 AFTER THE ERROR WAS <span class="s1">&#39;IGNORED&#39;</span>
YDB&gt;
</pre></div>
</div>
<p>This routine sets $ETRAP or $ZTRAP to the QUIT command. When the routine encounters an error at label BAD, YottaDB executes the active error handling ISV. The QUIT command terminates execution of SUB2 and transfers execution back to SUB1. The WRITE displays the error message using the $ZSTATUS special variable. Because the default behavior is to QUIT after $ETRAP code completes, this technique is mostly useful with $ETRAP as a place holder to avoid the $ETRAP=”” semantics when there is no action to take at the current level. With $ZTRAP, where the default behavior is to resume execution at the beginning the line that triggered the error, the QUIT is more than a placeholder.</p>
<p>The HALT command terminates routine execution and returns control to the shell level. Setting $ETRAP=”HALT” or $ZTRAP=”HALT” is similar to setting the ISV to the empty string except that the “HALT” code does not pass the error condition code back to the shell. After a HALT, $? contains zero (0).</p>
<p>ZHALT acts like HALT but takes an argument, which YottaDB passes back to the OS shell. Note that UNIX shells typically limit return codes to a byte, so they may truncate the value of the ZHALT argument.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;ZPRINT ^EP11
EP11    WRITE !,<span class="s2">&quot;THIS IS &quot;</span>,<span class="nv">$TEXT</span><span class="o">(</span>+0<span class="o">)</span>
        SET <span class="nv">$ECODE</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span>this affects only <span class="nv">$ETRAP</span>
        SET <span class="nv">$ETRAP</span><span class="o">=</span><span class="s2">&quot;HALT&quot;</span><span class="p">;</span>this implicitly stacks <span class="nv">$ZTRAP</span>
        <span class="p">;</span>SET <span class="nv">$ZTRAP</span><span class="o">=</span><span class="s2">&quot;HALT&quot;</span><span class="p">;</span>would give a similar result
        KILL A
BAD     WRITE !,A
        WRITE !,<span class="s2">&quot;THIS IS NOT DISPLAYED&quot;</span>
        QUIT

YDB&gt;DO ^EP11
THIS IS EP11
$
</pre></div>
</div>
</section>
<section id="summary-of-etrap-ztrap-error-handling-options">
<h3><a class="toc-backref" href="errproc.html#id34">Summary of $ETRAP &amp; $ZTRAP Error-Handling Options</a><a class="headerlink" href="errproc.html#summary-of-etrap-ztrap-error-handling-options" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 81%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Error Handling Feature</p></th>
<th class="head"><p>Description and Possible Uses</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>$ETRAP=”BREAK” or $ZTRAP=”BREAK”</p></td>
<td><p>Returns to Direct Mode upon encountering an error that enables interactive debugging to determine the nature of the error.</p></td>
</tr>
<tr class="row-odd"><td><p>$ETRAP=”GOTO” or $ZTRAP=”GOTO”</p></td>
<td><p>Transfers control upon encountering an error and allows for continuation of execution after the error. Use with an error handling routine that may record or report an error.</p></td>
</tr>
<tr class="row-even"><td><p>$ETRAP=”ZGOTO” or $ZTRAP=”ZGOTO”</p></td>
<td><p>Similar to GOTO, but additionally allows for removal of levels from the stack. Use to allow recovery to specific point, such as a menu.</p></td>
</tr>
<tr class="row-odd"><td><p>NEW $ETRAP or NEW %ZTRAP</p></td>
<td><p>NEW $ETRAP stacks the old value but does not change the current value, while NEW $ZTRAP stacks the old value and sets the current value to the empty string. Usually followed
by a SET $ETRAP or SET $ZTRAP. After a QUIT from a given level, YottaDB restores the value held prior to the NEW. Use to enable different methods of error handling at
different levels within an application.</p></td>
</tr>
<tr class="row-even"><td><p>$ETRAP=”DO…”</p></td>
<td><p>Transfers execution temporarily to another label upon encountering an error. After return from a DO, YottaDB QUITs from the stack level at which the error occured.
Whether control returns to the invoking code or to the trap handler at the less nested level, depends on the value of $ECODE.</p></td>
</tr>
<tr class="row-odd"><td><p>$ZTRAP=”DO…”</p></td>
<td><p>Transfers execution temporarily to another label upon encountering an error. When YottaDB returns from a DO and completes the $ZTRAP action, execution continues at the
beginning of the line containing the error and re-executes the entire line containing the error. Use with I/O device errors where operator may intervene to correct the error
condition.</p></td>
</tr>
<tr class="row-even"><td><p>$ZTRAP=””</p></td>
<td><p>Returns to shell with the Status Code and terminates execution. If SET in error handling routines, prevents infinite loops. Prevents access to Direct Mode. Use in production
code when the invoking shell needs to test $?.</p></td>
</tr>
<tr class="row-odd"><td><p>$ETRAP=”SET $ECODE=””””” or $ZTRAP=”QUI
T””</p></td>
<td><p>Terminates execution at that level upon encountering an error, and returns to the invocation level at the point immediately following the invocation. Use to ignore errors on a
particular level and continue executing.</p></td>
</tr>
<tr class="row-even"><td><p>$ZTRAP=”HALT”</p></td>
<td><p>Returns to the shell as if normal termination occurred. Avoids access to Direct Mode. Use in production code when the invoking shell does not need to examine the exit status
of the YottaDB process.</p></td>
</tr>
</tbody>
</table>
</section>
<section id="errors-in-ztrap">
<h3><a class="toc-backref" href="errproc.html#id35">Errors in $ZTRAP</a><a class="headerlink" href="errproc.html#errors-in-ztrap" title="Permalink to this heading">¶</a></h3>
<p>If $ZTRAP contains invalid source code, YottaDB displays an error message and puts the process into Direct Mode.</p>
<p>If the action specified by $ZTRAP results in another run-time error before changing the value of $ZTRAP, it may result in a loop that iteratively invokes $ZTRAP until a stack overflow terminates the YottaDB image. Keep $ZTRAP simple and take special care to debug exception handling.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>An error in $ETRAP code triggers an implicit TROLLBACK:$TLEVEL QUIT:$QUIT “” QUIT.</p>
</div>
</section>
<section id="recording-information-about-errors">
<h3><a class="toc-backref" href="errproc.html#id36">Recording Information about Errors</a><a class="headerlink" href="errproc.html#recording-information-about-errors" title="Permalink to this heading">¶</a></h3>
<p>YottaDB provides a number of standard features and extensions to examine and record information about an error condition.</p>
<p>The extensions are:</p>
<ul class="simple">
<li><p>ZSHOW</p></li>
<li><p>ZWRITE</p></li>
<li><p>$ECODE</p></li>
<li><p>$STACK</p></li>
<li><p>$STACK()</p></li>
<li><p>$ZSTATUS</p></li>
<li><p>$ZJOBEXAM()</p></li>
<li><p>$ZLEVEL</p></li>
</ul>
<p>The ZSHOW command displays information about the current M environment. A ZSHOW argument may contain an expression that contains codes selecting one or more types of information for output.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 85%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Code</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>A</p></td>
<td><p>Selects auto-relink information</p></td>
</tr>
<tr class="row-odd"><td><p>B
C</p></td>
<td><p>Selects ZBREAK information
Provides the list of loaded external call packages and their routines. ZSHOW
“C” does not report packages that are accessible but have not been accessed by
the process.</p></td>
</tr>
<tr class="row-even"><td><p>D</p></td>
<td><p>Selects open device information</p></td>
</tr>
<tr class="row-odd"><td><p>G</p></td>
<td><p>Selects global statistic information</p></td>
</tr>
<tr class="row-even"><td><p>I</p></td>
<td><p>Selects intrinsic special variables</p></td>
</tr>
<tr class="row-odd"><td><p>L</p></td>
<td><p>Selects locks held by the process</p></td>
</tr>
<tr class="row-even"><td><p>R</p></td>
<td><p>Selects the M stack but with routine hashes</p></td>
</tr>
<tr class="row-odd"><td><p>S</p></td>
<td><p>Selects the M stack</p></td>
</tr>
<tr class="row-even"><td><p>V</p></td>
<td><p>Selects local variables</p></td>
</tr>
<tr class="row-odd"><td><p>*</p></td>
<td><p>Selects information equivalent to ZSHOW “VIBDLGR”</p></td>
</tr>
</tbody>
</table>
<p>A ZSHOW with no argument displays the M stack on the current device. It lists the program stack from initiation to the current execution level.</p>
<p>The ZWRITE command prints the current value of defined variables. ZWRITE provides a tool for examining or saving variable context. ZWRITE and ZSHOW can only display the current local variables, not any local variable states that have been protected by NEW commands, or appearance in an invoked formallist. A WRITE may also display current global variables.</p>
<p>The $ECODE special variable contains a M standardized/user defined/YottaDB specific error code.</p>
<p>The $STACK special variable contains the current level of M execution stack depth.</p>
<p>The $STACK() function returns strings describing aspects of the execution environment.</p>
<p>The $ZLEVEL special variable maintains an integer that indicates the level of nesting of DO and XECUTE commands. $ZLEVEL always contains an integer count of the number of levels displayed by issuing a ZSHOW “S” in that context.</p>
<p>The $ZJOBEXAM() function returns a string indicating the full path to the file where it stored a process context dump.</p>
<p>The $ZSTATUS special variable records the error condition code and location of the last error condition during execution.</p>
<p>For I/O operations, YottaDB uses the $ZA, $ZB and $ZEOF special variables. $ZA contains a status determined by the last read on the current device.</p>
<p>To simplify record keeping, an application may set $ZTRAP to an error-handling routine that records information about an error. The next section provides an example of a routine ERR.m that does this.</p>
<section id="program-to-record-information-on-an-error-using-ztrap">
<h4><a class="toc-backref" href="errproc.html#id37">Program to Record Information on an Error using $ZTRAP</a><a class="headerlink" href="errproc.html#program-to-record-information-on-an-error-using-ztrap" title="Permalink to this heading">¶</a></h4>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;ZPRINT ^ERR
ERR0<span class="p">;;</span>RECORD CONTENT OF AN ERROR
<span class="p">;</span>
RECORD  SET <span class="nv">$ZTRAP</span><span class="o">=</span><span class="s2">&quot;GOTO OPEN&quot;</span>
        ZSHOW <span class="s2">&quot;*&quot;</span>:^ERR<span class="o">(</span><span class="nv">$J</span>,<span class="nv">$H</span><span class="o">)</span>
        GOTO LOOPT<span class="p">;</span><span class="nv">$H</span> might change
LOOPV   ZSHOW <span class="s2">&quot;V&quot;</span>:^ERR<span class="o">(</span><span class="nv">$J</span>,<span class="nv">$H</span>,<span class="s2">&quot;VL&quot;</span>,<span class="nv">$ZLEVEL</span><span class="o">)</span>
LOOPT   IF <span class="nv">$ZLEVEL</span>&gt;1 ZGOTO <span class="nv">$ZLEVEL</span>-1:LOOPV
STACK   SET <span class="nv">$ZTRAP</span><span class="o">=</span><span class="s2">&quot;GOTO WARN&quot;</span>
        SET %ERRVH<span class="o">=</span><span class="nv">$H</span><span class="p">;</span>can cause error <span class="k">if</span> memory low
        SET ^ERR<span class="o">(</span><span class="nv">$J</span>,%ERRVH,<span class="s2">&quot;</span><span class="nv">$STACK</span><span class="s2">&quot;</span><span class="o">)=</span><span class="nv">$STACK</span>
        SET ^ERR<span class="o">(</span><span class="nv">$J</span>,%ERRVH,<span class="s2">&quot;</span><span class="nv">$STACK</span><span class="s2">&quot;</span>,-1<span class="o">)=</span><span class="nv">$STACK</span><span class="o">(</span>-1<span class="o">)</span>
        FOR %ERRVI<span class="o">=</span><span class="nv">$STACK</span><span class="o">(</span>-1<span class="o">)</span>:-1:1 DO
        . SET %ERRVK<span class="o">=</span><span class="s2">&quot;&quot;</span>
        . FOR %ERRVJ<span class="o">=</span><span class="s2">&quot;PLACE&quot;</span>,<span class="s2">&quot;MCODE&quot;</span>,<span class="s2">&quot;ECODE&quot;</span> DO
        . . SET %ERRVK<span class="o">=</span>%ERRVK_<span class="nv">$STACK</span><span class="o">(</span>%ERRVI,%ERRVJ<span class="o">)</span>_<span class="s2">&quot;|~|&quot;</span>
        . SET ^ERR<span class="o">(</span><span class="nv">$J</span>,%ERRVH,<span class="s2">&quot;</span><span class="nv">$STACK</span><span class="s2">&quot;</span>,%ERRVI<span class="o">)=</span>%ERRVK
        GOTO WARN
OPEN    SET <span class="nv">$ZTRAP</span><span class="o">=</span><span class="s2">&quot;GOTO OPEN1&quot;</span>
        SET %ERRIO<span class="o">=</span><span class="nv">$IO</span>,%ERRZA<span class="o">=</span><span class="nv">$ZA</span>,%ERRZB<span class="o">=</span><span class="nv">$ZB</span>,%ERRZE<span class="o">=</span><span class="nv">$ZEOF</span>
        SET %ERRVF<span class="o">=</span><span class="s2">&quot;REC.ERR&quot;</span>
        SET %ERRVF<span class="o">=</span><span class="nv">$ZDATE</span><span class="o">(</span><span class="nv">$H</span>,<span class="s2">&quot;YEARMMDD2460SS&quot;</span><span class="o">)</span>_<span class="s2">&quot;_&quot;</span>_<span class="nv">$J_</span><span class="s2">&quot;.ERR&quot;</span>
        OPEN %ERRVF:NEWVERSION
        USE %ERRVF
        S <span class="nv">$ZT</span><span class="o">=</span><span class="s2">&quot;S </span><span class="nv">$ZT</span><span class="s2">=&quot;&quot; G WARN&quot;&quot; U </span><span class="nv">$P</span><span class="s2">:(NOCENA:CTRAP=&quot;&quot;&quot;&quot;) G STAC&quot;</span>
        ZSHOW <span class="s2">&quot;*&quot;</span>
        KILL %ERRVF,%ERRIO,%ERRZA,%ERRZB,%ERRZE
        GOTO LOOPU
LOOPF   WRITE !,<span class="s2">&quot;LOCAL VARIABLES FOR ZLEVEL: &quot;</span>,<span class="nv">$ZLEVEL</span>,!
        ZWRITE
LOOPU   IF <span class="nv">$ZLEVEL</span>&gt;1 ZGOTO <span class="nv">$ZLEVEL</span>-1:LOOPF
        WRITE !
STAC    SET <span class="nv">$ZTRAP</span><span class="o">=</span><span class="s2">&quot;GOTO WARN&quot;</span>
        WRITE !,<span class="s2">&quot;PROGRAM STACK: &quot;</span>,!
        WRITE !,<span class="s2">&quot;</span><span class="nv">$STACK</span><span class="s2">: &quot;</span>,<span class="nv">$STACK</span>,!
        WRITE !,<span class="s2">&quot;</span><span class="nv">$STACK</span><span class="s2">(-1): &quot;</span>,<span class="nv">$STACK</span><span class="o">(</span>-1<span class="o">)</span>,!
        FOR %ERRVI<span class="o">=</span><span class="nv">$STACK</span><span class="o">(</span>-1<span class="o">)</span>:-1:1 DO
        . WRITE !,<span class="s2">&quot;LEVEL: &quot;</span>,%ERRVI
        . SET %ERRVK<span class="o">=</span><span class="m">10</span>
        . FOR %ERRVJ<span class="o">=</span><span class="s2">&quot;PLACE&quot;</span>,<span class="s2">&quot;MCODE&quot;</span>,<span class="s2">&quot;ECODE&quot;</span> DO
        .. W ?%ERRVK,<span class="s2">&quot;&quot;</span>,%ERRVJ,<span class="s2">&quot;:&quot;</span>,<span class="nv">$STACK</span><span class="o">(</span>%ERRVI,%ERRVJ<span class="o">)</span>
        .. SET %ERRVK<span class="o">=</span>%ERRVK+20
        CLOSE <span class="nv">$IO</span>
WARN    SET <span class="nv">$ZTRAP</span><span class="o">=</span><span class="s2">&quot;GOTO FATAL&quot;</span>
        IF <span class="nv">$P</span><span class="o">=</span><span class="nv">$I</span> SET %ERRIO<span class="o">=</span><span class="nv">$IO</span>,%ERRZA,%ERRZB<span class="o">=</span><span class="nv">$ZB</span>,%ERRZE<span class="o">=</span><span class="nv">$ZEOF</span>
        USE <span class="nv">$P</span>:<span class="o">(</span>NOCENABLE:CTRAP<span class="o">=</span><span class="s2">&quot;&quot;</span>:EXCEPTION<span class="o">=</span><span class="s2">&quot;&quot;</span><span class="o">)</span>
        WRITE !,<span class="s2">&quot;YOU HAVE ENCOUNTERED AN ERROR&quot;</span>
        WRITE !,<span class="s2">&quot;PLEASE NOTIFY JOAN Q SUPPORT PERSON&quot;</span>,!
FATAL   SET <span class="nv">$ZTRAP</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
        ZM +<span class="nv">$P</span><span class="o">(</span><span class="nv">$ST</span><span class="o">(</span><span class="nv">$ST</span><span class="o">(</span>-1<span class="o">)</span>,<span class="s2">&quot;ECODE&quot;</span><span class="o">)</span>,<span class="s2">&quot;Z&quot;</span>,2<span class="o">)</span>
</pre></div>
</div>
<p>The routine sets $ZTRAP to a sequence of values so that in the event of an error, various fallback actions are taken. If a STACKCRIT error occurs, YottaDB makes a small amount of space for error handling. However, if the error handler uses up significant amounts of space by nesting routines or manipulating local variables, the error handler may cause another STACKCRIT error. In this case, it is possible for the error handling to loop endlessly - therefore this routine changes $ZTRAP so that each error moves the routine closer to completion.</p>
<p>First it attempts to store the context information in the global ^ERR. The LOOPV-LOOPT code records the invocation levels using the ZSHOW command. This technique addresses the situation where the application program defines or NEWs local variables for each level. The code executes a pass through the loop for each instance where the value of $ZLEVEL is greater than one (1). For each pass, ERR.M decrements the value of $ZLEVEL with the ZGOTO. When the value of $ZLEVEL reaches one (1), the code at, and following, the STACK label stores the error context available in the $STACK() function.</p>
<p>If there is a problem with storing any of this information, ^ERR attempts to store the context information in a file in the current default working directory. If it uses a file, in order to (at the label OPEN) record information about I/O operations on the current device at the time of the error, the error handler SETs local variables to the values of the device specific I/O special variables $IO, $ZA, $ZB and $ZEOF before opening the log file.</p>
<p>The routine OPENs the log file with a name made up of the date and $JOB of the process. The NEWVERSION deviceparameter instructs YottaDB to create a new version of the file. The LOOPF-LOOPU code records the invocation levels using the ZWRITE command in a manner analogous to that described above. If an error occurs trying to write to the file, $ZTRAP USEs the principal device and transfers control to the STAC label in an attempt to provide a minimal error context on the user terminal. The code at and following the STAC label records the error context available in the $STACK() function.</p>
<p>At the label WARN, the routine attempts to notify the user that an error has occurred and who to notify.</p>
<p>At the label FATAL, the ZMESSAGE command resignals the error. Because (with proper setup) $ETRAP and $ZTRAP are now null, YottaDB releases control of the process to the host shell. In this example, the user never has access to Direct Mode.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;zprint ^EP13
EP13    WRITE !,<span class="s2">&quot;THIS IS &quot;</span>,<span class="nv">$TEXT</span><span class="o">(</span>+0<span class="o">)</span>
        SET <span class="nv">$ZTRAP</span><span class="o">=</span><span class="s2">&quot;GOTO NODB&quot;</span>
        KILL ^ERR
NODB    SET <span class="nv">$ECODE</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">;</span>this affects only <span class="nv">$ETRAP</span>
        <span class="p">;</span>S <span class="nv">$ET</span><span class="o">=</span><span class="s2">&quot;GOTO ^ERR&quot;</span><span class="p">;</span>this implicitly stacks <span class="nv">$ZTRAP</span>
        N <span class="nv">$ZT</span> S <span class="nv">$ZT</span><span class="o">=</span><span class="s2">&quot;GOTO ^ERR&quot;</span> <span class="p">;</span>gives similar result
        DO SUB1
        WRITE !,<span class="s2">&quot;THIS IS THE END&quot;</span>
        QUIT
SUB1    WRITE !,<span class="s2">&quot;THIS IS SUB1&quot;</span>
        NEW
        SET <span class="o">(</span>A,B,C<span class="o">)=</span><span class="nv">$ZLEVEL</span>
        DO SUB2
        QUIT
SUB2    WRITE !,<span class="s2">&quot;THIS IS SUB2&quot;</span>
        NEW
        SET <span class="o">(</span>B,C,D<span class="o">)=</span><span class="nv">$ZLEVEL</span>
        DO SUB3
        QUIT
SUB3    WRITE !,<span class="s2">&quot;THIS IS SUB3&quot;</span>
        NEW
        SET <span class="o">(</span>A,C,D<span class="o">)=</span><span class="nv">$ZLEVEL</span>
        DO BAD
BAD     NEW <span class="o">(</span>A<span class="o">)</span>
        SET <span class="nv">B</span><span class="o">=</span><span class="s2">&quot;BAD&quot;</span>
        WRITE <span class="m">1</span>/0
        WRITE !,<span class="s2">&quot;THIS IS NOT DISPLAYED&quot;</span>
        QUIT

YDB&gt;do ^EP13
THIS IS EP13
THIS IS SUB1
THIS IS SUB2
THIS IS SUB3
YOU HAVE ENCOUNTERED AN ERROR
PLEASE NOTIFY JOAN Q SUPPORT PERSON
</pre></div>
</div>
<p>Example EP13 uses the error recording routine by setting $ZTRAP=”GOTO ^ERR”. When the routine encounters an error at label BAD, YottaDB transfers control to routine ERR. Afterwards the ^ERR global would have contents like:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;zwrite ^ERR
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;</span><span class="nv">$STACK</span><span class="s2">&quot;</span><span class="o">)=</span><span class="m">0</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;</span><span class="nv">$STACK</span><span class="s2">&quot;</span>,-1<span class="o">)=</span><span class="m">5</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;</span><span class="nv">$STACK</span><span class="s2">&quot;</span>,1<span class="o">)=</span><span class="s2">&quot;NODB+3^EP13|~|        DO SUB1|~||~|&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;</span><span class="nv">$STACK</span><span class="s2">&quot;</span>,2<span class="o">)=</span><span class="s2">&quot;SUB1+3^EP13|~|        DO SUB2|~||~|&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;</span><span class="nv">$STACK</span><span class="s2">&quot;</span>,3<span class="o">)=</span><span class="s2">&quot;SUB2+3^EP13|~|        DO SUB3|~||~|&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;</span><span class="nv">$STACK</span><span class="s2">&quot;</span>,4<span class="o">)=</span><span class="s2">&quot;SUB3+3^EP13|~|        DO BAD|~||~|&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;</span><span class="nv">$STACK</span><span class="s2">&quot;</span>,5<span class="o">)=</span><span class="s2">&quot;BAD+2^EP13|~|        WRITE 1/0|~|,M9,Z150373210,|~|&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;D&quot;</span>,1<span class="o">)=</span><span class="s2">&quot;/dev/pts/0 OPEN TERMINAL NOPAST NOESCA NOREADS TYPE WIDTH=165 LENG=48 &quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;G&quot;</span>,0<span class="o">)=</span><span class="s2">&quot;GLD:*,REG:*,SET:77,KIL:3,GET:0,DTA:0,ORD:0,ZPR:0,QRY:0,LKS:0,LKF:0,CTN:0,DRD:3,DWT:0,NTW:77,NTR:5,NBW:85,NBR:170,NR0:0,NR1:0,NR2:0,N</span>
<span class="s2">R3:0,TTW:0,TTR:0,TRB:0,TBW:0,TBR:0,TR0:0,TR1:0,TR2:0,TR3:0,TR4:0,TC0:0,TC1:0,TC2:0,TC3:0,TC4:0,ZTR:0,DFL:0,DFS:0,JFL:0,JFS:0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;G&quot;</span>,0,1<span class="o">)=</span><span class="s2">&quot;,JBB:0,JFB:0,JFW:0,JRL:0,JRP:0,JRE:0,JRI:0,JRO:0,JEX:0,DEX:0,CAT:80,CFE:0,CFS:0,CFT:0,CQS:0,CQT:0,CYS:0,CYT:0,BTD:6&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;G&quot;</span>,1<span class="o">)=</span><span class="s2">&quot;GLD:/home/gtc_twinata/staff/nitin/a.gld,REG:DEFAULT,SET:79,KIL:4,GET:0,DTA:0,ORD:0,ZPR:0,QRY:0,LKS:0,LKF:0,CTN:79,DRD:3,DWT:0,NTW:79</span>
<span class="s2">,NTR:6,NBW:87,NBR:178,NR0:0,NR1:0,NR2:0,NR3:0,TTW:0,TTR:0,TRB:0,TBW:0,TBR:0,TR0:0,TR1:0,TR2:0,TR3:0,TR4:0,TC0:0,TC1:0,TC2:0,&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;G&quot;</span>,1,1<span class="o">)=</span><span class="s2">&quot;TC3:0,TC4:0,ZTR:0,DFL:0,DFS:0,JFL:0,JFS:0,JBB:0,JFB:0,JFW:0,JRL:0,JRP:0,JRE:0,JRI:0,JRO:0,JEX:0,DEX:0,CAT:83,CFE:0,CFS:0,CFT:0,CQS</span>
<span class="s2">:0,CQT:0,CYS:0,CYT:0,BTD:6&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,1<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$DEVICE</span><span class="s2">=&quot;&quot;&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,2<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ECODE</span><span class="s2">=&quot;&quot;,M9,Z150373210,&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,3<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ESTACK</span><span class="s2">=5&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,4<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ETRAP</span><span class="s2">=&quot;&quot;&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,5<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$HOROLOG</span><span class="s2">=&quot;&quot;64813,17382&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,6<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$IO</span><span class="s2">=&quot;&quot;/dev/pts/0&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,7<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$JOB</span><span class="s2">=13258&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,8<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$KEY</span><span class="s2">=&quot;&quot;&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,9<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$PRINCIPAL</span><span class="s2">=&quot;&quot;/dev/pts/0&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,10<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$QUIT</span><span class="s2">=0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,11<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$REFERENCE</span><span class="s2">=&quot;&quot;^ERR(13258,&quot;&quot;&quot;&quot;64813,17382&quot;&quot;&quot;&quot;,&quot;&quot;&quot;&quot;I&quot;&quot;&quot;&quot;,10)&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,12<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$STACK</span><span class="s2">=5&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,13<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$STORAGE</span><span class="s2">=2147483647&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,14<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$SYSTEM</span><span class="s2">=&quot;&quot;47,gtm_sysid&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,15<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$TEST</span><span class="s2">=1&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,16<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$TLEVEL</span><span class="s2">=0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,17<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$TRESTART</span><span class="s2">=0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,18<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$X</span><span class="s2">=12&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,19<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$Y</span><span class="s2">=6&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,20<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZA</span><span class="s2">=0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,21<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZALLOCSTOR</span><span class="s2">=780808&quot;</span>
^ERR<span class="o">(</span><span class="m">197306</span>,<span class="s2">&quot;64341,39400&quot;</span>,<span class="s2">&quot;I&quot;</span>,21<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZAUDIT</span><span class="s2">=0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,22<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZB</span><span class="s2">=&quot;&quot;&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,23<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZCHSET</span><span class="s2">=&quot;&quot;M&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,24<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZCLOSE</span><span class="s2">=0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,25<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZCMDLINE</span><span class="s2">=&quot;&quot;&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,26<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZCOMPILE</span><span class="s2">=&quot;&quot;&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,27<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZCSTATUS</span><span class="s2">=0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,28<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZDATEFORM</span><span class="s2">=0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,29<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZDIRECTORY</span><span class="s2">=&quot;&quot;/path/to/the/current/directory&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,30<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZEDITOR</span><span class="s2">=0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,31<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZEOF</span><span class="s2">=0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,32<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZERROR</span><span class="s2">=&quot;&quot;Unprocessed </span><span class="nv">$ZERROR</span><span class="s2">, see </span><span class="nv">$ZSTATUS</span><span class="s2">&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,33<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZGBLDIR</span><span class="s2">=&quot;&quot;/path/to/the/global/directory&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,34<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZHOROLOG</span><span class="s2">=&quot;&quot;64813,17382,175283,14400&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,35<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZININTERRUPT</span><span class="s2">=0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,36<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZINTERRUPT</span><span class="s2">=&quot;&quot;IF </span><span class="nv">$ZJOBEXAM</span><span class="s2">()&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,37<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZIO</span><span class="s2">=&quot;&quot;/dev/pts/0&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,38<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZJOB</span><span class="s2">=0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,39<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZKEY</span><span class="s2">=&quot;&quot;&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,40<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZLEVEL</span><span class="s2">=6&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,41<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZMAXTPTIME</span><span class="s2">=0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,42<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZMODE</span><span class="s2">=&quot;&quot;INTERACTIVE&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,43<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZONLNRLBK</span><span class="s2">=0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,44<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZPATNUMERIC</span><span class="s2">=&quot;&quot;M&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,45<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZPIN</span><span class="s2">=&quot;&quot;/dev/pts/0&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,46<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZPOSITION</span><span class="s2">=&quot;&quot;RECORD+1^ERR&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,47<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZPOUT</span><span class="s2">=&quot;&quot;/dev/pts/0&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,48<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZPROMPT</span><span class="s2">=&quot;&quot;GTM&gt;&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,49<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZQUIT</span><span class="s2">=0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,50<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZREALSTOR</span><span class="s2">=802648&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,51<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZRELDATE</span><span class="s2">=&quot;&quot;20180614 00:33&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,52<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZROUTINES</span><span class="s2">=&quot;&quot;. /usr/lib/fis-gtm/V6.3-007_x86_64 /usr/lib/fis-gtm/V6.3-007_x86_64/plugin/o(/usr/lib/fis-gtm/V6.3-007_x86_64/plugin/r)&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,53<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZSOURCE</span><span class="s2">=&quot;&quot;&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,54<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZSTATUS</span><span class="s2">=&quot;&quot;150373210,BAD+2^EP13,%GTM-E-DIVZERO, Attempt to divide by zero&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,55<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZSTEP</span><span class="s2">=&quot;&quot;B&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,56<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZSTRPLLIM</span><span class="s2">=0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,57<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZSYSTEM</span><span class="s2">=0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,58<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZTIMEOUT</span><span class="s2">=-1&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,59<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZTDATA</span><span class="s2">=0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,60<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZTDELIM</span><span class="s2">=&quot;&quot;&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,61<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZTEXIT</span><span class="s2">=&quot;&quot;&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,62<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZTLEVEL</span><span class="s2">=0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,63<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZTNAME</span><span class="s2">=&quot;&quot;&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,64<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZTOLDVAL</span><span class="s2">=&quot;&quot;&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,65<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZTRAP</span><span class="s2">=&quot;&quot;GOTO OPEN&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,66<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZTRIGGEROP</span><span class="s2">=&quot;&quot;&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,67<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZTSLATE</span><span class="s2">=&quot;&quot;&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,68<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZTUPDATE</span><span class="s2">=&quot;&quot;&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,69<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZTVALUE</span><span class="s2">=&quot;&quot;&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,70<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZTWORMHOLE</span><span class="s2">=&quot;&quot;&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,71<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZUSEDSTOR</span><span class="s2">=759855&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,72<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZUT</span><span class="s2">=1528966182176530&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,73<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZVERSION</span><span class="s2">=&quot;&quot;GT.M V6.3-007 Linux x86_64&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;I&quot;</span>,74<span class="o">)=</span><span class="s2">&quot;</span><span class="nv">$ZYERROR</span><span class="s2">=&quot;&quot;&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;L&quot;</span>,0<span class="o">)=</span><span class="s2">&quot;MLG:0,MLT:0&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;R&quot;</span>,1<span class="o">)=</span><span class="s2">&quot;RECORD+1^ERR:e99b16e4f7e1112d058dc22cb53491fd&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;R&quot;</span>,2<span class="o">)=</span><span class="s2">&quot;SUB3+3^EP13:d9e026c6d14e42567d3e64eecd049726&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;R&quot;</span>,3<span class="o">)=</span><span class="s2">&quot;SUB2+3^EP13:d9e026c6d14e42567d3e64eecd049726&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;R&quot;</span>,4<span class="o">)=</span><span class="s2">&quot;SUB1+3^EP13:d9e026c6d14e42567d3e64eecd049726&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;R&quot;</span>,5<span class="o">)=</span><span class="s2">&quot;NODB+3^EP13:d9e026c6d14e42567d3e64eecd049726&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;R&quot;</span>,6<span class="o">)=</span><span class="s2">&quot;+1^GTM</span><span class="nv">$DMOD</span><span class="s2">    (Direct mode) &quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;V&quot;</span>,1<span class="o">)=</span><span class="s2">&quot;A=5 ;*&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;V&quot;</span>,2<span class="o">)=</span><span class="s2">&quot;B=&quot;&quot;BAD&quot;&quot;&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;VL&quot;</span>,3,<span class="s2">&quot;V&quot;</span>,1<span class="o">)=</span><span class="s2">&quot;A=3&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;VL&quot;</span>,3,<span class="s2">&quot;V&quot;</span>,2<span class="o">)=</span><span class="s2">&quot;B=3&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;VL&quot;</span>,3,<span class="s2">&quot;V&quot;</span>,3<span class="o">)=</span><span class="s2">&quot;C=3&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;VL&quot;</span>,4,<span class="s2">&quot;V&quot;</span>,1<span class="o">)=</span><span class="s2">&quot;B=4&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;VL&quot;</span>,4,<span class="s2">&quot;V&quot;</span>,2<span class="o">)=</span><span class="s2">&quot;C=4&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;VL&quot;</span>,4,<span class="s2">&quot;V&quot;</span>,3<span class="o">)=</span><span class="s2">&quot;D=4&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;VL&quot;</span>,5,<span class="s2">&quot;V&quot;</span>,1<span class="o">)=</span><span class="s2">&quot;A=5&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;VL&quot;</span>,5,<span class="s2">&quot;V&quot;</span>,2<span class="o">)=</span><span class="s2">&quot;C=5&quot;</span>
^ERR<span class="o">(</span><span class="m">13258</span>,<span class="s2">&quot;64813,17382&quot;</span>,<span class="s2">&quot;VL&quot;</span>,5,<span class="s2">&quot;V&quot;</span>,3<span class="o">)=</span><span class="s2">&quot;D=5&quot;</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="internatn.html" class="btn btn-neutral float-left" title="12. Internationalization" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="triggers.html" class="btn btn-neutral float-right" title="14. Triggers" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2021, YottaDB LLC.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
<hr/>
<!-- DDG search widget,@author Juri Wornowitski,@version 2.0,@link https://www.plainlight.com/ddg --><div id="widdget" style="width:100%;margin:10px 0;"><style type="text/css">#widdget input {display:block;height:30px;padding:4px;outline:none;border:1px solid #8d8d8d;border-right:0;box-sizing:border-box;border-radius:3px 0 0 3px;width:calc(100% - 41px);font-size:15px;} #widdget button {float:left;cursor:pointer;width:43px;height:30px;color:#fff;background-image:linear-gradient(#7f72ca,#554492);border:0;border-radius:0 3px 3px 0;} #widdget button:active {background-image:linear-gradient(#002387,#002357);} #widdget button:focus {outline:none;}</style><form style="position:relative" onsubmit="this.elements[0].click();return false;"><div style="float:right;position:absolute;top:0;right:-2px;z-index:3"><button type="button" onclick="var v=this.parentElement.parentElement.elements[1].value;window.open('https://duckduckgo.com?q='+encodeURIComponent(v)+'+site%3Adocs.yottadb.com&kj=p');">&#128269;</button></div><input type="text" name="que" placeholder="Search documents with DuckDuckGo" /></form></div>
 


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>