<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>9. Input/Output Processing &mdash; Programmer&#39;s Guide  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="10. Utility Routines" href="utility.html" />
    <link rel="prev" title="8. Intrinsic Special Variables" href="isv.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
	  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
		      <input type="text" name="q" placeholder="Search" />
		          <input type="hidden" name="check_keywords" value="yes" />
			      <input type="hidden" name="area" value="default" />
			        </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://yottadb.com/resources/documentation">Main YottaDB Documentation Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="man.html">About this Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">1. About YottaDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="langext.html">2. YottaDB Language Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="devcycle.html">3. Development Cycle</a></li>
<li class="toctree-l1"><a class="reference internal" href="opdebug.html">4. Operating and Debugging in Direct Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="langfeat.html">5. General Language Features of M</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands.html">6. Commands</a></li>
<li class="toctree-l1"><a class="reference internal" href="functions.html">7. Functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="isv.html">8. Intrinsic Special Variables</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="ioproc.html#">9. Input/Output Processing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ioproc.html#i-o-intrinsic-special-variables">I/O Intrinsic Special Variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#device-name-variables">Device Name Variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#io">$IO</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#principal">$PRINCIPAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#zio">$ZIO</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#cursor-position-variables">Cursor Position Variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#x">$X</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#y">$Y</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#maintenance-of-x-and-y">Maintenance of $X and $Y</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#status-variables">Status Variables</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#device">$DEVICE</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#key">$KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#za">$ZA</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#zb">$ZB</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#zeof">$ZEOF</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#zpin">$ZPIN</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#zpout">$ZPOUT</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ioproc.html#i-o-devices">I/O Devices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#i-o-device-recognition">I/O Device Recognition</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#device-specification-defaults">Device Specification Defaults</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#how-i-o-device-parameters-work">How I/O Device Parameters Work</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#abbreviating-device-parameters">Abbreviating Device Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#document-conventions">Document Conventions</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#device-independent-programming">Device-Independent Programming</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ioproc.html#using-terminals">Using Terminals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#setting-terminal-characteristics">Setting Terminal Characteristics</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#logical-records-for-terminals">Logical Records for Terminals</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#read-command-for-terminals">Read * Command for Terminals</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#read-x-maxlen-command-for-terminals">READ X#maxlen Command for Terminals</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#terminal-deviceparameter-summary">Terminal Deviceparameter Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#terminal-examples">Terminal Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#m-read-editing">M Read Editing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#user-interface">User Interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#use-device-parameters">USE Device Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#environment-variable">Environment Variable</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#direct-mode-editing">Direct Mode Editing</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#zshow-d">ZSHOW “D”</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ioproc.html#using-sequential-files">Using Sequential Files</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#setting-sequential-file-characteristics">Setting Sequential File Characteristics</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#sequential-file-pointers">Sequential File Pointers</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#line-terminators">Line Terminators</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#read-write-operations">READ/WRITE Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#writing-binary-files">Writing Binary Files</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#sequential-file-deviceparameter-summary">Sequential File Deviceparameter Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#sequential-file-examples">Sequential File Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ioproc.html#fifo-characteristics">FIFO Characteristics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#considerations-in-implementing-fifos">Considerations in implementing FIFOs</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#error-handling-for-fifos">Error Handling for FIFOs</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#yottadb-recognition-of-fifos">YottaDB Recognition of FIFOs</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#fifo-device-examples">FIFO Device Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#fifo-deviceparameter-summary">FIFO Deviceparameter Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ioproc.html#using-null-devices">Using NULL Devices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#null-deviceparameter-summary">NULL Deviceparameter Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#null-device-examples">NULL Device Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ioproc.html#using-pipe-devices">Using PIPE Devices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#modes-of-pipe-operation">Modes of PIPE Operation</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#pipe-characteristics">PIPE Characteristics</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#pipe-device-examples">PIPE Device Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#pipe-deviceparameter-summary">PIPE Deviceparameter Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ioproc.html#using-socket-devices">Using Socket Devices</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#message-management">Message Management</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#socket-read-operation">Socket Read Operation</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#socket-read-termination-conditions">Socket Read Termination Conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#message-delimiters">Message Delimiters</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#read-commands">READ Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#write-command">WRITE Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#socket-device-operation">Socket Device Operation</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#socket-deviceparameter-summary">Socket Deviceparameter Summary</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#socket-device-examples">Socket Device Examples</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#tls-on-yottadb">TLS on YottaDB</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ioproc.html#i-o-commands">I/O Commands</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#open">Open</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#append">APPEND</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#attach">ATTACH</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#chset">CHSET</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#command">COMMAND</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#connect">CONNECT</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#delimiter">DELIMITER</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#exception">EXCEPTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#empterm">EMPTERM</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#fflf">FFLF</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#fifo">FIFO</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#fixed">FIXED</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#follow">FOLLOW</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#group">GROUP</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#ichset">ICHSET</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#independent">INDEPENDENT</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#ikey">IKEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#ioerror">IOERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#key-open">KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#listen">LISTEN</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#morereadtime">MOREREADTIME</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#newversion">NEWVERSION</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#ochset">OCHSET</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#okey">OKEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#owner">OWNER</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#pad">PAD</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#parse">PARSE</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#readonly">READONLY</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#recordsize">RECORDSIZE</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#rewind">REWIND</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#seek-strexpr">SEEK=strexpr</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#shell">SHELL</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#stderr">STDERR</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#stream">STREAM</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#truncate">TRUNCATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#uic">UIC</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#variable">VARIABLE</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#world">WORLD</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#wrap">WRAP</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#writeonly">WRITEONLY</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#zbfsize">ZBFSIZE</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#zdelay">ZDELAY</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#zff">ZFF</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#zibfsize">ZIBFSIZE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#use">USE</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#attach-use">ATTACH</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#canonical">CANONICAL</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#cenable">CENABLE</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#clearscreen">CLEARSCREEN</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id6">CONNECT</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#convert">CONVERT</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#ctrap">CTRAP</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id9">DELIMITER</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#detach">DETACH</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#downscroll">DOWNSCROLL</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#echo">ECHO</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#editing">EDITING</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id10">EMPTERM</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#eraseline">ERASELINE</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#escape">ESCAPE</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id11">EXCEPTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id13">FFLF</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#filter">FILTER</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id14">FOLLOW</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#hostsync">HOSTSYNC</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#hupenable">HUPENABLE</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id15">IKEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#inrewind">INREWIND</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#inseek-strexpr">INSEEK=strexpr</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#insert">INSERT</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id18">IOERROR</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id19">KEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#length">LENGTH</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id20">OKEY</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#outrewind">OUTREWIND</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#outseek-strexpr">OUTSEEK=strexpr</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#passthru">PASSTHRU</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#readsync">READSYNC</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id23">REWIND</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id24">SEEK=strexpr</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#socket">SOCKET</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#terminator">TERMINATOR</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id26">TRUNCATE</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#ttsync">TTSYNC</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#typeahead">TYPEAHEAD</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#upscroll">UPSCROLL</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#width">WIDTH</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id27">WRAP</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id29">X</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id30">Y</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id31">ZBFSIZE</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id32">ZDELAY</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id33">ZFF</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id34">ZIBFSIZE</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#read">READ</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#read-command">READ * Command</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#read-x-maxlen-command">Read X#maxlen command</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#write">WRITE</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#id35">WRITE *</a></li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#close">CLOSE</a><ul>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#delete">DELETE</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#destroy">DESTROY</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id36">EXCEPTION</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id38">GROUP</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id39">OWNER</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#rename">RENAME</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id40">SOCKET</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#timeout">TIMEOUT</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id41">UIC</a></li>
<li class="toctree-l4"><a class="reference internal" href="ioproc.html#id42">WORLD</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="ioproc.html#deviceparameter-summary-table">Deviceparameter Summary Table</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="utility.html">10. Utility Routines</a></li>
<li class="toctree-l1"><a class="reference internal" href="extrout.html">11. Integrating External Routines</a></li>
<li class="toctree-l1"><a class="reference internal" href="internatn.html">12. Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="errproc.html">13. Error Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="triggers.html">14. Triggers</a></li>
<li class="toctree-l1"><a class="reference internal" href="encrypt.html">15. Database Encryption Extensions to the YottaDB External Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix A: M Coding Standards - Do’s and Don’ts</a></li>
<li class="toctree-l1"><a class="reference internal" href="LICENSE.html">LICENSE</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Programmer's Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>9. Input/Output Processing</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="isv.html" class="btn btn-neutral float-left" title="8. Intrinsic Special Variables" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="utility.html" class="btn btn-neutral float-right" title="10. Utility Routines" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="input-output-processing">
<span id="index-0"></span><h1><a class="toc-backref" href="ioproc.html#id43">9. Input/Output Processing</a><a class="headerlink" href="ioproc.html#input-output-processing" title="Permalink to this heading">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="ioproc.html#input-output-processing" id="id43">9. Input/Output Processing</a></p>
<ul>
<li><p><a class="reference internal" href="ioproc.html#i-o-intrinsic-special-variables" id="id44">I/O Intrinsic Special Variables</a></p>
<ul>
<li><p><a class="reference internal" href="ioproc.html#device-name-variables" id="id45">Device Name Variables</a></p>
<ul>
<li><p><a class="reference internal" href="ioproc.html#io" id="id46">$IO</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#principal" id="id47">$PRINCIPAL</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#zio" id="id48">$ZIO</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="ioproc.html#cursor-position-variables" id="id49">Cursor Position Variables</a></p>
<ul>
<li><p><a class="reference internal" href="ioproc.html#x" id="id50">$X</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#y" id="id51">$Y</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#maintenance-of-x-and-y" id="id52">Maintenance of $X and $Y</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="ioproc.html#status-variables" id="id53">Status Variables</a></p>
<ul>
<li><p><a class="reference internal" href="ioproc.html#device" id="id54">$DEVICE</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#key" id="id55">$KEY</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#za" id="id56">$ZA</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#zb" id="id57">$ZB</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#zeof" id="id58">$ZEOF</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#zpin" id="id59">$ZPIN</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#zpout" id="id60">$ZPOUT</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="ioproc.html#i-o-devices" id="id61">I/O Devices</a></p>
<ul>
<li><p><a class="reference internal" href="ioproc.html#i-o-device-recognition" id="id62">I/O Device Recognition</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#device-specification-defaults" id="id63">Device Specification Defaults</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#how-i-o-device-parameters-work" id="id64">How I/O Device Parameters Work</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#abbreviating-device-parameters" id="id65">Abbreviating Device Parameters</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#document-conventions" id="id66">Document Conventions</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#device-independent-programming" id="id67">Device-Independent Programming</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="ioproc.html#using-terminals" id="id68">Using Terminals</a></p>
<ul>
<li><p><a class="reference internal" href="ioproc.html#setting-terminal-characteristics" id="id69">Setting Terminal Characteristics</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#logical-records-for-terminals" id="id70">Logical Records for Terminals</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#read-command-for-terminals" id="id71">Read * Command for Terminals</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#read-x-maxlen-command-for-terminals" id="id72">READ X#maxlen Command for Terminals</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#terminal-deviceparameter-summary" id="id73">Terminal Deviceparameter Summary</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#terminal-examples" id="id74">Terminal Examples</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#m-read-editing" id="id75">M Read Editing</a></p>
<ul>
<li><p><a class="reference internal" href="ioproc.html#user-interface" id="id76">User Interface</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#use-device-parameters" id="id77">USE Device Parameters</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#environment-variable" id="id78">Environment Variable</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#direct-mode-editing" id="id79">Direct Mode Editing</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#zshow-d" id="id80">ZSHOW “D”</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="ioproc.html#using-sequential-files" id="id81">Using Sequential Files</a></p>
<ul>
<li><p><a class="reference internal" href="ioproc.html#setting-sequential-file-characteristics" id="id82">Setting Sequential File Characteristics</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#sequential-file-pointers" id="id83">Sequential File Pointers</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#line-terminators" id="id84">Line Terminators</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#read-write-operations" id="id85">READ/WRITE Operations</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#writing-binary-files" id="id86">Writing Binary Files</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#sequential-file-deviceparameter-summary" id="id87">Sequential File Deviceparameter Summary</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#sequential-file-examples" id="id88">Sequential File Examples</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="ioproc.html#fifo-characteristics" id="id89">FIFO Characteristics</a></p>
<ul>
<li><p><a class="reference internal" href="ioproc.html#considerations-in-implementing-fifos" id="id90">Considerations in implementing FIFOs</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#error-handling-for-fifos" id="id91">Error Handling for FIFOs</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#yottadb-recognition-of-fifos" id="id92">YottaDB Recognition of FIFOs</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#fifo-device-examples" id="id93">FIFO Device Examples</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#fifo-deviceparameter-summary" id="id94">FIFO Deviceparameter Summary</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="ioproc.html#using-null-devices" id="id95">Using NULL Devices</a></p>
<ul>
<li><p><a class="reference internal" href="ioproc.html#null-deviceparameter-summary" id="id96">NULL Deviceparameter Summary</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#null-device-examples" id="id97">NULL Device Examples</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="ioproc.html#using-pipe-devices" id="id98">Using PIPE Devices</a></p>
<ul>
<li><p><a class="reference internal" href="ioproc.html#modes-of-pipe-operation" id="id99">Modes of PIPE Operation</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#pipe-characteristics" id="id100">PIPE Characteristics</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#pipe-device-examples" id="id101">PIPE Device Examples</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#pipe-deviceparameter-summary" id="id102">PIPE Deviceparameter Summary</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="ioproc.html#using-socket-devices" id="id103">Using Socket Devices</a></p>
<ul>
<li><p><a class="reference internal" href="ioproc.html#message-management" id="id104">Message Management</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#socket-read-operation" id="id105">Socket Read Operation</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#socket-read-termination-conditions" id="id106">Socket Read Termination Conditions</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#message-delimiters" id="id107">Message Delimiters</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#read-commands" id="id108">READ Commands</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#write-command" id="id109">WRITE Command</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#socket-device-operation" id="id110">Socket Device Operation</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#socket-deviceparameter-summary" id="id111">Socket Deviceparameter Summary</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#socket-device-examples" id="id112">Socket Device Examples</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#tls-on-yottadb" id="id113">TLS on YottaDB</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="ioproc.html#i-o-commands" id="id114">I/O Commands</a></p>
<ul>
<li><p><a class="reference internal" href="ioproc.html#open" id="id115">Open</a></p>
<ul>
<li><p><a class="reference internal" href="ioproc.html#append" id="id116">APPEND</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#attach" id="id117">ATTACH</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#chset" id="id118">CHSET</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#command" id="id119">COMMAND</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#connect" id="id120">CONNECT</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#delimiter" id="id121">DELIMITER</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#exception" id="id122">EXCEPTION</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#empterm" id="id123">EMPTERM</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#fflf" id="id124">FFLF</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#fifo" id="id125">FIFO</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#fixed" id="id126">FIXED</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#follow" id="id127">FOLLOW</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#group" id="id128">GROUP</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#ichset" id="id129">ICHSET</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#independent" id="id130">INDEPENDENT</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#ikey" id="id131">IKEY</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#ioerror" id="id132">IOERROR</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#key-open" id="id133">KEY</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#listen" id="id134">LISTEN</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#morereadtime" id="id135">MOREREADTIME</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#newversion" id="id136">NEWVERSION</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#ochset" id="id137">OCHSET</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#okey" id="id138">OKEY</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#owner" id="id139">OWNER</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#pad" id="id140">PAD</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#parse" id="id141">PARSE</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#readonly" id="id142">READONLY</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#recordsize" id="id143">RECORDSIZE</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#rewind" id="id144">REWIND</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#seek-strexpr" id="id145">SEEK=strexpr</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#shell" id="id146">SHELL</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#stderr" id="id147">STDERR</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#stream" id="id148">STREAM</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#truncate" id="id149">TRUNCATE</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#uic" id="id150">UIC</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#variable" id="id151">VARIABLE</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#world" id="id152">WORLD</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#wrap" id="id153">WRAP</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#writeonly" id="id154">WRITEONLY</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#zbfsize" id="id155">ZBFSIZE</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#zdelay" id="id156">ZDELAY</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#zff" id="id157">ZFF</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#zibfsize" id="id158">ZIBFSIZE</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="ioproc.html#use" id="id159">USE</a></p>
<ul>
<li><p><a class="reference internal" href="ioproc.html#attach-use" id="id160">ATTACH</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#canonical" id="id161">CANONICAL</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#cenable" id="id162">CENABLE</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#clearscreen" id="id163">CLEARSCREEN</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id6" id="id164">CONNECT</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#convert" id="id165">CONVERT</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#ctrap" id="id166">CTRAP</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id9" id="id167">DELIMITER</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#detach" id="id168">DETACH</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#downscroll" id="id169">DOWNSCROLL</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#echo" id="id170">ECHO</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#editing" id="id171">EDITING</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id10" id="id172">EMPTERM</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#eraseline" id="id173">ERASELINE</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#escape" id="id174">ESCAPE</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id11" id="id175">EXCEPTION</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id13" id="id176">FFLF</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#filter" id="id177">FILTER</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id14" id="id178">FOLLOW</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#hostsync" id="id179">HOSTSYNC</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#hupenable" id="id180">HUPENABLE</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id15" id="id181">IKEY</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#inrewind" id="id182">INREWIND</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#inseek-strexpr" id="id183">INSEEK=strexpr</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#insert" id="id184">INSERT</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id18" id="id185">IOERROR</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id19" id="id186">KEY</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#length" id="id187">LENGTH</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id20" id="id188">OKEY</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#outrewind" id="id189">OUTREWIND</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#outseek-strexpr" id="id190">OUTSEEK=strexpr</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#passthru" id="id191">PASSTHRU</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#readsync" id="id192">READSYNC</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id23" id="id193">REWIND</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id24" id="id194">SEEK=strexpr</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#socket" id="id195">SOCKET</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#terminator" id="id196">TERMINATOR</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id26" id="id197">TRUNCATE</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#ttsync" id="id198">TTSYNC</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#typeahead" id="id199">TYPEAHEAD</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#upscroll" id="id200">UPSCROLL</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#width" id="id201">WIDTH</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id27" id="id202">WRAP</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id29" id="id203">X</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id30" id="id204">Y</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id31" id="id205">ZBFSIZE</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id32" id="id206">ZDELAY</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id33" id="id207">ZFF</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id34" id="id208">ZIBFSIZE</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="ioproc.html#read" id="id209">READ</a></p>
<ul>
<li><p><a class="reference internal" href="ioproc.html#read-command" id="id210">READ * Command</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#read-x-maxlen-command" id="id211">Read X#maxlen command</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="ioproc.html#write" id="id212">WRITE</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id35" id="id213">WRITE *</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#close" id="id214">CLOSE</a></p>
<ul>
<li><p><a class="reference internal" href="ioproc.html#delete" id="id215">DELETE</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#destroy" id="id216">DESTROY</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id36" id="id217">EXCEPTION</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id38" id="id218">GROUP</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id39" id="id219">OWNER</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#rename" id="id220">RENAME</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id40" id="id221">SOCKET</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#timeout" id="id222">TIMEOUT</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id41" id="id223">UIC</a></p></li>
<li><p><a class="reference internal" href="ioproc.html#id42" id="id224">WORLD</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="ioproc.html#deviceparameter-summary-table" id="id225">Deviceparameter Summary Table</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<p>This chapter describes the following topics which relate to input and output processing:</p>
<ul class="simple">
<li><p>Input/Output Intrinsic Special Variables, and their Maintenance : YottaDB provides several intrinsic special variables that allow processes to examine, and in some cases change, certain aspects of the input/output (I/O) processing. The focus in this chapter is how YottaDB handles the standard ones, such as $IO, $X, $Y, and those that are YottaDB-specific (for example, $ZA, $ZB).</p></li>
<li><p>Input/Output Devices: Each device type supported by YottaDB responds to a particular subset of deviceparameters, while ignoring others. Devices may be programmed in a device-specific manner, or in a device-independent manner. This chapter discusses each device type, and provides tables of their deviceparameters.</p></li>
<li><p>Input/Output Commands and their Deviceparameters: YottaDB bases its I/O processing on a simple character stream model. YottaDB does not use any pre-declared formats. This chapter describes the YottaDB I/O commands OPEN, USE, READ, WRITE, and CLOSE.</p></li>
</ul>
<p>OPEN, USE, and CLOSE commands accept deviceparameters, which are keywords that permit a YottaDB program to control the device state. Some deviceparameters require arguments. The current ANSI standard for YottaDB does not define the deviceparameters for all devices. This chapter includes descriptions of the YottaDB deviceparameters in the sections describing each command.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The term “device” can refer to an entity manipulated by application code using Open, Use, Close, Read and Write commands as well as a device from the perspective of the operating system.  We endeavor to always make it clear from the context which meaning is intended.</p>
</div>
<section id="i-o-intrinsic-special-variables">
<h2><a class="toc-backref" href="ioproc.html#id44">I/O Intrinsic Special Variables</a><a class="headerlink" href="ioproc.html#i-o-intrinsic-special-variables" title="Permalink to this heading">¶</a></h2>
<p>YottaDB intrinsic special variables provide a means for application code to communicate and manage the state of a device.</p>
<section id="device-name-variables">
<h3><a class="toc-backref" href="ioproc.html#id45">Device Name Variables</a><a class="headerlink" href="ioproc.html#device-name-variables" title="Permalink to this heading">¶</a></h3>
<p>YottaDB provides three intrinsic special variables that identify devices.</p>
<section id="io">
<h4><a class="toc-backref" href="ioproc.html#id46">$IO</a><a class="headerlink" href="ioproc.html#io" title="Permalink to this heading">¶</a></h4>
<p>$I[O] contains the name of the current device specified by the last USE command. A SET command cannot modify $IO. USE produces the same $IO as USE $PRINCIPAL, but $P is the preferred construct.</p>
</section>
<section id="principal">
<span id="principal-io-isv"></span><h4><a class="toc-backref" href="ioproc.html#id47">$PRINCIPAL</a><a class="headerlink" href="ioproc.html#principal" title="Permalink to this heading">¶</a></h4>
<p>A process inherits three open file descriptors from its parent - STDIN, STDOUT and STDERR - which can all map to different files or devices. YottaDB provides no way for M application to access STDERR. Although STDIN and STDOUT may map to different devices, files, sockets, pipes, etc. in the operating system, M provides for only device $PRINCIPAL, to refers to both. At process startup, and when $PRINCIPAL is selected with a USE command, READ commands apply to STDIN and WRITE commands apply to STDOUT. The device type of the standard input determines which USE deviceparameters apply to $PRINCIPAL.</p>
<p>For an interactive process, $PRINCIPAL is the user’s terminal. YottaDB ignores a CLOSE of the principal device. YottaDB does not permit a SET command to modify $PRINCIPAL.</p>
<p>0 is an alternate for $PRINCIPAL (for example, USE 0). YottaDB recommends that application code use $PRINCIPAL. The environment variable ydb_principal can be used to set a string reported by YottaDB for $PRINCIPAL and which can be used in lieu of $PRINCIPAL for the USE command.</p>
</section>
<section id="zio">
<h4><a class="toc-backref" href="ioproc.html#id48">$ZIO</a><a class="headerlink" href="ioproc.html#zio" title="Permalink to this heading">¶</a></h4>
<p>$ZIO contains the translated name of the current device, in contrast to $IO, which contains the name as specified by the USE command.</p>
</section>
</section>
<section id="cursor-position-variables">
<h3><a class="toc-backref" href="ioproc.html#id49">Cursor Position Variables</a><a class="headerlink" href="ioproc.html#cursor-position-variables" title="Permalink to this heading">¶</a></h3>
<p>YottaDB provides two intrinsic special variables for determining the virtual cursor position. $X refers to the current column, while $Y refers to the current row.</p>
<section id="x">
<h4><a class="toc-backref" href="ioproc.html#id50">$X</a><a class="headerlink" href="ioproc.html#x" title="Permalink to this heading">¶</a></h4>
<p>$X contains an integer value ranging from 0 to 65,535, specifying the horizontal position of a virtual cursor in the current output record. $X=0 represents the initial position on a new record or row.</p>
<p>Every OPENed device has a $X. However, YottaDB only has access to $X of the current device.</p>
<p>Generally, in M mode YottaDB increments $X for every character written to and read from the current device; see below for behavior of a UTF-8 mode device. YottaDB format control characters, FILTER, and the device WIDTH and WRAP also have an effect on $X.</p>
<p>As $X is only a counter to help a program track output, SET $X does not reposition the cursor or perform any other IO. Conversely, if a sequence of characters sent to a terminal or other device with a WRITE causes it to be repositioned except as described below, $X will not reflect this change.</p>
</section>
<section id="y">
<h4><a class="toc-backref" href="ioproc.html#id51">$Y</a><a class="headerlink" href="ioproc.html#y" title="Permalink to this heading">¶</a></h4>
<p>$Y contains an integer value ranging from 0 to 65,535, specifying the vertical position of a virtual cursor in the current output record. $Y=0 represents the top row or line.</p>
<p>Every OPEN device has a $Y. However, YottaDB only accesses $Y of the current device.</p>
<p>When YottaDB finishes the logical record in progress, it generally increments $Y. YottaDB recognizes the end of a logical record when it processes certain YottaDB format control characters, or when the record reaches its maximum size, as determined by the device WIDTH, and the device is set to WRAP. The definition of “logical record” varies from device to device. For an exact definition, see the sections on each device type. FILTER and the device LENGTH also have an effect on $Y.</p>
<p>As $Y is only a counter to help a program track output, SET $Y does not reposition the cursor or perform any other IO. Conversely, if a sequence of characters sent to a terminal or other device with a WRITE causes it to be repositioned except as described below, $Y will not reflect this change.</p>
</section>
<section id="maintenance-of-x-and-y">
<h4><a class="toc-backref" href="ioproc.html#id52">Maintenance of $X and $Y</a><a class="headerlink" href="ioproc.html#maintenance-of-x-and-y" title="Permalink to this heading">¶</a></h4>
<p>The following factors affect the maintenance of the virtual cursor position ($X and $Y):</p>
<ul class="simple">
<li><p>The bounds of the virtual “page”</p></li>
<li><p>Format control characters</p></li>
<li><p>YottaDB character filtering</p></li>
</ul>
<p>Each device has a WIDTH and a LENGTH that define the virtual “page.” The WIDTH determines the maximum size of a record for a device, while the LENGTH determines how many records fit on a page. YottaDB starts a new record when the current record size ($X) reaches the maximum WIDTH and the device has WRAP enabled. When the current line ($Y) reaches the maximum LENGTH, YottaDB starts a new page.</p>
<p>YottaDB has several format control characters (used in the context of a WRITE command) that allow the manipulation of the virtual cursor. For all I/O devices, the YottaDB format control characters do the following:</p>
<ul class="simple">
<li><p>! Sets $X to zero (0) and increments $Y, and terminates the logical record in progress. The definition of “logical record” varies from device to device, and is discussed in each device section.</p></li>
<li><p># Sets $X and $Y to zero (0), and terminates the logical record in progress.</p></li>
<li><p>?n If n is greater than $X, writes n-$X spaces to the device, bringing $X to n. If n is less than or equal to $X, ?n has no effect. When WRAP is enabled and n exceeds the WIDTH of the line, WRITE ?n increments $Y and sets $X equal to n#WIDTH, where # is the YottaDB modulo operator.</p></li>
</ul>
<p>In UTF-8 mode, YottaDB maintains $X in the following measurement units:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 34%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Devices</p></th>
<th class="head"><p>Input</p></th>
<th class="head"><p>Output</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FIFO</p></td>
<td><p>code points</p></td>
<td><p>display columns</p></td>
</tr>
<tr class="row-odd"><td><p>PIPE</p></td>
<td><p>code points</p></td>
<td><p>display columns</p></td>
</tr>
<tr class="row-even"><td><p>SD</p></td>
<td><p>code points</p></td>
<td><p>display columns</p></td>
</tr>
<tr class="row-odd"><td><p>SOC</p></td>
<td><p>code points</p></td>
<td><p>code points</p></td>
</tr>
<tr class="row-even"><td><p>TRM</p></td>
<td><p>display columns</p></td>
<td><p>display columns</p></td>
</tr>
</tbody>
</table>
<p>YottaDB provides two modes of character filtering. When filtering is enabled, certain &lt;CTRL&gt; characters and/or escape sequences have special effects on the cursor position (for example, &lt;BS&gt; (ASCII 8) may decrement $X, if $X is non-zero). For more information on write filtering, refer to <a class="reference internal" href="ioproc.html#filter">FILTER</a>.</p>
</section>
</section>
<section id="status-variables">
<h3><a class="toc-backref" href="ioproc.html#id53">Status Variables</a><a class="headerlink" href="ioproc.html#status-variables" title="Permalink to this heading">¶</a></h3>
<section id="device">
<h4><a class="toc-backref" href="ioproc.html#id54">$DEVICE</a><a class="headerlink" href="ioproc.html#device" title="Permalink to this heading">¶</a></h4>
<p>If the last commanded resulted in no error-condition, the value of $DEVICE, when interpreted as a truth-value is 0 (FALSE). If the status of the device reflects an error-condition, the value of $DEVICE, when interpreted as a truth-value is 1 (TRUE). When $DEVICE starts with 1, it is followed by a comma (,) and then by the text that would be in $ZSTATUS at the time of the error.</p>
<p>Examples:</p>
<p>0 indicates for READ with a zero (0) timeout that the available data has been read.</p>
<p>“1 , Device detected EOF” indicates the device reached an end-of-file condition.</p>
</section>
<section id="key">
<h4><a class="toc-backref" href="ioproc.html#id55">$KEY</a><a class="headerlink" href="ioproc.html#key" title="Permalink to this heading">¶</a></h4>
<p>$K[EY] contains the string that terminated the most recent READ command from the current device (including any introducing and terminating characters). If no READ command is issued to the current device or if no terminator is used, the value of $KEY is an empty string.</p>
<ul class="simple">
<li><p>For PIPE devices:</p>
<ul>
<li><p>$KEY contains the UNIX process id of the created process shell which executes the command connected to the PIPE.</p></li>
</ul>
</li>
<li><p>For SOCKET devices:</p>
<ul>
<li><p>$KEY includes information about a new socket in the form of CONNECT|handle|&lt;address&gt; where &lt;address&gt; is the IP address for TCP sockets and path for LOCAL sockets. Read more about <a class="reference internal" href="ioproc.html#socket-device-operation">Socket Device Operation</a>.</p></li>
<li><p>As an OPEN deviceparameter: For LISTEN, $KEY is set to the format of “LISTENING|&lt;socket_handle&gt;|{&lt;portnumber&gt;|&lt;/path/to/LOCAL_socket&gt;}” when listening for a connection is successful. Otherwise, $KEY is assigned the empty string. Read more about <a class="reference external" href="ioproc.html#listen">LISTEN deviceparameter</a>.</p></li>
</ul>
</li>
</ul>
</section>
<section id="za">
<h4><a class="toc-backref" href="ioproc.html#id56">$ZA</a><a class="headerlink" href="ioproc.html#za" title="Permalink to this heading">¶</a></h4>
<p>$ZA contains the status of the last read on the device. The value is a decimal integer with a meaning as follows:</p>
<p>For Terminal I/O:</p>
<p>0: Indicates normal termination of a read operation</p>
<p>1: Indicates a parity error</p>
<p>2: Indicates the terminator sequence was too long</p>
<p>9: Indicates a default for all other errors</p>
<p>For Sequential Disk :</p>
<p>0: Indicates normal termination of a read operation</p>
<p>9: Indicates a failure of a read operation</p>
<p>For FIFO:</p>
<p>0: Indicates normal termination or time out</p>
<p>9: Indicates a failure of a read operation</p>
<p>For SOCKET:</p>
<p>0: Indicates normal termination or time out</p>
<p>9: Indicates failure of a read operation</p>
<p>For PIPE:</p>
<p>0: Indicates normal termination or time out when using READ x:n, where n &gt;0</p>
<p>9: Indicates failure of a READ x or READ x:n, where n&gt;0</p>
<p>9: Indicates failure of a WRITE where the pipe is full and the WRITE would block</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>$ZA refers to the status of the current device. Therefore, exercise care in sequencing USE commands and references to $ZA.</p>
</div>
</section>
<section id="zb">
<h4><a class="toc-backref" href="ioproc.html#id57">$ZB</a><a class="headerlink" href="ioproc.html#zb" title="Permalink to this heading">¶</a></h4>
<p>$ZB contains a string specifying the input terminator for the last terminal READ. $ZB is null, and it is not maintained for devices other than terminals. $ZB may contain any legal input terminator, such as &lt;CR&gt; (ASCII 13) or an escape sequence starting with &lt;ESC&gt; (ASCII 27), from zero (0) to 15 bytes in length. $ZB is null for any READ terminated by a timeout or any fixed-length READ terminated by input reaching the maximum length.</p>
<p>$ZB contains the actual character string, not a sequence of numeric ASCII codes.</p>
<p>If a device is opened with CHSET set to UTF-8 or UTF-16*, $ZB contains the bad character if one is encountered. This holds true for sockets, sequential files (and thus FIFOs and PIPEs) and terminals.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set zb=$zb for i=1:1:$length(zb) write !,i,?5,$ascii(zb,i)
</pre></div>
</div>
<p>This example displays the series of ASCII codes for the characters in $ZB.</p>
<p>$ZB refers to the last READ terminator of the current device. Therefore, be careful when sequencing USE commands and references to $ZB.</p>
</section>
<section id="zeof">
<h4><a class="toc-backref" href="ioproc.html#id58">$ZEOF</a><a class="headerlink" href="ioproc.html#zeof" title="Permalink to this heading">¶</a></h4>
<p>$ZEOF contains a truth-valued expression indicating whether the last READ operation reached the end-of-file. $ZEOF is TRUE(1) at EOF and FALSE (0) at other positions. YottaDB does not maintain $ZEOF for terminal devices.</p>
<p>$ZEOF refers to the end-of-file status of the current device. Therefore, be careful when sequencing USE commands and references to $ZEOF.</p>
<p>$ZEOF is set for terminals if the connection dropped on read.</p>
</section>
<section id="zpin">
<h4><a class="toc-backref" href="ioproc.html#id59">$ZPIN</a><a class="headerlink" href="ioproc.html#zpin" title="Permalink to this heading">¶</a></h4>
<p>When $PRINCIPAL has different input/output devices, the USE command recognizes intrinsic special variable $ZPIN to apply appropriate deviceparameters to the input side of $PRINCIPAL. A USE with $ZPIN sets $IO to $PRINCIPAL for READs and WRITEs from the input and output side of $PRINCIPAL. $ZSOCKET() also accepts $ZPIN as its first argument and, if the device is a split SOCKET device, supplies information on the input SOCKET device. In any context other than USE or $ZSOCKET(), or if $PRINCIPAL is not a split device, $PRINCIPAL, $ZPIN and $ZPOUT are synonyms. In the case of a split $PRINCIPAL, $ZPIN returns the value of $PRINCIPAL followed by the string “&lt; /” Any attempt to OPEN $ZPIN results in a DEVOPENFAIL error.</p>
</section>
<section id="zpout">
<h4><a class="toc-backref" href="ioproc.html#id60">$ZPOUT</a><a class="headerlink" href="ioproc.html#zpout" title="Permalink to this heading">¶</a></h4>
<p>When $PRINCIPAL has different input/output devices, the USE command recognizes intrinsic special variables $ZPOUT to apply appropriate deviceparameters to the output side of $PRINCIPAL. A USE with $ZPOUT sets $IO to $PRINCIPAL for READs and WRITEs from the input and output side of $PRINCIPAL. $ZSOCKET() also accepts $ZPOUT as its first argument and, if the device is a split SOCKET device, supplies information on the output SOCKET device. In any context other than USE or $ZSOCKET(), or if $PRINCIPAL is not a split device, $PRINCIPAL, $ZPIN and $ZPOUT are synonyms. In the case of a split $PRINCIPAL, $ZPOUT returns the value of $PRINCIPAL followed by the string “&gt; /” Any attempt to OPEN $ZPOUT results in a DEVOPENFAIL error.</p>
</section>
</section>
</section>
<section id="i-o-devices">
<h2><a class="toc-backref" href="ioproc.html#id61">I/O Devices</a><a class="headerlink" href="ioproc.html#i-o-devices" title="Permalink to this heading">¶</a></h2>
<p>Each device type supported by YottaDB responds to a particular subset of deviceparameters, while ignoring others. Devices may be programmed in a device-specific manner, or in a device-independent manner. Device-specific I/O routines are intended for use with only one type of device. Device-independent I/O routines contain appropriate deviceparameters for all devices to be supported by the function, so the user can redirect to a different device output while using the same program.</p>
<p>YottaDB supports the following I/O device types:</p>
<ul class="simple">
<li><p>Terminals and Printers</p></li>
<li><p>Sequential Disk Files</p></li>
<li><p>FIFOs</p></li>
<li><p>Null Devices</p></li>
<li><p>Socket Devices</p></li>
<li><p>PIPE Devices</p></li>
</ul>
<section id="i-o-device-recognition">
<h3><a class="toc-backref" href="ioproc.html#id62">I/O Device Recognition</a><a class="headerlink" href="ioproc.html#i-o-device-recognition" title="Permalink to this heading">¶</a></h3>
<p>YottaDB OPEN, USE, and CLOSE commands have an argument expression specifying a device name.</p>
<p>During an OPEN, YottaDB attempts to resolve the specified device names to physical names. When YottaDB successfully resolves a device name to a physical device, that device becomes the target of the OPEN. If the device name contains a dollar sign ($), YottaDB attempts an environment variable translation; the result becomes the name of the device. If it does not find such an environment variable, it assumes that the dollar sign is a part of the filename, and opens a file by that name.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>YottaDB resolves the device name argument for menemonicspace devices (SOCKET or PIPE) to a arbitrary handle instead of a physical name.</p>
</div>
<p>Once a device is OPEN, YottaDB establishes an internal correspondence between a name and the device or file. Therefore, while the device is OPEN, changing the translation of an environment variable in the device specification does not change the device.</p>
<p>The following names identify the original $IO for the process:</p>
<ul class="simple">
<li><p>$PRINCIPAL</p></li>
<li><p>0</p></li>
</ul>
</section>
<section id="device-specification-defaults">
<h3><a class="toc-backref" href="ioproc.html#id63">Device Specification Defaults</a><a class="headerlink" href="ioproc.html#device-specification-defaults" title="Permalink to this heading">¶</a></h3>
<p>YottaDB uses standard filenames for device specifiers.</p>
<p>The complete format for a filename is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/directory/file
</pre></div>
</div>
<p>If the expression specifying a device does not contain a complete filename, the expression may start with an environment variable that translates to one or more leading components of the filename. YottaDB applies default values for the missing components.</p>
<p>If the specified file is not found, it is created unless READONLY is specified.</p>
<p>The YottaDB filename defaults are the following:</p>
<p>Directory: Current working directory</p>
<p>File: No default (user-defined filename)</p>
<p>Filetype: No default (user-defined filetype)</p>
</section>
<section id="how-i-o-device-parameters-work">
<h3><a class="toc-backref" href="ioproc.html#id64">How I/O Device Parameters Work</a><a class="headerlink" href="ioproc.html#how-i-o-device-parameters-work" title="Permalink to this heading">¶</a></h3>
<p>I/O deviceparameters either perform actions that cause the device to do something (for example, CLEARSCREEN), or specify characteristics that modify the way the device subsequently behaves (for example, WIDTH). When an I/O command has multiple action deviceparameters, YottaDB performs the actions in the order of the deviceparameters within the command argument. When a command has characteristic deviceparameters, the last occurrence of a repeated or conflicting deviceparameter determines the characteristic.</p>
<p>Deviceparameters often relate to a specific device type. YottaDB ignores any deviceparameters that do not apply to the type of the device specified by the command argument. Specified device characteristics are in force for the duration of the YottaDB image, or until modified by an OPEN, USE, or CLOSE command.</p>
<p>When reopening a device that it previously closed, a YottaDB process restores all characteristics not specified on the OPEN to the values the device had when it was last CLOSEd. YottaDB treats FIFO, PIPE, and SD differently and uses defaults for unspecified device characteristics on every OPEN (that is, YottaDB does not retain devices characteristics on a CLOSE of SD, FIFO, and PIPE).</p>
<p>The ZSHOW command with an argument of “D” displays the current characteristics for all devices OPENed by the process. ZSHOW can direct its output into a YottaDB variable. For more information on ZSHOW, refer to <a class="reference external" href="commands.html#zshow">ZSHow</a>.</p>
</section>
<section id="abbreviating-device-parameters">
<h3><a class="toc-backref" href="ioproc.html#id65">Abbreviating Device Parameters</a><a class="headerlink" href="ioproc.html#abbreviating-device-parameters" title="Permalink to this heading">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Most Z* deviceparameters have the same functionality as their counterparts and are supported for compatibility reasons.</p>
</div>
<p>YottaDB deviceparameters do not have predefined abbreviations. YottaDB recognizes deviceparameters using a minimum recognizable prefix technique. Most deviceparameters may be represented by four leading characters, except ERASELINE, all deviceparameters starting with WRITE, and Z* deviceparameters in a mnemonicspace (such as SOCKET). The four leading characters recognized do not include a leading NO for negation.</p>
<p>For compatibility with previous versions, YottaDB may recognize certain deviceparameters by abbreviations shorter than the minimum. While it is convenient in Direct Mode to use shorter abbreviations, YottaDB may add additional deviceparameters, and therefore, recommends all programs use at least four characters. Because YottaDB compiles the code, spelling out deviceparameters completely has no performance penalty, except when used with indirection or XECUTEd arguments.</p>
</section>
<section id="document-conventions">
<h3><a class="toc-backref" href="ioproc.html#id66">Document Conventions</a><a class="headerlink" href="ioproc.html#document-conventions" title="Permalink to this heading">¶</a></h3>
<p>This chapter uses the following mnemonics to describe when a deviceparameter applies:</p>
<p>TRM: Valid for terminals</p>
<p>SD: Valid for sequential disk files</p>
<p>FIFO: Valid for FIFOs</p>
<p>NULL: Valid for null devices</p>
<p>SOC: Valid for both socket devices (TCP and LOCAL)</p>
<p>SOC(LOCAL): Valid for LOCAL sockets devices</p>
<p>SOC(TCP): Valid for TCP sockets devices</p>
<p>PIPE: Valid for PIPE devices</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Lower case “pipe” refers to a UNIX pipe and the upper case “PIPE” to the YottaDB device.</p>
</div>
<p>Some of the deviceparameter defaults shown are the basic operating system defaults, and may be subject to modification before the invocation of YottaDB.</p>
</section>
<section id="device-independent-programming">
<h3><a class="toc-backref" href="ioproc.html#id67">Device-Independent Programming</a><a class="headerlink" href="ioproc.html#device-independent-programming" title="Permalink to this heading">¶</a></h3>
<p>When a user may choose a device for I/O, YottaDB routines can take one of two basic programming approaches.</p>
<ul class="simple">
<li><p>The user selection directs the program into different code branches, each of which handles a different device type.</p></li>
<li><p>The user selection identifies the device. There is a single code path written with a full complement of deviceparameters to handle all selectable device types.</p></li>
</ul>
<p>The latter approach is called device-independent programming. To permit device independent programming, YottaDB uses the same deviceparameter for all devices that have an equivalent facility, and ignores deviceparameters applied to a device that does not support that facility.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>OPEN dev:(EXCE=exc:REWIND:VARIABLE:WRITEONLY)
</pre></div>
</div>
<p>This example OPENs a device with deviceparameters that affect different devices. The EXCEPTION has an effect for all device types. When dev is a terminal or a null device, YottaDB ignores the other deviceparameters. When dev is a sequential file on disk, YottaDB uses REWIND and VARIABLE. This command performs a valid OPEN for all the different device types.</p>
</section>
</section>
<section id="using-terminals">
<h2><a class="toc-backref" href="ioproc.html#id68">Using Terminals</a><a class="headerlink" href="ioproc.html#using-terminals" title="Permalink to this heading">¶</a></h2>
<p>A YottaDB process assigns $PRINCIPAL to the UNIX standard input of the process (for READ) and standard output (for WRITE). For a local interactive process, $PRINCIPAL identifies the “terminal” from which the user is signed on.</p>
<p>While all terminals support the CTRAP deviceparameter, only $PRINCIPAL supports CENABLE. While CTRAP allows terminal input to redirect program flow, CENABLE allows the terminal user to invoke the Direct Mode.</p>
<p>Directly connected printers often appear to YottaDB as a terminal (although printers generally do not provide input) regardless of whether the printer is connected to the computer with a high speed parallel interface, or an asynchronous terminal controller.</p>
<section id="setting-terminal-characteristics">
<h3><a class="toc-backref" href="ioproc.html#id69">Setting Terminal Characteristics</a><a class="headerlink" href="ioproc.html#setting-terminal-characteristics" title="Permalink to this heading">¶</a></h3>
<p>YottaDB does not isolate its handling of terminal characteristics from the operating system environment at large. YottaDB inherits the operating system terminal characteristics in effect at the time the YottaDB image is invoked. When YottaDB exits, the terminal characteristics known by the operating system are restored.</p>
<p>However, if the process temporarily leaves the YottaDB environment with a ZSYSTEM command , YottaDB does not recognize any changes to the terminal characteristics left by the external environment. This may cause disparities between the physical behavior of the terminal, and the perceived behavior by YottaDB.</p>
<p>UNIX enforces standard device security for explicit OPENs of terminals other than the sign-in terminal ($PRINCIPAL). If you are unable to OPEN a terminal, contact your system manager.</p>
<p>USE of a terminal causes the device driver to flush the output buffer. This feature of the USE command provides routine control over the timing of output, which is occasionally required. However, it also means that redundant USE commands may induce an unnecessary performance penalty. Therefore, YottaDB recommends restricting USE commands to redirecting I/O, modifying deviceparameters, and initiating specifically required flushes.</p>
<p>The terminal input buffer size is fixed at 1024 on UNIX and a variable read terminates after 1023 characters.</p>
<p><strong>Setting the Environment Variable TERM</strong></p>
<p>The environment variable $TERM must specify a terminfo entry that accurately matches the terminal (or terminal emulator) settings. Refer to the terminfo man pages for more information on the terminal settings of the platform where YottaDB needs to run.</p>
<p>Some terminfo entries may seem to work properly but fail to recognize function key sequences or position the cursor properly in response to escape sequences from YottaDB. YottaDB itself does not have any knowledge of specific terminal control characteristics. Therefore, it is important to specify the right terminfo entry to let YottaDB communicate correctly with the terminal. You may need to add new terminfo entries depending on their specific platform and implementation. The terminal (emulator) vendor may also be able to help.</p>
<p>YottaDB uses the following terminfo capabilities. The full variable name is followed by the capname in parenthesis:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>auto_right_margin(am), clr_eos(ed), clr_eol(el), columns(cols), cursor_address(cup), cursor_down(cud1),cursor_left(cub1), cursor_right(cuf1), cursor_up(cuu1), eat_newline_glitch(xenl), key_backspace(kbs), key_dc(kdch1),key_down(kcud1), key_left(kcub1), key_right(kcuf1), key_up(kcuu1), key_insert(kich1), keypad_local(rmkx),keypad_xmit(smkx), lines(lines).
</pre></div>
</div>
<p>YottaDB sends keypad_xmit before terminal reads for direct mode and READs (other than READ *) if EDITING is enabled. YottaDB sends keypad_local after these terminal reads.</p>
</section>
<section id="logical-records-for-terminals">
<h3><a class="toc-backref" href="ioproc.html#id70">Logical Records for Terminals</a><a class="headerlink" href="ioproc.html#logical-records-for-terminals" title="Permalink to this heading">¶</a></h3>
<p>A logical record for a terminal equates to a line on the physical screen. The WIDTH device characteristic specifies the width of the screen, while the LENGTH device characteristic specifies the number of lines on the screen.</p>
</section>
<section id="read-command-for-terminals">
<h3><a class="toc-backref" href="ioproc.html#id71">Read * Command for Terminals</a><a class="headerlink" href="ioproc.html#read-command-for-terminals" title="Permalink to this heading">¶</a></h3>
<p>If the terminal has ESCAPE sequencing enabled, and the input contains a valid escape sequence or a terminator character, YottaDB stores the entire sequence in $ZB and returns the ASCII representation of the first character.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;kill
YDB&gt;use <span class="nv">$principal</span>:escape
YDB&gt;read *x <span class="nb">set</span> <span class="nv">zb</span><span class="o">=</span><span class="nv">$zb</span> zwrite
<span class="o">(</span>Press the F11 key on the VT220 terminal keyboard<span class="o">)</span>
<span class="nv">x</span><span class="o">=</span><span class="m">27</span>
<span class="nv">zb</span><span class="o">=</span><span class="nv">$C</span><span class="o">(</span><span class="m">27</span><span class="o">)</span>_<span class="s2">&quot;[23~&quot;</span>
</pre></div>
</div>
<p>This enters an escape sequence in response to a READ *. The READ * assigns the code for &lt;ESC&gt; to the variable X. YottaDB places the entire escape sequence in $ZB. As some of the characters are not graphic, that is, visible on a terminal, the example transfers the contents of $ZB to the local variable ZB and uses a ZWRITE so that the non-graphic characters appear in $CHAR() format.</p>
<p>When escape processing is disabled, READ *x returns 27 in x for an &lt;ESC&gt;. If the escape introducer is also a TERMINATOR, $ZB has a string of length one (1), and a value of the $ASCII() representation of the escape introducer; otherwise, $ZB holds the empty string. YottaDB stores the remaining characters of the escape sequence in the input stream. A READ command following a READ * command returns the remaining characters of the escape sequence.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;kill
YDB&gt;use <span class="nv">$principal</span>:<span class="o">(</span>noescape:term<span class="o">=</span><span class="nv">$char</span><span class="o">(</span><span class="m">13</span><span class="o">))</span>
YDB&gt;read *x <span class="nb">set</span> <span class="nv">zb</span><span class="o">=</span><span class="nv">$zb</span> <span class="nb">read</span> y:0 zwrite
<span class="o">(</span>Press the F11 key on the terminal keyboard<span class="o">)</span>
<span class="o">[</span><span class="m">23</span>~x<span class="o">=</span><span class="m">27</span>
<span class="nv">y</span><span class="o">=</span><span class="s2">&quot;[23~&quot;</span>
<span class="nv">zb</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
YDB&gt;use <span class="nv">$principal</span>:noecho <span class="nb">read</span> *x <span class="nb">set</span> <span class="nv">zb</span><span class="o">=</span><span class="nv">$zb</span> <span class="nb">read</span> y:0 use <span class="nv">$principal</span>:echo zwrite
<span class="nv">x</span><span class="o">=</span><span class="m">27</span>
<span class="nv">y</span><span class="o">=</span><span class="s2">&quot;[23~&quot;</span>
<span class="nv">zb</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
YDB&gt;read *x <span class="nb">set</span> <span class="nv">zb</span><span class="o">=</span><span class="nv">$zb</span> use <span class="nv">$principal</span>:flush <span class="nb">read</span> y:0 zwrite
<span class="nv">x</span><span class="o">=</span><span class="m">27</span>
<span class="nv">y</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
<span class="nv">zb</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</pre></div>
</div>
<p>While the first READ Y:0 picks up the sequence after the first character, notice how the graphic portion of the sequence appears on the terminal – this is because the READ *X separated the escape character from the rest of the sequence thus preventing the terminal driver logic from recognizing it as a sequence, and suppressing its echo. The explicit suppression of echo removes this visual artifact. In the case of the final READ *X, the FLUSH clears the input buffer so that it is empty by the time of the READ Y:0.</p>
</section>
<section id="read-x-maxlen-command-for-terminals">
<h3><a class="toc-backref" href="ioproc.html#id72">READ X#maxlen Command for Terminals</a><a class="headerlink" href="ioproc.html#read-x-maxlen-command-for-terminals" title="Permalink to this heading">¶</a></h3>
<p>Generally, YottaDB performs the same maintenance on $ZB for a READ X#maxlen as for a READ. However, if the READ X#maxlen terminates because the input has reached the maximum length, YottaDB sets $ZB to null. When the terminal has ESCAPE sequencing enabled, and the input contains an escape sequence, YottaDB sets $ZB to contain the escape sequence.</p>
</section>
<section id="terminal-deviceparameter-summary">
<h3><a class="toc-backref" href="ioproc.html#id73">Terminal Deviceparameter Summary</a><a class="headerlink" href="ioproc.html#terminal-deviceparameter-summary" title="Permalink to this heading">¶</a></h3>
<p>The following tables provide a brief summary of deviceparameters for terminals, grouped into related areas. For detailed information, refer to <a class="reference internal" href="ioproc.html#open">Open</a>, <a class="reference internal" href="ioproc.html#use">USE</a>, and <a class="reference internal" href="ioproc.html#close">CLOSE</a>.</p>
<p><strong>Error Processing Deviceparameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 35%" />
<col style="width: 25%" />
<col style="width: 41%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Device Parameter</p></th>
<th class="head"><p>Command</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>EXCEPTION=expr</p></td>
<td><p>O/U/C</p></td>
<td><p>Controls device-specific error handling.</p></td>
</tr>
</tbody>
</table>
<p><strong>Interaction Management Deviceparameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 17%" />
<col style="width: 63%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Device Parameter</p></th>
<th class="head"><p>Command</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[NO]CENABLE</p></td>
<td><p>U</p></td>
<td><p>Controls whether &lt;CTRL-C&gt; on $PRINCIPAL causes YottaDB to go to direct mode.</p></td>
</tr>
<tr class="row-odd"><td><p>CTRAP=expr</p></td>
<td><p>U</p></td>
<td><p>Controls vectoring on trapped &lt;CTRL&gt; characters.</p></td>
</tr>
<tr class="row-even"><td><p>[NO]EDITING</p></td>
<td><p>U</p></td>
<td><p>Controls the editing mode for $PRINCIPAL.</p></td>
</tr>
<tr class="row-odd"><td><p>[NO]EMPTERM</p></td>
<td><p>U</p></td>
<td><p>Control whether an “Erase” character on an empty input line should terminate a READ or READ #
command.</p></td>
</tr>
<tr class="row-even"><td><p>[NO]ESCAPE</p></td>
<td><p>U</p></td>
<td><p>Controls escape sequence processing.</p></td>
</tr>
<tr class="row-odd"><td><p>[NO]INSERT</p></td>
<td><p>U</p></td>
<td><p>Controls insert or overstrike on input.</p></td>
</tr>
<tr class="row-even"><td><p>[NO]PASTHRU</p></td>
<td><p>U</p></td>
<td><p>Controls interpretation by the operating system of special control characters (for example
&lt;CTRL-B&gt;).</p></td>
</tr>
<tr class="row-odd"><td><p>[NO]TERMINATOR[=expr]</p></td>
<td><p>U</p></td>
<td><p>Controls characters that end a READ</p></td>
</tr>
</tbody>
</table>
<p><strong>Flow Control Deviceparameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 17%" />
<col style="width: 63%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Device Parameter</p></th>
<th class="head"><p>Command</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[NO]CONVERT</p></td>
<td><p>U</p></td>
<td><p>Controls forcing input to uppercase.</p></td>
</tr>
<tr class="row-odd"><td><p>[NO]FILTER</p></td>
<td><p>U</p></td>
<td><p>Controls some $X, $Y maintenance.</p></td>
</tr>
<tr class="row-even"><td><p>FLUSH</p></td>
<td><p>U</p></td>
<td><p>Clears the typeahead buffer.</p></td>
</tr>
<tr class="row-odd"><td><p>[NO]HOSTSYNC</p></td>
<td><p>U</p></td>
<td><p>Controls host’s use of XON/XOFF.</p></td>
</tr>
<tr class="row-even"><td><p>[NO]READSYNC</p></td>
<td><p>U</p></td>
<td><p>Controls wrapping READs in XON/XOFF.</p></td>
</tr>
<tr class="row-odd"><td><p>[NO]TTSYNC</p></td>
<td><p>U</p></td>
<td><p>Controls input response to XON/XOFF.</p></td>
</tr>
<tr class="row-even"><td><p>[NO]TYPEAHEAD</p></td>
<td><p>U</p></td>
<td><p>Controls unsolicited input handling.</p></td>
</tr>
</tbody>
</table>
<p><strong>Screen Management Deviceparameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 17%" />
<col style="width: 63%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Device Parameter</p></th>
<th class="head"><p>Command</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CLEARSCREEN</p></td>
<td><p>U</p></td>
<td><p>Clears from cursor to end-of-screen.</p></td>
</tr>
<tr class="row-odd"><td><p>DOWNSCROLL</p></td>
<td><p>U</p></td>
<td><p>Moves display down one line.</p></td>
</tr>
<tr class="row-even"><td><p>[NO]ECHO</p></td>
<td><p>U</p></td>
<td><p>Controls the host echo of input.</p></td>
</tr>
<tr class="row-odd"><td><p>ERASELINE</p></td>
<td><p>U</p></td>
<td><p>Clears from cursor to end-of-line.</p></td>
</tr>
<tr class="row-even"><td><p>[Z]LENGTH=intexpr</p></td>
<td><p>U</p></td>
<td><p>Controls maximum number of lines on a page ($Y).</p></td>
</tr>
<tr class="row-odd"><td><p>UPSCROLL</p></td>
<td><p>U</p></td>
<td><p>Moves display up one line.</p></td>
</tr>
<tr class="row-even"><td><p>[Z]WIDTH=intexpr</p></td>
<td><p>U</p></td>
<td><p>Controls the maximum width of an output line ($X).</p></td>
</tr>
<tr class="row-odd"><td><p>[Z][NO]WRAP</p></td>
<td><p>U</p></td>
<td><p>Controls handling of output lines longer than the maximum width.</p></td>
</tr>
<tr class="row-even"><td><p>X=intexpr</p></td>
<td><p>U</p></td>
<td><p>Positions the cursor to column intexpr.</p></td>
</tr>
<tr class="row-odd"><td><p>Y=intexpr</p></td>
<td><p>U</p></td>
<td><p>Positions the cursor to row intexpr.</p></td>
</tr>
</tbody>
</table>
<p><strong>O</strong> : Applies to the OPEN command</p>
<p><strong>U</strong> : Applies to the USE command</p>
<p><strong>C</strong> : Applies to the CLOSE command</p>
</section>
<section id="terminal-examples">
<h3><a class="toc-backref" href="ioproc.html#id74">Terminal Examples</a><a class="headerlink" href="ioproc.html#terminal-examples" title="Permalink to this heading">¶</a></h3>
<p>This section contains examples of YottaDB terminal handling.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>use $principal:(exception=&quot;zg &quot;_$zl_&quot;:C^MENU&quot;)
</pre></div>
</div>
<p>This example USEs the principal device, and sets up an EXCEPTION handler. When an error occurs, it transfers control to label C in the routine ^MENU at the process stack level where the EXCEPTION was established.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>use $principal:(x=0:y=0:clearscreen)
</pre></div>
</div>
<p>This example positions the cursor to the upper left-hand corner and clears the entire screen.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>use $principal:(noecho:width=132:wrap)
</pre></div>
</div>
<p>This example disables ECHOing, enables automatic WRAPping, and sets the line width to 132 characters.</p>
<p>Note that YottaDB enables WRAP automatically when you specify the WIDTH deviceparameter.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>use $principal:nocenable
</pre></div>
</div>
<p>This example disables &lt;CTRL-C&gt;.</p>
</section>
<section id="m-read-editing">
<h3><a class="toc-backref" href="ioproc.html#id75">M Read Editing</a><a class="headerlink" href="ioproc.html#m-read-editing" title="Permalink to this heading">¶</a></h3>
<p>An editing capability similar to that available at the direct mode prompt exists for the READ statement when reading from the $PRINCIPAL device if that device is a terminal. In addition to the functions currently available in direct mode, it is possible to select whether characters typed other than at the end of the current input will overwrite existing characters (overwrite mode) or be inserted at the cursor as is the case currently (insert mode). Only the previous input may be recalled during a READ unlike the multiple lines available during direct mode.</p>
<p>The default EDITING and INSERT modes can be specified with an environment variable. Unless these features are enabled, the current functionality, which provides no line editing during M READ and insert mode during direct mode, will be retained.</p>
<p>Like the direct mode line editing functions, the proper functioning of editing for READ depends on setting the TERM environment variable to select a terminfo entry which matches the terminal (or terminal emulator) settings. There are some terminfo entries that may seem to work but which will fail to properly recognize function key sequences or fail to properly position the cursor in response to escape sequences from YottaDB. YottaDB itself does not have any knowledge of specific terminal functions. In some cases, new terminfo entries may need to be added. The terminfo man pages for the specific platform should be consulted for the details if this is needed. The terminal (emulator) manufacturer may be able to help.</p>
<section id="user-interface">
<h4><a class="toc-backref" href="ioproc.html#id76">User Interface</a><a class="headerlink" href="ioproc.html#user-interface" title="Permalink to this heading">¶</a></h4>
<p><strong>Editing Functions</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 33%" />
<col style="width: 31%" />
<col style="width: 36%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Editing Function</p></th>
<th class="head"><p>Key / Character</p></th>
<th class="head"><p>Direct Mode Difference</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Delete character to left of cursor</p></td>
<td><p>Delete character <a class="reference internal" href="ioproc.html#a" id="id1"><span>[a]</span></a> <a class="reference internal" href="ioproc.html#b" id="id2"><span>[b]</span></a> (ASCII 127)</p></td>
<td><p>Backspace character (ASCII 8) is also recognized.</p></td>
</tr>
<tr class="row-odd"><td><p>Move left one character</p></td>
<td><p>Left arrow key or &lt;ctrl&gt; B character</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>Move right one character</p></td>
<td><p>Right arrow key or &lt;ctrl&gt; F character</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>Insert/overstrike toggle within a direct mode line or
READ argument</p></td>
<td><p>Insert key</p></td>
<td><p>Not previously available in direct mode</p></td>
</tr>
<tr class="row-even"><td><p>Recall previous input string</p></td>
<td><p>Up Arrow key</p></td>
<td><p>Multiple lines can be scrolled through using both up and down
arrow keys</p></td>
</tr>
<tr class="row-odd"><td><p>Erase entire text to left of cursor</p></td>
<td><p>&lt;ctrl&gt;-U character (erases entire line)</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>Position cursor at start of line</p></td>
<td><p>&lt;ctrl&gt;-A character</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>Position cursor at end of line</p></td>
<td><p>&lt;ctrl&gt;-E character</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>Deletes all characters from the cursor to the end of the
line</p></td>
<td><p>&lt;ctrl&gt;-K character</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>Delete character at the cursor position</p></td>
<td><p>&lt;ctrl&gt;-D character</p></td>
<td><p>-</p></td>
</tr>
</tbody>
</table>
<dl class="citation">
<dt class="label" id="a"><span class="brackets"><a class="fn-backref" href="ioproc.html#id1">a</a></span></dt>
<dd><p>The terminal or terminal emulator may remap the backspace key to send the delete character.</p>
</dd>
<dt class="label" id="b"><span class="brackets"><a class="fn-backref" href="ioproc.html#id2">b</a></span></dt>
<dd><p>The actual character recognized for this function depends on the setting of the erase character as shown by “stty -a” which is usually the delete character.</p>
</dd>
</dl>
</section>
<section id="use-device-parameters">
<h4><a class="toc-backref" href="ioproc.html#id77">USE Device Parameters</a><a class="headerlink" href="ioproc.html#use-device-parameters" title="Permalink to this heading">¶</a></h4>
<p><strong>[NO]EDITING</strong></p>
<p>Applies to : TRM</p>
<p>When EDITING mode is enabled for the $PRINCIPAL device, the use of the left and right cursor movement keys and certain &lt;CTRL&gt; characters are allowed within the current input line. The last input can be recalled using the up or down arrow key. The editing functions are the same as during direct mode command input as described in the <a class="reference external" href="opdebug.html#line-editing">“Line Editing” section of the “Operating &amp; Debugging in Direct Mode” chapter</a> except backspace is not treated the same as the erase character from termcap which is usually delete (ASCII 127).</p>
<p>When EDITING mode is enabled, escape sequences do not terminate READs.</p>
<p>Enabling PASTHRU mode supersedes EDITING mode.</p>
<p>NOECHO disables EDITING mode.</p>
<p>If any of the EDITING &lt;CTRL&gt; characters are in the CTRAP list, their editing functions will not be available since CTRAP takes precedence. However the EDITING &lt;CTRL&gt; characters will take precedence over the TERMINATOR list.</p>
<p>By default, EDITING mode is disabled.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>M READ EDITING depends on the values of $X and $Y being correct. If the application sends its own escape sequences or control characters, which change the cursor position, it must properly update $X and $Y before doing a M READ with EDITING enabled to ensure correct formatting during input.</p>
</div>
<p><strong>[NO]INSERT</strong></p>
<p>Applies to : TRM</p>
<p>Enables or disables insert mode for the $PRINCIPAL device. When a terminal has INSERT mode enabled, input characters are inserted at the logical position in the input stream designated by the cursor, for example in the middle of the line/record. When a terminal has INSERT mode disabled, input characters overwrite existing characters in the input stream at the logical position designated by the cursor. The insert mode can be toggled within a direct mode line or if EDITING is enabled, a single READ argument’s input using the terminal’s INSERT key. The INSERT mode is reset to the default or what was last specified with USE at the beginning of each direct mode line or READ argument.</p>
<p>By default, INSERT mode is enabled.</p>
<p><strong>OVERSTRIKE</strong></p>
<p>Applies to : TRM</p>
<p>Disables INSERT mode for a terminal. OVERSTRIKE is a synonym for NOINSERT.</p>
<p>By default, INSERT mode is enabled.</p>
<p><strong>[NO]ECHO</strong></p>
<p>Applies to: TRM</p>
<p>Disabling ECHO disables the EDITING functions and any input is not available for later recall.</p>
<p><strong>[NO]PASTHRU</strong></p>
<p>Applies to: TRM</p>
<p>PASTHRU supersedes line editing.</p>
</section>
<section id="environment-variable">
<h4><a class="toc-backref" href="ioproc.html#id78">Environment Variable</a><a class="headerlink" href="ioproc.html#environment-variable" title="Permalink to this heading">¶</a></h4>
<p>By defining the environment variable “ydb_principal_editing”, the defaults for EDITING and INSERT modes can be changed for the $PRINCIPAL device when it is a terminal. The value of the variable can be [NO]EDITING and/or [NO]INSERT. If both modes are specified they should be separated by a colon (i.e. “:”) and can be in any order.</p>
<p>Examples:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">ydb_principal_editing</span><span class="o">=</span>”NOINSERT:EDITING”
<span class="nb">export</span> ydb_principal_editing

<span class="nv">ydb_principal_editing</span><span class="o">=</span>”EDITING”
<span class="nb">export</span> ydb_principal_editing
</pre></div>
</div>
</section>
<section id="direct-mode-editing">
<h4><a class="toc-backref" href="ioproc.html#id79">Direct Mode Editing</a><a class="headerlink" href="ioproc.html#direct-mode-editing" title="Permalink to this heading">¶</a></h4>
<p>When entering commands at the direct mode prompt, the insert mode can be toggled for that line by using the insert key. When YottaDB starts, insert mode is enabled unless the value of the ydb_principal_editing environment variable includes the string NOINSERT. If insert mode is disabled or enabled for the $PRINCIPAL device by a USE statement before returning to direct mode, it will remain disabled or enabled at direct mode. The insert mode can be toggled within a direct mode line using the terminal’s INSERT key.</p>
</section>
<section id="zshow-d">
<h4><a class="toc-backref" href="ioproc.html#id80">ZSHOW “D”</a><a class="headerlink" href="ioproc.html#zshow-d" title="Permalink to this heading">¶</a></h4>
<p>When EDITING mode is enabled or INSERT mode is disabled, the ZSHOW “D” output for the $PRINCIPAL device will include this information.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;zshow “D”
/dev/pts/4 OPEN TERMINAL NOPAST NOESCA NOREADS TYPE <span class="nv">WIDTH</span><span class="o">=</span><span class="m">80</span> <span class="nv">LENG</span><span class="o">=</span><span class="m">24</span> EDIT NOINSE
</pre></div>
</div>
</section>
</section>
</section>
<section id="using-sequential-files">
<h2><a class="toc-backref" href="ioproc.html#id81">Using Sequential Files</a><a class="headerlink" href="ioproc.html#using-sequential-files" title="Permalink to this heading">¶</a></h2>
<p>YottaDB provides access to sequential files. These files allow linear access to records. Sequential files are used to create programs, store reports, and to communicate with facilities outside of YottaDB.</p>
<section id="setting-sequential-file-characteristics">
<h3><a class="toc-backref" href="ioproc.html#id82">Setting Sequential File Characteristics</a><a class="headerlink" href="ioproc.html#setting-sequential-file-characteristics" title="Permalink to this heading">¶</a></h3>
<p>The ANSI standard specifies that when a process CLOSEs and then reOPENs a device, YottaDB restores any characteristics not explicitly specified with deviceparameters to the values they had prior to the last CLOSE. However, because it is difficult for a large menu-driven application to ensure the previous OPEN state, YottaDB always sets unspecified sequential file characteristics to their default value on OPEN. This approach also reduces potential memory overhead imposed by OPENing and CLOSEing a large number of sequential files during the life of a process.</p>
<p>YottaDB does not restrict multiple OPEN commands. However, if a file is already open, YottaDB ignores attempts to modify sequential file OPEN characteristics, except for RECORDSIZE and for deviceparameters that also exist for USE.</p>
<p>Sequential files can be READONLY, or read/write (NOREADONLY).</p>
<p>Sequential files can be composed of either FIXED or VARIABLE (NOFIXED) length records. By default, records have VARIABLE length.</p>
<p>UNIX enforces its standard security when YottaDB OPENs a sequential file. This includes any directory access required to locate or create the file. If you are unable to OPEN a file, contact your system manager.</p>
</section>
<section id="sequential-file-pointers">
<h3><a class="toc-backref" href="ioproc.html#id83">Sequential File Pointers</a><a class="headerlink" href="ioproc.html#sequential-file-pointers" title="Permalink to this heading">¶</a></h3>
<p>Sequential file I/O operations use a construct called a file pointer. The file pointer logically identifies the next record to read or write. OPEN commands position the file pointer at the beginning of the file (REWIND) or at the end-of-file (APPEND). APPEND cannot reposition a file currently open. Because the position of each record depends on the previous record, a WRITE destroys the ability to reliably position the file pointer to subsequent records in a file. Therefore, by default (NOTRUNCATE), YottaDB permits WRITEs only when the file pointer is positioned at the end of the file.</p>
<p>A file that has been previously created and contains data that should be retained can also be opened with the device parameter APPEND.</p>
<p>If a device has TRUNCATE enabled, a WRITE issued when the file pointer is not at the end of the file causes all contents after the current file pointer to be discarded. This effectively moves the end of the file to the current position and permits the WRITE.</p>
</section>
<section id="line-terminators">
<h3><a class="toc-backref" href="ioproc.html#id84">Line Terminators</a><a class="headerlink" href="ioproc.html#line-terminators" title="Permalink to this heading">¶</a></h3>
<p>LF ($CHAR(10)) terminates the logical record for all M mode sequential files, TRM, PIPE, and FIFO. For non FIXED format sequential files and terminal devices for which character set is not M, all the standard Unicode® line terminators terminate the logical record. These are U+000A (LF), U+0000D (CR), U+000D followed by U+000A (CRLF), U+0085 (NEL), U+000C (FF), U+2028 (LS) and U+2029 (PS).</p>
</section>
<section id="read-write-operations">
<h3><a class="toc-backref" href="ioproc.html#id85">READ/WRITE Operations</a><a class="headerlink" href="ioproc.html#read-write-operations" title="Permalink to this heading">¶</a></h3>
<p>The following table describes all READ and WRITE operations for STREAM, VARIABLE, and FIXED format sequential files having automatic record termination enabled (WRAP) or disabled (NOWRAP).</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 14%" />
<col style="width: 43%" />
<col style="width: 29%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Command</p></th>
<th class="head"><p>WRAP or NOWRAP</p></th>
<th class="head"><p>STREAM or VARIABLE format file behavior</p></th>
<th class="head"><p>FIXED format file behavior</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>READ format or WRITE or WRITE
*</p></td>
<td><p>WRAP</p></td>
<td><p>Write the entire argument, but anytime $X is about to exceed WIDTH: insert a &lt;LF&gt; character,
set $X to 0, increment $Y</p></td>
<td><p>Similar to VARIABLE but no &lt;LF&gt;</p></td>
</tr>
<tr class="row-odd"><td><p>READ format or WRITE or WRITE
*</p></td>
<td><p>NOWRAP</p></td>
<td><p>Update $X based on STREAM or VARIABLE format as described below:</p>
<p>STREAM: Write all of the argument with no truncation nor with a line terminator being inserted.
Add length of argument to $X.</p>
<p>VARIABLE ($X=WIDTH): Write up to WIDTH-$X characters. Write no more output to the device until a
WRITE ! or a SET $X makes $X less than WIDTH.</p>
</td>
<td><p>Same as VARIABLE</p></td>
</tr>
<tr class="row-even"><td><p>READ or WRITE !</p></td>
<td><p>either</p></td>
<td><p>Write &lt;LF&gt;, set $X to 0, increment $Y</p></td>
<td><p>Write PAD bytes to bring the current record to WIDTH</p></td>
</tr>
<tr class="row-odd"><td><p>WRITE #</p></td>
<td><p>either</p></td>
<td><p>Write &lt;FF&gt;,&lt;LF&gt;, set $X to 0, increment $Y</p></td>
<td><p>Write PAD bytes to bring the current record to WIDTH, then a &lt;FF&gt;
followed by WIDTH-1 PAD bytes</p></td>
</tr>
<tr class="row-even"><td><p>CLOSE</p></td>
<td><p>either</p></td>
<td><p>After a WRITE, if $X &gt; 0, Write &lt;LF&gt;</p></td>
<td><p>After a WRITE, if $X &gt;0, perform an implicit “WRITE !” adding PAD
bytes to create a full record. If you need to avoid trailing PAD
bytes set $X to 0 before closing a FIXED format file.</p></td>
</tr>
<tr class="row-odd"><td><p>READ X</p></td>
<td><p>either</p></td>
<td><p>Return characters up to $X=WIDTH, or until encountering an &lt;LF&gt; or EOF. If &lt;LF&gt; encountered, set
$X to 0, increment $Y</p></td>
<td><p>Return WIDTH characters; no maintenance of $X and $Y, except that
EOF increments $Y</p></td>
</tr>
<tr class="row-even"><td><p>READ X#len</p></td>
<td><p>either</p></td>
<td><p>Return characters up to the first of $X=WIDTH or len characters, or encountering a &lt;LF&gt; or EOF;
if up to len characters or EOF update $X, otherwise set $X to 0 and increment $Y</p></td>
<td><p>Return MIN(WIDTH, len) characters; no maintenance of $X and $Y,
except that EOF increments $Y</p></td>
</tr>
<tr class="row-odd"><td><p>READ *X</p></td>
<td><p>either</p></td>
<td><p>Return the code for one character and increment $X, if WIDTH=$X or &lt;LF&gt; encountered, set $X=0,
increment $Y; if EOF return -1</p></td>
<td><p>Return the code for one character, if EOF return -1; no
maintenance of $X and $Y, except that EOF increments $Y</p></td>
</tr>
</tbody>
</table>
<p><strong>Notes</strong></p>
<ul class="simple">
<li><p>EOF == end-of-file; &lt;FF&gt;== ASCII form feed; &lt;LF&gt; == ASCII line feed;</p></li>
<li><p>In M mode, and by default in UTF-8 mode PAD == &lt;SP&gt; == ASCII space.</p></li>
<li><p>“READ format” in this table means READ ? or READ &lt;strlit&gt;</p></li>
<li><p>A change to WIDTH implicitly sets WRAP unless NOWRAP follows in the deviceparameter list</p></li>
<li><p>In VARIABLE and STREAM mode, READ (except for READ *) never returns &lt;LF&gt; characters</p></li>
<li><p>In M mode, the last setting of RECORDSIZE or WIDTH for the device determines WIDTH</p></li>
<li><p>In M Mode, a WRITE to a sequential device after setting $X to a value greater than the device WIDTH or a reducing WIDTH to less than the current $X acts as if the first character caused $X to exceed the WIDTH induces an immediate WRAP, if WRAP is enabled</p></li>
<li><p>In UTF-8 mode, RECORDSIZE is in bytes and WIDTH is in characters and the smaller acts as the WIDTH limit in the table.</p></li>
<li><p>In UTF-8 mode, FIXED mode writes &lt;SP&gt; to the RECORDSIZE when the next character won’t fit.</p></li>
<li><p>In UTF-8 mode, all READ forms do not return trailing  PAD characters.</p></li>
<li><p>In UTF-8 mode, all characters returned by all forms of FIXED mode READ are from a single record.</p></li>
<li><p>WRITE for a Sequential Disk (SD) device works at the current file position, whether attained with APPEND, REWIND or SEEK.</p></li>
<li><p>YottaDB manages any BOM for UTF mode files by ensuring they are at the beginning of the file and produces a BOMMISMATCH error for an attempt to change the byte-ordering on OPEN for an existing file.</p></li>
<li><p>An attempt to OPEN a non-zero length file WRITEONLY without either NEWVERSION or TRUNCATE in UTF mode produces an OPENDEVFAIL due to the fact that any existing BOM information cannot be verified.</p></li>
<li><p>Note that with YottaDB SD encryption, because of the state information associated with encryption processing, encrypted files require the file to be WRITEn or READ from the beginning rather than from an arbitrary position.</p></li>
</ul>
</section>
<section id="writing-binary-files">
<h3><a class="toc-backref" href="ioproc.html#id86">Writing Binary Files</a><a class="headerlink" href="ioproc.html#writing-binary-files" title="Permalink to this heading">¶</a></h3>
<p>To write a binary data file, open it with FIXED:WRAP:CHSET=”M” and set $X to zero before the WRITE to avoid filling the last record with spaces (the default PAD byte value).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>With CHSET not “M”, FIXED has a different definition. Each record is really the same number of bytes as specified by RECORDSIZE. Padding bytes are added as needed to each record.</p>
</div>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> bincpy(inname,outname); YottaDB routine to do a binary copy from file named in argument 1 to file named in argument 2
         ;
   new adj,nrec,rsize,x
   new $etrap
   set $ecode=&quot;&quot;,$etrap=&quot;goto error&quot;,$zstatus=&quot;&quot;
   set rsize=32767                          ; max recordsize that keeps $X on track
   open inname:(readonly:fixed:recordsize=rsize:exception=&quot;goto eof&quot;)
   open outname:(newversion:stream:nowrap:chset=&quot;M&quot;)
   for nrec=1:1 use inname read x use outname write x
 eof
   if $zstatus[&quot;IOEOF&quot; do  quit
   . set $ecode=&quot;&quot;
   . close inname
   . use outname
   . set adj=$x
   . set $x=0 close outname
   . write !,&quot;Copied &quot;,$select((nrec-1)&lt;adj:adj,1:((nrec-1)*rsize)+adj),&quot; bytes from &quot;,inname,&quot; to &quot;,outname
   else  use $principal write !,&quot;Error with file &quot;,inname,&quot;:&quot;
error
   write !,$zstatus
   close inname,outname
   quit
</pre></div>
</div>
</section>
<section id="sequential-file-deviceparameter-summary">
<h3><a class="toc-backref" href="ioproc.html#id87">Sequential File Deviceparameter Summary</a><a class="headerlink" href="ioproc.html#sequential-file-deviceparameter-summary" title="Permalink to this heading">¶</a></h3>
<p>The following tables provide a brief summary of deviceparameters for sequential files grouped into related areas. For more detailed information, refer to <a class="reference internal" href="ioproc.html#open">Open</a>, <a class="reference internal" href="ioproc.html#use">USE</a>, and <a class="reference internal" href="ioproc.html#close">CLOSE</a>.</p>
<p><strong>Error Processing Deviceparameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 27%" />
<col style="width: 20%" />
<col style="width: 53%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Deviceparameter</p></th>
<th class="head"><p>Command</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>EXCEPTION=expr</p></td>
<td><p>O/U/C</p></td>
<td><p>Controls device-specific error handling.</p></td>
</tr>
</tbody>
</table>
<p><strong>File Pointer Positioning Deviceparameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 12%" />
<col style="width: 71%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Deviceparameter</p></th>
<th class="head"><p>Command</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>APPEND</p></td>
<td><p>O</p></td>
<td><p>Positions file pointer at EOF.</p></td>
</tr>
<tr class="row-odd"><td><p>REWIND</p></td>
<td><p>O/U/C</p></td>
<td><p>Positions file pointer at start of the file.</p></td>
</tr>
<tr class="row-even"><td><p>SEEK=strexpr</p></td>
<td><p>O/U</p></td>
<td><p>Positions the current file pointer to the location specified in strexpr. The format of strexpr is a string of the form “[+|-]integer” where unsigned
value specifies an offset from the beginning of the file, and an explicitly signed value specifies an offset relative to the current file position.
For STREAM or VARIABLE format, the positive intexpr after any sign is a byte offset, while for a FIXED format, it is a record offset. In order to
deal with the possible presence of a Byte Order Marker (BOM), SEEK for a FIXED format file written in a UTF character set must follow at least one
prior READ since the device was created.</p></td>
</tr>
</tbody>
</table>
<p><strong>File Format Deviceparameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 12%" />
<col style="width: 71%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Deviceparameter</p></th>
<th class="head"><p>Command</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[NO]FIXED</p></td>
<td><p>O</p></td>
<td><p>Controls whether records have fixed length.</p></td>
</tr>
<tr class="row-odd"><td><p>[Z]LENGTH=intexpr</p></td>
<td><p>U</p></td>
<td><p>Controls virtual page length.</p></td>
</tr>
<tr class="row-even"><td><p>RECORDSIZE=intexpr</p></td>
<td><p>O</p></td>
<td><p>Specifies maximum record size.</p></td>
</tr>
<tr class="row-odd"><td><p>STREAM</p></td>
<td><p>O</p></td>
<td><p>Specifies the STREAM format.</p></td>
</tr>
<tr class="row-even"><td><p>VARIABLE</p></td>
<td><p>O</p></td>
<td><p>Controls whether records have variable length.</p></td>
</tr>
<tr class="row-odd"><td><p>[Z]WIDTH=intexpr</p></td>
<td><p>U</p></td>
<td><p>Controls maximum width of an output line.</p></td>
</tr>
<tr class="row-even"><td><p>[Z][NO]WRAP</p></td>
<td><p>O/U</p></td>
<td><p>Controls handling of records longer than device width.</p></td>
</tr>
</tbody>
</table>
<p><strong>File Access Deviceparameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 12%" />
<col style="width: 71%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Deviceparameter</p></th>
<th class="head"><p>Command</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DELETE</p></td>
<td><p>C</p></td>
<td><p>Specifies file be deleted by CLOSE.</p></td>
</tr>
<tr class="row-odd"><td><p>GROUP=expr</p></td>
<td><p>O/C</p></td>
<td><p>Specifies file permissions for other users in the owner’s group.</p></td>
</tr>
<tr class="row-even"><td><p>NEWVERSION</p></td>
<td><p>O</p></td>
<td><p>Specifies YottaDB create a new version of file.</p></td>
</tr>
<tr class="row-odd"><td><p>OWNER=expr</p></td>
<td><p>O/C</p></td>
<td><p>Specifies file permissions for the owner of file.</p></td>
</tr>
<tr class="row-even"><td><p>[NO]READONLY</p></td>
<td><p>O</p></td>
<td><p>Controls read-only file access.</p></td>
</tr>
<tr class="row-odd"><td><p>RENAME=expr</p></td>
<td><p>C</p></td>
<td><p>Specifies CLOSE replace name of a disk file with name specified by expression.</p></td>
</tr>
<tr class="row-even"><td><p>SYSTEM=expr</p></td>
<td><p>O/C</p></td>
<td><p>Specifies file permissions for the owner of the file (same as OWNER).</p></td>
</tr>
<tr class="row-odd"><td><p>[NO]TRUNCATE</p></td>
<td><p>O/U</p></td>
<td><p>Controls overwriting of existing data in file.</p></td>
</tr>
<tr class="row-even"><td><p>UIC=expr</p></td>
<td><p>O/C</p></td>
<td><p>Specifies file’s owner ID.</p></td>
</tr>
<tr class="row-odd"><td><p>WORLD=expr</p></td>
<td><p>O/C</p></td>
<td><p>Specifies file permissions for users not in the owner’s group.</p></td>
</tr>
</tbody>
</table>
<p>O: Applies to the OPEN command</p>
<p>U: Applies to the USE command</p>
<p>C: Applies to the CLOSE command</p>
</section>
<section id="sequential-file-examples">
<h3><a class="toc-backref" href="ioproc.html#id88">Sequential File Examples</a><a class="headerlink" href="ioproc.html#sequential-file-examples" title="Permalink to this heading">¶</a></h3>
<p>This section contains a few brief examples of YottaDB sequential file handling.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> YDB&gt;do ^FREAD
 FREAD;
  zprint ^FREAD
  read &quot;File &gt; &quot;,sd
  set retry=0
  set $ztrap=&quot;BADAGAIN&quot;
  open sd:(readonly:exception=&quot;do BADOPEN&quot;)
  use sd:exception=&quot;goto EOF&quot;
  for  use sd read x use $principal write x,!
 EOF;
  if &#39;$zeof zmessage +$zstatus
  close sd
  quit
 BADOPEN;
  set retry=retry+1
  if retry=2 open sd
  if retry=4 halt
  if $piece($zstatus,&quot;,&quot;,1)=2 do
  . write !,&quot;The file &quot;,sd,&quot; does not exist. Retrying in about 2 seconds ...&quot;
  . hang 2.1
  . quit
  if $piece($zstatus,&quot;,&quot;,1)=13 do
  . write !,&quot;The file &quot;,sd,&quot; is not accessible. Retrying in about 3 seconds ...&quot;
  . hang 3.1
  . quit
  quit
 BADAGAIN;
  w !,&quot;BADAGAIN&quot;,!

File &gt;
</pre></div>
</div>
<p>This example asks for the name of the file and displays its contents. It OPENs that file as READONLY and specifies an EXCEPTION. The exception handler for the OPEN deals with file-not-found and file-access errors and retries the OPEN command on error. The first USE sets the EXCEPTION to handle end-of-file. The FOR loop reads the file one record at a time and transfers each record to the principal device. The GOTO in the EXCEPTION terminates the FOR loop. At label EOF, if $ZEOF is false, the code reissues the error that triggered the exception. Otherwise, the CLOSE releases the file.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;do ^formatACCT
formatACCT<span class="p">;</span>
 zprint ^formatACCT<span class="p">;</span>
 <span class="nb">set</span> <span class="nv">sd</span><span class="o">=</span><span class="s2">&quot;temp.dat&quot;</span>,acct<span class="o">=</span><span class="s2">&quot;&quot;</span>
 open sd:newversion
 use sd:width<span class="o">=</span><span class="m">132</span>
 <span class="k">for</span>  <span class="nb">set</span> <span class="nv">acct</span><span class="o">=</span><span class="nv">$order</span><span class="o">(</span>^ACCT<span class="o">(</span>acct<span class="o">))</span> quit:acct<span class="o">=</span><span class="s2">&quot;&quot;</span>  <span class="k">do</span>
 . <span class="nb">set</span> <span class="nv">rec</span><span class="o">=</span><span class="nv">$$</span>FORMAT<span class="o">(</span>acct<span class="o">)</span>
 . write:<span class="nv">$y</span>&gt;55 <span class="c1">#,hdr write !,rec</span>
 close sd
 quit
</pre></div>
</div>
<p>This OPENs a NEWVERSION of file temp.dat. The FOR loop cycles through the ^ACCT global formatting (not shown in this code fragment) lines and writing them to the file. The FOR loop uses the argumentless DO construct to break a long line of code into more manageable blocks. The program writes a header record (set up in initialization and not shown in this code fragment) every 55 lines, because that is the application page length, allowing for top and bottom margins.</p>
</section>
</section>
<section id="fifo-characteristics">
<h2><a class="toc-backref" href="ioproc.html#id89">FIFO Characteristics</a><a class="headerlink" href="ioproc.html#fifo-characteristics" title="Permalink to this heading">¶</a></h2>
<p>FIFOs have most of the same characteristics as other sequential files, except that READs and WRITEs can occur in any order.</p>
<p>The following characteristics of FIFO behavior may be helpful in using them effectively.</p>
<p>With READ:</p>
<ul class="simple">
<li><p>If a READ is done while there is no data in the FIFO:</p></li>
<li><p>The process hangs until data is put into the FIFO by another process, or the READ times out, when a timeout is specified.</p></li>
</ul>
<p>The following table shows the result and the values of I/O status variables for different types of READ operations on a FIFO device.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 22%" />
<col style="width: 19%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Result</p></th>
<th class="head"><p>$DEVICE</p></th>
<th class="head"><p>$ZA</p></th>
<th class="head"><p>$TEST</p></th>
<th class="head"><p>X</p></th>
<th class="head"><p>$ZEOF</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>READ X:n</p></td>
<td><p>Normal Termination</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>DATA READ</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>READ X:n</p></td>
<td><p>Timeout with no data read</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>empty string</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>READ X:n</p></td>
<td><p>Timeout with partial data read</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>partial data</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>READ X:n</p></td>
<td><p>End of File</p></td>
<td><p>1,Device detected EOF</p></td>
<td><p>9</p></td>
<td><p>1</p></td>
<td><p>empty string</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>READ X:0</p></td>
<td><p>Normal Termination</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>DATA READ</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>READ X:0</p></td>
<td><p>No data available</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>empty string</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>READ X:0</p></td>
<td><p>Timeout with partial data read</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>Partial data</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>READ X:0</p></td>
<td><p>End of File</p></td>
<td><p>1,Device detected EOF</p></td>
<td><p>9</p></td>
<td><p>1</p></td>
<td><p>empty string</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>READ X</p></td>
<td><p>Error</p></td>
<td><p>1,&lt;error signature&gt;</p></td>
<td><p>9</p></td>
<td><p>n/c</p></td>
<td><p>empty string</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<p>With WRITE:</p>
<ul class="simple">
<li><p>The FIFO device does non-blocking writes. If a process tries to WRITE to a full FIFO and the WRITE would block, the device implicitly tries to complete the operation up to a default of 10 times. If the ydb_non_blocked_write_retries environment variable is defined, this overrides the default number of retries. If the retries do not succeed (remain blocked), the WRITE sets $DEVICE to “1,Resource temporarily unavailable”, $ZA to 9, and produces an error. If the YottaDB process has defined an EXCEPTION, $ETRAP or $ZTRAP, the error trap may choose to retry the WRITE after some action or delay that might remove data from the FIFO device.</p></li>
<li><p>While it is hung, the process will not respond to &lt;CTRL-C&gt;.</p></li>
</ul>
<p>With CLOSE:</p>
<ul class="simple">
<li><p>The FIFO is not deleted unless the DELETE qualifier is specified.</p></li>
<li><p>If a process closes the FIFO with the DELETE qualifier, the FIFO becomes unavailable to new users at that time.</p></li>
<li><p>All processes currently USEing the FIFO may continue to use it, until the last process attached to it CLOSES it, and is destroyed.</p></li>
<li><p>Any process OPENing a FIFO with the same name as a deleted FIFO creates a new one to which subsequent OPENs attach.</p></li>
<li><p>The default access permissions on a FIFO are the same as the mask settings of the process that created the FIFO. Use the SYSTEM, GROUP, WORLD, and UIC deviceparameters to specify FIFO access permissions. File permissions have no affect on a process that already has the FIFO open.</p></li>
</ul>
<section id="considerations-in-implementing-fifos">
<h3><a class="toc-backref" href="ioproc.html#id90">Considerations in implementing FIFOs</a><a class="headerlink" href="ioproc.html#considerations-in-implementing-fifos" title="Permalink to this heading">¶</a></h3>
<p>As you establish FIFOs for interprocess communication, consider whether, and how, the following issues will be addressed:</p>
<ul class="simple">
<li><p>Do READs occur immediately, or can the process wait?</p></li>
<li><p>Are timed READs useful to avoid system hangs and provide a way to remove the process?</p></li>
<li><p>Does the WRITE process need to know whether the READ data was received?</p></li>
<li><p>Will there be multiple processes READing and WRITEing into a single FIFO?</p></li>
</ul>
</section>
<section id="error-handling-for-fifos">
<h3><a class="toc-backref" href="ioproc.html#id91">Error Handling for FIFOs</a><a class="headerlink" href="ioproc.html#error-handling-for-fifos" title="Permalink to this heading">¶</a></h3>
<p>Deleting devices (or files) created by an OPEN which has an error has deeper implications when that device, especially a FIFO, serves as a means of communications between a two processes. If one process OPENs a FIFO device for WRITE, there is an interval during which another process can OPEN the same device for READ. During that interval the writer process can encounter an error (for example, an invalid parameter) causing YottaDB to delete the device, but the reader process can complete its OPEN successfully. This sequence results in a process with an orphaned device open for READ. Any other process that OPENs the same device for WRITE creates a new instance of it, so the reader can never find data to READ from the orphaned device. Since YottaDB has insufficient context to enforce process synchronization between reader and writer, the application must use appropriate communication protocols and error handling techniques to provide synchronization between processes using files and FIFOs for communication.</p>
</section>
<section id="yottadb-recognition-of-fifos">
<h3><a class="toc-backref" href="ioproc.html#id92">YottaDB Recognition of FIFOs</a><a class="headerlink" href="ioproc.html#yottadb-recognition-of-fifos" title="Permalink to this heading">¶</a></h3>
<p>Like a sequential file, the path of a FIFO is specified as an argument expression to the OPEN, USE, and CLOSE commands. A device OPENed with a FIFO deviceparameter becomes a FIFO unless another device of that name is already OPEN. In that case, OPENing a device that has previously been OPENed by another process as a FIFO causes the process (the process here is the process trying to open the FIFO) to attach to the existing FIFO.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If an existing named pipe (fifo special file) is OPENed even without specifying the FIFO deviceparameter, it is treated as if FIFO had been specified.</p>
</div>
</section>
<section id="fifo-device-examples">
<h3><a class="toc-backref" href="ioproc.html#id93">FIFO Device Examples</a><a class="headerlink" href="ioproc.html#fifo-device-examples" title="Permalink to this heading">¶</a></h3>
<p>The following two examples represent a master/slave arrangement where the slave waits in a read state on the FIFO until the master sends it some data that it then processes.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set x=&quot;named.pipe&quot;
open x:fifo
do getres
use x write res,!
</pre></div>
</div>
<p>This routine opens the FIFO, performs its own processing which includes starting the slave process (not shown in this code fragment).</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set x=&quot;named.pipe&quot;
open x:fifo
use x read res
do process(res)
</pre></div>
</div>
<p>This routine waits for information from the master process, then begins processing.</p>
</section>
<section id="fifo-deviceparameter-summary">
<h3><a class="toc-backref" href="ioproc.html#id94">FIFO Deviceparameter Summary</a><a class="headerlink" href="ioproc.html#fifo-deviceparameter-summary" title="Permalink to this heading">¶</a></h3>
<p>The following table summarizes the deviceparameters that can be used with FIFOs.</p>
<p><strong>File Format Deviceparameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Deviceparameter</p></th>
<th class="head"><p>Command</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[NO]FIXED</p></td>
<td><p>O</p></td>
<td><p>Controls whether records have fixed length.</p></td>
</tr>
<tr class="row-odd"><td><p>[Z]LENGTH=intexpr</p></td>
<td><p>U</p></td>
<td><p>Controls the virtual page length.</p></td>
</tr>
<tr class="row-even"><td><p>RECORDSIZE=intexpr</p></td>
<td><p>O</p></td>
<td><p>Specifies the maximum record size</p></td>
</tr>
<tr class="row-odd"><td><p>VARIABLE</p></td>
<td><p>O</p></td>
<td><p>Controls whether records have variable length.</p></td>
</tr>
<tr class="row-even"><td><p>[Z]WIDTH=intexpr</p></td>
<td><p>U</p></td>
<td><p>Sets the device’s logical record size and enables WRAP.</p></td>
</tr>
<tr class="row-odd"><td><p>[Z][NO]WRAP</p></td>
<td><p>O/U</p></td>
<td><p>Controls the handling of records longer than the device width.</p></td>
</tr>
</tbody>
</table>
<p><strong>File Access Deviceparameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 16%" />
<col style="width: 70%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Deviceparameter</p></th>
<th class="head"><p>Command</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>DELETE</p></td>
<td><p>C</p></td>
<td><p>Specifies that the FIFO should be deleted when the last user closes it. If specified on an OPEN, DELETE is activated only at the time of
the close. No new attachments are allowed to a deleted FIFO and any new attempt to use a FIFO with the name of the deleted device creates
a new device.</p></td>
</tr>
<tr class="row-odd"><td><p>GROUP=expr</p></td>
<td><p>O/C</p></td>
<td><p>Specifies file permissions for other users in owner’s group.</p></td>
</tr>
<tr class="row-even"><td><p>[NO]READONLY</p></td>
<td><p>O</p></td>
<td><p>OPENs a device for reading only (READONLY) or reading and writing (NOREADONLY).</p></td>
</tr>
<tr class="row-odd"><td><p>OWNER=expr</p></td>
<td><p>O/C</p></td>
<td><p>Specifies file permissions for owner of file.</p></td>
</tr>
<tr class="row-even"><td><p>RENAME=expr</p></td>
<td><p>C</p></td>
<td><p>Specifies that CLOSE replace the name of a disk file with the name specified by the expression.</p></td>
</tr>
<tr class="row-odd"><td><p>SYSTEM=expr</p></td>
<td><p>O/C</p></td>
<td><p>Specifies file permissions for owner of file (same as OWNER).</p></td>
</tr>
<tr class="row-even"><td><p>UIC=expr</p></td>
<td><p>O/C</p></td>
<td><p>Specifies the file’s owner ID.</p></td>
</tr>
<tr class="row-odd"><td><p>WORLD=expr</p></td>
<td><p>O/C</p></td>
<td><p>Specifies file permissions for users not in the owner’s group.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="using-null-devices">
<h2><a class="toc-backref" href="ioproc.html#id95">Using NULL Devices</a><a class="headerlink" href="ioproc.html#using-null-devices" title="Permalink to this heading">¶</a></h2>
<p>Null devices comprise of a collection of system purpose devices that include /dev/null, /dev/zero, /dev/random, and /dev/urandom.</p>
<ul class="simple">
<li><p>/dev/null returns a null string on READ and sets $ZEOF</p></li>
<li><p>/dev/random and /dev/urandom return a random value on READ and set $ZEOF</p></li>
<li><p>/dev/zero returns 0’s on READ and does not set $ZEOF</p></li>
</ul>
<p>A null device discards all output. YottaDB maintains a virtual cursor position for null devices as it does for terminals on output. Use null devices for program testing and debugging, or for jobs that permit I/O to be discarded under certain circumstances. For example, JOB processes must have input and output devices associated with them, even though they do not use them. Null devices are low overhead never-fail alternatives for certain classes of I/O.</p>
<section id="null-deviceparameter-summary">
<h3><a class="toc-backref" href="ioproc.html#id96">NULL Deviceparameter Summary</a><a class="headerlink" href="ioproc.html#null-deviceparameter-summary" title="Permalink to this heading">¶</a></h3>
<p>The following table provides a brief summary of deviceparameters for null devices. For more detailed information, refer to <a class="reference internal" href="ioproc.html#open">Open</a>, <a class="reference internal" href="ioproc.html#use">USE</a>, and <a class="reference internal" href="ioproc.html#close">CLOSE</a>.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 15%" />
<col style="width: 71%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Deviceparameter</p></th>
<th class="head"><p>Command</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>EXCEPTION=expr</p></td>
<td><p>O/U/C</p></td>
<td><p>Controls device-specified error handling. For the null device this is only EOF handling and therefore exceptions can never be invoked except
by a READ.</p></td>
</tr>
<tr class="row-odd"><td><p>[NO]FILTER[=expr]</p></td>
<td><p>U</p></td>
<td><p>Controls some $X,$Y maintenance.</p></td>
</tr>
<tr class="row-even"><td><p>[Z]LENGTH=intexpr</p></td>
<td><p>U</p></td>
<td><p>Controls the length of the virtual page.</p></td>
</tr>
<tr class="row-odd"><td><p>[Z]WIDTH=intexpr</p></td>
<td><p>U</p></td>
<td><p>Controls maximum size of a record.</p></td>
</tr>
<tr class="row-even"><td><p>[Z][NO]WRAP</p></td>
<td><p>O/U</p></td>
<td><p>Controls handling of records longer than the maximum width.</p></td>
</tr>
<tr class="row-odd"><td><p>X=intexpr</p></td>
<td><p>U</p></td>
<td><p>Sets $X to intexpr.</p></td>
</tr>
<tr class="row-even"><td><p>Y=intexpr</p></td>
<td><p>U</p></td>
<td><p>Sets $Y to intexpr.</p></td>
</tr>
</tbody>
</table>
<p>O: Applies to the OPEN command</p>
<p>U: Applies to the USE command</p>
<p>C: Applies to the CLOSE command</p>
</section>
<section id="null-device-examples">
<h3><a class="toc-backref" href="ioproc.html#id97">NULL Device Examples</a><a class="headerlink" href="ioproc.html#null-device-examples" title="Permalink to this heading">¶</a></h3>
<p>This section contains examples of null device usage.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;do ^runrep
runrep<span class="p">;</span>
 zprint ^runrep
 <span class="nb">set</span> <span class="nv">dev</span><span class="o">=</span><span class="s2">&quot;/dev/null&quot;</span>
 <span class="nb">set</span> <span class="nv">hdr</span><span class="o">=</span><span class="s2">&quot;********* REPORT HEADER ************&quot;</span>
 open dev use dev
 <span class="nb">set</span> <span class="nv">x</span><span class="o">=</span><span class="s2">&quot;&quot;</span> write hdr,!,<span class="nv">$zdate</span><span class="o">(</span><span class="nv">$horolog</span><span class="o">)</span>,?30,<span class="nv">$job</span>,!
 <span class="k">for</span>  <span class="nb">set</span> <span class="nv">x</span><span class="o">=</span><span class="nv">$order</span><span class="o">(</span>^tmp<span class="o">(</span><span class="nv">$job</span>,x<span class="o">))</span> quit:x<span class="o">=</span><span class="s2">&quot;&quot;</span>  <span class="k">do</span> REPORT
 quit
REPORT<span class="p">;</span>
 <span class="p">;</span>large amount of code
 quit<span class="p">;</span>
</pre></div>
</div>
<p>This program produces a report derived from the information in the global variable ^tmp. The unspecified routine REPORT may potentially contain a large amount of code. To see that the basic program functions without error, the programmer may discard the output involved in favor of watching the function. To run the program normally, the programmer simply has to change the variable dev to name another device and the routine REPORT writes to the dev device.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>job ^X:(in=&quot;/dev/null&quot;:out=&quot;/dev/null&quot;:err=&quot;error.log&quot;)
JOB ^X:(IN=&quot;/dev/null&quot;:OUT=&quot;/dev/null&quot;:ERR=&quot;error.log&quot;)
</pre></div>
</div>
<p>This example issues a YottaDB JOB command to execute the routine ^X in another process. This routine processes a large number of global variables and produces no output. In the example, the JOBbed process takes its input from a null device, and sends its output to a null device. If the JOBbed process encounters an error, it directs the error message to error.log.</p>
</section>
</section>
<section id="using-pipe-devices">
<h2><a class="toc-backref" href="ioproc.html#id98">Using PIPE Devices</a><a class="headerlink" href="ioproc.html#using-pipe-devices" title="Permalink to this heading">¶</a></h2>
<p>A PIPE device is used to access and manipulate the input and/or output of a shell command as a YottaDB I/O device. YottaDB maintains I/O status variables for a PIPE device just as it does for other devices. An OPEN of the device starts a sub-process. Data written to the device by the M program is available to the process on its STDIN. The M program can read the STDOUT and STDERR of the sub-process. This facilitates output only applications, such as printing directly from a YottaDB program to an lp command; input only applications, such as reading the output of a command such as ps; and co-processing applications, such as using iconv to convert data from one encoding to another.</p>
<p>A PIPE is akin to a FIFO device. Both FIFO and PIPE map YottaDB devices to UNIX pipes, the conceptual difference being that whereas a FIFO device specifies a named pipe, but does not specify the process on the other end of the pipe, a PIPE device specifies a process to communicate with, but the pipes are unnamed. Specifically, an OPEN of a PIPE creates a subprocess with which the YottaDB process communicates.</p>
<p>A PIPE device is specified with a “PIPE” value for mnemonicspace on an OPEN command.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>YottaDB ignores the mnemonicspace specification on an OPEN of a previously OPEN device and leaves the existing device with its original characteristics.</p>
</div>
<section id="modes-of-pipe-operation">
<h3><a class="toc-backref" href="ioproc.html#id99">Modes of PIPE Operation</a><a class="headerlink" href="ioproc.html#modes-of-pipe-operation" title="Permalink to this heading">¶</a></h3>
<p>The OPEN command for a PIPE provides a number of variations in the use of UNIX pipes shown below as Examples 1-4.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set p=&quot;Printer&quot;
open p:(command=&quot;lpr&quot;:writeonly)::&quot;PIPE&quot;
</pre></div>
</div>
<p>This shows the use of a PIPE device to spool data to the default printer by spooling to the lpr command, opened via the default shell (the shell specified by the SHELL environment variable, and the shell used to start YottaDB if SHELL is unspecified). The WRITEONLY device parameter specifies that the YottaDB process not read data back from the lpr command. Use WRITEONLY when no errors are expected from the application(s) in the pipe. WRITEONLY tends not to serve most applications well.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set p=&quot;MyProcs&quot;
open p:(command=&quot;ps -ef|grep $USER&quot;:readonly)::&quot;PIPE&quot;
</pre></div>
</div>
<p>This shows the use of a PIPE device to identify processes belonging to the current userid. The READONLY device parameter specifies that the YottaDB process only read the output of the pipe, and not provide it with any input. This example illustrates the fact that the command can be any shell command, can include environment variables and pipes within the command.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Flags to the ps command vary for different UNIX platforms.</p>
</div>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set p=&quot;Convert&quot;
open p:(shell=&quot;/bin/csh&quot;:command=&quot;iconv -f ISO_8859-1 -t WINDOWS-1252&quot;)::&quot;PIPE&quot;
</pre></div>
</div>
<p>This shows the use of a process to whose input the YottaDB process writes to and whose output the YottaDB process reads back in, in this example converting data from an ISO 8859-1 encoding to the Windows 1252 encoding. This example also shows the use of a different shell from the default. If the OPEN deviceparameters don’t specify a SHELL, the PIPE device uses the shell specified by the environment variable SHELL; if it does not find a definition for SHELL, the device uses the system default /bin/sh.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set p=&quot;Files&quot;
set e=&quot;Errors&quot;
open p:(command=&quot;find /var/log -type d -print&quot;:readonly:stderr=e)::&quot;PIPE&quot;
</pre></div>
</div>
<p>YottaDB uses the standard system utility find to obtain a list of subdirectories of /var/log, which are read back via the device with handle “Files” with any errors (for example, “Permission denied” messages for sub-directories that the find command cannot process) read back via the device with handle “Errors”.</p>
</section>
<section id="pipe-characteristics">
<h3><a class="toc-backref" href="ioproc.html#id100">PIPE Characteristics</a><a class="headerlink" href="ioproc.html#pipe-characteristics" title="Permalink to this heading">¶</a></h3>
<p>The following characteristics of PIPE may be helpful in using them effectively.</p>
<p>With Read:</p>
<p>A READ with no timeout reads whatever data is available to be read; if there is no data to be read, the process hangs until some data becomes available.</p>
<p>A READ with a timeout reads whatever data is available to be read, and returns; if there is no data to be read, the process waits for a maximum of the timeout period, an integer number of seconds, for data to become available (if the timeout is zero, it returns immediately, whether or not any data was read). If the READ returns before the timeout expires, it sets $TEST to TRUE(1); if the timeout expires, it sets $TEST to FALSE (0). When the READ command does not specify a timeout, it does not change $TEST. READ specifying a maximum length (for example, READ X#10 for ten characters) reads until either the PIPE has supplied the specified number of characters, or a terminating delimiter.</p>
<p>The following table shows the result and values of I/O status variables for various READ operations on a PIPE device.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 17%" />
<col style="width: 13%" />
<col style="width: 11%" />
<col style="width: 14%" />
<col style="width: 18%" />
<col style="width: 14%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Operation</p></th>
<th class="head"><p>Result</p></th>
<th class="head"><p>$DEVICE</p></th>
<th class="head"><p>$ZA</p></th>
<th class="head"><p>$TEST</p></th>
<th class="head"><p>X</p></th>
<th class="head"><p>$ZEOF</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>READ X:n</p></td>
<td><p>Normal Termination</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>Data Read</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>READ X:n</p></td>
<td><p>Timeout with no data read</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>empty string</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>READ X:n</p></td>
<td><p>Timeout with partial data read</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>Partial data</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>READ X:n</p></td>
<td><p>End of File</p></td>
<td><p>1,Device detected EOF</p></td>
<td><p>9</p></td>
<td><p>1</p></td>
<td><p>empty string</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>READ X:0</p></td>
<td><p>Normal Termination</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>1</p></td>
<td><p>Data Read</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>READ X:0</p></td>
<td><p>No data available</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>empty string</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>READ X:0</p></td>
<td><p>Timeout with partial data read</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>0</p></td>
<td><p>Partial data</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-odd"><td><p>READ X:0</p></td>
<td><p>End of File</p></td>
<td><p>1,Device detected EOF</p></td>
<td><p>9</p></td>
<td><p>1</p></td>
<td><p>empty string</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>READ X</p></td>
<td><p>Error</p></td>
<td><p>1,&lt;error signature&gt;</p></td>
<td><p>9</p></td>
<td><p>n/c</p></td>
<td><p>empty string</p></td>
<td><p>0</p></td>
</tr>
</tbody>
</table>
<p>With WRITE:</p>
<p>The PIPE device does non-blocking writes. If a process tries to WRITE to a full PIPE and the WRITE would block, the device implicitly tries to complete the operation up to a default of 10 times. If the ydb_non_blocked_write_retries environment variable is defined, this overrides the default number of retries. If the retries do not succeed (remain blocked), the WRITE sets $DEVICE to “1,Resource temporarily unavailable”, $ZA to 9, and produces an error. If the YottaDB process has defined an EXCEPTION, $ETRAP or $ZTRAP, the error trap may choose to retry the WRITE after some action or delay that might remove data from the PIPE device.</p>
<p>With WRITE /EOF:</p>
<p>WRITE /EOF to a PIPE device flushes, sets $X to zero (0) and terminates output to the created process, but does not CLOSE the PIPE device. After a WRITE /EOF, any additional WRITE to the device discards the content, but READs continue to work as before. A WRITE /EOF signals the receiving process to expect no further input, which may cause it to flush any output it has buffered and terminate. You should explicitly CLOSE the PIPE device after finishing all READs. If you do not want WRITE /EOF to flush any pending output including padding in FIXED mode or a terminating EOL in NOFIXED mode, SET $X=0 prior to the WRITE /EOF.</p>
<p>To avoid an indefinite hang doing a READ from a created process that buffers its output to the input of the PIPE device, READ with timeout (typically 0).</p>
<p>With CLOSE:</p>
<p>The CLOSE of a PIPE device prevents all subsequent access to the pipes associated with the device. Unless the OPEN that created the device specified INDEPENDENT, the process terminates. Note that any subsequent attempt by the created process to read from its stdin (which would be a closed pipe) returns an EOF and typical UNIX behavior would be to terminate on such an event.</p>
</section>
<section id="pipe-device-examples">
<span id="pipe-device-ex"></span><h3><a class="toc-backref" href="ioproc.html#id101">PIPE Device Examples</a><a class="headerlink" href="ioproc.html#pipe-device-examples" title="Permalink to this heading">¶</a></h3>
<p>The following examples show the use of deviceparameters and status variables with PIPE devices.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> pipe1;
set p1=&quot;test1&quot;
open p1:(shell=&quot;/bin/sh&quot;:comm=&quot;cat&quot;)::&quot;PIPE&quot;
for i=1:1:10 do
. use p1
. write i,&quot;:abcdefghijklmnopqrstuvwxyz abcdefghijklmnopqrstuvwxyz &quot;,!
. read x
. use $P
. write x,!
close p1
quit
</pre></div>
</div>
<p>This WRITEs 10 lines of output to the cat command and reads the cat output back into the local variable x. The YottaDB process WRITEs each line READ from the PIPE to the principal device. This example works because “cat” is not a buffering command. The example above would not work for a command such as tr that buffers its input.</p>
<p>Example :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> pipe3;
set p1=&quot;test1&quot;
open p1:(shell=&quot;/bin/sh&quot;:command=&quot;tr -d e&quot;)::&quot;PIPE&quot;
for i=1:1:1000 do
. use p1
. write i,&quot;:abcdefghijklmnopqrstuvwxyz abcdefghijklmnopqrstuvwxyz &quot;,!
. read x:0
. if &#39;+$device use $principal write x,!
use p1
write /EOF
for  read x quit:$zeof  use $principal write x,! use p1
close p1
quit
</pre></div>
</div>
<p>This shows the use of tr (a buffering command) in the created process for the PIPE device. To see the buffering effect the YottaDB process WRITEs 1000 lines to the PIPE device. Different operating systems may have different buffer sizes. Notice the use of the r x:0 and the check on $DEVICE in the loop. If $DEVICE is 0, WRITE x writes the data read to the principal device. No actual READs complete, however, until tr reaches its buffer size and writes to its stdout. The final few lines remain buffered by tr after the process finishes the first loop. The YottaDB process then issues a WRITE /EOF to the PIPE causing tr to flush its buffered lines. In the final for loop the YottaDB process uses the simple form of READ x from the PIPE followed by a WRITE of each line to the principal device until $zeof becomes TRUE.</p>
<p>Example :</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> pipe4;
set a=&quot;test&quot;
open a:(command=&quot;nestin&quot;:independent)::&quot;PIPE&quot;
use a
set key=$KEY
write &quot;Show ntestin still running after CLOSE of a&quot;,!
write &quot;The parent process of 1 shows the parent shell has exited after CLOSE of a&quot;
read line1,line2
use $principal
write !,line1,!,line2,!,!
set k=&quot;ps -ef | grep -v grep | grep -v sh | grep -w &#39;&quot;_key_&quot;&#39; | awk &#39;{print $2}&#39;&quot;
set b=&quot;getpid&quot;
open b:(command=k:readonly)::&quot;PIPE&quot;
use b
read pid
close a
close b
set k2=&quot;ps -ef | grep -v grep | grep -v sh | grep -w &#39;&quot;_pid_&quot;&#39;&quot;
set c=&quot;psout&quot;
open c:(command=k2:writeonly)::&quot;PIPE&quot;
close c
quit
</pre></div>
</div>
<p>This demonstrates that the created process nestin keeps running as an INDEPENDENT process after the YottaDB process CLOSEs the pipe. This YottaDB process uses another PIPE device to return the process id of ntestin and READ it into pid so that it may be killed by this or another process, should that be appropriate.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>“nestin.c” is a program which reads from standard input and writes to standard output until it see and EOF.  It then loops for 300 1sec sleeps doing nothing.  The purpose of using independent is as a server process which continues until it receives some other signal for termination.</p>
</div>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;kill ^a
YDB&gt;zprint ^indepserver
indepserver<span class="p">;</span>
  <span class="nb">read</span> x
  write <span class="s2">&quot;received = &quot;</span>,x,!
  <span class="nb">set</span> ^quit<span class="o">=</span><span class="m">0</span>
  <span class="k">for</span>  <span class="k">do</span>  quit:^quit
  . <span class="k">if</span> <span class="nv">$data</span><span class="o">(</span>^a<span class="o">)</span> write <span class="s2">&quot;^a = &quot;</span>,^a,!
  . Hang <span class="m">5</span>
YDB&gt;set <span class="nv">a</span><span class="o">=</span><span class="s2">&quot;test&quot;</span>
YDB&gt;open a:<span class="o">(</span><span class="nv">command</span><span class="o">=</span><span class="s2">&quot;yottadb -run ^indepserver&gt;indout&quot;</span>:independent<span class="o">)</span>::<span class="s2">&quot;pipe&quot;</span>
YDB&gt;use a
YDB&gt;write <span class="s2">&quot;instructions&quot;</span>,!
YDB&gt;close a
YDB&gt;zsystem <span class="s2">&quot;cat indout&quot;</span>
<span class="nv">received</span> <span class="o">=</span> instructions
YDB&gt;set ^a<span class="o">=</span><span class="m">1</span>
YDB&gt;zsystem <span class="s2">&quot;cat indout&quot;</span>
<span class="nv">received</span> <span class="o">=</span> instructions
^a <span class="o">=</span> <span class="m">1</span>
^a <span class="o">=</span> <span class="m">1</span>
^a <span class="o">=</span> <span class="m">1</span>
YDB&gt;s ^quit<span class="o">=</span><span class="m">1</span>
YDB&gt;zsystem <span class="s2">&quot;cat indout&quot;</span>
<span class="nv">received</span> <span class="o">=</span> instructions
^a <span class="o">=</span> <span class="m">1</span>
^a <span class="o">=</span> <span class="m">1</span>
^a <span class="o">=</span> <span class="m">1</span>
^a <span class="o">=</span> <span class="m">1</span>
YDB&gt;
</pre></div>
</div>
<p>This is a simple example using a yottadb process as a server.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span> pipe5;
set p1=&quot;test1&quot;
set a=0
open p1:(shell=&quot;/bin/sh&quot;:command=&quot;cat&quot;:exception=&quot;goto cont1&quot;)::&quot;PIPE&quot;
set c=&quot;:abcdefghijklmnopqrstuvwxyz abcdefghijklmnopqrstuvwxyz&quot;
for i=1:1:10000  do
. use p1
. write i_c,!
. use $principal write i,!
use p1
write /EOF
for  read x quit:$zeof  use $principal write x,! use p1
close p1
quit
cont1
if $zeof quit
if a=0 set a=i/2
set z=$za
; use $device to make sure ztrap is caused by blocked write to pipe
set d=$device
if &quot;1,Resource temporarily unavailable&quot;=d DO
. use $p
. write &quot;pipe full, i= &quot;,i,&quot; $ZA = &quot;,z,!
. set i=i-1
. use p1
. for j=1:1:a  read x use $principal write j,&quot;-&quot;,x,! use p1
quit
</pre></div>
</div>
<p>This demonstrates how to deal with write blocking of a PIPE device. The loop doing the WRITE does not READ from the PIPE. Eventually causing the output of cat to block on its output and stop reading input from the pipe. When the process takes the $ZTRAP to cont1 it tests $DEVICE to determine if the trap is caused by the full pipe. If so, it uses the for loop to read half the number of lines output by the main loop. It decrements i and returns to the original WRITE loop to retry the failed line and continue with the WRITEs to the pipe. Depending upon the configuration of the environment, it may trap several times before processing all lines.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>; Example program that starts another program in a pipe and traps the errors. The called
; programs intentionally induce errors
pipexample
  set $etrap=&quot;do readfrompipe(.pipe,.piperr) use $p zwrite $zstatus zhalt 99&quot;
  set pipe=&quot;pipe&quot;
  set piperr=&quot;piperr&quot;
  set writesize=1024
  set cmd=$piece($zcmdline,&quot; &quot;) set:&#39;$length(cmd) cmd=&quot;induceEPIPE&quot;
  open pipe:(shell=&quot;/bin/bash&quot;:command=&quot;$ydb_dist/yottadb -run &quot;_cmd_&quot;^pipexample&quot;:stderr=piperr)::&quot;pipe&quot;
  zshow &quot;D&quot;:devicelist write &quot;The active device is &quot;,devicelist(&quot;D&quot;,2),!
  use pipe
  for i=1:1:1024 write $tr($justify(i,writesize),&quot; &quot;,&quot;X&quot;),!
  close pipe
  quit
; Same as above, but without defining the PIPE&#39;s standard error
nostderr
  set $etrap=&quot;do readfrompipe(.pipe) use $p zshow &quot;&quot;*&quot;&quot; zhalt 99&quot;
  set pipe=&quot;pipe&quot;
  set writesize=1024
  set cmd=$piece($zcmdline,&quot; &quot;,2) set:&#39;$length(cmd) cmd=&quot;induceEAGAIN&quot;
  open pipe:(shell=&quot;/bin/bash&quot;:command=&quot;$ydb_dist/yottadb -run &quot;_cmd_&quot;^pipexample&quot;)::&quot;pipe&quot;
  zshow &quot;D&quot;:devicelist write &quot;The active device is &quot;,devicelist(&quot;D&quot;,2),!
  write !,!
  use pipe
  for i=1:1:1024 write $tr($justify(i,writesize),&quot; &quot;,&quot;X&quot;),!
  close pipe
  quit
; This routine intentionally delays reading from the pipe to induce an EAGAIN
induceEAGAIN
  set $etrap=&quot;use $p zwrite $zstatus zhalt 99&quot;
  set hangtime=+$zcmdline set:&#39;hangtime hangtime=5 set add=1
  for i=1:1:1024 read x(i) quit:$zeof  do
  . set delay(i)=1/(add+$random(hangtime))
  . hang delay(i)
  . set:i=30 add=10
  halt
; This routine intentionally induces an EPIPE by immediately sending a SIGTERM to itself causing
; a FORCEDHALT error which goes to STDERR. Subsequently, a random DIVZERO error occurs, but this
; error goes to STDOUT since it is not a fatal error
induceEPIPE
  set $etrap=&quot;use $p zwrite $zstatus zhalt 99&quot;
  set divzero=150373210 ; DIVZERO goes to stdout
  write &quot;My PID is &quot;,$job,!
  zsystem:&#39;$zcmdline &quot;kill -15 &quot;_$job  ; FORCEDHALT error goes to stderr
  for i=1:1 read x(i) quit:$zeof  zmessage:&#39;$random(1000) divzero
  halt
; Read the contents of the pipe on failure. Messages from the programs inside the pipe aid
; in undestanding the underlying problem(s)
readfrompipe(pipe,piperr)
  new i
  new $etrap
  set $etrap=&quot;set x=$zjobexam() zhalt 88&quot;
  use pipe
  for i=1:1  read pipe(i):0 quit:&#39;$test!$zeof
  zkill pipe(i)
  do:$data(piperr)
  . use piperr
  . for i=1:1  read piperr(i):0 quit:&#39;$test!$zeof
  . zkill piperr(i)
  close pipe
  use $p
  for i=1:1  quit:&#39;$data(pipe(i))  write ?4,&quot;stdout:&quot;,pipe(i),!
  for i=1:1  quit:&#39;$data(piperr(i))  write ?4,&quot;stderr:&quot;,piperr(i),!
  quit
; Example of trapping an error and retrying the operation as necessary. Error conditions
; used are EPIPE (&quot;Broken pipe&quot; or ENO32) and EAGAIN (&quot;Resource temporarily unavailable&quot; or ENO11).
retry
  set $etrap=&quot;use $p zshow &quot;&quot;*&quot;&quot; zhalt 99&quot;
  set pipe=&quot;pipe&quot;
  set piperr=&quot;piperr&quot;
  set writesize=1024
  set cmd=$piece($zcmdline,&quot; &quot;) set:&#39;$length(cmd) cmd=&quot;induceEPIPE&quot;
  for try=0:1  do  quit:$get(readcomplete,0)
  . new $etrap set $etrap=&quot;goto retryEPIPE&quot;
  . open pipe:(shell=&quot;/bin/bash&quot;:command=&quot;$ydb_dist/yottadb -run &quot;_cmd_&quot;^pipexample &quot;_try:stderr=piperr)::&quot;pipe&quot;
  . zshow &quot;D&quot;:devicelist write &quot;Try &quot;,try,$char(9),devicelist(&quot;D&quot;,2),!
  . use pipe
  . for i=1:1:1024 do
  . . new $etrap set $etrap=&quot;goto retryEAGAIN^pipexample&quot;
  . . write $tr($justify(i,writesize),&quot; &quot;,&quot;X&quot;),!
  . set readcomplete=1
  close pipe
  use $p
  write ?4,&quot;Writes completed&quot;,!
  quit
  retryEPIPE
  quit:$zstatus&#39;[&quot;ENO32&quot;
  use $p
  write &quot;...Caught on try &quot;,try,&quot;, write &quot;,i,&quot;... &quot;,$zstatus,!
  set $ecode=&quot;&quot;
  do readfrompipe(.pipe,.piperr)
  quit
retryEAGAIN
  quit:$zstatus&#39;[&quot;ENO11&quot;
  use $p
  write &quot;...Failed to perform non-blocked writes... Retrying write # &quot;,$increment(i,-1),!
  set $ecode=&quot;&quot;
  hang 1+$random(5)
  use pipe
  quit
</pre></div>
</div>
<p>This example demonstrates how to handle PIPE device errors, whether with the device itself or from programs inside the PIPE device.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sh&gt; yottadb -run pipexample induceEAGAIN
The active device is pipe OPEN PIPE <span class="nv">SHELL</span><span class="o">=</span><span class="s2">&quot;/bin/bash&quot;</span> <span class="nv">COMMAND</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$ydb_dist</span><span class="s2">/yottadb -run induceEAGAIN^pipexample&quot;</span> <span class="nv">STDERR</span><span class="o">=</span><span class="s2">&quot;piperr&quot;</span>
<span class="nv">$ZSTATUS</span><span class="o">=</span><span class="s2">&quot;11,pipexample+9^pipexample,%SYSTEM-E-ENO11, Resource temporarily unavailable&quot;</span>

sh&gt; yottadb -run retry^pipexample induceEAGAIN
Try <span class="m">0</span>   pipe OPEN PIPE <span class="nv">SHELL</span><span class="o">=</span><span class="s2">&quot;/bin/bash&quot;</span> <span class="nv">COMMAND</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$ydb_dist</span><span class="s2">/yottadb -run induceEAGAIN^pipexample 0&quot;</span> <span class="nv">STDERR</span><span class="o">=</span><span class="s2">&quot;piperr&quot;</span>
...Failed to perform non-blocked writes... Retrying write <span class="c1"># 54</span>
...Failed to perform non-blocked writes... Retrying write <span class="c1"># 63</span>
...Failed to perform non-blocked writes... Retrying write <span class="c1"># 69</span>
...Failed to perform non-blocked writes... Retrying write <span class="c1"># 78</span>
    Writes completed
</pre></div>
</div>
<p>This example demonstrates handling WRITE errors, like ENO11 or EAGAIN, that do not terminate the PIPE device. The PIPE device does non-blocking writes. If a process tries to WRITE to a full PIPE and the WRITE would block, the device implicitly tries to complete the operation up to a default of 10 times. YottaDB sleeps 100 milliseconds between each retry. When dealing with programs that can take a while to process input, it’s a good idea to either schedule a delay between WRITEs or come up with a mechanism to back off the WRITEs when the buffer fills up.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sh&gt; yottadb -run pipexample induceEPIPE
The active device is pipe OPEN PIPE <span class="nv">SHELL</span><span class="o">=</span><span class="s2">&quot;/bin/bash&quot;</span> <span class="nv">COMMAND</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$ydb_dist</span><span class="s2">/yottadb -run induceEPIPE^pipexample&quot;</span> <span class="nv">STDERR</span><span class="o">=</span><span class="s2">&quot;piperr&quot;</span>
    stdout:My PID is <span class="m">12808</span>
    stderr:%YDB-F-FORCEDHALT, Image HALTed by MUPIP STOP
<span class="nv">$ZSTATUS</span><span class="o">=</span><span class="s2">&quot;32,pipexample+9^pipexample,%SYSTEM-E-ENO32, Broken pipe&quot;</span>

sh&gt; yottadb -run retry^pipexample induceEPIPE
Try <span class="m">0</span>   pipe OPEN PIPE <span class="nv">SHELL</span><span class="o">=</span><span class="s2">&quot;/bin/bash&quot;</span> <span class="nv">COMMAND</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$ydb_dist</span><span class="s2">/yottadb -run induceEPIPE^pipexample 0&quot;</span> <span class="nv">STDERR</span><span class="o">=</span><span class="s2">&quot;piperr&quot;</span>
...Caught on try <span class="m">0</span>, write <span class="m">49</span>... <span class="m">32</span>,retry+13^pipexample,%SYSTEM-E-ENO32, Broken pipe
    stdout:My PID is <span class="m">16252</span>
    stderr:%YDB-F-FORCEDHALT, Image HALTed by MUPIP STOP
Try <span class="m">1</span>   pipe OPEN PIPE <span class="nv">SHELL</span><span class="o">=</span><span class="s2">&quot;/bin/bash&quot;</span> <span class="nv">COMMAND</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$ydb_dist</span><span class="s2">/yottadb -run induceEPIPE^pipexample 1&quot;</span> <span class="nv">STDERR</span><span class="o">=</span><span class="s2">&quot;piperr&quot;</span>
...Caught on try <span class="m">1</span>, write <span class="m">697</span>... <span class="m">32</span>,retry+13^pipexample,%SYSTEM-E-ENO32, Broken pipe
    stdout:My PID is <span class="m">16403</span>
    stdout:<span class="nv">$ZSTATUS</span><span class="o">=</span><span class="s2">&quot;150373210,induceEPIPE+5^pipexample,%YDB-E-DIVZERO, Attempt to divide by zero&quot;</span>
Try <span class="m">2</span>   pipe OPEN PIPE <span class="nv">SHELL</span><span class="o">=</span><span class="s2">&quot;/bin/bash&quot;</span> <span class="nv">COMMAND</span><span class="o">=</span><span class="s2">&quot;</span><span class="nv">$ydb_dist</span><span class="s2">/yottadb -run induceEPIPE^pipexample 2&quot;</span> <span class="nv">STDERR</span><span class="o">=</span><span class="s2">&quot;piperr&quot;</span>
    Writes completed
</pre></div>
</div>
<p>This example demonstrates how to create a separate STDERR pipe device from which to read the STDERR output of the program(s) inside the pipe. Reading the STDERR is important when dealing with failures from Unix programs. It is possible to read the errors without creating a STDERR pipe device, however the error messages are commingled with the output of the programs inside the pipe which could make diagnosis of the underlying problem harder. Notice that YottaDB writes fatal errors, YDB-F types, to STDERR, but all others go to STDOUT.</p>
<p>Additionally, this example demonstrates handling errors that terminate the PIPE device. In this example, the PIPE device is terminated when a program inside the pipe terminates before reading all of the driving M program’s output causing an EPIPE or ENO32, a broken pipe. In such a situation the M program must capture the error that caused the termination and respond accordingly. The program may need to call out to other programs to determine the status of a service it is using or to alert the operator of an error with an external program or service. To operate successfully, the program must recreate the pipe and retry the operation.</p>
</section>
<section id="pipe-deviceparameter-summary">
<h3><a class="toc-backref" href="ioproc.html#id102">PIPE Deviceparameter Summary</a><a class="headerlink" href="ioproc.html#pipe-deviceparameter-summary" title="Permalink to this heading">¶</a></h3>
<p>The following table summarizes the PIPE format deviceparameters.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 23%" />
<col style="width: 23%" />
<col style="width: 54%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Deviceparameter</p></th>
<th class="head"><p>Command</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[NO]FIXED</p></td>
<td><p>O</p></td>
<td><p>Controls whether records have fixed length</p></td>
</tr>
<tr class="row-odd"><td><p>RECORDSIZE=intexpr</p></td>
<td><p>O</p></td>
<td><p>Specifies the maximum record size.</p></td>
</tr>
<tr class="row-even"><td><p>VARIABLE</p></td>
<td><p>O</p></td>
<td><p>Controls whether records have variable length.</p></td>
</tr>
<tr class="row-odd"><td><p>[Z]WIDTH=intexpr</p></td>
<td><p>U</p></td>
<td><p>Sets the device’s logical record size and enables WRAP.</p></td>
</tr>
<tr class="row-even"><td><p>[Z][NO]WRAP</p></td>
<td><p>O/U</p></td>
<td><p>Controls the handling of records longer than the device width.</p></td>
</tr>
</tbody>
</table>
<p>The following table summarizes PIPE access deviceparamters.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 14%" />
<col style="width: 2%" />
<col style="width: 84%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>COMMAND=string</p></td>
<td><p>o</p></td>
<td><p>Specifies the command string to execute in a created process for the PIPE device. YottaDB uses the default searching mechanism of the UNIX shell
for creating the process and initiating its command(s).</p></td>
</tr>
<tr class="row-even"><td><p>SHELL=string</p></td>
<td><p>o</p></td>
<td><p>Specifies the path to a shell to be used instead of the default shell</p></td>
</tr>
<tr class="row-odd"><td><p>STDERR=string</p></td>
<td><p>o</p></td>
<td><p>Specifies a device handle for a return pipe to which the created process writes any standard error output. The YottaDB process can USE, READ, and
CLOSE it, but cannot WRITE to it. When the YottaDB process CLOSEs the PIPE device, the PIPE device CLOSEs STDERR, if still OPEN.</p></td>
</tr>
<tr class="row-even"><td><p>WRITEONLY</p></td>
<td><p>o</p></td>
<td><p>Specifies that the YottaDB process may only WRITE to the created process via the PIPE device.</p></td>
</tr>
<tr class="row-odd"><td><p>READONLY</p></td>
<td><p>o</p></td>
<td><p>Specifies that the YottaDB process may only READ from the created process via the PIPE device. Output from both the standard output and the
standard error output of the created process is available unless STDERR is specified.</p></td>
</tr>
<tr class="row-even"><td><p>PARSE</p></td>
<td><p>o</p></td>
<td><p>Specifies that YottaDB parse the COMMAND and issue an OPEN exception for any invalid command.</p></td>
</tr>
<tr class="row-odd"><td><p>INDEPENDENT</p></td>
<td><p>o</p></td>
<td><p>Specifies that the created process continues to execute after the PIPE device is CLOSEd.</p></td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="using-socket-devices">
<span id="using-sckt-devs"></span><h2><a class="toc-backref" href="ioproc.html#id103">Using Socket Devices</a><a class="headerlink" href="ioproc.html#using-socket-devices" title="Permalink to this heading">¶</a></h2>
<p>SOCKET devices are used to access and manipulate sockets. A SOCKET device can have unlimited associated sockets. The default limit is 64. Set the environment variable ydb_max_sockets to the number of maximum associated sockets sockets that you wish to set for a YottaDB process. $VIEW(“MAX_SOCKETS”) returns the current value of the maximum number of associated sockets.</p>
<p>At any time, only one socket from the collection can be the current socket. If there is no current socket, an attempt to READ from, or WRITE to the device, generates an error.</p>
<p>Sockets can be attached and detached from the collection of sockets associated with a device. Detached sockets belong to a pseudo-device called the “socketpool”. SOCKET devices use “YGTMSOCKETPOOL” to identify the socket pool; an attempt to OPEN a device of that name produces a DEVNAMERESERVED error. A process can detach a socket from a device and later attach it to the same device or another device.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Currently, YottaDB does not produce an error if a socket is attached to a device having a different CHSET.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Exception handler (EXCEPTION) operates at the SOCKET device level and error trapping (IOERROR) operates at the socket-level. So, one EXCEPTION operates on all sockets of a SOCKET device and IOEROR can be individually turned on or off for each socket.</p>
</div>
<section id="message-management">
<h3><a class="toc-backref" href="ioproc.html#id104">Message Management</a><a class="headerlink" href="ioproc.html#message-management" title="Permalink to this heading">¶</a></h3>
<p>From an application perspective, the transport layers used by a socket device are stream-oriented, with no provisions for implicit application messages. Therefore, the following are two common protocols used to segment application messages.</p>
<ol class="arabic">
<li><p>One method is to use a, typically small, fixed length message containing the length of the next, variable length, message. In YottaDB a simplistic writer might be:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Write $Justify($Length(x),4),x
</pre></div>
</div>
</li>
</ol>
<p>A corresponding simplistic reader might be:</p>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>read len#4,x#len
</pre></div>
</div>
</div></blockquote>
<p>The advantage of this approach is that the message content (the value of x in the code fragments above) can contain any character. The disadvantage is that detecting that the protocol has become desynchronized is a problem.</p>
<ol class="arabic simple" start="2">
<li><p>The other common method is to place a delimiter between each application message. The protocol breaks if a message ever includes a delimiter as part of its content.</p></li>
</ol>
<p>The SOCKET device provides a facility for recognizing delimiters to simplify parsing messages.</p>
</section>
<section id="socket-read-operation">
<h3><a class="toc-backref" href="ioproc.html#id105">Socket Read Operation</a><a class="headerlink" href="ioproc.html#socket-read-operation" title="Permalink to this heading">¶</a></h3>
<p>TCP/IP is a stream-based protocol that guarantees that bytes arrive in the order in which they were sent. However, it does not guarantee that they will be grouped in the same packets.</p>
<p>If packets arrive infrequently, or at varying rates that are sometimes slow, a short interval can waste CPU cycles checking for an unlikely event. On the other hand, if the handling of packets is time critical, a long interval can introduce an undesirable latency. If packets arrive in a rapid and constant flow (an unusual situation), the interval doesn’t matter as much, as there is always something in the buffer for the READ to work with. If you do not specify MOREREADTIME, SOCKET READ implements a dynamic approach of using a longer first interval of 200 ms when it finds no data, then shortening the interval to 10 ms when data starts to arrive. If you specify an interval, the SOCKET device always uses the specified interval and does not adjust dynamically. For more information on MOREREADTIME, refer to <a class="reference internal" href="ioproc.html#morereadtime">MOREREADTIME</a>.</p>
<p>Most SOCKET READ operations terminate as a result of the first condition detected from (a) receipt of delimiters, (b) receipt of the maximum number of characters, or (c) expiration of a timeout. Note that all of these conditions are optional, and a specific READ may specify zero or more of them. This section refers to these three conditions as “defined terminating conditions”. If a SOCKET READ is not subject to any of the defined terminating conditions, it terminates after it has received at least one character followed by an interval with no new characters. An error can also terminate a READ. While none of the terminating conditions is satisfied, the READ continues.</p>
<p>The following flowchart represents the logic of a SOCKET READ.</p>
<img alt="_images/morereadtime.png" src="_images/morereadtime.png" />
</section>
<section id="socket-read-termination-conditions">
<h3><a class="toc-backref" href="ioproc.html#id106">Socket Read Termination Conditions</a><a class="headerlink" href="ioproc.html#socket-read-termination-conditions" title="Permalink to this heading">¶</a></h3>
<p>A SOCKET READ operation terminates if any of the following conditions are met:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 19%" />
<col style="width: 54%" />
<col style="width: 10%" />
<col style="width: 9%" />
<col style="width: 9%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Terminating Conditions</p></th>
<th class="head"><p>Argument Conditions</p></th>
<th class="head"><p>$Device</p></th>
<th class="head"><p>$Key</p></th>
<th class="head"><p>$Test</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Error</p></td>
<td><p>Empty String</p></td>
<td><p>Error String</p></td>
<td><p>Empty String</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>Timeout*</p></td>
<td><p>Data received before timeout</p></td>
<td><p>Empty String</p></td>
<td><p>Empty String</p></td>
<td><p>0</p></td>
</tr>
<tr class="row-even"><td><p>Delimiter*</p></td>
<td><p>Data up to, but not including the delimiter</p></td>
<td><p>Empty String</p></td>
<td><p>Delimiter String</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>Fixed Length Met*</p></td>
<td><p>String of Fixed Length</p></td>
<td><p>Empty String</p></td>
<td><p>Empty String</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-even"><td><p>Width</p></td>
<td><p>Full width String</p></td>
<td><p>Empty String</p></td>
<td><p>Empty String</p></td>
<td><p>1</p></td>
</tr>
<tr class="row-odd"><td><p>Buffer Emptied</p></td>
<td><p>One (1) to as many characters as provided by the transport interface before waiting for an interval
(in milliseconds) specified by MOREREADTIME with no additional input. If MOREREADTIME is not
specified, buffer is checked every 200 milliseconds for its first input and then every 10
milliseconds until no new input arrives and no other terminating conditions are met.</p>
<p>IF MOREREADTIME is specified, READ uses that value exclusively for buffer checks.</p>
</td>
<td><p>Empty String</p></td>
<td><p>Empty String</p></td>
<td><p>1</p></td>
</tr>
</tbody>
</table>
<p>* denotes Defined Terminating Conditions</p>
<p>A non-fixed-length read, with no timeout and no delimiters (the sixth row in the above table) requires a complex implementation of sequence of READs to ensure a predictable result. This is because the transport layer stream fragments delivered to the reader has only accidental correspondence with the operations performed by the writer. For example, the following:</p>
<p>Write “Message 1”,”Message 2” is presented to the reader as the stream “Message1Message2” but it can take from one (1) to 18 READ commands to retrieve the entire stream.</p>
<p>Messaging protocol should implement READ in any of the following ways:</p>
<ol class="arabic simple">
<li><p>Use a delimiter to separate messages (generic READ and possibly a larger value for MOREREADTIME).</p></li>
<li><p>Specify messages as &lt;length, value&gt; pairs (a pair of fixed-length READs (READ # ) and possibly a larger value for MOREREADTIME).</p></li>
<li><p>Parse the bytes or characters as they come in (possibly a smaller value for MOREADTIME)</p></li>
</ol>
</section>
<section id="message-delimiters">
<h3><a class="toc-backref" href="ioproc.html#id107">Message Delimiters</a><a class="headerlink" href="ioproc.html#message-delimiters" title="Permalink to this heading">¶</a></h3>
<p>Each device can have from zero (0) to 64 delimiters associated with it. Each delimiter can be from one (1) to 64 characters. All the delimiters declared for a device are valid for any READ from any associated socket, which means, any of the defined delimiters terminate the READ. The actual terminating delimiter is available in $KEY. A WRITE to a socket associated with a device with one or more delimiters inserts the first of the delimiters for any WRITE ! format.</p>
</section>
<section id="read-commands">
<h3><a class="toc-backref" href="ioproc.html#id108">READ Commands</a><a class="headerlink" href="ioproc.html#read-commands" title="Permalink to this heading">¶</a></h3>
<p>The READ command may be used to obtain data from a socket. A READ operation terminates if any of the following are detected, in the order specified below:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 21%" />
<col style="width: 57%" />
<col style="width: 10%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Terminating Conditions</p></th>
<th class="head"><p>Argument Conditions</p></th>
<th class="head"><p>$Device</p></th>
<th class="head"><p>$Key (Continued)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Error</p></td>
<td><p>Empty String</p></td>
<td><p>Error String</p></td>
<td><p>Empty String</p></td>
</tr>
<tr class="row-odd"><td><p>Timeout</p></td>
<td><p>Data received before timeout</p></td>
<td><p>Empty String</p></td>
<td><p>Empty String</p></td>
</tr>
<tr class="row-even"><td><p>Delimiter</p></td>
<td><p>Data up to, but not including the delimiter</p></td>
<td><p>Empty String</p></td>
<td><p>Delimiter String</p></td>
</tr>
<tr class="row-odd"><td><p>Fixed Length Met</p></td>
<td><p>String of fixed length</p></td>
<td><p>Empty String</p></td>
<td><p>Empty String</p></td>
</tr>
<tr class="row-even"><td><p>Buffer Emptied</p></td>
<td><p>One (1) to as many characters as happen to be provided by the transport interface</p></td>
<td><p>Empty String</p></td>
<td><p>Empty String</p></td>
</tr>
</tbody>
</table>
<p>A non-fixed-length read, with no timeout and no delimiters requires a complex implementation of sequence of READs to ensure a predictable result. This is because the transport layer stream fragments delivered to the reader has only accidental correspondence with the operations performed by the writer. For example, the following:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Write &quot;Message 1&quot;,&quot;Message 2&quot;
</pre></div>
</div>
<p>is presented to the reader as the stream “Message1Message2” but it can take from one (1) to 18 READ commands to retrieve the entire stream.</p>
</section>
<section id="write-command">
<h3><a class="toc-backref" href="ioproc.html#id109">WRITE Command</a><a class="headerlink" href="ioproc.html#write-command" title="Permalink to this heading">¶</a></h3>
<p>The WRITE command sends data to a socket.</p>
<p>WRITE ! inserts the character(s) of the first I/O delimiter (if any) to the sending buffer. If “ZFF=expr” has been specified, WRITE # inserts the characters of expr. Otherwise WRITE # has no effect. WRITE ! and WRITE # always maintain $X and $Y in a fashion that emulates a terminal cursor position except when the device is OPENed with a UTF CHSET because the units for $X and $Y for terminals are in display columns while for sockets they are in codepoints.</p>
<p>The WRITE command for SOCKET devices accepts the following control mnemonics:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/L[ISTEN][(numexpr)]
</pre></div>
</div>
<p>where numexpr specifies the listen queue depth for a listening socket. The value will be between 1 and the system-enforced maximum. By default, an OPEN or USE with LISTEN immediately sets the listen queue size to 1. For vendor-specific information on how to change your system’s maximum queue length, refer to the listen manpage..</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>/W[AIT][(timeout)]
</pre></div>
</div>
<p>where timeout is a numeric expression that specifies how long in seconds a server waits for a connection or data to become available on one of the sockets in the current Socket Device.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the current Socket Device is $PRINCIPAL and input and output are different SOCKETs, WRITE /WAIT applies to the input side of the device.</p>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>WRITE /PASS([targetpid],[timeout],handle[,handle]...)
</pre></div>
</div>
<p>WRITE /PASS allows a YottaDB process to send DETACHed TCP or LOCAL sockets (that is, sockets in the socket pool) to another YottaDB process. The receiving process should execute WRITE /ACCEPT to receive the socket.</p>
<ul class="simple">
<li><p>If a numeric target pid is specified, YottaDB matches the value against the process id ($JOB) of the process receiving the sockets. YottaDB uses a system service to perform this check on platforms that support it. If the pids do not match, YottaDB issues a PEERPIDMISMATCH error and does not transfer the sockets.</p></li>
<li><p>If a numeric timeout is specified, YottaDB sets $TEST to 1 if the transfer completes within the specified time, and otherwise sets $TEST to 0 and does not transfer any of the sockets.</p></li>
<li><p>Each handle specifies a socket in the socket pool.</p></li>
<li><p>On a successful transfer, YottaDB eliminates access by the sending process to the specified and sent sockets. In any case where the transfer does not complete, YottaDB retains all the sockets in the socket pool of the sender.</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>WRITE /ACCEPT(.lvar,[sourcepid],[timeout][,[handle]]...)
</pre></div>
</div>
<p>WRITE /ACCEPT allows a YottaDB process to receive a DETACHed TCP or LOCAL sockets (that is, sockets in the socket pool) from another YottaDB process . The sending process should execute WRITE /PASS to send the socket.</p>
<ul class="simple">
<li><p>lvar is an unsubscripted local variable name (lvn) which must be passed by reference indicated with a period (“.”) prefix. On successful completion, the specified unsubscripted lvn contains the handles of the received socket, in the order they were sent, delimited with a vertical bar (“|”). YottaDB places the sockets in the socket pool, so the process can ATTACH them to an appropriate SOCKET device for subsequent use.</p></li>
<li><p>If a numeric sourcepid is specified, YottaDB matches the value against the process id ($JOB) of the process sending the sockets. If the pids do not match, YottaDB issues a PEERPIDMISMATCH error and does not transfer the sockets.</p></li>
<li><p>If a numeric timeout is specified, YottaDB sets $TEST to 1 if the transfer completes within the specified time, and otherwise sets $TEST to 0 and does not transfer the sockets.</p></li>
<li><p>If any handles are specified, YottaDB assigns the provided handles to the received sockets in the order in which they appear in the WRITE /PASS of the sending process; empty items in the comma delimited handle list act to preserve ordering. Where the list provides no handle, the socket retains the handle provided by the sender. In either case, if there is already a socket with the transfer handle in the socket pool, YottaDB generates a new handle for the transfer socket. YottaDB ignores excess handles specified beyond the number of incoming sockets.</p></li>
</ul>
<p>Both WRITE /PASS and WRITE /ACCEPT require the current $IO to be a SOCKET device with a CONNECTed (not LISTENing) and LOCAL domain (not TCP) current socket. YottaDB issues CONNSOCKREQ or LOCALSOCKREQ errors, respectively, when those conditions are not met.</p>
<p>SOCKET devices do not support mixing other READs and WRITEs with socket passing on the same CONNECTED LOCAL socket and produce SOCKPASSDATAMIX errors. The application may perform multiple WRITE /PASS and WRITE /ACCEPT operations in either direction on the socket before issuing a CLOSE.</p>
<p>Note that the receiving process must establish desired deviceparameters (e.g., DELIMITER) for a socket either by ATTACHing it to a SOCKET device that provides the characteristic for all its sockets, or by a subsequent USE that specifies the appropriate deviceparameter(s). YottaDB transfers only the socket connection itself, the socket handle, and buffered socket data (if any).</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>WRITE /TLS(option[,[timeout][,tlsid[,cfg-file-options]])
</pre></div>
</div>
<p>SOCKET devices support encrypted connections with TLS using an encryption plugin. YottaDB ships with a reference implementation of the plugin which uses OpenSSL; the reference implementation also supports TLS for YottaDB replication streams. OpenSSL options are controlled by a configuration file. The WRITE /TLS command activates this feature for connected sockets.</p>
<ul class="simple">
<li><p>option is “server”, “client”, or “renegotiate”. “server” or “client” indicates which TLS role to assume. The server role requires a certificate specified in the configuration file section with the label matching tlsid. The client role may require a certificate depending on the OpenSSL options. If a timeout is specified for options “client” or “server”, YottaDB sets $TEST to 1 if the command successfully completed or to 0 if it timed out. $DEVICE provides status information in case of an error. ZSHOW “D” includes “TLS” in the second line of the output for an encrypted socket.</p></li>
<li><p>“renegotiate” applies only to a server socket. It allows applications to request a TLS renegotiation. Renegotiation requires the suspension of application communication and the application must read all pending data before initiating a renegotiation. This means that in the communication protocol used, both parties must be at a known state when renegotiating keys. For example, in YottaDB replication, one party sends a renegotiation request and waits for an acknowledgement before initiating the renegotiation.</p></li>
<li><p>tlsid refers to the name of a section in the configuration file specified by the ydb_crypt_config environment variable. If tlsid is not specified with the “renegotiate” option and cfg-file-options are specified, YottaDB creates a virtual section by appending “-RENEGOTIATE” to the tlsid used to enable TLS on the socket. For the renegotiate option, if no section named tlsid is present in the configuration file, YottaDB creates a virtual section with that name for the life of the process.</p></li>
<li><p>cfg-file-options specifies configuration file options. Note cfg-file-options override those options if they are already specified in the configuration file except ssl-options and verify-level which are merged.</p></li>
<li><p>Supported cfg-file-options for the “renegotiate” command are (case-sensitive): verify-depth, verify-level, verify-mode, session-id-hex, and CAfile. WRITE /TLS ignores all other configuration file options whether given on the command or in the configuration file. For more information on the supported configuration options, refer to <a class="reference external" href="../AdminOpsGuide/tls.html">Creating a TLS Configuration File</a> in the Administration and Operations Guide.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Note that SOCKET device actions may produce the following errors: TLSDLLOPEN, TLSINIT, TLSCONVSOCK, TLSHANDSHAKE, TLSCONNINFO, TLSIOERROR, and TLSRENEGOTIATE.</p>
</div>
<p>The TLS plugin uses OpenSSL options in the configuration file specified under the tls: label as the default for all TLS connections and under the specific labels to override the defaults for corresponding connections.</p>
<p>YottaDB buffers WRITEs to TLS enabled sockets until a subsequent USE :FLUSH, WRITE !, WRITE #, or an internal 400 millisecond timer expires.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Because this functionality has a wide variety of user stories (use cases) and has substantial complexity, although the code appears robust, we are not confident that we have exercised a sufficient breadth of use cases in testing. Also we may make changes in future releases that are not entirely backwards compatible. We encourage you to use with this facility in development and testing, and to provide us with feedback. If you are a YottaDB customer and wish to use this in production, please contact us beforehand to discuss your use case(s).</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Owing to the range of OpenSSL versions in use across the breadth of platforms and versions supported by YottaDB, on all platforms, but especially on non-Linux UNIX platforms, YottaDB recommends rebuilding the plugin from sources included with the YottaDB binary distribution with the specific version of OpenSSL installed on your systems for any production or production staging environments that use TLS. For more information on recompiling the reference implementation, refer to the <a class="reference external" href="../AdminOpsGuide/installydb.html">Installing YottaDB chapter of the Administration and Operations Guide</a>.</p>
</div>
</section>
<section id="socket-device-operation">
<h3><a class="toc-backref" href="ioproc.html#id110">Socket Device Operation</a><a class="headerlink" href="ioproc.html#socket-device-operation" title="Permalink to this heading">¶</a></h3>
<p>Each socket may be in one of the following states (observable through $KEY):</p>
<ul class="simple">
<li><p>CREATE-indicates that the socket exists.</p></li>
<li><p>ESTABLISHED-After a successful OPEN or USE with the CONNECT device parameter or when YottaDB was started with a socket as the $PRINCIPAL device.</p></li>
<li><p>LISTENING-indicates that the OPEN or USE with the LISTEN deviceparameter was successful and a listen queue was established.</p></li>
</ul>
<p>A listening socket used for accepting new connections goes through these three states in one step with a single OPEN or USE. When a server does a WRITE /WAIT, a client can establish a connection which creates a new server socket. $KEY includes information about this new socket in the form of CONNECT|handle|&lt;address&gt; where &lt;address&gt; is the IP address for TCP sockets and path for LOCAL sockets.</p>
<p>Each socket may have one or more sockets waiting for either an incoming connection or data available to READ (observable through $ZKEY). $ZKEY contains semi- colon (“;”) separated list of entries detailing any waiting sockets for a current SOCKET device.</p>
<p>For more information on $KEY and $ZKEY, refer to <a class="reference external" href="isv.html">“Intrinsic Special Variables”</a>.</p>
</section>
<section id="socket-deviceparameter-summary">
<h3><a class="toc-backref" href="ioproc.html#id111">Socket Deviceparameter Summary</a><a class="headerlink" href="ioproc.html#socket-deviceparameter-summary" title="Permalink to this heading">¶</a></h3>
<p>The following table provides a brief summary of deviceparameters for socket devices.</p>
<p><strong>Error Processing Deviceparameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 22%" />
<col style="width: 62%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Deviceparameter</p></th>
<th class="head"><p>Command</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>EXCEPTION=expr</p></td>
<td><p>O/U/C</p></td>
<td><p>Controls device-specific error handling.</p></td>
</tr>
<tr class="row-odd"><td><p>IOERROR=strexpr</p></td>
<td><p>O/U</p></td>
<td><p>use [NO]TRAP as strexpr</p>
<p>If $LENGTH(strexpr)&amp;(“Tt”[$EXTRACT(strexpr)) then Error Trapping is enabled; otherwise
the application must check $DEVICE for errors.</p>
</td>
</tr>
</tbody>
</table>
<p><strong>Socket Management Deviceparameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 22%" />
<col style="width: 62%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Deviceparameter</p></th>
<th class="head"><p>Command</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ATTACH=strexpr</p></td>
<td><p>O/U</p></td>
<td><p>With OPEN, ATTACH assigns expr as the handle name to the newly created socket</p>
<p>With USE, expr specifies the handle of a socket in the socketpool.</p>
</td>
</tr>
<tr class="row-odd"><td><p>CONNECT</p></td>
<td><p>O/U</p></td>
<td><p>Creates a client connection with a server, which is located by the information provided
by expr.</p></td>
</tr>
<tr class="row-even"><td><p>[NO]DELIMITER[=strexpr]</p></td>
<td><p>O/U</p></td>
<td><p>Establishes or replaces the list of delimiters used by the newly created socket.</p></td>
</tr>
<tr class="row-odd"><td><p>DETACH</p></td>
<td><p>U</p></td>
<td><p>Removes the socket identified by expr from the current socket device, without affecting
any existing connection of that socket, and places it in the socketpool.</p></td>
</tr>
<tr class="row-even"><td><p>LISTEN=expr</p></td>
<td><p>O/U</p></td>
<td><p>Allocate a new socket to listen for a connection.</p></td>
</tr>
<tr class="row-odd"><td><p>MOREREADTIME=intexpr</p></td>
<td><p>O/U</p></td>
<td><p>The polling interval (in milliseconds) that a SOCKET device uses to check for arriving
packets</p></td>
</tr>
<tr class="row-even"><td><p>SOCKET=expr</p></td>
<td><p>U</p></td>
<td><p>Makes the socket specified by the handle named in expr the current socket for the Socket
device.</p></td>
</tr>
<tr class="row-odd"><td><p>Z[NO]DELAY</p></td>
<td><p>U</p></td>
<td><p>Controls buffering of data packets by the system TCP stack using the TCP_NODELAY option
to the setsockopt system call. ZNODELAY must be fully spelled out.</p></td>
</tr>
</tbody>
</table>
<p><strong>Format Deviceparameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 22%" />
<col style="width: 62%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Deviceparameter</p></th>
<th class="head"><p>Command</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>[NO]DELIMITER[=strexpr]</p></td>
<td><p>O/U</p></td>
<td><p>strexpr specifies socket delimiter(s); use a colon (:) to separate a list.</p></td>
</tr>
<tr class="row-odd"><td><p>[NO]FILTER[=strexpr]</p></td>
<td><p>U</p></td>
<td><p>strexpr specifies character filtering for socket output.</p></td>
</tr>
<tr class="row-even"><td><p>LENGTH=intexpr or
ZLENGTH=intexpr</p></td>
<td><p>U</p></td>
<td><p>Sets virtual page length for socket device.</p></td>
</tr>
<tr class="row-odd"><td><p>ICHSET=strexpr</p></td>
<td><p>O/U/C</p></td>
<td><p>strexpr specifies input character set</p></td>
</tr>
<tr class="row-even"><td><p>OCHSET=strexpr</p></td>
<td><p>O/U/C</p></td>
<td><p>strexpr specifies output character set</p></td>
</tr>
<tr class="row-odd"><td><p>[NO]WRAP</p></td>
<td><p>O/U</p></td>
<td><p>Controls handling of records longer than the device width.</p></td>
</tr>
<tr class="row-even"><td><p>WIDTH=intexpr</p></td>
<td><p>U</p></td>
<td><p>Controls the maximum length of an output message.</p></td>
</tr>
<tr class="row-odd"><td><p>Z[NO]FF[=strexpr]</p></td>
<td><p>O/U</p></td>
<td><p>Controls whether and what characters to send in response to a WRITE #.</p></td>
</tr>
</tbody>
</table>
<p><strong>Buffer Deviceparameters</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 16%" />
<col style="width: 22%" />
<col style="width: 62%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Deviceparameter</p></th>
<th class="head"><p>Command</p></th>
<th class="head"><p>Comment</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ZBFSIZE =intexpr</p></td>
<td><p>O/U</p></td>
<td><p>Allocates a buffer used by YottaDB when reading from a socket.</p></td>
</tr>
<tr class="row-odd"><td><p>ZIBFSIZE=intexpr</p></td>
<td><p>O/U</p></td>
<td><p>Sets the buffer size used by the network software (setsockopt SO_RCVBUF).</p></td>
</tr>
</tbody>
</table>
</section>
<section id="socket-device-examples">
<h3><a class="toc-backref" href="ioproc.html#id112">Socket Device Examples</a><a class="headerlink" href="ioproc.html#socket-device-examples" title="Permalink to this heading">¶</a></h3>
<p>The sockexamplemulti31.m routine shows the use of $KEY and $ZKEY in a basic socket I/O setup. It’s functionality is atypical in order to demonstrate a number of features. It launches two jobs: a server process which opens a listening socket and a client process which makes five connections to the server. The server sends a message to each connection socket. Even-numbered client sockets read the message partially but do not send a response back to the server. Odd-numbered client sockets receive the full message and respond to the server with the message “Ok.”. The server reads two characters (but the client sends three) and $ZKEY shows sockets with unread characters.</p>
<p>You can download <a class="reference external" href="https://gitlab.com/YottaDB/DB/YDBDoc/raw/master/ProgGuide/sockexamplemulti31.m">sockexamplemulti31.m</a> from GitLab and follow the instructions in the comments near the top of the program file.</p>
<p>You can start a YottaDB process in response to a connection request made using inetd/xinetd. The following example uses inetd/xinetd to implement a listener which responds to connections and messages just as the prior example.</p>
<p>In the configuration file for xinetd, define a new service called ydbserver. Set socket_type to “stream” and wait to “no” as in the following snippet:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>service ydbserver
{
disable = no
type = UNLISTED
port = 7777
socket_type = stream
wait = no
user = yottadbuser
server = /path/to/startyottadb
}
</pre></div>
</div>
<p>If you define the server in /etc/services, the type and port options are not needed. For more information, the xinetd.conf man page for more details.</p>
<p>If you are using inetd, add a line to /etc/inetd.conf with the sockettype “stream”, protocol “tcp”, and specify the “nowait” flag as in the example below, which assumes a ydbserver service is defined in /etc/services:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ydbserver stream tcp nowait yottadbuser /path/to/startyottadb
</pre></div>
</div>
<p>In both of the above examples, “yottadbuser” is the name of the user to own and run the ydbserver service, and “/path/to/startyottadb” is the name of a script which defines some environment variables needed before invoking YottaDB. Please check the man page for inetd.conf on your system as the details may be slightly different.</p>
<p>The minimum variables are: $ydb_dist, which specifies the directory containing the YottaDB distribution, and $ydb_routines, which specifies the paths used to locate the YottaDB routines. As an example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="ch">#!/bin/bash</span>
<span class="nb">cd</span> /path/to/workarea
<span class="nb">export</span> <span class="nv">ydb_dist</span><span class="o">=</span>/usr/local/ydb
<span class="nb">export</span> <span class="nv">ydb_routines</span><span class="o">=</span><span class="s2">&quot;/var/myApp/o(/var/myApp/r) </span><span class="nv">$ydb_dist</span><span class="s2">&quot;</span>
<span class="nb">export</span> <span class="nv">ydb_gbldir</span><span class="o">=</span>/var/myApp/g/yottadb.dat
<span class="nv">$ydb_dist</span>/yottadb -r start^server
</pre></div>
</div>
<p>When start^server begins, the $PRINCIPAL device is the current device which is the incoming connection and $KEY contains “ESTABLISHED|socket_handle| remote_ip_address”. In most cases, a USE command near the beginning of the routine sets various device parameters such as delimiters.</p>
<p>The ZSHOW “D” command reports available information on both the local and remote sides of a TCP socket including local and remove addresses and ports.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>0 OPEN SOCKET TOTAL=1 CURRENT=0
SOCKET[0]=h11135182870 DESC=0 CONNECTED ACTIVE NOTRAP
REMOTE=10.1.2.3@53731 LOCAL=10.2.3.4@7777
ZDELAY ZIBFSIZE=1024 ZIBFSIZE=0
</pre></div>
</div>
</section>
<section id="tls-on-yottadb">
<h3><a class="toc-backref" href="ioproc.html#id113">TLS on YottaDB</a><a class="headerlink" href="ioproc.html#tls-on-yottadb" title="Permalink to this heading">¶</a></h3>
<p>TLS (Transport Layer Security) can be turned on for YottaDB using the following steps:</p>
<ul>
<li><p>As root, go to the following directory and extract source.tar:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">cd</span> <span class="nv">$ydb_dist</span>/plugin/gtmcrypt
tar x &lt; source.tar
</pre></div>
</div>
</li>
<li><p>Make sure the openssl-dev, libconfig-dev, and gpgme-dev libraries are installed before the next step.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">ydb_dist</span><span class="o">=</span>../.. make
<span class="nv">ydb_dist</span><span class="o">=</span>../.. make install
</pre></div>
</div>
</li>
<li><p>In your application directory, make a directory for certificates.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mkdir certs
</pre></div>
</div>
</li>
<li><p>Create your certificate with a key that has a password.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>openssl genrsa -aes128 -passout pass:ydbpass -out ./mycert.key <span class="m">2048</span>
openssl req -new -key ./mycert.key -passin pass:ydbpass -subj <span class="s1">&#39;/C=US/ST=Pennsylvania/L=Malvern/CN=www.yottadb.com&#39;</span> -out ./mycert.csr
openssl req -x509 -days <span class="m">365</span> -sha256 -in ./mycert.csr -key .//mycert.key -passin pass:ydbpass -out ./mycert.pem
mv cert* certs/
</pre></div>
</div>
</li>
<li><p>Create a file called ydb_crypt_config.libconfig with the following contents.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>tls: {
  dev: {
      format: &quot;PEM&quot;;
      cert: &quot;/home/ydbuser/workspace/db/certs/mycert.pem&quot;;
      key:  &quot;/home/ydbuser/workspace/db/certs/mycert.key&quot;;
        }
     }
</pre></div>
</div>
</li>
<li><p>Set the environment variable ydb_crypt_config to be the path to your config file:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">ydb_crypt_config</span><span class="o">=</span>ydb_crypt_config.libconfig<span class="s2">&quot;</span>
</pre></div>
</div>
</li>
<li><p>Find out the hash of your key password using the maskpass utility.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">echo</span> <span class="s2">&quot;ydbpass&quot;</span> <span class="p">|</span> <span class="nv">$ydb_dist</span>/plugin/gtmcrypt/maskpass <span class="p">|</span> cut -d <span class="s2">&quot;:&quot;</span> -f2 <span class="p">|</span> tr -d <span class="s1">&#39; &#39;</span>
7064420FDCAEE313B222
</pre></div>
</div>
</li>
<li><p>In your environment file, set ydb_tls_passwd_{section name} to be that hash.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">ydb_tls_passwd_dev</span><span class="o">=</span><span class="s2">&quot;7064420FDCAEE313B222&quot;</span>
</pre></div>
</div>
</li>
<li><p>Start the server</p></li>
</ul>
<p>For more documentation on TLS, see <a class="reference external" href="../AdminOpsGuide/tls.html">Appendix H: Creating a TLS Configuration File</a> in the Administration and Operations Guide.</p>
</section>
</section>
<section id="i-o-commands">
<h2><a class="toc-backref" href="ioproc.html#id114">I/O Commands</a><a class="headerlink" href="ioproc.html#i-o-commands" title="Permalink to this heading">¶</a></h2>
<p>This section describes the following YottaDB I/O commands:</p>
<ul class="simple">
<li><p>OPEN establishes a connection from a YottaDB process to a device.</p></li>
<li><p>USE declares a device as the current source of input and destination for output.</p></li>
<li><p>READ accepts characters from the current device into a global or local variable.</p></li>
<li><p>WRITE sends characters to the current device.</p></li>
<li><p>CLOSE breaks the connection between a YottaDB process and a device.</p></li>
</ul>
<section id="open">
<h3><a class="toc-backref" href="ioproc.html#id115">Open</a><a class="headerlink" href="ioproc.html#open" title="Permalink to this heading">¶</a></h3>
<p>The OPEN command establishes a connection from a YottaDB process to a device.</p>
<p>The format of the OPEN command is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>O[PEN][:tvexpr] expr[:[(keyword[=expr][:...])][:numexpr][:expr]][,...]
</pre></div>
</div>
<ul class="simple">
<li><p>The optional truth-valued expression immediately following the command is a command postconditional that controls whether or not YottaDB executes the command.</p></li>
<li><p>The required expression specifies the device to OPEN.</p></li>
<li><p>The optional keywords specify deviceparameters that control device behavior; some deviceparameters take arguments delimited by an equal sign (=); if the argument only contains one deviceparameter, the surrounding parentheses are optional.</p></li>
<li><p>The optional numeric expression specifies a time in seconds after which the command should timeout if unsuccessful; 0 provides a single attempt to open the device.</p></li>
<li><p>When an OPEN command specifying a timeout contains no deviceparameters, double colons (::) separate the timeout numeric expression from the device expression.</p></li>
<li><p>The optional expression specifies a mnemonicspace that selects a device binding. The only mnemonicspaces that YottaDB currently accepts are SOCKET and PIPE.</p></li>
<li><p>When an OPEN command specifies a mnemonicspace with no timeout, double colons separate the mnemonicspace string expression from the deviceparameters; if there are neither a timeout nor deviceparameters, triple colons separate the SOCKET mnemonicspace from the device expression.</p></li>
<li><p>A triple colon for the PIPE menemonicspace produces an error.</p></li>
<li><p>An indirection operator and an expression atom evaluating to a list of one or more OPEN arguments form a legal argument for an OPEN.</p></li>
<li><p>For sequential files, multiple processes can open the same file for reading with the OPEN command.</p></li>
</ul>
<p>By default, when a device is unavailable, YottaDB retries the OPEN indefinitely at approximately one second intervals. A device is unavailable when another process is using it exclusively, or when the OPENing process does not have the resources left to open the device.</p>
<p>All other errors on OPEN raise an error condition and interrupt program flow. A timeout is a tool that lets a YottaDB routine regain program control when a device remains unavailable. When the OPEN specifies a timeout, YottaDB keeps retrying until either the OPEN succeeds or the timeout expires.</p>
<p>If OPEN establishes a connection with a device before the timeout expires, YottaDB sets $TEST to TRUE (1). If the timeout expires, YottaDB sets $TEST to FALSE (0). If an OPEN command does not specify a timeout, the execution of the command does not affect $TEST.</p>
<p>If a process has not previously OPENed a device, any deviceparameters not supplied on the OPEN take their default values. When reOPENing a device that it previously closed, a YottaDB process restores all characteristics not specified on the OPEN to the values the device had when it was last CLOSEd, except with SD, FIFO, and PIPE. YottaDB treats sequential disk files differently and uses defaults for unspecified sequential disk file characteristics on every OPEN; in other words, by default CLOSE of a sequential disk file acts as if DESTROY were specified and it requires an explicit NODESTROY to retain sequential disk file characteristics on a CLOSE.</p>
<p>For a sequential disk device CLOSEd with the NODESTROY deviceparameter, a subsequent OPEN of the device with no deviceparameters restores the device state including its file position; or to the file position specified by a SEEK deviceparameter. Note that when $ZCHSET specifies a UTF character set in FIXED format, the device must have done at least one READ prior to its close. An OPEN with additional deviceparameters positions the device to the beginning of the file or to the end of file if APPEND is specified. Any SEEK specified as a deviceparameter is then applied.</p>
<p>If you have a menu-driven application that OPENs and CLOSEs devices based on user selections, take care that every OPEN explicitly includes all deviceparameters important to the application.</p>
<p>If a process OPENs an already OPEN device, YottaDB modifies any characteristics that accept changes when a device is OPEN to reflect any new deviceparameter specifications.</p>
<p>In UTF-8 mode, the OPEN command recognizes ICHSET, OCHSET, and CHSET as three additional deviceparameters to determine the encoding of the the input / output devices.</p>
<p>In M mode, the OPEN command ignores ICHSET, OCHSET, CHSET, and PAD device parameters.</p>
<p>If an I/O device uses a multi-byte character encoding, every READ and WRITE operation of that device checks for well-formed characters according to the specified character encoding with ICHSET or OCHSET. If the I/O commands encounter an illegal sequence of bytes, they always trigger a run-time error; a VIEW “NOBADCHAR” does not prevent such errors. Strings created by $ZCHAR() and other Z equivalent functions may contain illegal sequences. The only way to input or output such illegal sequences is to specify character set “M” with one of these deviceparameters.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set sd=&quot;report.dat&quot; open sd:newversion
</pre></div>
</div>
<p>This OPENs a NEWVERSION of a sequential disk file named report.dat for both read and write access.</p>
<p><strong>OPEN Deviceparameters</strong></p>
<section id="append">
<h4><a class="toc-backref" href="ioproc.html#id116">APPEND</a><a class="headerlink" href="ioproc.html#append" title="Permalink to this heading">¶</a></h4>
<p>APPEND Applies to: SD</p>
<p>Positions the file pointer at the end-of-file. This deviceparameter only affects the device on the first OPEN command or OPEN command if the file is CLOSEd NODESTROY. Re-OPENing an already OPEN device with this deviceparameter has no effect. By default, OPEN sets the file pointer to the beginning-of-file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If an APPEND is combined with a SEEK deviceparameter the APPEND is done first - regardless of deviceparameter order.</p>
</div>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set sd=&quot;foo.txt&quot;
open sd:(append:recordsize=70:wrap)
use sd
</pre></div>
</div>
<p>This example opens file foo.txt and positions the file pointer at the end of the file.</p>
</section>
<section id="attach">
<h4><a class="toc-backref" href="ioproc.html#id117">ATTACH</a><a class="headerlink" href="ioproc.html#attach" title="Permalink to this heading">¶</a></h4>
<p>ATTACH=expr Applies to: SOC</p>
<p>ATTACH assigns expr as the handle name to the newly created socket. When ATTACH is used and one of LISTEN or CONNECT is specified on the same OPEN, the value of expr becomes the identifier of the newly created socket. If neither LISTEN nor CONNECT is specified, ATTACH is ignored.</p>
<p>For information on using the ATTACH with USE, refer to <a class="reference internal" href="ioproc.html#attach-use"><span class="std std-ref">ATTACH</span></a> in the USE Deviceparameters section.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>open tcpdev:(ichset=&quot;M&quot;:connect=hostname_&quot;:&quot;_portno_&quot;:TCP&quot;:attach=&quot;client&quot;):timeout:&quot;SOCKET&quot;
</pre></div>
</div>
<p>This example uses the ATTACH deviceparameter to specify “client” as the identifier of the newly created socket. Note that YottaDB recognizes ICHSET only in UTF-8 mode.</p>
</section>
<section id="chset">
<h4><a class="toc-backref" href="ioproc.html#id118">CHSET</a><a class="headerlink" href="ioproc.html#chset" title="Permalink to this heading">¶</a></h4>
<p>CHSET=expr Applies to: All devices</p>
<p>Establishes a common encoding for both input and output devices for the device being OPENed in UTF-8 mode. The value of the expression can be M, UTF-8, UTF-16, UTF-16LE, or UTF-16BE. For more information, refer to <a class="reference internal" href="ioproc.html#ichset">ICHSET</a> and <a class="reference internal" href="ioproc.html#ochset">OCHSET</a>.</p>
</section>
<section id="command">
<h4><a class="toc-backref" href="ioproc.html#id119">COMMAND</a><a class="headerlink" href="ioproc.html#command" title="Permalink to this heading">¶</a></h4>
<p>COMMAND=expr Applies to: PIPE</p>
<p>Specifies the UNIX command the newly created shell process performs. An invalid command value triggers an error in the new process, not the process issuing the OPEN. This can make diagnosis difficult - see the <a class="reference internal" href="ioproc.html#parse">PARSE</a> deviceparameter for potential assistance.</p>
</section>
<section id="connect">
<h4><a class="toc-backref" href="ioproc.html#id120">CONNECT</a><a class="headerlink" href="ioproc.html#connect" title="Permalink to this heading">¶</a></h4>
<p>CONNECT=expr Applies to: SOC</p>
<p>Creates a client connection with a server, which is located by the information provided by expr. A new socket is allocated for the client connection and is made the current socket for the device, if the operation is successful.</p>
<p>expr specifies the protocol and the protocol-specific information. Currently, YottaDB supports TCP/IP and LOCAL (also known as UNIX domain) socket protocols. For TCP/IP sockets, specify expr in the form of “&lt;host&gt;:&lt;port&gt;:TCP”, where host is an IPv4 or IPv6 address optionally encapsulated by square-brackets ([]) like “127.0.0.1”, “::1”, “[127.0.0.1]”, or “[::1]” or a IPv4 or IPv6 hostname like server.yottadb.com. When a hostname is specified, YottaDB uses the IP version of the first address returned by DNS:</p>
<ul class="simple">
<li><p>that is supported by the operating system, and</p></li>
<li><p>for which a network interface exists.</p></li>
</ul>
<p>For LOCAL sockets, specify expr in the form of “&lt;pathname&gt;:LOCAL”, where &lt;pathname&gt; is the name of the file to be used for communication. &lt;pathname&gt; may contain a dollar sign ($) followed by the name of an environment variable which YottaDB expands in the same way as the device name for a sequential file. The maximum allowed length of the expanded path name depends on the OS.</p>
<p>For LOCAL sockets, CONNECT attempts to open the specified file. If it doesn’t exist or there is no listener, CONNECT retries until it succeeds or a specified timeout expires.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>CONNECT is not compatible with LISTEN.</p>
</div>
<p>If the OPEN does not specify a timeout, a SOCKET OPEN waits for the connection to complete or an event that terminates the attempt.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>open tcpdev:(connect=hostname_&quot;:&quot;_portno_&quot;:TCP&quot;:attach=&quot;client&quot;:ioerror=&quot;TRAP&quot;):timeout:&quot;SOCKET&quot;
</pre></div>
</div>
<p>This example establishes a client connect with the server using the connection string in the format of “hostname:port:TCP”.</p>
</section>
<section id="delimiter">
<h4><a class="toc-backref" href="ioproc.html#id121">DELIMITER</a><a class="headerlink" href="ioproc.html#delimiter" title="Permalink to this heading">¶</a></h4>
<p>[NO]DELIMITER=expr Applies to: SOC</p>
<p>DELIMITER establishes or replaces the list of delimiters used by the newly created socket. The default is NODELIMITER. The delimiter list on a preexisting device remains the same until it is explicitly replaced or deleted.</p>
<p>expr is a string where the following characters have special interpretation:</p>
<ul class="simple">
<li><p>‘:’ is used to separate delimiters (it is the delimiter for delimiters).</p></li>
<li><p>‘/’ serves as an character, so use /: to use colon as part of a delimiter and // to use slash as part of a delimiter.</p></li>
</ul>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>expr &quot;ab:/:://:bc&quot; is interpreted as four delimiters, which are &quot;ab&quot;, &quot;:&quot;, &quot;/&quot;, and &quot;bc&quot;. One socket can have 0-64 delimiters and each delimiter can contain 1-64 characters.
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>open tcpdev:(connect=host_&quot;:&quot;_portno_&quot;:TCP&quot;:delim=$c(13):attach=&quot;client&quot;):timeout:&quot;SOCKET&quot;
</pre></div>
</div>
<p>This command specifies $CHAR(13) as the delimiter for the socket tcpdev.</p>
</section>
<section id="exception">
<h4><a class="toc-backref" href="ioproc.html#id122">EXCEPTION</a><a class="headerlink" href="ioproc.html#exception" title="Permalink to this heading">¶</a></h4>
<p>EXCEPTION=expr Applies to: All devices</p>
<p>Defines an error handler for an I/O device. The expression must contain a fragment of YottaDB code (for example, GOTO ERRFILE) that YottaDB XECUTEs when YottaDB detects an error, or an entryref to which YottaDB transfers control, as appropriate for the current ydb_ztrap_form, setting except that there is never any implicit popping with EXCEPTION action.</p>
<p>A device EXCEPTION gets control after a non-fatal device error and $ETRAP/$ZTRAP get control after other non-fatal errors.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>YDB&gt;do ^FREAD
FREAD;
 zprint ^FREAD
 read &quot;File &gt; &quot;,sd
 set retry=0
 set $ztrap=&quot;BADAGAIN&quot;
 open sd:(readonly:exception=&quot;do BADOPEN&quot;)
 use sd:exception=&quot;goto EOF&quot;
 for  use sd read x use $principal write x,!
EOF;
 if &#39;$zeof zmessage +$zstatus
 close sd
 quit
BADOPEN;
 set retry=retry+1
 if retry=2 open sd
 if retry=4 halt
 if $piece($zstatus,&quot;,&quot;,1)=2 do
 . write !,&quot;The file &quot;,sd,&quot; does not exist. Retrying in about 2 seconds ...&quot;
 . hang 2.1
 . quit
 if $piece($zstatus,&quot;,&quot;,1)=13 do
 . write !,&quot;The file &quot;,sd,&quot; is not accessible. Retrying in about 3 seconds ...&quot;
 . hang 3.1
 . quit
 quit
BADAGAIN;
 w !,&quot;BADAGAIN&quot;,!

File &gt;
</pre></div>
</div>
<p>This example asks for the name of the file and displays its contents. It OPENs that file as READONLY and specifies an EXCEPTION. The exception handler for the OPEN deals with file-not-found and file-access errors and retries the OPEN command on error. The first USE sets the EXCEPTION to handle end-of-file. The FOR loop reads the file one record at a time and transfers each record to the principal device. The GOTO in the EXCEPTION terminates the FOR loop. At label EOF, if $ZEOF is false, the code reissues the error that triggered the exception. Otherwise, the CLOSE releases the file.</p>
</section>
<section id="empterm">
<h4><a class="toc-backref" href="ioproc.html#id123">EMPTERM</a><a class="headerlink" href="ioproc.html#empterm" title="Permalink to this heading">¶</a></h4>
<p>[NO]EMPT[ERM] Applies to: TRM</p>
<p>Allows an “Erase” character on an empty input line to terminate a READ or READ # command. The default is NOEMPTERM. The ydb_principal_editing environment variable specifies the initial setting of [NO]EMPTERM. The TERMINFO specified by the current value of the TERM environment variable defines capnames values “kbs” and/or “kdch1” with character sequences for “Erase.” If “kbs” or “kdch1” are multi-character values, you must also specify the ESCAPE or EDIT deviceparameters for EMPTERM recognition.</p>
<p>The erase character as set and shown by stty also terminates a READ command with an empty input line. You can set this erase character to various values using the stty shell command. Typical values of an erase character are &lt;CTRL-H&gt; and &lt;CTRL-?&gt;. Characters set and shown with stty setting must match what the terminal emulator sends.</p>
<p>The environment variable TERM must specify a terminfo entry that matches both what the terminal (or terminal emulator) sends and expects.</p>
</section>
<section id="fflf">
<h4><a class="toc-backref" href="ioproc.html#id124">FFLF</a><a class="headerlink" href="ioproc.html#fflf" title="Permalink to this heading">¶</a></h4>
<p>[NO]FFLF Applies to: SD</p>
<p>The [NO]FFLF deviceparameter controls whether WRITE # produces only a form-feed (&lt;FF&gt;) or a form-feed and line-feed (&lt;FF&gt;&lt;LF&gt;). Previously, YottaDB used &lt;FF&gt;&lt;LF&gt; which deviated from the standard, but out of concern for existing practice the default remains &lt;FF&gt;&lt;LF&gt;.</p>
<p>Additionally, the <code class="code docutils literal notranslate"><span class="pre">ydb_nofflf(gtm_nofflf)</span></code> environment variable controls the default WRITE # behavior of YottaDB. If it is unset or set to 0, N[O] or F[ALSE], the default behavior is unchanged. If it is set to 1, Y[ES] or T[RUE], the default behavior of WRITE # is changed to produce only a form-feed (&lt;FF&gt;), though M programs can still control behavior by specifying the FFLF deviceparameter.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;zprint ^fflf
fflf
  <span class="nb">set</span> <span class="nv">file</span><span class="o">=</span><span class="s2">&quot;/tmp/myfile&quot;</span>
  open file:<span class="o">(</span>newversion:wrap:stream:nofflf<span class="o">)</span>
  use file
  write <span class="c1">#,&quot;Hello&quot;</span>
  close file
  zsystem <span class="s2">&quot;od -tcd1 /tmp/myfile&quot;</span>
  quit
YDB&gt;do ^fflf
<span class="m">0000000</span>   <span class="se">\f</span>    H    e    l    l    o   <span class="se">\n</span>
          <span class="m">12</span>   <span class="m">72</span>  <span class="m">101</span>  <span class="m">108</span>  <span class="m">108</span>  <span class="m">111</span>   <span class="m">10</span>
<span class="m">0000007</span>
YDB&gt;halt
</pre></div>
</div>
<p>This example opens the file <code class="code docutils literal notranslate"><span class="pre">myfile</span></code>, and sets the NOFFLF deviceparameter with OPEN. It will write the sequence <code class="code docutils literal notranslate"><span class="pre">&lt;FF&gt;Hello&lt;LF&gt;</span></code> to the file.</p>
</section>
<section id="fifo">
<h4><a class="toc-backref" href="ioproc.html#id125">FIFO</a><a class="headerlink" href="ioproc.html#fifo" title="Permalink to this heading">¶</a></h4>
<p>FIFO Applies to: FIFO</p>
<p>Specifies that the device for the OPEN is a FIFO name. YottaDB creates the FIFO if it does not already exist and if the process has adequate privileges. However, in the event that the process does not have adequate privileges, the process generates a run-time error. A process does not require any special privileges to OPEN an existing FIFO. The FIFO needs to be readable (or writeable) just like any other file.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>open file:(fifo:read:recordsize=1048576):100
</pre></div>
</div>
</section>
<section id="fixed">
<h4><a class="toc-backref" href="ioproc.html#id126">FIXED</a><a class="headerlink" href="ioproc.html#fixed" title="Permalink to this heading">¶</a></h4>
<p>[NO]FIXED Applies to: SD FIFO PIPE</p>
<p>Selects a fixed-length record format for sequential disk files. FIXED does not specify the actual length of a record. Use RECORDSIZE to specify the record length.</p>
<p>NOFIXED specifies a variable-length record format for sequential disk files. NOFIXED is a synonym for VARIABLE. FIXED is incompatible with STREAM and VARIABLE. By default, records have VARIABLE length record format.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>FIXED length records do not implicitly use embedded record terminators such as line feeds.</p>
</div>
<p>In UTF-8 mode, YottaDB I/O enforces a more record-oriented view of the file, treating each record as RECORDSIZE bytes long. Note that a Unicode code-point never splits across records. If a multi-byte character (when CHSET is UTF-8) or a surrogate pair (when CHSET is UTF-16) does not fit into the record (either logical as given by WIDTH or physical as given by RECORDSIZE), the WRITE command uses the byte values as specified by the PAD deviceparameter to fill the physical record. A combining character may end up in the subsequent record if it does not fit in the current record.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>PAD is effective only for devices opened with a CHSET related to Unicode® characters. In M mode PAD is always &lt;SP&gt;</p>
</div>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;do ^fixedex
fixedex<span class="p">;</span>
  zprint ^fixedex
  <span class="nb">set</span> <span class="nv">file</span><span class="o">=</span><span class="s2">&quot;fix.txt&quot;</span>
  open file:<span class="o">(</span>newversion:fixed:recordsize<span class="o">=</span><span class="m">4</span><span class="o">)</span>
  use file
  write <span class="s2">&quot;Hello, World&quot;</span>,!
  close file
  <span class="nb">set</span> <span class="nv">file</span><span class="o">=</span><span class="s2">&quot;fixnowrap.txt&quot;</span>
  open file:<span class="o">(</span>newversion:fixed:recordsize<span class="o">=</span><span class="m">4</span>:nowrap<span class="o">)</span>
  use file
  write <span class="s2">&quot;Hel&quot;</span>,!
  write <span class="s2">&quot;lo, World&quot;</span>,! <span class="p">;</span> This writes only <span class="s1">&#39;lo, &#39;</span>
  close file
  zsystem <span class="o">(</span><span class="s2">&quot;more fix*.txt&quot;</span><span class="o">)</span>
  zsystem <span class="o">(</span><span class="s2">&quot;od -cb fix.txt&quot;</span><span class="o">)</span>
  zsystem <span class="o">(</span><span class="s2">&quot;od -cb fixnowrap.txt&quot;</span><span class="o">)</span>
  quit
::::::::::::::
fix.txt
::::::::::::::
Hello, World
::::::::::::::
fixnowrap.txt
::::::::::::::
Hel lo,
<span class="m">0000000</span>   H   e   l   l   o   ,       W   o   r   l   d
        <span class="m">110</span> <span class="m">145</span> <span class="m">154</span> <span class="m">154</span> <span class="m">157</span> <span class="m">054</span> <span class="m">040</span> <span class="m">127</span> <span class="m">157</span> <span class="m">162</span> <span class="m">154</span> <span class="m">144</span>
<span class="m">0000014</span>
<span class="m">0000000</span>   H   e   l       l   o   ,
        <span class="m">110</span> <span class="m">145</span> <span class="m">154</span> <span class="m">040</span> <span class="m">154</span> <span class="m">157</span> <span class="m">054</span> <span class="m">040</span>
<span class="m">0000010</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;zprint ^ydbcp
ydbcp <span class="p">;</span> Copy a binary file using YottaDB
  new dest,line,max,src
  <span class="k">if</span> <span class="m">2</span>&gt;<span class="nv">$length</span><span class="o">(</span><span class="nv">$zcmdline</span>,<span class="s2">&quot; &quot;</span><span class="o">)</span> write <span class="s2">&quot;</span><span class="nv">$ydb_dist</span><span class="s2">/yottadb -r source target&quot;</span>,!
  <span class="nb">set</span> <span class="nv">dest</span><span class="o">=</span><span class="nv">$piece</span><span class="o">(</span><span class="nv">$zcmdline</span>,<span class="s2">&quot; &quot;</span>,2<span class="o">)</span>
  <span class="nb">set</span> <span class="nv">src</span><span class="o">=</span><span class="nv">$piece</span><span class="o">(</span><span class="nv">$zcmdline</span>,<span class="s2">&quot; &quot;</span>,1<span class="o">)</span>
  <span class="nb">set</span> <span class="nv">max</span><span class="o">=</span><span class="m">1024</span>*1024 <span class="p">;</span> the maximum YottaDB string size
  open src:<span class="o">(</span>readonly:FIXED:WRAP:CHSET<span class="o">=</span><span class="s2">&quot;M&quot;</span><span class="o">)</span> <span class="p">;</span>
  open dest:<span class="o">(</span>newversion:FIXED:WRAP:CHSET<span class="o">=</span><span class="s2">&quot;M&quot;</span><span class="o">)</span> <span class="p">;</span> use FIXED format because it does not insert carriage control characters after <span class="nv">$X</span> reaches its maximum value.
  <span class="k">for</span>  use src <span class="nb">read</span> line#max quit:<span class="nv">$zeof</span>  use dest write line
  close src
  use dest
  <span class="nb">set</span> <span class="nv">$x</span><span class="o">=</span><span class="m">0</span>
  close dest
  quit
</pre></div>
</div>
<p>This example copies a binary file using YottaDB.</p>
</section>
<section id="follow">
<h4><a class="toc-backref" href="ioproc.html#id127">FOLLOW</a><a class="headerlink" href="ioproc.html#follow" title="Permalink to this heading">¶</a></h4>
<p>[NO]FOLLOW Applies to: SD</p>
<p>Configures READ to return only when it has a complete record or reaches any specified timeout; it waits for more input rather than terminating on an EOF (end-of-file) condition.</p>
<p>The USE command can switch a device from NOFOLLOW to FOLLOW or from FOLLOW to NOFOLLOW. This provides a READ mode of operation similar to a tail -f in UNIX.</p>
</section>
<section id="group">
<h4><a class="toc-backref" href="ioproc.html#id128">GROUP</a><a class="headerlink" href="ioproc.html#group" title="Permalink to this heading">¶</a></h4>
<p>GROUP=expr Applies to: SOC(LOCAL) SD FIFO</p>
<p>Specifies access permission on a UNIX file for other users in the file owner’s group. The expression is a character string evaluating to null or to any combination of the letters RWX, indicating respectively Read, Write, and eXecute access. When permission controlling deviceparameters (OWNER,GROUP,WORLD) appears on an OPEN of a new file, any user category (OWNER, SYSTEM, WORLD), that is not explicitly specified is given the default access permissions. When any one of these deviceparameters appears on an OPEN of an existing device, any user category that is not explicitly specified remains unchanged.</p>
<p>In order to modify file security, the user who issues the OPEN must have ownership.</p>
<p>If none of GROUP, SYSTEM, OWNER, or WORLD are specified on OPEN, YottaDB does not modify the permissions on an existing file and new files are created using the standard UNIX rules.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>open &quot;test52.txt&quot;:(append:group=&quot;rw&quot;)
</pre></div>
</div>
<p>This examples open file test52.txt in append mode with Read Write group access. Note that the user who opens file text52.txt must have ownership permissions for it.</p>
</section>
<section id="ichset">
<h4><a class="toc-backref" href="ioproc.html#id129">ICHSET</a><a class="headerlink" href="ioproc.html#ichset" title="Permalink to this heading">¶</a></h4>
<p>ICHSET=expr</p>
<p>Applies to: All devices</p>
<p>Establishes the character encoding of an input device being OPENed and USEed in the UTF-8 mode. The value of the expression can be M, UTF-8, UTF-16, UTF-16LE, or UTF-16BE. In M mode, ICHSET has no effect.</p>
<p>If ICHSET is not specified, YottaDB assumes UTF-8 as the default character set for input from the device.</p>
<p>If expr is set to a value other than M, UTF-8, UTF-16, UTF-16LE or UTF-16BE, YottaDB produces a run-time error. UTF-16, UTF-LE, and UTF-16BE are not supported for $Principal and Terminal devices.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>ICHSET is a deviceparameter of both the OPEN and USE commands. As ICHSET can change the character set of an already OPENed device, it can help deal with binary data intermixed with character data.</p>
</div>
</section>
<section id="independent">
<h4><a class="toc-backref" href="ioproc.html#id130">INDEPENDENT</a><a class="headerlink" href="ioproc.html#independent" title="Permalink to this heading">¶</a></h4>
<p>INDEPENDENT Applies to: PIPE</p>
<p>The INDEPENDENT deviceparameter specifies that the newly created process will not be terminated by the CLOSE of the device. The input and output of INDEPENDENT processes should be handled in such a way that it runs independently even after the CLOSE of the device. By default, CLOSE terminates the process associated with the PIPE device.</p>
</section>
<section id="ikey">
<h4><a class="toc-backref" href="ioproc.html#id131">IKEY</a><a class="headerlink" href="ioproc.html#ikey" title="Permalink to this heading">¶</a></h4>
<p>Applies to: SD, PIPE, and FIFO</p>
<p>IKEY allows the use of a seperate key for READ to a device; for example, when a YottaDB process is an element of a UNIX pipe. The format of the IKEY deviceparameter is:</p>
<p>IKEY=”key_name [IV]”</p>
<p>key_name is case-sensitive and must match a key name in the “files” section of the ydb_crypt_config file. The optional IV specifies an initialization vector to use for encryption and decryption.</p>
<p>For more information, refer to the description of KEY deviceparameter of OPEN or USE.</p>
</section>
<section id="ioerror">
<h4><a class="toc-backref" href="ioproc.html#id132">IOERROR</a><a class="headerlink" href="ioproc.html#ioerror" title="Permalink to this heading">¶</a></h4>
<p>IOERROR=expr Applies to: SOC</p>
<p>Enables exception handling in socket devices. expr specifies the I/O error trapping mode. A value equal to “TRAP” specifies that I/O errors on a device raise error conditions. A value equal to “NOTRAP”, or when IOERROR is not specified, indicates that I/O error on a device does not raise error conditions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The IOERROR setting is associated with sockets while EXCEPTION is associated with the SOCKET device. In other words, IOERROR can be turned on or off for each of the sockets associated with a SOCKET device but there is only one EXCEPTION value which is used for all the sockets.</p>
</div>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>open sock:(connect=host_&quot;:&quot;_port_&quot;:TCP&quot;:delim=$char(13,10):ioerror=&quot;TRAP&quot;)::&quot;SOCKET&quot;
</pre></div>
</div>
<p>This example opens a socket connection and specifies that I/O errors on the device raises error conditions.</p>
<p>If $LENGTH(strexpr)&amp;(“Tt”[$EXTRACT(strexpr)) then Error Trapping is enabled; otherwise the application must check $DEVICE and other ISVs for errors.</p>
<p>Note that an OPEN command does not change the current device. Therefore, $DEVICE does not have the status information when an error occurs on OPEN. An application should check $TEST and other ISVs for errors on OPEN.</p>
<p>$DEVICE holds status information only after a socket is successfully ATTACHed to a socket device. To properly trap IOERRORs related to connection handling, it is best to create an empty SOCKET device (with something like open tcpdev::timeout:”SOCKET”) before opening a socket connection with the OPEN (with LISTEN or CONNECT deviceparameters) command. Then, use ATTACH to bring it to the current SOCKET device. This method ensures that a device exists that would update $DEVICE with status information.</p>
</section>
<section id="key-open">
<span id="id3"></span><h4><a class="toc-backref" href="ioproc.html#id133">KEY</a><a class="headerlink" href="ioproc.html#key-open" title="Permalink to this heading">¶</a></h4>
<p>Applies to: SD, PIPE, and FIFO</p>
<p>Specifies information about the key file to use for reading and writing encrypted data. The syntax of the KEY deviceparameter is as follows:</p>
<p>KEY=”key_name [IV]”</p>
<p>key_name is case-sensitive and must match a key name in the “files” section of the ydb_crypt_config file. The optional IV specifies an initialization vector to use for encryption and decryption.</p>
<p>To perform encryption and description, YottaDB calls an encryption plugin using the YottaDB encryption API and can use any library that conforms to the API. The encryption plugin in turn can call user-selected cryptographic libraries for cryptographic functionality. The key name and IV are passed as binary sequences of bytes to the reference implementation plugin. Because YottaDB only uses the first space in the deviceparameter to delimit the end of the key, the IV can include any content, including spaces. The YottaDB runtime system uses the plugin to pass the IV to the cryptographic libraries used, which use the length of the IV, to determine whether an IV less than the required size it is zero padded, and whether an IV that is longer than the required length generates an error. YottaDB suggests using $ZCHAR() in preference to $CHAR() when building IV byte sequences, and to make sure that IV sequences are not unintentionally subjected to numeric conversion.</p>
<p>A USE command with a KEY/IKEY/OKEY deviceparameter that attempts to change the cipher key or IV, including disabling encryption (by specifying an empty key), only succeeds prior to the first WRITE or READ, or after the encryption or decryption state has been reset, such as after a REWIND (only for READ) or a TRUNCATE at the start of a file (for both READ and WRITE).</p>
<p>Separate IKEY and OKEY deviceparameters allow different keys for READ from and WRITE to a device; for example, when a YottaDB process is an element of a UNIX pipe. Because encryption ciphers use state machines (which are initialized with the IV at the beginning of the file), YottaDB permits READ and WRITE operations only either starting at the beginning of a file, or at the position at which the last READ or WRITE operation completed. In particular, non-empty files cannot be opened in APPEND mode; the SEEK deviceparameter is prohibited; and the TRUNCATE is only permitted at the beginning of a file or at the end, the former deleting the contents, and the latter effectively a no-op.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Encrypted files must be written and read sequentially from the beginning (including the Byte Order Marker for UTF files); YottaDB supports READ and WRITE operations at arbitrary locations in a file only for unencrypted files.
</pre></div>
</div>
<p>Example:</p>
<p>The basic steps to use a key and IV to create an encrypted file and decrypt its data in a testing environment are as follows. These steps are solely for demonstration purposes. You must understand and appropriately adjust the steps before using them in a production environment. For example, in a production environment you should keep the key files in a secure location, protected with appropriate permissions from unauthorized access (such as 0500 for directories and 0400 for individual files). File encryption is just one of many components of a comprehensive security plan.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">LD_LIBRARY_PATH</span><span class="o">=</span>/usr/local/lib
<span class="nb">export</span> <span class="nv">GNUPGHOME</span><span class="o">=</span><span class="nv">$PWD</span>/mygnupg
<span class="nv">$ydb_dist</span>/plugin/gtmcrypt/gen_keypair.sh mykeypair@yottadb Keymaster
<span class="nv">$ydb_dist</span>/plugin/gtmcrypt/gen_sym_key.sh <span class="m">0</span> Sunday.key
<span class="nv">$ydb_dist</span>/plugin/gtmcrypt/gen_sym_key.sh <span class="m">0</span> Monday.key
<span class="nv">$ydb_dist</span>/plugin/gtmcrypt/gen_sym_key.sh <span class="m">0</span> Tuesday.key
<span class="nv">$ydb_dist</span>/plugin/gtmcrypt/gen_sym_key.sh <span class="m">0</span> Wednesday.key
<span class="nv">$ydb_dist</span>/plugin/gtmcrypt/gen_sym_key.sh <span class="m">0</span> Thursday.key
<span class="nv">$ydb_dist</span>/plugin/gtmcrypt/gen_sym_key.sh <span class="m">0</span> Friday.key
<span class="nv">$ydb_dist</span>/plugin/gtmcrypt/gen_sym_key.sh <span class="m">0</span> Saturday.key
<span class="nb">echo</span> -n <span class="s2">&quot;Enter password for ydb_passwd&quot;</span><span class="p">;</span><span class="nb">export</span> <span class="nv">ydb_passwd</span><span class="o">=</span><span class="s2">&quot;`</span><span class="nv">$ydb_dist</span><span class="s2">/plugin/gtmcrypt/maskpass|cut -f 3 -d &quot;</span> <span class="s2">&quot;`&quot;</span>
<span class="nb">export</span> <span class="nv">ydb_crypt_config</span><span class="o">=</span>mygtmcryptfile
cat mygtmcryptfile
 files: <span class="o">{</span>
 CustomerReportKey1: <span class="s2">&quot;Sunday.key&quot;</span><span class="p">;</span>
 CustomerReportKey2: <span class="s2">&quot;Monday.key&quot;</span><span class="p">;</span>
 CustomerReportKey3: <span class="s2">&quot;Tuesday.key&quot;</span><span class="p">;</span>
 CustomerReportKey4: <span class="s2">&quot;Wednesday.key&quot;</span><span class="p">;</span>
 CustomerReportKey5: <span class="s2">&quot;Thursday.key&quot;</span><span class="p">;</span>
 CustomerReportKey6: <span class="s2">&quot;Friday.key&quot;</span><span class="p">;</span>
 CustomerReportKey7: <span class="s2">&quot;Saturday.key&quot;</span><span class="p">;</span>
<span class="o">}</span><span class="p">;</span>
<span class="nv">$ydb_dist</span>/yottadb -dir
YDB&gt;zprint ^encrfile
encrfile
 <span class="nb">set</span> <span class="nv">now</span><span class="o">=</span><span class="nv">$horolog</span>
 <span class="nb">set</span> <span class="nv">timestamp</span><span class="o">=</span><span class="nv">$zdate</span><span class="o">(</span>now,<span class="s2">&quot;YYYYMMDDAM1260SS&quot;</span><span class="o">)</span>
 <span class="nb">set</span> <span class="nv">dayofweek</span><span class="o">=</span><span class="nv">$zdate</span><span class="o">(</span>now,<span class="s2">&quot;DAY&quot;</span>,<span class="s2">&quot;&quot;</span>,<span class="s2">&quot;1,2,3,4,5,6,7&quot;</span><span class="o">)</span>
 <span class="nb">set</span> <span class="nv">file</span><span class="o">=</span><span class="s2">&quot;Customers&quot;</span>_timestamp_<span class="s2">&quot;.log&quot;</span>
 open file:<span class="o">(</span>newversion:key<span class="o">=</span><span class="s2">&quot;CustomerReportKey&quot;</span>_dayofweek_<span class="s2">&quot; &quot;</span>_timestamp<span class="o">)</span>
 use file
 write <span class="s2">&quot;Customer Report - Page 1&quot;</span>,!
 close file
 write <span class="s2">&quot;IV : &quot;</span>,timestamp,!,<span class="s2">&quot;Key : CustomerReportKey&quot;</span>_dayofweek
YDB&gt;do ^encrfile
IV : 20140911AM042419
Key : CustomerReportKey5
YDB&gt;zprint ^readencrfile
readencrfile<span class="o">(</span>key,iv<span class="o">)</span>
 <span class="nb">set</span> <span class="nv">file</span><span class="o">=</span><span class="s2">&quot;Customers&quot;</span>_iv_<span class="s2">&quot;.log&quot;</span>
 open file:<span class="o">(</span><span class="nv">key</span><span class="o">=</span>key_<span class="s2">&quot; &quot;</span>_iv<span class="o">)</span>
 use file
 <span class="k">for</span> <span class="nb">read</span> data use <span class="nv">$principal</span> write data,! use file quit:<span class="nv">$zeof</span>
 close file
YDB&gt;do ^readencrfile<span class="o">(</span><span class="s2">&quot;CustomerReportKey5&quot;</span>,<span class="s2">&quot;20140911AM042419&quot;</span><span class="o">)</span>
Customer Report - Page <span class="m">1</span>
YDB&gt;
</pre></div>
</div>
<p>In this example, the key name is CustomerReportKey followed by the number representing the day of the week, and IV is a timestamp, which is also a part of the file name. Although all reports start with the same string “Customer Report - Page 1”, using a different IV for each file ensures that encrypted data begins with a different sequence of bytes, and making that IV a part of the file name ensures that the recipient of a report (who would have access to the key) can easily deduce the IV needed to decrypt the contents.</p>
</section>
<section id="listen">
<h4><a class="toc-backref" href="ioproc.html#id134">LISTEN</a><a class="headerlink" href="ioproc.html#listen" title="Permalink to this heading">¶</a></h4>
<p>LISTEN=expr Applies to: SOC</p>
<p>A new socket is allocated to listen for a connection. It is made the current socket for the device, if the operation is successful. Upon successful completion, $KEY is set to the format of “LISTENING|&lt;socket_handle&gt;|{&lt;portnumber&gt;|&lt;/path/to/LOCAL_socket&gt;}” otherwise, $KEY is assigned the empty string.</p>
<p>expr specifies the protocol and protocol specific information. Currently, YottaDB supports TCP/IP and LOCAL (also known as UNIX domain) socket protocols. For TCP/IP sockets, specify expr in the form of “&lt;port&gt;:TCP”.</p>
<p>If &lt;port&gt;=0 is specified, the system chooses the port for the TCP/IP socket.</p>
<p>For LOCAL sockets:</p>
<ul class="simple">
<li><p>Specify expr in the form of “&lt;pathname&gt;:LOCAL”, where &lt;pathname&gt; is the name of the file to be used for communication. &lt;pathname&gt; may contain a dollar sign ($) followed by the name of an environment variable which YottaDB expands in the same way as the device name for a sequential file. The maximum allowed length of the expanded path name depends on the OS.</p></li>
<li><p>LISTEN creates the file if it doesn’t exist. If the OPEN command specifies the NEWVERSION deviceparameter, the file specified by the pathname exists, and is a socket file, that file is deleted and YottaDB creates a new file.</p></li>
<li><p>LISTEN with an OPEN processes the GROUP, OWNER, SYSTEM, WORLD, UIC, and NEWVERSION deviceparameters the same as OPEN for sequential files.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To access the listening socket through $KEY, one needs to USE the value of the socket device first, otherwise $KEY will show the value of the current device instead. i.e.</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>&gt; cat x.m
 <span class="nb">set</span> <span class="nv">s</span><span class="o">=</span><span class="s2">&quot;socketdev&quot;</span> open s:<span class="o">(</span><span class="nv">LISTEN</span><span class="o">=</span><span class="s2">&quot;5000:TCP&quot;</span><span class="o">)</span>:1:<span class="s2">&quot;SOCKET&quot;</span>
 <span class="k">if</span> <span class="nv">$test</span>  use s <span class="nb">set</span> <span class="nv">x</span><span class="o">=</span><span class="nv">$key</span>  use <span class="nv">$p</span>  write x,!
&gt; yottadb -run x
 LISTENING<span class="p">|</span>h1537723881000<span class="p">|</span><span class="m">5000</span>
</pre></div>
</div>
</section>
<section id="morereadtime">
<h4><a class="toc-backref" href="ioproc.html#id135">MOREREADTIME</a><a class="headerlink" href="ioproc.html#morereadtime" title="Permalink to this heading">¶</a></h4>
<p>MOREREADTIME=intexpr Applies to: SOC</p>
<p>MOREREADTIME specifies the polling interval (in milliseconds) that a SOCKET device uses to check for arriving packets.</p>
<p>With no MOREREADTIME specified, SOCKET READ implements a dynamic approach of using a longer first interval of 200 ms when it finds no data, then shortening the interval to 10 ms when data starts to arrive.</p>
<p>If an interval is specified, the SOCKET device always uses the specified interval and doesn’t adjust dynamically. This applies to any SOCKET READ. For more information on implementing SOCKET READ, refer to <a class="reference internal" href="ioproc.html#socket-read-operation">Socket Read Operation</a>.</p>
<p>If a SOCKET READ is not subject to any of the defined terminating conditions, it terminates either after it has at least one character followed by an interval with no new packets, or reading 1,048,576 bytes.</p>
<p>If you use the MOREREADTIME behavior, bear in mind that:</p>
<ul class="simple">
<li><p>Usually, it is more efficient and responsive for an application to wait and process input in larger chunks. Therefore, a larger value for MOREREADTIME can bring larger chunks of input to the application. However, large values may make for sluggish response.</p></li>
<li><p>A short value for MOREREADTIME may consume considerable CPU cycles, especially on a lightly loaded system.</p></li>
<li><p>The maximum value of MORETREADTIME is 999 (basically 1 second). Never set MOREREADTIME to 0 as it causes excessive CPU “spinning”.</p></li>
</ul>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>Use tcpdev:morereadtime=200
</pre></div>
</div>
<p>This example specifies that all READs for socket device tcpdev must wait for 200 milliseconds for input.</p>
</section>
<section id="newversion">
<h4><a class="toc-backref" href="ioproc.html#id136">NEWVERSION</a><a class="headerlink" href="ioproc.html#newversion" title="Permalink to this heading">¶</a></h4>
<p>NEWVERSION Applies to: SD FIFO SOC(LOCAL)</p>
<p>The NEWVERSION deviceparameter assures that when an existing file is used, it is empty upon the OPEN.</p>
<p>By default, if any version of the file exists, OPEN accesses the current version. If no version of the file exists, OPEN without READONLY creates a new file.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;file1<span class="o">=</span><span class="s2">&quot;foo.txt&quot;</span>
YDB&gt;open file1:newversion:recordsize<span class="o">=</span><span class="m">5000</span>
YDB&gt;
</pre></div>
</div>
<p>This example creates a new version of sequential file foo.txt with a RECORDSIZE of 5000 bytes.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">delim</span><span class="o">=</span><span class="nv">$c</span><span class="o">(</span><span class="m">13</span><span class="o">)</span>
YDB&gt;set <span class="nv">tcpdev</span><span class="o">=</span><span class="s2">&quot;server</span>$<span class="s2">&quot;</span>_<span class="nv">$j</span>,timeout<span class="o">=</span><span class="m">30</span>
YDB&gt;open tcpdev:<span class="o">(</span><span class="nv">LISTEN</span><span class="o">=</span><span class="s2">&quot;local.socket&quot;</span>_<span class="s2">&quot;:LOCAL&quot;</span>:delim<span class="o">=</span><span class="nv">$c</span><span class="o">(</span><span class="m">13</span><span class="o">)</span>:attach<span class="o">=</span><span class="s2">&quot;server&quot;</span>:newversion<span class="o">)</span>:timeout:<span class="s2">&quot;SOCKET&quot;</span>
</pre></div>
</div>
<p>This example deletes the old local.socket file (if it exists) and creates a new LISTENING local.socket file.</p>
</section>
<section id="ochset">
<h4><a class="toc-backref" href="ioproc.html#id137">OCHSET</a><a class="headerlink" href="ioproc.html#ochset" title="Permalink to this heading">¶</a></h4>
<p>OCHSET=expr Applies to: All devices</p>
<p>Establishes the character encoding of the output device OPENed and USEed in the UTF-8 mode. The value of the expression can be M, UTF-8, UTF-16, UTF-16LE, or UTF-16BE. In M mode, OCHSET has no effect.</p>
<p>If *CHSET is not specified, YottaDB assumes UTF-8 as the default character set for all the input/output devices.</p>
<p>If expr is set to a value other than M, UTF-8, UTF-16, UTF-16LE or UTF-16BE, YottaDB produces a run-time error. UTF-16, UTF-LE, and UTF-16BE are not supported for $Principal and Terminal devices.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>OCHSET is a deviceparameter of both the OPEN and USE commands. As OCHSET can change the character set of an already OPENed device, it can help deal with binary data intermixed with character data.</p>
</div>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;SET <span class="nv">file1</span><span class="o">=</span><span class="s2">&quot;mydata.out&quot;</span>
YDB&gt;SET <span class="nv">expr</span><span class="o">=</span><span class="s2">&quot;UTF-16LE&quot;</span>
YDB&gt;OPEN file1:<span class="o">(</span><span class="nv">ochset</span><span class="o">=</span>expr<span class="o">)</span>
YDB&gt;SET <span class="nv">DS</span><span class="o">=</span><span class="nv">$CHAR</span><span class="o">(</span><span class="nv">$$</span>FUNC^%HD<span class="o">(</span><span class="s2">&quot;0905&quot;</span><span class="o">))</span>_<span class="nv">$CHAR</span><span class="o">(</span><span class="nv">$$</span>FUNC^%HD<span class="o">(</span><span class="s2">&quot;091A&quot;</span><span class="o">))</span>
YDB&gt;SET <span class="nv">DS</span><span class="o">=</span>DS_<span class="nv">$CHAR</span><span class="o">(</span><span class="nv">$$</span>FUNC^%HD<span class="o">(</span><span class="s2">&quot;094D&quot;</span><span class="o">))</span>_<span class="nv">$CHAR</span><span class="o">(</span><span class="nv">$$</span>FUNC^%HD<span class="o">(</span><span class="s2">&quot;091B&quot;</span><span class="o">))</span>_<span class="nv">$CHAR</span><span class="o">(</span><span class="nv">$$</span>FUNC^%HD<span class="o">(</span><span class="s2">&quot;0940&quot;</span><span class="o">))</span>
YDB&gt;USE file1 WRITE DS,!
YDB&gt;CLOSE file1
</pre></div>
</div>
<p>This example opens a new file called mydata.out and writes Devanagari characters in the UTF-16LE encoding.</p>
</section>
<section id="okey">
<h4><a class="toc-backref" href="ioproc.html#id138">OKEY</a><a class="headerlink" href="ioproc.html#okey" title="Permalink to this heading">¶</a></h4>
<p>Applies to: SD, PIPE, and FIFO</p>
<p>OKEY allows the use of a seperate key for WRITE to a device; for example, when a YottaDB process is an element of a UNIX pipe. The format of the IKEY deviceparameter is:</p>
<p>OKEY=”key_name [IV]”</p>
<p>key_name is case-sensitive and must match a key name in the “files” section of the ydb_crypt_config file. The optional IV specifies an initialization vector to use for encryption and decryption.</p>
<p>For more information, refer to the description of <a class="reference internal" href="ioproc.html#key-open"><span class="std std-ref">KEY</span></a> deviceparameter of OPEN or USE.</p>
</section>
<section id="owner">
<h4><a class="toc-backref" href="ioproc.html#id139">OWNER</a><a class="headerlink" href="ioproc.html#owner" title="Permalink to this heading">¶</a></h4>
<p>OWNER=expr Applies to: SOC(LOCAL) SD FIFO</p>
<p>Specifies access permission on a UNIX file for the owner of the file. The expression is a character string evaluating to null or to any combination of the letters RWX, indicating Read, Write, and eXecute access. When any one of these deviceparameters appears on an OPEN of a new file, any user category that is not explicitly specified is given the default mask. When any one of these deviceparameters (OWNER, GROUP, , WORLD) appears on an OPEN of an existing file, any user category that is not explicitly specified remains unchanged.</p>
<p>To modify file security, the user who issues the OPEN must have ownership.</p>
<p>If none of GROUP, OWNER, or WORLD are specified on OPEN, YottaDB does not modify the permissions on an existing file and new files are created using the standard UNIX rules.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>open &quot;test49.txt&quot;:(newversion:owner=&quot;rw&quot;:group=&quot;rw&quot;:world=&quot;rw&quot;)
</pre></div>
</div>
<p>This example opens a new version of test49.txt with Read Write acess for the owner.</p>
</section>
<section id="pad">
<h4><a class="toc-backref" href="ioproc.html#id140">PAD</a><a class="headerlink" href="ioproc.html#pad" title="Permalink to this heading">¶</a></h4>
<p>PAD=expr Applies to: SD FIFO PIPE</p>
<p>For FIXED format sequential files when the character set is not M, if a multi-byte character (when CHSET is UTF-8) or a surrogate pair (when CHSET is UTF-16) does not fit into the record (either logical as given by WIDTH or physical as given by RECORDSIZE) the WRITE command uses bytes with the value specified by the PAD deviceparameter to fill out the physical record. READ ignores the pad bytes when found at the end of the record. The value for PAD is given as an integer in the range 0-127 (the ASCII characters). PAD is always a byte value and the default is $ZCHAR(32) or [SPACE].</p>
<p>In UTF-8 mode, there are three cases that cause YottaDB to insert PAD characters when WRITEing. When READing, YottaDB attempts to strip any PAD characters. This stripping only works properly if the RECORDSIZE and PAD are the same for the READ as when the WRITEs occurred. WRITE inserts PAD characters when:</p>
<ul class="simple">
<li><p>The file is closed and the last record is less than the RECORDSIZE. Records are padded (for FIXED) by WRITE ! as well as when the file is closed.</p></li>
<li><p>$X exceeds WIDTH before the RECORDSIZE is full.</p></li>
<li><p>The next character won’t fit in the remaining RECORDSIZE.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In all UTF-16 character sets, RECORDSIZE must be even and PAD bytes occupy two bytes with the high order byte zero.</p>
</div>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;do ^padexample
padexample
 zprint ^padexample
 <span class="nb">set</span> <span class="nv">a</span><span class="o">=</span><span class="s2">&quot;主要雨在西班牙停留在平原&quot;</span>
 <span class="nb">set</span> <span class="nv">encoding</span><span class="o">=</span><span class="s2">&quot;UTF-8&quot;</span>
 <span class="nb">set</span> <span class="nv">filename</span><span class="o">=</span><span class="s2">&quot;bom&quot;</span>_encoding_<span class="s2">&quot;.txt&quot;</span>
 open filename:<span class="o">(</span>newversion:fixed:record<span class="o">=</span><span class="m">8</span>:pad<span class="o">=</span><span class="m">66</span>:chset<span class="o">=</span>encoding<span class="o">)</span>
 use filename
 write a
 close filename
 halt
$ cat bomUTF-8.txt
主要BB雨在BB西班BB牙停BB留在BB平原
$ od -tcd1 bomUTF-8.txt
<span class="m">0000000</span>  <span class="m">344</span>  <span class="m">270</span>  <span class="m">273</span>  <span class="m">350</span>  <span class="m">246</span>  <span class="m">201</span>    B    B  <span class="m">351</span>  <span class="m">233</span>  <span class="m">250</span>  <span class="m">345</span>  <span class="m">234</span>  <span class="m">250</span>    B    B
         -28  -72  -69  -24  -90 -127   <span class="m">66</span>   <span class="m">66</span>  -23 -101  -88  -27 -100  -88   <span class="m">66</span>   <span class="m">66</span>
<span class="m">0000020</span>  <span class="m">350</span>  <span class="m">245</span>  <span class="m">277</span>  <span class="m">347</span>  <span class="m">217</span>  <span class="m">255</span>    B    B  <span class="m">347</span>  <span class="m">211</span>  <span class="m">231</span>  <span class="m">345</span>  <span class="m">201</span>  <span class="m">234</span>    B    B
         -24  -91  -65  -25 -113  -83   <span class="m">66</span>   <span class="m">66</span>  -25 -119 -103  -27 -127 -100   <span class="m">66</span>   <span class="m">66</span>
<span class="m">0000040</span>  <span class="m">347</span>  <span class="m">225</span>  <span class="m">231</span>  <span class="m">345</span>  <span class="m">234</span>  <span class="m">250</span>    B    B  <span class="m">345</span>  <span class="m">271</span>  <span class="m">263</span>  <span class="m">345</span>  <span class="m">216</span>  <span class="m">237</span>
         -25 -107 -103  -27 -100  -88   <span class="m">66</span>   <span class="m">66</span>  -27  -71  -77  -27 -114  -97   <span class="m">32</span>   <span class="m">32</span>
</pre></div>
</div>
<p>In this example, the local variable a is set to a string of three-byte characters. PAD=66 sets padding byte value to $CHAR(66)</p>
</section>
<section id="parse">
<h4><a class="toc-backref" href="ioproc.html#id141">PARSE</a><a class="headerlink" href="ioproc.html#parse" title="Permalink to this heading">¶</a></h4>
<p>PARSE Applies to: PIPE</p>
<p>The PARSE deviceparameter invokes preliminary validation of the COMMAND value. When debugging, PARSE provides more accessible diagnosis for COMMAND values. By default, OPEN does not validate command values before passing them to the newly created process. PARSE has certain limitations, which may, or may not map to, those of the shell.</p>
<ul class="simple">
<li><p>PARSE searches for the command in the environment variables PATH and ydb_dist and produces an error if it is not found.</p></li>
<li><p>PARSE does not resolve aliases, so they produce an error.</p></li>
<li><p>PARSE does not resolve environment variables, except $ydb_dist (as mentioned above), so they trigger an error.</p></li>
<li><p>PARSE does not recognize built-in commands other than nohup and cd unless $PATH or $ydb_dist contain a version with the same name (as the built-in). In the case of nohup, PARSE looks for the next token in $PATH and $ydb_dist. “When PARSE encounters cd it ignores what follows until the next “|” token (if one appears later in the COMMAND value).</p></li>
<li><p>PARSE rejects parentheses around commands.</p></li>
</ul>
<p>The following example fails:</p>
<ul>
<li><p>OPEN p:(COMM=”(cd; pwd)”:WRITEONLY)::”PIPE”</p>
<p>which could be specified without a PARSE error as:</p>
<p>OPEN p:(COMM=”cd; pwd”:WRITEONLY)::”pipe”</p>
<p>This restriction does not include parentheses embedded in character strings as in:</p>
</li>
<li><p>OPEN p:(COMM=”echo “”(test)”””:WRITEONLY)::”pipe”</p>
<p>or parameters to a command as in:</p>
<p>OPEN p:(COMM=”tr -d ‘()’”:WRITEONLY)::”PIPE”</p>
</li>
<li><p>The following are examples of valid OPEN commands using PARSE:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>OPEN a:(COMM=&quot;tr e j | echoback&quot;:STDERR=e:exception=&quot;g BADOPEN&quot;:PARSE)::&quot;PIPE&quot;
OPEN a:(SHELL=&quot;/usr/local/bin/tcsh&quot;:COMM=&quot;/bin/cat |&amp; nl&quot;:PARSE)::&quot;PIPE&quot;
OPEN a:(COMM=&quot;mupip integ -file yottadb.dat&quot;:PARSE)::&quot;PIPE&quot;
OPEN a:(COMM=&quot;$ydb_dist/mupip integ -file yottadb.dat&quot;:PARSE)::&quot;PIPE&quot;
OPEN a:(COMM=&quot;nohup cat&quot;:PARSE)::&quot;PIPE&quot;
</pre></div>
</div>
</li>
</ul>
</section>
<section id="readonly">
<h4><a class="toc-backref" href="ioproc.html#id142">READONLY</a><a class="headerlink" href="ioproc.html#readonly" title="Permalink to this heading">¶</a></h4>
<p>[NO]READONLY Applies to: SD FIFO PIPE</p>
<p>OPENs a device for reading only (READONLY) or reading and writing (NOREADONLY).</p>
<p>To open a sequential file using the READONLY parameter, the file must exist on the disk. If it does not, YottaDB issues a run-time error.</p>
<p>When YottaDB encounters a WRITE directed to a file, OPENed READONLY, YottaDB issues a run-time error.</p>
<p>By default, OPEN accesses the device or file NOREADONLY (read-write).</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">filename</span><span class="o">=</span><span class="s2">&quot;foo.txt&quot;</span>
YDB&gt;open filename:<span class="o">(</span>readonly:recordsize<span class="o">=</span><span class="m">1048576</span><span class="o">)</span>
YDB&gt;
</pre></div>
</div>
<p>This example opens the file foo.txt with read permission.</p>
</section>
<section id="recordsize">
<h4><a class="toc-backref" href="ioproc.html#id143">RECORDSIZE</a><a class="headerlink" href="ioproc.html#recordsize" title="Permalink to this heading">¶</a></h4>
<p>RECORDSIZE=intexpr Applies to: SD FIFO PIPE</p>
<p>Overrides the default record size for a disk.</p>
<p>RECORDSIZE specifies an initial WIDTH. Note because RECORDSIZE is in bytes that in UTF-8 mode it produces a WIDTH that assumes one-byte characters.</p>
<p>The RECORDSIZE of a fixed length record for a YottaDB sequential disk device is always specified in bytes, rather than characters.</p>
<p>For all UTF-16 CHSET values, RECORDSIZE must be even and PAD characters each occupy two bytes in the record.</p>
<p>The maximum size of intexpr is 1,048,576 bytes. YottaDB produces an error if you specify a value greater than 1,048,576.</p>
<p>When a CHSET related to Unicode® characters is in use, YottaDB treats RECORDSIZE as a byte limit at which to wrap or truncate output depending on [Z][NO]WRAP. For any Unicode character set, YottaDB ignores RECORDSIZE for a device which is already open if any I/O has been done.</p>
<p>If the character set is not UTF-16, UTF-16LE, UTF-16BE, the default RECORDSIZE is 32K-1bytes.</p>
<p>If the character set is UTF-16, UTF-16LE or UTF16-BE, the RECORDSIZE must always be in multiples of 2. For these character sets, the default RECORDIZE is 32K-4 bytes.</p>
<p>For all UTF-16 CHSET values, RECORDSIZE must be even and PAD characters each occupy two bytes in the record.</p>
</section>
<section id="rewind">
<h4><a class="toc-backref" href="ioproc.html#id144">REWIND</a><a class="headerlink" href="ioproc.html#rewind" title="Permalink to this heading">¶</a></h4>
<p>REWIND Applies to: SD</p>
<p>REWIND positions the file pointer of a sequential disk.</p>
<p>When $PRINCIPAL identifies a device that supports REWIND, the REWIND or INREWIND device parameters perform a REWIND of the input and OUTREWIND performs a REWIND of the output.</p>
<p>By default, OPEN does not REWIND.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>OPEN &quot;test40.txt&quot;:(REWIND:RECORDSIZE=70:NOWRAP)
</pre></div>
</div>
<p>This example opens file test40.txt and places the file pointer at the beginning of the file.</p>
</section>
<section id="seek-strexpr">
<h4><a class="toc-backref" href="ioproc.html#id145">SEEK=strexpr</a><a class="headerlink" href="ioproc.html#seek-strexpr" title="Permalink to this heading">¶</a></h4>
<p>SEEK Applies to: SD</p>
<p>Positions the current file pointer to the location specified in strexpr. The format of strexpr is a string of the form “[+|-]integer” where unsigned value specifies an offset from the beginning of the file, and an explicitly signed value specifies an offset relative to the current file position. For STREAM or VARIABLE format, the positive intexpr after any sign is a byte offset, while for a FIXED format, it is a record offset. In order to deal with the possible presence of a Byte Order Marker (BOM), SEEK for a FIXED format file written in a UTF character set must follow at least one prior READ since the device was created.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If an APPEND is combined with a SEEK deviceparameter the APPEND is done first - regardless of deviceparameter order.</p>
</div>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;zprint ^seekdemo
seekdemo
  new x,p
  <span class="nb">set</span> <span class="nv">p</span><span class="o">=</span><span class="s2">&quot;seekfixed&quot;</span>
  open p:<span class="o">(</span>newversion:fixed:recordsize<span class="o">=</span><span class="m">60</span><span class="o">)</span>
  use p
  <span class="p">;</span> create file with <span class="m">9</span> records of length <span class="m">60</span> bytes each
  <span class="p">;</span> number from <span class="m">0</span> to correspond to record offset

  <span class="k">for</span> <span class="nv">i</span><span class="o">=</span><span class="m">0</span>:1:8 write <span class="nv">$justify</span><span class="o">(</span>i_<span class="s2">&quot; - [-05-|-10-|-15-|-20-|-25-|-30-|-35-|-40-|-45-|-50-|-55-|&quot;</span>,60<span class="o">)</span>
  use p:rewind
  <span class="k">for</span> <span class="nv">i</span><span class="o">=</span><span class="m">0</span>:1:8 <span class="nb">read</span> x <span class="nb">set</span> <span class="nv">zk</span><span class="o">=</span><span class="nv">$zkey</span> use <span class="nv">$p</span> write <span class="s2">&quot;x= &quot;</span>,x,<span class="s2">&quot; </span><span class="nv">$zkey</span><span class="s2">= &quot;</span>,zk,! use p
  close p
  write !!,<span class="s2">&quot;** OPEN with FIXED:RECORDSIZE=60:seek=&quot;&quot;5&quot;&quot;&quot;</span>,!
  open p:<span class="o">(</span>fixed:recordsize<span class="o">=</span><span class="m">60</span>:seek<span class="o">=</span><span class="s2">&quot;5&quot;</span><span class="o">)</span>
  use p
  <span class="nb">read</span> x <span class="nb">set</span> <span class="nv">ZKEY</span><span class="o">=</span><span class="nv">$zkey</span>
  <span class="p">;</span>expect: <span class="nv">$ZKEY</span><span class="o">=</span> <span class="m">6</span>,0
  use <span class="nv">$p</span> write <span class="s2">&quot;x= &quot;</span>,x,<span class="s2">&quot; </span><span class="nv">$zkey</span><span class="s2">= &quot;</span>,ZKEY,!
  write !,<span class="s2">&quot;** use with SEEK=&quot;&quot;-3&quot;&quot;&quot;</span>,!
  use p:seek<span class="o">=</span><span class="s2">&quot;-3&quot;</span>
  <span class="nb">read</span> x <span class="nb">set</span> <span class="nv">ZKEY</span><span class="o">=</span><span class="nv">$zkey</span>
  <span class="p">;</span>expect: <span class="nv">$ZKEY</span><span class="o">=</span> <span class="m">4</span>,0
  use <span class="nv">$p</span> write <span class="s2">&quot;x= &quot;</span>,x,<span class="s2">&quot; </span><span class="nv">$zkey</span><span class="s2">= &quot;</span>,ZKEY,!
  write !,<span class="s2">&quot;** use with SEEK=&quot;&quot;-1&quot;&quot; to read from the same record. read x#20 to read a partial record&quot;</span>,!
  use p:seek<span class="o">=</span><span class="s2">&quot;-1&quot;</span>
  <span class="nb">read</span> x#20 <span class="nb">set</span> <span class="nv">ZKEY</span><span class="o">=</span><span class="nv">$zkey</span>
  <span class="p">;</span>expect: <span class="nv">$ZKEY</span><span class="o">=</span> <span class="m">3</span>,20
  use <span class="nv">$p</span> write <span class="s2">&quot;x= &quot;</span>,x,<span class="s2">&quot; </span><span class="nv">$zkey</span><span class="s2">= &quot;</span>,ZKEY,!
  write !,<span class="s2">&quot;** read x#40 to finish reading the record&quot;</span>,!
  use p
  <span class="nb">read</span> x#40 <span class="nb">set</span> <span class="nv">ZKEY</span><span class="o">=</span><span class="nv">$zkey</span>
  <span class="p">;</span>expect: <span class="nv">$ZKEY</span><span class="o">=</span> <span class="m">4</span>,0
  use <span class="nv">$p</span> write <span class="s2">&quot;x= &quot;</span>,x,<span class="s2">&quot; </span><span class="nv">$zkey</span><span class="s2">= &quot;</span>,ZKEY,!
  write !,<span class="s2">&quot;** CLOSE NODESTROY and reOPEN with no deviceparameters&quot;</span>,!
  close p:nodestroy
  open p
  use p
  <span class="nb">read</span> x <span class="nb">set</span> <span class="nv">ZKEY</span><span class="o">=</span><span class="nv">$zkey</span>
  <span class="p">;</span>expect: <span class="nv">$ZKEY</span><span class="o">=</span> <span class="m">5</span>,0
  use <span class="nv">$p</span> write <span class="s2">&quot;x= &quot;</span>,x,<span class="s2">&quot; </span><span class="nv">$zkey</span><span class="s2">= &quot;</span>,ZKEY,!
  write !,<span class="s2">&quot;** CLOSE NODESTROY and reOPEN with SEEK=&quot;&quot;+2&quot;&quot;&quot;</span>,!
  close p:nodestroy
  open p:seek<span class="o">=</span><span class="s2">&quot;+2&quot;</span>
  use p
  <span class="nb">read</span> x <span class="nb">set</span> <span class="nv">ZKEY</span><span class="o">=</span><span class="nv">$zkey</span>
  <span class="p">;</span>expect: <span class="nv">$ZKEY</span><span class="o">=</span> <span class="m">8</span>,0
  use <span class="nv">$p</span> write <span class="s2">&quot;x= &quot;</span>,x,<span class="s2">&quot; </span><span class="nv">$zkey</span><span class="s2">= &quot;</span>,ZKEY,!
  write !,<span class="s2">&quot;** CLOSE NODESTROY and reOPEN with M:SEEK=&quot;&quot;+3&quot;&quot;&quot;</span>,!
  close p:nodestroy
  open p:<span class="o">(</span>M:seek<span class="o">=</span><span class="s2">&quot;+3&quot;</span><span class="o">)</span>
  use p
  <span class="nb">read</span> x <span class="nb">set</span> <span class="nv">ZKEY</span><span class="o">=</span><span class="nv">$zkey</span>
  <span class="p">;</span>expect: <span class="nv">$ZKEY</span><span class="o">=</span> <span class="m">4</span>,0
   use <span class="nv">$p</span> write <span class="s2">&quot;x= &quot;</span>,x,<span class="s2">&quot; </span><span class="nv">$zkey</span><span class="s2">= &quot;</span>,ZKEY,!
  write !,<span class="s2">&quot;** CLOSE NODESTROY and reOPEN with APPEND:SEEK=&quot;&quot;-1&quot;&quot;&quot;</span>,!
  close p:nodestroy
  open p:<span class="o">(</span>append:seek<span class="o">=</span><span class="s2">&quot;-1&quot;</span><span class="o">)</span>
  use p
  <span class="nb">read</span> x <span class="nb">set</span> <span class="nv">ZKEY</span><span class="o">=</span><span class="nv">$zkey</span>
  <span class="p">;</span>expect: <span class="nv">$ZKEY</span><span class="o">=</span> <span class="m">9</span>,0
  use <span class="nv">$p</span> write <span class="s2">&quot;x= &quot;</span>,x,<span class="s2">&quot; </span><span class="nv">$zkey</span><span class="s2">= &quot;</span>,ZKEY,!
  close p
  write !,<span class="s2">&quot;** CLOSE DESTROY and OPEN non-fixed with SEEK=&quot;&quot;120&quot;&quot; and read 60 bytes&quot;</span>,!
   open p:seek<span class="o">=</span><span class="s2">&quot;120&quot;</span>
  use p
  <span class="nb">read</span> x#60 <span class="nb">set</span> <span class="nv">ZKEY</span><span class="o">=</span><span class="nv">$zkey</span>
  <span class="p">;</span>expect: <span class="nv">$ZKEY</span><span class="o">=</span> <span class="m">180</span>
  use <span class="nv">$p</span> write <span class="s2">&quot;x= &quot;</span>,x,<span class="s2">&quot; </span><span class="nv">$zkey</span><span class="s2">= &quot;</span>,ZKEY,!
  write !,<span class="s2">&quot;** CLOSE NODESTROY and reOPEN with append:SEEK=&quot;&quot;-60&quot;&quot; and read last 60 bytes&quot;</span>,!
  close p:nodestroy
  open p:<span class="o">(</span>append:seek<span class="o">=</span><span class="s2">&quot;-60&quot;</span><span class="o">)</span>
  use p
  <span class="nb">read</span> x#60 <span class="nb">set</span> <span class="nv">ZKEY</span><span class="o">=</span><span class="nv">$zkey</span>
  <span class="p">;</span>expect: <span class="nv">$ZKEY</span><span class="o">=</span> <span class="m">540</span>
  use <span class="nv">$p</span> write <span class="s2">&quot;x= &quot;</span>,x,<span class="s2">&quot; </span><span class="nv">$zkey</span><span class="s2">= &quot;</span>,ZKEY,!
  close p
  quit



YDB&gt;do ^seekdemo
<span class="nv">x</span><span class="o">=</span> <span class="m">0</span> - <span class="o">[</span>-05-<span class="p">|</span>-10-<span class="p">|</span>-15-<span class="p">|</span>-20-<span class="p">|</span>-25-<span class="p">|</span>-30-<span class="p">|</span>-35-<span class="p">|</span>-40-<span class="p">|</span>-45-<span class="p">|</span>-50-<span class="p">|</span>-55-<span class="p">|</span> <span class="nv">$zkey</span><span class="o">=</span> <span class="m">1</span>,0
<span class="nv">x</span><span class="o">=</span> <span class="m">1</span> - <span class="o">[</span>-05-<span class="p">|</span>-10-<span class="p">|</span>-15-<span class="p">|</span>-20-<span class="p">|</span>-25-<span class="p">|</span>-30-<span class="p">|</span>-35-<span class="p">|</span>-40-<span class="p">|</span>-45-<span class="p">|</span>-50-<span class="p">|</span>-55-<span class="p">|</span> <span class="nv">$zkey</span><span class="o">=</span> <span class="m">2</span>,0
<span class="nv">x</span><span class="o">=</span> <span class="m">2</span> - <span class="o">[</span>-05-<span class="p">|</span>-10-<span class="p">|</span>-15-<span class="p">|</span>-20-<span class="p">|</span>-25-<span class="p">|</span>-30-<span class="p">|</span>-35-<span class="p">|</span>-40-<span class="p">|</span>-45-<span class="p">|</span>-50-<span class="p">|</span>-55-<span class="p">|</span> <span class="nv">$zkey</span><span class="o">=</span> <span class="m">3</span>,0
<span class="nv">x</span><span class="o">=</span> <span class="m">3</span> - <span class="o">[</span>-05-<span class="p">|</span>-10-<span class="p">|</span>-15-<span class="p">|</span>-20-<span class="p">|</span>-25-<span class="p">|</span>-30-<span class="p">|</span>-35-<span class="p">|</span>-40-<span class="p">|</span>-45-<span class="p">|</span>-50-<span class="p">|</span>-55-<span class="p">|</span> <span class="nv">$zkey</span><span class="o">=</span> <span class="m">4</span>,0
<span class="nv">x</span><span class="o">=</span> <span class="m">4</span> - <span class="o">[</span>-05-<span class="p">|</span>-10-<span class="p">|</span>-15-<span class="p">|</span>-20-<span class="p">|</span>-25-<span class="p">|</span>-30-<span class="p">|</span>-35-<span class="p">|</span>-40-<span class="p">|</span>-45-<span class="p">|</span>-50-<span class="p">|</span>-55-<span class="p">|</span> <span class="nv">$zkey</span><span class="o">=</span> <span class="m">5</span>,0
<span class="nv">x</span><span class="o">=</span> <span class="m">5</span> - <span class="o">[</span>-05-<span class="p">|</span>-10-<span class="p">|</span>-15-<span class="p">|</span>-20-<span class="p">|</span>-25-<span class="p">|</span>-30-<span class="p">|</span>-35-<span class="p">|</span>-40-<span class="p">|</span>-45-<span class="p">|</span>-50-<span class="p">|</span>-55-<span class="p">|</span> <span class="nv">$zkey</span><span class="o">=</span> <span class="m">6</span>,0
<span class="nv">x</span><span class="o">=</span> <span class="m">6</span> - <span class="o">[</span>-05-<span class="p">|</span>-10-<span class="p">|</span>-15-<span class="p">|</span>-20-<span class="p">|</span>-25-<span class="p">|</span>-30-<span class="p">|</span>-35-<span class="p">|</span>-40-<span class="p">|</span>-45-<span class="p">|</span>-50-<span class="p">|</span>-55-<span class="p">|</span> <span class="nv">$zkey</span><span class="o">=</span> <span class="m">7</span>,0
<span class="nv">x</span><span class="o">=</span> <span class="m">7</span> - <span class="o">[</span>-05-<span class="p">|</span>-10-<span class="p">|</span>-15-<span class="p">|</span>-20-<span class="p">|</span>-25-<span class="p">|</span>-30-<span class="p">|</span>-35-<span class="p">|</span>-40-<span class="p">|</span>-45-<span class="p">|</span>-50-<span class="p">|</span>-55-<span class="p">|</span> <span class="nv">$zkey</span><span class="o">=</span> <span class="m">8</span>,0
<span class="nv">x</span><span class="o">=</span> <span class="m">8</span> - <span class="o">[</span>-05-<span class="p">|</span>-10-<span class="p">|</span>-15-<span class="p">|</span>-20-<span class="p">|</span>-25-<span class="p">|</span>-30-<span class="p">|</span>-35-<span class="p">|</span>-40-<span class="p">|</span>-45-<span class="p">|</span>-50-<span class="p">|</span>-55-<span class="p">|</span> <span class="nv">$zkey</span><span class="o">=</span> <span class="m">9</span>,0
** OPEN with FIXED:RECORDSIZE<span class="o">=</span><span class="m">60</span>:seek<span class="o">=</span><span class="s2">&quot;5&quot;</span>
<span class="nv">x</span><span class="o">=</span> <span class="m">5</span> - <span class="o">[</span>-05-<span class="p">|</span>-10-<span class="p">|</span>-15-<span class="p">|</span>-20-<span class="p">|</span>-25-<span class="p">|</span>-30-<span class="p">|</span>-35-<span class="p">|</span>-40-<span class="p">|</span>-45-<span class="p">|</span>-50-<span class="p">|</span>-55-<span class="p">|</span> <span class="nv">$zkey</span><span class="o">=</span> <span class="m">6</span>,0
** use with <span class="nv">SEEK</span><span class="o">=</span><span class="s2">&quot;-3&quot;</span>
<span class="nv">x</span><span class="o">=</span> <span class="m">3</span> - <span class="o">[</span>-05-<span class="p">|</span>-10-<span class="p">|</span>-15-<span class="p">|</span>-20-<span class="p">|</span>-25-<span class="p">|</span>-30-<span class="p">|</span>-35-<span class="p">|</span>-40-<span class="p">|</span>-45-<span class="p">|</span>-50-<span class="p">|</span>-55-<span class="p">|</span> <span class="nv">$zkey</span><span class="o">=</span> <span class="m">4</span>,0
** use with <span class="nv">SEEK</span><span class="o">=</span><span class="s2">&quot;-1&quot;</span> to <span class="nb">read</span> from the same record. <span class="nb">read</span> x#20 to <span class="nb">read</span> a partial record
<span class="nv">x</span><span class="o">=</span> <span class="m">3</span> - <span class="o">[</span>-05-<span class="p">|</span>-10-<span class="p">|</span>-15-<span class="p">|</span> <span class="nv">$zkey</span><span class="o">=</span> <span class="m">3</span>,20
** <span class="nb">read</span> x#40 to finish reading the record
<span class="nv">x</span><span class="o">=</span> -20-<span class="p">|</span>-25-<span class="p">|</span>-30-<span class="p">|</span>-35-<span class="p">|</span>-40-<span class="p">|</span>-45-<span class="p">|</span>-50-<span class="p">|</span>-55-<span class="p">|</span> <span class="nv">$zkey</span><span class="o">=</span> <span class="m">4</span>,0
** CLOSE NODESTROY and reOPEN with no deviceparameters
<span class="nv">x</span><span class="o">=</span> <span class="m">4</span> - <span class="o">[</span>-05-<span class="p">|</span>-10-<span class="p">|</span>-15-<span class="p">|</span>-20-<span class="p">|</span>-25-<span class="p">|</span>-30-<span class="p">|</span>-35-<span class="p">|</span>-40-<span class="p">|</span>-45-<span class="p">|</span>-50-<span class="p">|</span>-55-<span class="p">|</span> <span class="nv">$zkey</span><span class="o">=</span> <span class="m">5</span>,0
** CLOSE NODESTROY and reOPEN with <span class="nv">SEEK</span><span class="o">=</span><span class="s2">&quot;+2&quot;</span>
<span class="nv">x</span><span class="o">=</span> <span class="m">7</span> - <span class="o">[</span>-05-<span class="p">|</span>-10-<span class="p">|</span>-15-<span class="p">|</span>-20-<span class="p">|</span>-25-<span class="p">|</span>-30-<span class="p">|</span>-35-<span class="p">|</span>-40-<span class="p">|</span>-45-<span class="p">|</span>-50-<span class="p">|</span>-55-<span class="p">|</span> <span class="nv">$zkey</span><span class="o">=</span> <span class="m">8</span>,0
** CLOSE NODESTROY and reOPEN with M:SEEK<span class="o">=</span><span class="s2">&quot;+3&quot;</span>
<span class="nv">x</span><span class="o">=</span> <span class="m">3</span> - <span class="o">[</span>-05-<span class="p">|</span>-10-<span class="p">|</span>-15-<span class="p">|</span>-20-<span class="p">|</span>-25-<span class="p">|</span>-30-<span class="p">|</span>-35-<span class="p">|</span>-40-<span class="p">|</span>-45-<span class="p">|</span>-50-<span class="p">|</span>-55-<span class="p">|</span> <span class="nv">$zkey</span><span class="o">=</span> <span class="m">4</span>,0
** CLOSE NODESTROY and reOPEN with APPEND:SEEK<span class="o">=</span><span class="s2">&quot;-1&quot;</span>
<span class="nv">x</span><span class="o">=</span> <span class="m">8</span> - <span class="o">[</span>-05-<span class="p">|</span>-10-<span class="p">|</span>-15-<span class="p">|</span>-20-<span class="p">|</span>-25-<span class="p">|</span>-30-<span class="p">|</span>-35-<span class="p">|</span>-40-<span class="p">|</span>-45-<span class="p">|</span>-50-<span class="p">|</span>-55-<span class="p">|</span> <span class="nv">$zkey</span><span class="o">=</span> <span class="m">9</span>,0
** CLOSE DESTROY and OPEN non-fixed with <span class="nv">SEEK</span><span class="o">=</span><span class="s2">&quot;120&quot;</span> and <span class="nb">read</span> <span class="m">60</span> bytes
<span class="nv">x</span><span class="o">=</span> <span class="m">2</span> - <span class="o">[</span>-05-<span class="p">|</span>-10-<span class="p">|</span>-15-<span class="p">|</span>-20-<span class="p">|</span>-25-<span class="p">|</span>-30-<span class="p">|</span>-35-<span class="p">|</span>-40-<span class="p">|</span>-45-<span class="p">|</span>-50-<span class="p">|</span>-55-<span class="p">|</span> <span class="nv">$zkey</span><span class="o">=</span> <span class="m">180</span>
** CLOSE NODESTROY and reOPEN with append:SEEK<span class="o">=</span><span class="s2">&quot;-60&quot;</span> and <span class="nb">read</span> last <span class="m">60</span> bytes
<span class="nv">x</span><span class="o">=</span> <span class="m">8</span> - <span class="o">[</span>-05-<span class="p">|</span>-10-<span class="p">|</span>-15-<span class="p">|</span>-20-<span class="p">|</span>-25-<span class="p">|</span>-30-<span class="p">|</span>-35-<span class="p">|</span>-40-<span class="p">|</span>-45-<span class="p">|</span>-50-<span class="p">|</span>-55-<span class="p">|</span> <span class="nv">$zkey</span><span class="o">=</span> <span class="m">540</span>

YDB&gt;
</pre></div>
</div>
<p>This program demonstrates the use of the SEEK deviceparameter on OPEN and USE and reOPEN after CLOSE NODESTROY. This test is shown as an M program which may be executed, followed by the expected test output. First the test creates the file called “seekfixed” with 9, 60-byte records and then REWINDs and reads each record and outputs the record followed by $ZKEY which is a record,byte pair. Note that the records are numbered from 0 to match the SEEK record offset. Later in the test the same file is OPENed VARIABLE so $ZKEY will be a byte offset in that case. Details are given after the file output.</p>
<p>The first OPEN has deviceparameters set to (FIXED:RECORDSIZE=60:SEEK=”5”) which SEEKs to record offset 5 or physical record 6. Note, FIXED length records and RECORDSIZE remain in effect after a CLOSE NODESTROY unless changed on a reOPEN. Record offset 5 is read and output along with $ZKEY= 6,0 which points to the beginning of record offset 6. Next, a USE with SEEK=”-3” is done to move back 3 records to read and output record followed by $ZKEY= 4,0. A USE with SEEK=”-1” moves back one record to the beginning of the record just processed. A partial read of 20 bytes is done to show a record offset 3 with a byte offset of 20 or $ZKEY= 3,20. A read of 40 bytes is then done to finish processing that record for a $ZKEY= 4,0. Next a sequence of CLOSE NODESTROY and reOPENs are done. After the first CLOSE NODESTROY a reOPEN is done with no deviceparameters. The state of the file device, including file position, is restored and a read is done of record offset 4 which is output followed by $ZKEY= 5,0. The file device is then CLOSEd NODESTROY and a reOPEN is done with the only deviceparameter being SEEK=”+2”. The state of the file device is restored and a relative SEEK is done 2 records later in the file with a read which outputs record offset 7 followed by $ZKEY= 8,0. The file device is then CLOSEd NODESTORY and a reOPEN is done with deviceparameters (M:SEEK=”+3”). The file device is OPENed at the beginning of the file due to the presence of a deviceparameter (M) other than SEEK on reOPEN. A relative SEEK forward of 3 records is then done from the beginning of the file and record offset 3 is read and output followed by $ZKEY= 4,0. The file device is then CLOSEd NODESTORY and a reOPEN is done with the (APPEND:SEEK=”-1”). APPEND moves the file position to the EOF and then the SEEK=”-1” moves the file position to the beginning of record 8 - the final record in the file. Note, the APPEND is applied prior to the SEEK - regardless of deviceparameter order. The file device is then CLOSEd (DESTROY is the default) and OPENed with the only deviceparameter being absolute SEEK=”120” to byte offset 120. This processing is NOFIXED by default and a read of x#60 is done and output followed by $ZKEY= 180. The output is the same as record 2 in FIXED format. Finally, the file device is then CLOSEd NODESTROY and a reOPEN is done with deviceparameters (APPEND:SEEK=”-60”). This will move the file position to the EOF and go back 60 bytes which is the starting offset to the final record in the file. Another read of x#60 and is done and output followed by $ZKEY= 540 - which is the size of the file.</p>
</section>
<section id="shell">
<h4><a class="toc-backref" href="ioproc.html#id146">SHELL</a><a class="headerlink" href="ioproc.html#shell" title="Permalink to this heading">¶</a></h4>
<p>SHELL Applies to: PIPE</p>
<p>The SHELL deviceparameter specifies the shell for the new process. By default the newly created process uses the shell specified by the $SHELL environment variable, otherwise, if the environment variable SHELL is undefined the process uses /bin/sh.</p>
</section>
<section id="stderr">
<h4><a class="toc-backref" href="ioproc.html#id147">STDERR</a><a class="headerlink" href="ioproc.html#stderr" title="Permalink to this heading">¶</a></h4>
<p>STDERR Applies to: PIPE</p>
<p>The STDERR deviceparameter specifies that the stderr output from the created process goes to a PIPE device with the name of the STDERR value. This PIPE device acts as a restricted device that can appear only as the argument to USE, READ and CLOSE commands. It is implicitly READONLY and an attempt to WRITE to it triggers an error. If it has not previously acted as the argument to an explicit CLOSE command, the CLOSE of the PIPE device implicitly closes the the STDERR device.</p>
<p>If the OPEN command does not specify STDERR, YottaDB redirects the stderr output of the co-process created by the COMMAND to the standard output of the co-process. Specify STDERR when there is a need to read the standard error of the COMMAND separately.</p>
</section>
<section id="stream">
<h4><a class="toc-backref" href="ioproc.html#id148">STREAM</a><a class="headerlink" href="ioproc.html#stream" title="Permalink to this heading">¶</a></h4>
<p>[NO]STREAM Applies to: SD FIFO PIPE</p>
<p>STREAM and VARIABLE are semantically equivalent unless WRAP is disabled. As long as records do not exceed the WIDTH, they are also equivalent.</p>
<p>When WRAP is disabled and a WRITE exceeds the WIDTH, VARIABLE format truncates the line at the WIDTH, however in STREAM format, each WRITE argument is output without truncation or line termination and the total record can be of arbitrary length.</p>
<p>For STREAM or VARIABLE record format files, a READ returns when it encounters an EOL, or has read #length characters for a READ #(fixed length READ), or WIDTH characters if #length is not specified, whichever occurs first.</p>
<p>By default, records are VARIABLE, NOSTREAM.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set sd=&quot;foo.txt&quot;
open sd:(newversion:stream)
use sd:(width=20:nowrap)
for i=1:1:10 write &quot; the quick brown fox jumped over the lazy dog &quot;,$x,!
use sd:(rewind:width=100)
for i=1:1 use sd read x quit:$zeof use $principal write !,i,?5,x
close sd
quit
</pre></div>
</div>
<p>The output of this example is as follows:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1     the quick brown fox jumped over the lazy dog 46
2     the quick brown fox jumped over the lazy dog 46
3     the quick brown fox jumped over the lazy dog 46
4     the quick brown fox jumped over the lazy dog 46
5     the quick brown fox jumped over the lazy dog 46
6     the quick brown fox jumped over the lazy dog 46
7     the quick brown fox jumped over the lazy dog 46
8     the quick brown fox jumped over the lazy dog 46
9     the quick brown fox jumped over the lazy dog 46
10    the quick brown fox jumped over the lazy dog 46
</pre></div>
</div>
<p>If you change the FORMAT to VARIABLE, the same example produces the following output.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1     the quick brown fox
2     the quick brown fox
3     the quick brown fox
4     the quick brown fox
5     the quick brown fox
6     the quick brown fox
7     the quick brown fox
8     the quick brown fox
9     the quick brown fox
10    the quick brown fox
</pre></div>
</div>
<p>If you remove the “!” format from the WRITE sequence for VARIABLE, the same example produces the following output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1     the quick brown fox
</pre></div>
</div>
<p>With STREAM, the same example produces the following output:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>1     the quick brown fox jumped over the lazy dog 46 the quick brown fox jumped over the lazy dog 94 the
2     quick brown fox jumped over the lazy dog 142 the quick brown fox jumped over the lazy dog 191 the q
3    uick brown fox jumped over the lazy dog 240 the quick brown fox jumped over the lazy dog 289 the qui
4    ck brown fox jumped over the lazy dog 338 the quick brown fox jumped over the lazy dog 387 the quick
5     brown fox jumped over the lazy dog 436 the quick brown fox jumped over the lazy dog 485
</pre></div>
</div>
</section>
<section id="truncate">
<h4><a class="toc-backref" href="ioproc.html#id149">TRUNCATE</a><a class="headerlink" href="ioproc.html#truncate" title="Permalink to this heading">¶</a></h4>
<p>[NO]TRUNCATE Applies to: SD</p>
<p>Truncates the file destroying all data beyond the current file pointer. If APPEND is also specified, the file pointer will be positioned at the end of the file even if TRUNCATE is before APPEND in the list of device parameters.</p>
<p>TRUNCATE on a USE $PRINCIPAL command works on a stdout device when the device supports the action.</p>
</section>
<section id="uic">
<h4><a class="toc-backref" href="ioproc.html#id150">UIC</a><a class="headerlink" href="ioproc.html#uic" title="Permalink to this heading">¶</a></h4>
<p>UIC=expr Applies to: SOC(LOCAL) SD FIFO</p>
<p>Specifies the owner and group for the file.</p>
<p>Specifies the group that has access to the file. The format of the string is “o,g” where g is a decimal number representing the group portion of the UIC and o is a decimal number representing the owner portion. The super-user can set the file UIC to any value. See the man page for the chown() system call for the rules for regular users since they vary by platform and system configuration.</p>
</section>
<section id="variable">
<h4><a class="toc-backref" href="ioproc.html#id151">VARIABLE</a><a class="headerlink" href="ioproc.html#variable" title="Permalink to this heading">¶</a></h4>
<p>VARIABLE Applies to: SD FIFO PIPE</p>
<p>Specifies the VARIABLE record length format for sequential disk files.</p>
<p>By default, records have variable length format.</p>
<p>For more information, refer to <a class="reference internal" href="ioproc.html#stream">STREAM</a>.</p>
</section>
<section id="world">
<h4><a class="toc-backref" href="ioproc.html#id152">WORLD</a><a class="headerlink" href="ioproc.html#world" title="Permalink to this heading">¶</a></h4>
<p>WORLD=expr Applies to: SOC(LOCAL) SD FIFO</p>
<p>Specifies access permissions for users other than the owner who are not in the group specified for a file. This category of users is usually referred to as other in UNIX. The expression is a character string evaluating to null or to any combination of the letters RWX, indicating respectively Read, Write, and eXecute access. When any one of these deviceparameters appear on an OPEN of an existing file, any user category that is not explicitly specified remains unchanged.</p>
<p>To modify file security, the user who issues the OPEN must have ownership.</p>
<p>By default, OPEN and CLOSE do not modify the permissions on an existing file. Unless otherwise specified, when OPEN creates a new file, it establishes security using standard defaulting rules.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>OPEN &quot;test51.txt&quot;:(NEWVERSION:WORLD=&quot;rw&quot;)
</pre></div>
</div>
<p>This example opens file test51.txt and specifies Read Write permission for users not in owner’s group.</p>
</section>
<section id="wrap">
<span id="wrap-ioproc"></span><h4><a class="toc-backref" href="ioproc.html#id153">WRAP</a><a class="headerlink" href="ioproc.html#wrap" title="Permalink to this heading">¶</a></h4>
<p>[NO]WRAP Applies to: TRM SD NULL FIFO PIPE SOC</p>
<p>Enables or disables automatic record termination. When the current record size ($X) reaches the maximum WIDTH and the device has WRAP enabled, YottaDB starts a new record, as if the routine had issued a WRITE ! Command. When reading, WRAP only determines whether $X remains within the range of zero to WIDTH.</p>
<p>Note that WRAP is enabled by default for SD, NULL, FIFO, PIPE and SOCKET. For TRM, WRAP is enabled by default if the terminfo variable auto_right_margin (capname “am”) is set.</p>
<p>NOWRAP causes YottaDB to require a WRITE ! to terminate the record. NOWRAP allows $X to become greater than the device WIDTH for terminals and null devices.</p>
<p>The combination of STREAM and NOWRAP on disk files allows you to write data of arbitrary length without truncation. Without the STREAM option, the WRAP option determines the action taken when the record length exceeds the device WIDTH. NOWRAP causes YottaDB to truncate the record, while WRAP causes YottaDB to insert a format control character except for FIXED format.</p>
<p>NOTE: FIFO, SD and SOCKET devices opened as $PRINCIPAL (at process start-up) default to NOWRAP and for SD and FIFO devices, STREAM.</p>
</section>
<section id="writeonly">
<h4><a class="toc-backref" href="ioproc.html#id154">WRITEONLY</a><a class="headerlink" href="ioproc.html#writeonly" title="Permalink to this heading">¶</a></h4>
<p>[NO]WRITEONLY Applies to: PIPE</p>
<p>The WRITEONLY deviceparameter specifies that the PIPE acts only to send its output to the created process. Any attempt to READ from such a PIPE triggers an error. Note that when you open a PIPE with both STDERR and WRITEONLY you can still READ from the STDERR device.</p>
</section>
<section id="zbfsize">
<h4><a class="toc-backref" href="ioproc.html#id155">ZBFSIZE</a><a class="headerlink" href="ioproc.html#zbfsize" title="Permalink to this heading">¶</a></h4>
<p>ZBFSIZE Applies to: SOC</p>
<p>Allocates a buffer used by YottaDB when reading from a socket. The ZBFSIZE deviceparameter should be at least as big as the largest message expected.</p>
<p>By default, the size of ZBFSIZE is 1024 and the maximum it can be is 1048576.</p>
</section>
<section id="zdelay">
<h4><a class="toc-backref" href="ioproc.html#id156">ZDELAY</a><a class="headerlink" href="ioproc.html#zdelay" title="Permalink to this heading">¶</a></h4>
<p>Z[NO]DELAY Applies to: SOC(TCP)</p>
<p>Controls buffering of data packets by the system TCP stack using the TCP_NODELAY option to the setsockopt system call. This behavior is sometimes known as the Nagle algorithm. The default is ZDELAY. This delays sending additional packets until either an acknowledgment of previous packets is received or an interval passes. If several packets are sent from one end of a connection before the other end responds, setting ZNODELAY may be desirable though at the cost of additional packets being transmitted over the network. ZNODELAY must be fully spelled out.</p>
<p>LOCAL sockets ignore the ZDELAY deviceparameter.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>open tcpdev:(LISTEN=portno_&quot;:TCP&quot;:attach=&quot;server&quot;:zbfsize=2048:zibfsize=1024):timeout:&quot;SOCKET&quot;
</pre></div>
</div>
<p>This example opens the socket device tcpdev and allocates a buffer size of 2048 bytes.</p>
</section>
<section id="zff">
<h4><a class="toc-backref" href="ioproc.html#id157">ZFF</a><a class="headerlink" href="ioproc.html#zff" title="Permalink to this heading">¶</a></h4>
<p>Z[NO]FF=expr Applied to: SOC</p>
<p>expr specifies a string of characters, typically in $CHAR() format to send to socket device, whenever a routine issues a WRITE #. When no string is specified or when ZFF=””, then no characters are sent. The default in YottaDB is ZNOFF.</p>
</section>
<section id="zibfsize">
<h4><a class="toc-backref" href="ioproc.html#id158">ZIBFSIZE</a><a class="headerlink" href="ioproc.html#zibfsize" title="Permalink to this heading">¶</a></h4>
<p>ZIBFSIZE Applies to: SOC</p>
<p>Sets the buffer size used by the network software (setsockopt SO_RCVBUF).</p>
<p>The default and the maximum values depend on the platform and/or system parameters.</p>
<p>Note that LOCAL sockets ignore the ZIBFSIZE deviceparameter.</p>
<p><strong>OPEN Deviceparameter Table</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 44%" />
<col style="width: 8%" />
<col style="width: 10%" />
<col style="width: 7%" />
<col style="width: 8%" />
<col style="width: 10%" />
<col style="width: 12%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>OPEN Deviceparameter</p></th>
<th class="head"><p>TRM</p></th>
<th class="head"><p>SD</p></th>
<th class="head"><p>FIFO</p></th>
<th class="head"><p>PIPE</p></th>
<th class="head"><p>NULL</p></th>
<th class="head"><p>SOC</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>APPEND</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ATTACH=expr</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>CHSET=encoding</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>COMMAND=expr</p></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>CONNECT=expr</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>[NO]DELIMITER</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>[NO]EMPT[ERM]</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>EXCEPTION=expr</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>FIFO</p></td>
<td></td>
<td></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>[NO]FIXED</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>[NO]FOLLOW</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>GROUP=expr</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ICHSET=encoding</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>IKEY</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>INDEPENDENT</p></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>IOERROR=expr</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>KEY</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>LISTEN=expr</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>[NO]NEWVERSION</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>OCHSET=encoding</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>OKEY</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>OWNER=expr</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>PARSE</p></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>[NO]READONLY</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>RECORDSIZE=intexpr</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>SEEK=strexpr</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>SHELL=expr</p></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>STDERR=expr</p></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>[NO]STREAM</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>[NO]TRUNCATE</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>UIC=expr</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>VARIABLE</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>WORLD=expr</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>[NO]WRAP</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>[NO]WRITEONLY</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ZBFSIZE</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>Z[NO]DELAY</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>Z[NO]FF</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>ZIBFSIZE</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
</tbody>
</table>
<p>TRM: Valid for terminals and printers</p>
<p>SD: Valid for sequential disk files</p>
<p>FIFO: Valid for FIFOs</p>
<p>NULL: Valid for null devices</p>
<p>PIPE: Valid for PIPEs</p>
<p>SOC: Valid for Socket devices</p>
</section>
</section>
<section id="use">
<h3><a class="toc-backref" href="ioproc.html#id159">USE</a><a class="headerlink" href="ioproc.html#use" title="Permalink to this heading">¶</a></h3>
<p>The USE command selects the current device for READs (input) and WRITEs (output).</p>
<p>The format of the USE command is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>U[SE][:tvexpr] expr[:(keyword[=expr][:...])][,...]
</pre></div>
</div>
<ul class="simple">
<li><p>The optional truth-valued expression immediately following the command is a command postconditional that controls whether or not YottaDB executes the command.</p></li>
<li><p>The required expression specifies the device to make the current device.</p></li>
<li><p>A USE that selects a device not currently OPENed by the process causes a run-time error.</p></li>
<li><p>The optional keywords specify deviceparameters that control device behavior; some deviceparameters take arguments delimited by an equal sign (=). If there is only one deviceparameter, the surrounding parentheses are optional.</p></li>
<li><p>An indirection operator and an expression atom evaluating to a list of one or more USE arguments form a legal argument for a USE.</p></li>
</ul>
<p>The intrinsic special variable $IO identifies the current device, so YottaDB directs all READs and WRITEs to $IO. When a YottaDB image starts, $PRINCIPAL is implicitly OPENed and USEd. Once the YottaDB image USEs a device, $IO holds the name of that device until the next USE command.</p>
<p>A USE command modifies the device in accordance with the deviceparameters that apply to the device type and ignores those that do not apply. Characteristics set with USE deviceparameters persist until another USE for the same device with the corresponding deviceparameter. Characteristics persist through USEs of other devices and, except for SD, FIFO, and PIPE, through a subsequent CLOSE and re-OPEN.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>USE $P:(X=0:Y=$Y-1:NOECHO)
</pre></div>
</div>
<p>This example USEs the principal device. If that device is a terminal, the deviceparameters turn off echo and position the cursor to the beginning of the previous line.</p>
<p><strong>USE Deviceparameters</strong></p>
<section id="attach-use">
<span id="id4"></span><h4><a class="toc-backref" href="ioproc.html#id160">ATTACH</a><a class="headerlink" href="ioproc.html#attach-use" title="Permalink to this heading">¶</a></h4>
<p>ATTACH=expr Applies to: SOC</p>
<p>expr specifies the handle for a socket in the socketpool. ATTACH looks up expr in the socketpool’s collection of sockets and brings the one found to the current SOCKET device. If an ATTACH operation is successful, the attached socket becomes the current socket for the device.</p>
<p>ATTACH is not compatible with any other device parameters in the USE command. A socket can move from one device to another using DETACH/ATTACH.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A socket does not carry [I|O]CHSET with it while being moved. Such a socket uses the [I|O]CHSET of the device it is ATTACHed to. If there is input still buffered, this may cause unintentional consequences in the application if [I|O]CHSET changes. YottaDB does not detect (or report) a change in [I|O]CHSET due to DETACH/ATTACH.</p>
</div>
<p>For information on using the ATTACH with OPEN, refer to <a class="reference external" href="ioproc.html#attach">ATTACH</a> in the OPEN Deviceparameters section.</p>
</section>
<section id="canonical">
<h4><a class="toc-backref" href="ioproc.html#id161">CANONICAL</a><a class="headerlink" href="ioproc.html#canonical" title="Permalink to this heading">¶</a></h4>
<p>[NO]CANONICAL Applies to: TRM</p>
<p>Enables or disables canonical input as controlled by the ICANON terminal attribute. See the documentation on your platform for details, but in general, this would be the erase and kill edit functions, and lines delimited by NL (usually &lt;LF&gt;), EOF (usually ^D), and EOL (usually not defined).</p>
<p>By default, canonical input is enabled (that is [NO]CANONICAL is the default).</p>
</section>
<section id="cenable">
<h4><a class="toc-backref" href="ioproc.html#id162">CENABLE</a><a class="headerlink" href="ioproc.html#cenable" title="Permalink to this heading">¶</a></h4>
<p>[NO]CENABLE Applies to: TRM</p>
<p>Enables or disables the ability to force YottaDB into Direct Mode by entering &lt;CTRL-C&gt; at $PRINCIPAL.</p>
<p>If CENABLE is set, &lt;CTRL-C&gt; interrupts process execution. For more information on interrupt handling, refer to <a class="reference external" href="isv.html#interrupt-handling">Interrupt Handling</a>.</p>
<p>By default, CENABLE is set. If CTRAP contains $C(3), CENABLE is disabled.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>use $principal:(nocenable:ctrap=&quot;&quot;:exception=&quot;&quot;)
</pre></div>
</div>
</section>
<section id="clearscreen">
<h4><a class="toc-backref" href="ioproc.html#id163">CLEARSCREEN</a><a class="headerlink" href="ioproc.html#clearscreen" title="Permalink to this heading">¶</a></h4>
<p>CLEARSCREEN Applies to: TRM</p>
<p>Clears the terminal screen from the present cursor position to the bottom of the screen. The CLEARSCREEN deviceparameter does not change the cursor position or the $X and $Y variables.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>U $P:(X=0:Y=0:CLEAR)
</pre></div>
</div>
<p>This example positions the cursor to “home” in the upper left corner of a VDT and clears the entire current screen “page.”</p>
</section>
<section id="id6">
<h4><a class="toc-backref" href="ioproc.html#id164">CONNECT</a><a class="headerlink" href="ioproc.html#id6" title="Permalink to this heading">¶</a></h4>
<p>CONNECT=expr Applies to: SOC</p>
<p>Enables a client connection with a server, which is located by the information provided by expr. A new socket is allocated for the client connection and is made the current socket for the device, if the operation is successful.</p>
<p>expr specifies the protocol and the protocol-specific information. Currently, YottaDB supports TCP/IP and LOCAL (also known as UNIX domain) socket protocols.</p>
<p>For more information, refer to <a class="reference external" href="ioproc.html#connect">CONNECT</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>CONNECT is not compatible with LISTEN.</p>
</div>
<p>Although CONNECT can be used with USE command, YottaDB recommends not to use it that way, because unlike the OPEN command, there is no way to specify a timeout to the USE command. CONNECT in the USE command takes a default timeout value of 0.</p>
<p>Example:</p>
<p>Refer to the <a class="reference external" href="ioproc.html#connect">CONNECT</a> example in the OPEN section.</p>
</section>
<section id="convert">
<h4><a class="toc-backref" href="ioproc.html#id165">CONVERT</a><a class="headerlink" href="ioproc.html#convert" title="Permalink to this heading">¶</a></h4>
<p>[NO]CONVERT Applies to: TRM</p>
<p>Enables or disables YottaDB from converting lowercase input to uppercase during READs.</p>
<p>By default, the terminal device driver operates NOCONVERT.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>use $principal:(convert)
READ X
</pre></div>
</div>
<p>This example converts all lowercase to uppercase during READ X.</p>
</section>
<section id="ctrap">
<h4><a class="toc-backref" href="ioproc.html#id166">CTRAP</a><a class="headerlink" href="ioproc.html#ctrap" title="Permalink to this heading">¶</a></h4>
<p>CTRAP=expr Applies to: TRM</p>
<p>Establishes the &lt;CTRL&gt; characters in the expression as trap characters for the current device. When YottaDB receives a trap character in the input from a device, YottaDB issues a run-time exception. The device does not have to be the current device, that is $IO.</p>
<p>The &lt;CTRL&gt; characters are ASCII 0 though 31. However, terminal configuration may prevent most &lt;CTRL&gt; characters from ever reaching YottaDB’s CTRAP facility.</p>
<p>For example, the command U $P:CTRAP=$C(26,30,7,19) sets a trap for the ASCII characters &lt;SUB&gt;, &lt;RS&gt;, &lt;BEL&gt; and &lt;DC3&gt;.</p>
<p>Specifying CTRAP completely replaces the previous CTRAP list. Setting CTRAP to the null string (“”) disables character trapping.</p>
<p>A trap character enabled by CTRAP produces one of the following actions:</p>
<ul class="simple">
<li><p>If an EXCEPTION deviceparameter has been issued for the device, the process executes the EXCEPTION argument.</p></li>
<li><p>Otherwise, if $ETRAP is not the empty string, execute $ETRAP.</p></li>
<li><p>Otherwise, if $ZTRAP is not the empty string, the process executes $ZTRAP.</p></li>
<li><p>Otherwise, the YottaDB image terminates.</p></li>
</ul>
<p>For more information on error handling, refer to <a class="reference external" href="errproc.html">Chapter 13: “Error Processing”</a>.</p>
<p>When CTRAP includes &lt;CTRL-C&gt;, [NO]CENABLE has no effect. CTRAPping &lt;CTRL-C&gt; also takes precedence over CENABLE.</p>
</section>
<section id="id9">
<h4><a class="toc-backref" href="ioproc.html#id167">DELIMITER</a><a class="headerlink" href="ioproc.html#id9" title="Permalink to this heading">¶</a></h4>
<p>[NO]DELIMITER Applies to: SOC</p>
<p>DELIMITER establishes or replaces the list of delimiters used by the current socket. The default is NODELIMITER.</p>
<p>expr must be a string of the following format:</p>
<ul class="simple">
<li><p>‘:’ is used to separate delimiters (it is the delimiter for delimiters).</p></li>
<li><p>‘/’ serves as an escape character.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>expr “ab:/:://:bc” is interpreted as four delimiters, which are “ab”, “:”, “/”, and “bc”. One socket can have 0-64 delimiters and each delimiter can contain 1-64 characters.</p>
</div>
<p>Example:</p>
<p>See <a class="reference external" href="ioproc.html#socket-device-examples">Socket example</a>.</p>
</section>
<section id="detach">
<h4><a class="toc-backref" href="ioproc.html#id168">DETACH</a><a class="headerlink" href="ioproc.html#detach" title="Permalink to this heading">¶</a></h4>
<p>DETACH=expr Applies to: SOC</p>
<p>Removes the socket identified by expr from the current socket device, without affecting any existing connection of that socket. The removed socket is placed in the socketpool and may be attached to another socket device. If the socket being removed is the current socket, then YottaDB does the following:</p>
<ul class="simple">
<li><p>The socket ATTACHed prior to the removed socket, is made current, if one such exists.</p></li>
<li><p>The socket ATTACHed after the removed socket, is made current, if the removed one was the first socket.</p></li>
<li><p>$PRINCIPAL is made the current device ($IO), if the removed socket was the only one in the current socket device.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A socket can move from one device to another using DETACH/ATTACH. A socket does not carry [I|O]CHSET with it while being moved. Such a socket uses the [I|O]CHSET of the device it is ATTACHed to. If there is input still buffered, this may cause unintentional consequences in the application if [I|O]CHSET changes. YottaDB does not detect (or report) a change in [I|O]CHSET due to DETACH/ATTACH.</p>
</div>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">tcp</span><span class="o">=</span><span class="s2">&quot;serv&quot;</span> open tcp:<span class="o">(</span><span class="nv">listen</span><span class="o">=</span><span class="s2">&quot;6321:TCP&quot;</span>:attach<span class="o">=</span><span class="s2">&quot;serv&quot;</span><span class="o">)</span>::<span class="s2">&quot;SOCKET&quot;</span>
YDB&gt;zshow <span class="s2">&quot;D&quot;</span>
/dev/pts/9 OPEN TERMINAL NOPAST NOESCA NOREADS TYPE <span class="nv">WIDTH</span><span class="o">=</span><span class="m">80</span> <span class="nv">LENG</span><span class="o">=</span><span class="m">24</span>
seerv OPEN SOCKET <span class="nv">TOTAL</span><span class="o">=</span><span class="m">1</span> <span class="nv">CURRENT</span><span class="o">=</span><span class="m">0</span>
    SOCKET<span class="o">[</span><span class="m">0</span><span class="o">]=</span>serv <span class="nv">DESC</span><span class="o">=</span><span class="m">3</span> LISTENING PASSIVE NOTRAP <span class="nv">PORT</span><span class="o">=</span><span class="m">6321</span>
             ZDELAY <span class="nv">ZBFSIZE</span><span class="o">=</span><span class="m">1024</span> <span class="nv">ZIBFSIZE</span><span class="o">=</span><span class="m">87380</span> NODELIMITER
YDB&gt;set <span class="nv">tcp</span><span class="o">=</span><span class="s2">&quot;seerv&quot;</span> o tcp:<span class="o">(</span><span class="nv">listen</span><span class="o">=</span><span class="s2">&quot;6322:TCP&quot;</span>:attach<span class="o">=</span><span class="s2">&quot;serv2&quot;</span><span class="o">)</span>::<span class="s2">&quot;SOCKET&quot;</span>
YDB&gt;zshow <span class="s2">&quot;D&quot;</span>
/dev/pts/9 OPEN TERMINAL NOPAST NOESCA NOREADS TYPE <span class="nv">WIDTH</span><span class="o">=</span><span class="m">80</span> <span class="nv">LENG</span><span class="o">=</span><span class="m">24</span>
seerv OPEN SOCKET <span class="nv">TOTAL</span><span class="o">=</span><span class="m">2</span> <span class="nv">CURRENT</span><span class="o">=</span><span class="m">1</span>
    SOCKET<span class="o">[</span><span class="m">0</span><span class="o">]=</span>serv <span class="nv">DESC</span><span class="o">=</span><span class="m">3</span> LISTENING PASSIVE NOTRAP <span class="nv">PORT</span><span class="o">=</span><span class="m">6321</span>
             ZDELAY <span class="nv">ZBFSIZE</span><span class="o">=</span><span class="m">1024</span> <span class="nv">ZIBFSIZE</span><span class="o">=</span><span class="m">87380</span> NODELIMITER
    SOCKET<span class="o">[</span><span class="m">1</span><span class="o">]=</span>serv2 <span class="nv">DESC</span><span class="o">=</span><span class="m">4</span> LISTENING PASSIVE NOTRAP <span class="nv">PORT</span><span class="o">=</span><span class="m">6322</span>
             ZDELAY <span class="nv">ZBFSIZE</span><span class="o">=</span><span class="m">1024</span> <span class="nv">ZIBFSIZE</span><span class="o">=</span><span class="m">87380</span> NODELIMITER
</pre></div>
</div>
<p>At this point, the socket device “serv” has two sockets associated with it.</p>
<p>The following command moves the “serv” socket to the “socketpool” device.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;use tcp:detach<span class="o">=</span><span class="s2">&quot;serv&quot;</span>
YDB&gt;use <span class="m">0</span> zshow <span class="s2">&quot;D&quot;</span>
/dev/pts/9 OPEN TERMINAL NOPAST NOESCA NOREADS TYPE <span class="nv">WIDTH</span><span class="o">=</span><span class="m">80</span> <span class="nv">LENG</span><span class="o">=</span><span class="m">24</span>
seerv OPEN SOCKET <span class="nv">TOTAL</span><span class="o">=</span><span class="m">1</span> <span class="nv">CURRENT</span><span class="o">=</span><span class="m">0</span>
    SOCKET<span class="o">[</span><span class="m">0</span><span class="o">]=</span>serv2 <span class="nv">DESC</span><span class="o">=</span><span class="m">4</span> LISTENING PASSIVE NOTRAP <span class="nv">PORT</span><span class="o">=</span><span class="m">6322</span>
             ZDELAY <span class="nv">ZBFSIZE</span><span class="o">=</span><span class="m">1024</span> <span class="nv">ZIBFSIZE</span><span class="o">=</span><span class="m">87380</span> NODELIMITER
socketpool OPEN SOCKET <span class="nv">TOTAL</span><span class="o">=</span><span class="m">1</span> <span class="nv">CURRENT</span><span class="o">=</span><span class="m">0</span>
    SOCKET<span class="o">[</span><span class="m">0</span><span class="o">]=</span>serv <span class="nv">DESC</span><span class="o">=</span><span class="m">3</span> LISTENING PASSIVE NOTRAP <span class="nv">PORT</span><span class="o">=</span><span class="m">6321</span>
             ZDELAY <span class="nv">ZBFSIZE</span><span class="o">=</span><span class="m">1024</span> <span class="nv">ZIBFSIZE</span><span class="o">=</span><span class="m">87380</span> NODELIMITER
</pre></div>
</div>
<p>Notice how socket “serv” is now associated with the pseudo socket device “socketpool”. Its only purpose is to hold detached sockets.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">tcp2</span><span class="o">=</span><span class="s2">&quot;s2&quot;</span> o tcp2:::<span class="s2">&quot;SOCKET&quot;</span>
</pre></div>
</div>
<p>This creates a new socket device.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;zshow <span class="s2">&quot;D&quot;</span>
/dev/pts/9 OPEN TERMINAL NOPAST NOESCA NOREADS TYPE <span class="nv">WIDTH</span><span class="o">=</span><span class="m">80</span> <span class="nv">LENG</span><span class="o">=</span><span class="m">24</span>
 s2 OPEN SOCKET <span class="nv">TOTAL</span><span class="o">=</span><span class="m">0</span> <span class="nv">CURRENT</span><span class="o">=</span><span class="m">0</span>
 seerv OPEN SOCKET <span class="nv">TOTAL</span><span class="o">=</span><span class="m">1</span> <span class="nv">CURRENT</span><span class="o">=</span><span class="m">0</span>
     SOCKET<span class="o">[</span><span class="m">0</span><span class="o">]=</span>serv2 <span class="nv">DESC</span><span class="o">=</span><span class="m">4</span> LISTENING PASSIVE NOTRAP <span class="nv">PORT</span><span class="o">=</span><span class="m">6322</span>
             ZDELAY <span class="nv">ZBFSIZE</span><span class="o">=</span><span class="m">1024</span> <span class="nv">ZIBFSIZE</span><span class="o">=</span><span class="m">87380</span> NODELIMITER
 socketpool OPEN SOCKET <span class="nv">TOTAL</span><span class="o">=</span><span class="m">1</span> <span class="nv">CURRENT</span><span class="o">=</span><span class="m">0</span>
     SOCKET<span class="o">[</span><span class="m">0</span><span class="o">]=</span>serv <span class="nv">DESC</span><span class="o">=</span><span class="m">3</span> LISTENING PASSIVE NOTRAP <span class="nv">PORT</span><span class="o">=</span><span class="m">6321</span>
             ZDELAY <span class="nv">ZBFSIZE</span><span class="o">=</span><span class="m">1024</span> <span class="nv">ZIBFSIZE</span><span class="o">=</span><span class="m">87380</span> NODELIMITER
</pre></div>
</div>
<p>The following command moves the serv socket from the socketpool to the tcp2 device.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;use tcp2:attach<span class="o">=</span><span class="s2">&quot;serv&quot;</span>
YDB&gt;use <span class="m">0</span> zshow <span class="s2">&quot;D&quot;</span>
/dev/pts/9 OPEN TERMINAL NOPAST NOESCA NOREADS TYPE <span class="nv">WIDTH</span><span class="o">=</span><span class="m">80</span> <span class="nv">LENG</span><span class="o">=</span><span class="m">24</span>
s2 OPEN SOCKET <span class="nv">TOTAL</span><span class="o">=</span><span class="m">1</span> <span class="nv">CURRENT</span><span class="o">=</span><span class="m">0</span>
   SOCKET<span class="o">[</span><span class="m">0</span><span class="o">]=</span>serv <span class="nv">DESC</span><span class="o">=</span><span class="m">3</span> LISTENING PASSIVE NOTRAP <span class="nv">PORT</span><span class="o">=</span><span class="m">6321</span>
          ZDELAY <span class="nv">ZBFSIZE</span><span class="o">=</span><span class="m">1024</span> <span class="nv">ZIBFSIZE</span><span class="o">=</span><span class="m">87380</span> NODELIMITER
seerv OPEN SOCKET <span class="nv">TOTAL</span><span class="o">=</span><span class="m">1</span> <span class="nv">CURRENT</span><span class="o">=</span><span class="m">0</span>
   SOCKET<span class="o">[</span><span class="m">0</span><span class="o">]=</span>serv2 <span class="nv">DESC</span><span class="o">=</span><span class="m">4</span> LISTENING PASSIVE NOTRAP <span class="nv">PORT</span><span class="o">=</span><span class="m">6322</span>
          ZDELAY <span class="nv">ZBFSIZE</span><span class="o">=</span><span class="m">1024</span> <span class="nv">ZIBFSIZE</span><span class="o">=</span><span class="m">87380</span> NODELIMITER
socketpool OPEN SOCKET <span class="nv">TOTAL</span><span class="o">=</span><span class="m">0</span> <span class="nv">CURRENT</span><span class="o">=</span>-1
</pre></div>
</div>
</section>
<section id="downscroll">
<h4><a class="toc-backref" href="ioproc.html#id169">DOWNSCROLL</a><a class="headerlink" href="ioproc.html#downscroll" title="Permalink to this heading">¶</a></h4>
<p>DOWNSCROLL Applies to: TRM</p>
<p>If $Y=0, DOWNSCROLL does nothing. Otherwise, DOWNSCROLL moves the cursor up one line on the terminal screen and decrements $Y by one. DOWNSCROLL does not change the column position or $X. Some terminal hardware may not support DOWNSCROLL.</p>
</section>
<section id="echo">
<h4><a class="toc-backref" href="ioproc.html#id170">ECHO</a><a class="headerlink" href="ioproc.html#echo" title="Permalink to this heading">¶</a></h4>
<p>[NO]ECHO Applies to: TRM</p>
<p>Enables or disables the echo of terminal input. If you disable ECHO, the EDITING functions will be disabled and any input is not available for later recall.</p>
<p>By default, terminal input ECHOes.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>use $principal:noecho
</pre></div>
</div>
<p>This example disables the echo of terminal input.</p>
</section>
<section id="editing">
<h4><a class="toc-backref" href="ioproc.html#id171">EDITING</a><a class="headerlink" href="ioproc.html#editing" title="Permalink to this heading">¶</a></h4>
<p>[NO]EDITING Applies to: TRM</p>
<p>Enables the EDITING mode for the $PRINCIPAL device. If you enable EDITING, YottaDB allows the use of the left and right cursor movement keys and certain &lt;CTRL&gt; characters within the current input line. You can recall the last input line using the up or down arrow key. The editing functions are the same as during direct mode command input as described in the “Line Editing” section of the “Operating &amp; Debugging in Direct Mode” chapter except that backspace is not treated the same as the erase character from terminfo which is usually delete (ASCII 127). NOECHO disables EDITING mode.</p>
<p>Set the environment variable ydb_principal_editing to specify the mode for EDITING. For example, ydb_principal_editing=”EDITING” enables EDITING mode at YottaDB startup. You can also specify the mode for INSERT. For example, ydb_principal_editing=”NOINSERT:EDITING”. If you specify both modes then separate them with a colon (“:”) and put them in any order.</p>
<p>By default, EDITING mode is disabled.</p>
<p>If you enable the EDITING mode, escape sequences do not terminate READs.</p>
<p>Enabling PASTHRU mode supersedes EDITING mode.</p>
<p>If any of the EDITING &lt;CTRL&gt; characters are in the CTRAP list, their editing functions are not available since CTRAP takes precedence. However the EDITING &lt;CTRL&gt; characters takes precedence over the TERMINATOR list.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>M READ EDITING depends on the values of $X and $Y being correct. If the application sends its own escape sequences or control characters, which change the cursor position, it must properly update $X and $Y before doing a M READ with EDITING enabled to ensure correct formatting during input.</p>
</div>
</section>
<section id="id10">
<h4><a class="toc-backref" href="ioproc.html#id172">EMPTERM</a><a class="headerlink" href="ioproc.html#id10" title="Permalink to this heading">¶</a></h4>
<p>[NO]EMPT[ERM] Applies to: TRM</p>
<p>Allows an “Erase” character on an empty input line to terminate a READ or READ # command. The default is NOEMPTERM. The ydb_principal_editing environment variable specifies the initial setting of [NO]EMPTERM. The TERMINFO specified by the current value of the TERM environment variable defines capnames values “kbs” and/or “kdch1” with character sequences for “Erase.” If “kbs” or “kdch1” are multi-character values, you must also specify the ESCAPE or EDIT deviceparameters for EMPTERM recognition.</p>
<p>The erase character as set and shown by stty also terminates a READ command with an empty input line. You can set this erase character to various values using the stty shell command. Typical values of an erase character are &lt;CTRL-H&gt; and &lt;CTRL-?&gt;. Characters set and shown with stty setting must match what the terminal emulator sends.</p>
<p>The environment variable TERM must specify a terminfo entry that matches both what the terminal (or terminal emulator) sends and expects.</p>
</section>
<section id="eraseline">
<h4><a class="toc-backref" href="ioproc.html#id173">ERASELINE</a><a class="headerlink" href="ioproc.html#eraseline" title="Permalink to this heading">¶</a></h4>
<p>ERASELINE Applies to: TRM</p>
<p>Clears the current line from the physical cursor position to the end of the line. ERASELINE does not affect the physical cursor position, or $X and $Y.</p>
</section>
<section id="escape">
<h4><a class="toc-backref" href="ioproc.html#id174">ESCAPE</a><a class="headerlink" href="ioproc.html#escape" title="Permalink to this heading">¶</a></h4>
<p>[NO]ESCAPE Applies to: TRM</p>
<p>Enables or disables YottaDB processing of escape sequences.</p>
<p>The following events result when a terminal has ESCAPE sequence processing enabled. When an &lt;ESC&gt; or &lt;CSI&gt; arrives in the terminal input, the device driver verifies the sequence that follows as a valid ANSI escape sequence, terminates the READ, and sets $ZB to contain the entire escape sequence. In the case of a READ * when ESCAPE sequence processing is enabled and an escape introducer is read, the entire escape sequence is returned in $ZB and the ASCII representation of the first character is returned in the argument of the READ *.</p>
<p>When escape processing is disabled, READ *x returns 27 in x for an &lt;ESC&gt;. If the escape introducer is also a TERMINATOR, $ZB has a string of length one (1), and a value of the $ASCII() representation of the escape introducer; otherwise, $ZB holds the empty string. For single character and short fixed reads with NOESCAPE, the remaining characters in the escape sequence will be in the input stream for subsequent READS regardless of [NO]TYPEAHEAD.</p>
<p>An application that operates with (NOESCAPE:TERM=$C(13)) must provide successive READ * commands to remove the remaining characters in the escape sequence from the input stream.</p>
<p>By default, ESCAPE processing is disabled.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>use $principal:(noescape:term=$c(13))
</pre></div>
</div>
<p>This example disables the escape sequence processing and set $c(13) as the line terminator.</p>
</section>
<section id="id11">
<h4><a class="toc-backref" href="ioproc.html#id175">EXCEPTION</a><a class="headerlink" href="ioproc.html#id11" title="Permalink to this heading">¶</a></h4>
<p>EXCEPTION=expr Applies to: All devices</p>
<p>Defines an error handler for an I/O device. The expression must contain a fragment of YottaDB code (for example, GOTO ERRFILE) that YottaDB XECUTEs when the driver for the device detects an error, or an entryref to which YottaDB transfers control, as appropriate for the current ydb_ztrap_form.</p>
<p>For more information on error handling, refer to <a class="reference external" href="errproc.html">Chapter 13: “Error Processing”</a>.</p>
</section>
<section id="id13">
<h4><a class="toc-backref" href="ioproc.html#id176">FFLF</a><a class="headerlink" href="ioproc.html#id13" title="Permalink to this heading">¶</a></h4>
<p>[NO]FFLF Applies to: SD</p>
<p>The [NO]FFLF deviceparameter controls whether WRITE # produces only a form-feed (&lt;FF&gt;) or a form-feed and line-feed (&lt;FF&gt;&lt;LF&gt;). Previously, YottaDB used &lt;FF&gt;&lt;LF&gt; which deviated from the standard, but out of concern for existing practice the default remains &lt;FF&gt;&lt;LF&gt;.</p>
<p>Additionally, the <code class="code docutils literal notranslate"><span class="pre">ydb_nofflf(gtm_nofflf)</span></code> environment variable controls the default WRITE # behavior of YottaDB. If it is unset or set to 0, N[O] or F[ALSE], the default behavior is unchanged. If it is set to 1, Y[ES] or T[RUE], the default behavior of WRITE # is changed to produce only a form-feed (&lt;FF&gt;), though M programs can still control behavior by specifying the FFLF deviceparameter.</p>
<p>For an example, refer to the description of FFLF deviceparameter of OPEN.</p>
</section>
<section id="filter">
<span id="no-filter"></span><h4><a class="toc-backref" href="ioproc.html#id177">FILTER</a><a class="headerlink" href="ioproc.html#filter" title="Permalink to this heading">¶</a></h4>
<p>[NO]FILTER[=expr] Applies to: TRM SOC NULL</p>
<p>Specifies character filtering for specified cursor movement sequences. Filtering requires character by character examination of all output and reduces I/O performance.</p>
<p>Each FILTER deviceparameter can have only one argument. However, multiple FILTER deviceparameters can appear in a single USE command, each with different arguments.</p>
<p>The valid values for expr:</p>
<ul class="simple">
<li><p>[NO]CHARACTERS enables or disables maintenance of $X and $Y according to the M ANSI standard for the characters &lt;BS&gt;, &lt;LF&gt;, &lt;CR&gt; and &lt;FF&gt;. CHARACTERS causes the device driver to examine all output for the above characters, and to adjust $X and $Y accordingly. By default, YottaDB performs special maintenance on $X and $Y only for M format control characters, WRAPped records, and certain action deviceparameters.</p></li>
<li><p>In UTF-8 mode, FILTER recognizes the line terminators specified by the Unicode® standard.</p></li>
<li><p>[NO]ESCAPE alters the effect of ANSI escape sequences on $X and $Y. ESCAPE causes YottaDB to filter the output, searching for ANSI escape sequences and preventing them from updating $X and $Y. By default, YottaDB does not screen output for escape sequences.</p></li>
</ul>
<p>By default, YottaDB does not perform output filtering. For YottaDB to maintain $X for non-graphic characters as described by the standard, FILTER=”CHARACTERS” must be enabled. Output filtering adds additional overhead to I/O processing.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>use tcpdev:filter=&quot;NOESCAPE&quot;
</pre></div>
</div>
<p>This example removes the effect of escape sequences on the maintenance $X and $Y.</p>
</section>
<section id="id14">
<h4><a class="toc-backref" href="ioproc.html#id178">FOLLOW</a><a class="headerlink" href="ioproc.html#id14" title="Permalink to this heading">¶</a></h4>
<p>[NO]FOLLOW Applies to: SD</p>
<p>Configures READ to return only when it has a complete record or reaches any specified timeout; it waits for more input rather than terminating on an EOF (end-of-file) condition.</p>
<p>The USE command can switch a device from NOFOLLOW to FOLLOW or from FOLLOW to NOFOLLOW. This provides a READ mode of operation similar to a tail -f in UNIX.</p>
</section>
<section id="hostsync">
<h4><a class="toc-backref" href="ioproc.html#id179">HOSTSYNC</a><a class="headerlink" href="ioproc.html#hostsync" title="Permalink to this heading">¶</a></h4>
<p>[NO]HOSTSYNC Applies to: TRM</p>
<p>Enables or disables the use of XON/XOFF by the host to throttle input and prevent impending buffer overruns for a terminal. This deviceparameter provides a control mechanism for the host over asynchronous communication lines to help prevent data loss when hardware is slow and/or processing load is high.</p>
<p>By default, HOSTSYNC is disabled.</p>
</section>
<section id="hupenable">
<h4><a class="toc-backref" href="ioproc.html#id180">HUPENABLE</a><a class="headerlink" href="ioproc.html#hupenable" title="Permalink to this heading">¶</a></h4>
<p>[NO]HUPENABLE Applies to: TRM</p>
<p>Enables or disables the recognition by the process of the loss (“hang up”) of PRINCIPAL device terminal. When enabled the process receives a TERMHANGUP error if the OS signals that the terminal assigned to the process as the PRINCIPAL device has diconnected. If YottaDB is configured to ignore such a signal, a process may subsequently receive an IOEOF or a TERMWRITE error from an attempt to respectively READ from, or WRITE to the missing device. YottaDB terminates a process that ignores more than one of these messages and, if the process is not in Direct Mode, sends a NOPRINCIO message to the operator log.</p>
<p>If defined, the <code class="code docutils literal notranslate"><span class="pre">ydb_hupenable</span></code> environment variable determines the initial process behavior, and if that is undefined YottaDB does not immediately report a terminal disconnect.</p>
</section>
<section id="id15">
<h4><a class="toc-backref" href="ioproc.html#id181">IKEY</a><a class="headerlink" href="ioproc.html#id15" title="Permalink to this heading">¶</a></h4>
<p>Applies to: SD, PIPE, and FIFO</p>
<p>IKEY allows the use of a seperate key to READ from a device; for example, when a YottaDB process is an element of a UNIX pipe. The format of the IKEY deviceparameter is:</p>
<p>IKEY=”key_name [IV]”</p>
<p>key_name is case-sensitive and must match a key name in the “files” section of the ydb_crypt_config file. The optional IV specifies an initialization vector to use for encryption and decryption.</p>
<p>For more information, refer to the description of <a class="reference internal" href="ioproc.html#key-open"><span class="std std-ref">KEY</span></a> deviceparameter of OPEN.</p>
</section>
<section id="inrewind">
<h4><a class="toc-backref" href="ioproc.html#id182">INREWIND</a><a class="headerlink" href="ioproc.html#inrewind" title="Permalink to this heading">¶</a></h4>
<p>Applies to: SD</p>
<p>Performs a REWIND on input when $PRINCIPAL identifies a device that supports REWIND. Use this deviceparameter with $PRINCIPAL when redirected from a file. For more information, refer to <a class="reference external" href="ioproc.html#seek-strexpr">SEEK=strexpr</a>.</p>
</section>
<section id="inseek-strexpr">
<h4><a class="toc-backref" href="ioproc.html#id183">INSEEK=strexpr</a><a class="headerlink" href="ioproc.html#inseek-strexpr" title="Permalink to this heading">¶</a></h4>
<p>Applies to: SD</p>
<p>Performs a SEEK on input when $PRINCIPAL identifies a device that supports SEEK. Use this deviceparameter with $PRINCIPAL when redirected from a file. For more information, refer to <a class="reference external" href="ioproc.html#seek-strexpr">SEEK=strexpr</a>.</p>
</section>
<section id="insert">
<h4><a class="toc-backref" href="ioproc.html#id184">INSERT</a><a class="headerlink" href="ioproc.html#insert" title="Permalink to this heading">¶</a></h4>
<p>[NO]INSERT Applies to: TRM</p>
<p>Enables or disables insert mode for the $PRINCIPAL device. If INSERT mode is enabled, YottaDB inserts input characters at the logical position in the input stream designated by the virtual cursor as defined by $X and $Y, for example in the middle of the line/record. If INSERT mode is disabled, input characters overwrite the existing characters in the input stream at the logical position designated by the virtual cursor. You can toggle the insert mode within a direct mode line or if EDITING is enabled for a single READ argument’s input using the terminal’s INSERT key. The INSERT mode is reset to the default or what was last specified with USE at the beginning of each direct mode line or READ argument.</p>
</section>
<section id="id18">
<h4><a class="toc-backref" href="ioproc.html#id185">IOERROR</a><a class="headerlink" href="ioproc.html#id18" title="Permalink to this heading">¶</a></h4>
<p>IOERROR=expr Applies to: SOC</p>
<p>Enables exception handling in socket devices. expr specifies the I/O error trapping mode. A value equal to “TRAP” specifies that I/O errors on a device raise error conditions. A value equal to “NOTRAP”, or when IOERROR is not specified, indicates that an I/O error on a device does not raise error conditions.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>YottaDB currently handles exception handling at device level instead of socket level.</p>
</div>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>use sock:(ioerror=&quot;TRAP&quot;:exception=&quot;zgoto &quot;_$zlevel_&quot;:error&quot;)
</pre></div>
</div>
<p>This example enables exception handling in socket device sock and specifies that all I/O errors on sock raise the error condition.</p>
<p>If $LENGTH(strexpr)&amp;(“Tt”[$EXTRACT(strexpr)) then Error Trapping is enabled; otherwise the application must check $DEVICE for errors.</p>
</section>
<section id="id19">
<h4><a class="toc-backref" href="ioproc.html#id186">KEY</a><a class="headerlink" href="ioproc.html#id19" title="Permalink to this heading">¶</a></h4>
<p>Applies to: SD, PIPE, and FIFO</p>
<p>Specifies information about the key file to use for reading and writing encrypted data. The syntax of the KEY deviceparameter is as follows:</p>
<p>KEY=”key_name [IV]”</p>
<p>key_name is case-sensitive and must match a key name in the “files” section of the ydb_crypt_config file. The optional IV specifies an initialization vector to use for encryption and decryption.</p>
<p>For more information and an example, refer to the description of <a class="reference internal" href="ioproc.html#key-open"><span class="std std-ref">KEY</span></a> deviceparameter of OPEN.</p>
</section>
<section id="length">
<h4><a class="toc-backref" href="ioproc.html#id187">LENGTH</a><a class="headerlink" href="ioproc.html#length" title="Permalink to this heading">¶</a></h4>
<p>[Z]LENGTH=intexpr Applies to: TRM SOC SD FIFO PIPE NULL</p>
<p>Sets the virtual page length for an I/O device to the integer expression. You can specify the virtual page length up to 1,048,576. The page length controls the point at which the device driver automatically resets $Y to 0.</p>
<p>By default, for terminals, YottaDB uses the terminfo variable lines (which may be from the terminal definition or from a stty command) as the initial value for LENGTH. The default length for null device and socket device is 66.</p>
<p>Setting LENGTH to zero prevents resetting $Y to zero.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>use sock:(width=80:znoff:zlength=24)
</pre></div>
</div>
<p>This example sets the virtual page length to 24 for socket device sock.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">tcp</span><span class="o">=</span><span class="s2">&quot;seerv&quot;</span> open tcp:<span class="o">(</span><span class="nv">listen</span><span class="o">=</span><span class="s2">&quot;6321:TCP&quot;</span>:attach<span class="o">=</span><span class="s2">&quot;serv&quot;</span><span class="o">)</span>::<span class="s2">&quot;SOCKET&quot;</span>
YDB&gt;use tcp:listen<span class="o">=</span><span class="s2">&quot;6322:TCP&quot;</span>
YDB&gt;use <span class="m">0</span> zshow <span class="s2">&quot;D&quot;</span>
/dev/pts/9 OPEN TERMINAL NOPAST NOESCA NOREADS TYPE <span class="nv">WIDTH</span><span class="o">=</span><span class="m">80</span> <span class="nv">LENG</span><span class="o">=</span><span class="m">24</span>
seerv OPEN SOCKET <span class="nv">TOTAL</span><span class="o">=</span><span class="m">2</span> <span class="nv">CURRENT</span><span class="o">=</span><span class="m">1</span>
SOCKET<span class="o">[</span><span class="m">0</span><span class="o">]=</span>serv <span class="nv">DESC</span><span class="o">=</span><span class="m">3</span> LISTENING PASSIVE NOTRAP <span class="nv">PORT</span><span class="o">=</span><span class="m">6321</span>
     ZDELAY <span class="nv">ZBFSIZE</span><span class="o">=</span><span class="m">1024</span> <span class="nv">ZIBFSIZE</span><span class="o">=</span><span class="m">87380</span> NODELIMITER
SOCKET<span class="o">[</span><span class="m">1</span><span class="o">]=</span>h12185825450 <span class="nv">DESC</span><span class="o">=</span><span class="m">4</span> LISTENING PASSIVE NOTRAP <span class="nv">PORT</span><span class="o">=</span><span class="m">6322</span>
     ZDELAY <span class="nv">ZBFSIZE</span><span class="o">=</span><span class="m">1024</span> <span class="nv">ZIBFSIZE</span><span class="o">=</span><span class="m">87380</span> NODELIMITER
</pre></div>
</div>
</section>
<section id="id20">
<h4><a class="toc-backref" href="ioproc.html#id188">OKEY</a><a class="headerlink" href="ioproc.html#id20" title="Permalink to this heading">¶</a></h4>
<p>Applies to: SD, PIPE, and FIFO</p>
<p>OKEY allows the use of a seperate key for WRITE to a device; for example, when a YottaDB process is an element of a UNIX pipe. The format of the IKEY deviceparameter is:</p>
<p>OKEY=”key_name [IV]”</p>
<p>key_name is case-sensitive and must match a key name in the “files” section of the ydb_crypt_config file. The optional IV specifies an initialization vector to use for encryption and decryption.</p>
<p>For more information, refer to the description of <a class="reference internal" href="ioproc.html#key-open"><span class="std std-ref">KEY</span></a> deviceparameter of OPEN.</p>
</section>
<section id="outrewind">
<h4><a class="toc-backref" href="ioproc.html#id189">OUTREWIND</a><a class="headerlink" href="ioproc.html#outrewind" title="Permalink to this heading">¶</a></h4>
<p>Applies to: SD</p>
<p>Performs a REWIND on output when $PRINCIPAL identifies a device that supports REWIND. Use this deviceparameter with $PRINCIPAL when redirected to a file. For more information, refer to <a class="reference external" href="ioproc.html#rewind">REWIND</a>.</p>
</section>
<section id="outseek-strexpr">
<h4><a class="toc-backref" href="ioproc.html#id190">OUTSEEK=strexpr</a><a class="headerlink" href="ioproc.html#outseek-strexpr" title="Permalink to this heading">¶</a></h4>
<p>Applies to: SD</p>
<p>Performs a SEEK on output when $PRINCIPAL identifies a device that supports SEEK. Use this deviceparameter with $PRINCIPAL when redirected to a file. For more information, refer to <a class="reference external" href="ioproc.html#seek-strexpr">SEEK=strexpr</a>.</p>
</section>
<section id="passthru">
<h4><a class="toc-backref" href="ioproc.html#id191">PASSTHRU</a><a class="headerlink" href="ioproc.html#passthru" title="Permalink to this heading">¶</a></h4>
<p>[NO]PASTHRU Applies to: TRM</p>
<p>Enables or disables interpretation of the ERASE character for a terminal. PASTHRU shifts management of handling and response to ERASE characters in the input stream from YottaDB to the application code.</p>
<p>Exercise caution with PASTHRU in debugging, because using a PASTHRU terminal in Direct Mode is somewhat awkward.</p>
<p>[NO]TTSYNC must be used with [NO]PASTHRU to control XON/XOFF handling.</p>
<p>By default, the device driver operates NOPASTHRU.</p>
<p>PASTHRU supersedes line editing.</p>
</section>
<section id="readsync">
<h4><a class="toc-backref" href="ioproc.html#id192">READSYNC</a><a class="headerlink" href="ioproc.html#readsync" title="Permalink to this heading">¶</a></h4>
<p>[NO]READSYNC Applies to: TRM</p>
<p>Enables or disables automatic output of &lt;XON&gt; before a READ and &lt;XOFF&gt; after a READ.</p>
<p>By default, the terminal drivers operate NOREADSYNC.</p>
</section>
<section id="id23">
<h4><a class="toc-backref" href="ioproc.html#id193">REWIND</a><a class="headerlink" href="ioproc.html#id23" title="Permalink to this heading">¶</a></h4>
<p>REWIND Applies to: SD</p>
<p>REWIND places the file pointer to the beginning of the file.</p>
<p>By default, USE does not REWIND.</p>
<p>REWIND on redirected output for $PRINCIPAL is the same as OUTREWIND.</p>
</section>
<section id="id24">
<h4><a class="toc-backref" href="ioproc.html#id194">SEEK=strexpr</a><a class="headerlink" href="ioproc.html#id24" title="Permalink to this heading">¶</a></h4>
<p>SEEK Applies to: SD</p>
<p>Positions the current file pointer to the location specified in strexpr. The format of strexpr is a string of the form “[+|-]integer” where an unsigned value specifies an offset from the beginning of the file, and an explicitly signed value specifies an offset relative to the current file position. For STREAM or VARIABLE format, the positive intexpr after any sign is a byte offset, while for a FIXED format, it is a record offset. In order to deal with the possible presence of a Byte Order Marker (BOM), SEEK for a FIXED format file written in a UTF character set must follow at least one prior READ since the device was created.</p>
<p>SEEK on redirected input for $PRINCIPAL is the same as INSEEK.</p>
</section>
<section id="socket">
<h4><a class="toc-backref" href="ioproc.html#id195">SOCKET</a><a class="headerlink" href="ioproc.html#socket" title="Permalink to this heading">¶</a></h4>
<p>SOCKET=expr Applies to: SOC</p>
<p>Makes the socket specified by the handle named in expr the current socket for the Socket device . If the named socket is a listening socket, it checks for an incoming connection request and if one is available, it accepts the request and creates a new connected socket in which case $KEY provides information on the new socket. Specifying a socket handle not contained in the Socket device generates an error.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>SOCKET is compatible with DELIMITER only.</p>
</div>
<p>For a usage example, refer to the socketexamplemulti2.m in <a class="reference external" href="ioproc.html#socket-device-examples">“Socket Device Examples”</a>.</p>
</section>
<section id="terminator">
<h4><a class="toc-backref" href="ioproc.html#id196">TERMINATOR</a><a class="headerlink" href="ioproc.html#terminator" title="Permalink to this heading">¶</a></h4>
<p>[NO]TERMINATOR[=expr] Applies to: TRM</p>
<p>Specifies which of the 256 ASCII characters terminate a READ. For example, TERMINATOR=$C(0) makes &lt;NUL&gt; the terminator.</p>
<p>When NOESCAPE is in effect, TERMINATOR controls whether or not &lt;ESC&gt; or &lt;CSI&gt; are treated as terminators, however, when ESCAPE processing is enabled, the entire escape sequence is treated as a terminator regardless of the TERMINATOR specification.</p>
<p>When EDITING is enabled, the control characters used for editing are not treated as terminators even if they are in the TERMINATOR list.</p>
<p>You can define any control character as a terminator, but they are all single character.</p>
<p>When the terminal is in UTF-8 mode (chset=utf8,) YottaDB limits the terminator characters to the first 127 which are common between ASCII and Unicode. In M mode, any of the 256 characters may be specified a terminator.</p>
<p>In UTF-8 mode, if CR is in the terminator list (either by default or explicitly,) YottaDB ignores the following LF to keep with the standard Unicode® line terminator definitions.</p>
<p>NOTERMINATOR eliminates all terminators. When a terminal has all terminators disabled, fixed length READ and READ * terminate on receipt of some number of characters, and a timed READ terminates on timeout, but any other READ only terminates when the input fills the terminal read buffer.</p>
<p>By default, terminals recognize &lt;CR&gt;, &lt;LF&gt;, and &lt;ESC&gt; as terminators (that is, TERMINATOR=$C(10, 13,27)). TERMINATOR=”” restores the default. In UTF-8 mode, the usual Unicode line terminators are also included in the default set of terminators.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt; USE <span class="nv">$P</span>:TERM<span class="o">=</span><span class="nv">$C</span><span class="o">(</span><span class="m">26</span>,13,11,7<span class="o">)</span>
</pre></div>
</div>
<p>This example enables the ASCII characters &lt;SUB&gt;, &lt;CR&gt;, &lt;VT&gt; and &lt;BEL&gt; as READ terminators.</p>
</section>
<section id="id26">
<h4><a class="toc-backref" href="ioproc.html#id197">TRUNCATE</a><a class="headerlink" href="ioproc.html#id26" title="Permalink to this heading">¶</a></h4>
<p>[NO]TRUNCATE Applies to: SD</p>
<p>Enables or disables overwriting of existing data in sequential files. Because the position of each record depends on the prior record, a WRITE destroys the ability to reliably position to subsequent records in a file. Therefore, by default (NOTRUNCATE), YottaDB permits WRITEs only when the file pointer is positioned at the end-of-file. When a device has TRUNCATE enabled, a WRITE issued when the file pointer is not at end-of-file truncates the file by destroying all data from the file pointer to the end-of-file.</p>
<p>By default, OPEN accesses files NOTRUNCATE, which does not allow overwriting of sequential files.</p>
<p>This deviceparameter may not be supported by your platform.</p>
</section>
<section id="ttsync">
<h4><a class="toc-backref" href="ioproc.html#id198">TTSYNC</a><a class="headerlink" href="ioproc.html#ttsync" title="Permalink to this heading">¶</a></h4>
<p>[NO]TTSYNC Applies to: TRM</p>
<p>Enables or disables recognition of XON/XOFF for terminal output.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A terminal may have its own handling of XON/XOFF, controlled by a set-up mode or by switches. If an application requires program recognition of &lt;CTRL-S&gt; and &lt;CTRL-Q&gt;, the terminals may require reconfiguration.</p>
</div>
</section>
<section id="typeahead">
<h4><a class="toc-backref" href="ioproc.html#id199">TYPEAHEAD</a><a class="headerlink" href="ioproc.html#typeahead" title="Permalink to this heading">¶</a></h4>
<p>[NO]TYPEAHEAD Applies to: TRM</p>
<p>Enables or disables type-ahead buffering for a terminal. When TYPEAHEAD is disabled, any pending input which has not yet been read will be discarded before input is read for each READ argument. When TYPEAHEAD is enabled, any input not read by one READ argument will remain available for the next READ argument or command.</p>
<p>The size of the type-ahead buffer limits the amount of data entered at the terminal that the device driver can store in anticipation of future READs.</p>
<p>By default, the terminal device driver accepts TYPEAHEAD.</p>
</section>
<section id="upscroll">
<h4><a class="toc-backref" href="ioproc.html#id200">UPSCROLL</a><a class="headerlink" href="ioproc.html#upscroll" title="Permalink to this heading">¶</a></h4>
<p>UPSCROLL Applies to: TRM</p>
<p>Moves the cursor down one line on the terminal screen. If $Y=LENGTH-1, UPSCROLL sets $Y=0. Otherwise UPSCROLL increments $Y by one. If the cursor is physically at the bottom of the page, the screen scrolls up one line. UPSCROLL does not change the column position or $X.</p>
</section>
<section id="width">
<span id="width-ioproc"></span><h4><a class="toc-backref" href="ioproc.html#id201">WIDTH</a><a class="headerlink" href="ioproc.html#width" title="Permalink to this heading">¶</a></h4>
<p>[Z]WIDTH=intexpr Applies to: TRM SOC NULL SD FIFO PIPE</p>
<p>Sets the device’s logical record size and enables WRAP. The default WIDTH for SOC, SD and FIFO is taken from the RECORDSIZE.</p>
<p>NOWRAP and WIDTH supersede each other. When WIDTH and NOWRAP appear together on the same USE command, the final one controls the device behavior. For a terminal, WIDTH=0 is equivalent to WIDTH=n:NOWRAP, where n is the default length of a logical record on that terminal.</p>
<p>Terminals inherit their default WIDTH in YottaDB from the invoking shell environment. The default WIDTH for null and socket device is 255.</p>
<p>For SD and SOC which support 1MB strings, you can specify WIDTH up to 1,048,576.</p>
<p>In UTF-8 mode and TRM, SOC, SD, and FIFO output, the WIDTH deviceparameter is in units of display-columns and is used with $X to control truncation and WRAPping for output and maintenance of $X and $Y for input.</p>
<p>In UTF-8 mode and SOC, the WIDTH deviceparameter is in units of Unicode code points and is used with $X to control truncation and wrapping for output and maintenance of $X and $Y for input.</p>
<p>In M mode if WIDTH is set to 0, YottaDB uses the default WIDTH of the TRM and SOC devices. USE x:WIDTH=0 is equivalent to USE x:(WIDTH=&lt;device-default&gt;:NOWRAP. For SOC, SD and FIFO devices in M mode, the device default is the RECORDSIZE.</p>
<p>YottaDB format control characters, FILTER, and the device WIDTH and WRAP also have an effect on $X.</p>
<p>In UTF-8 mode and SOC output, the WIDTH deviceparameter specifies the number of UTF-8 characters.</p>
</section>
<section id="id27">
<h4><a class="toc-backref" href="ioproc.html#id202">WRAP</a><a class="headerlink" href="ioproc.html#id27" title="Permalink to this heading">¶</a></h4>
<p>[NO]WRAP Applies to: TRM SOC NULL SD FIFO PIPE</p>
<p>Enables or disables automatic record termination. When the current record size ($X) reaches the maximum WIDTH and the device has WRAP enabled, YottaDB starts a new record, as if the routine had issued a WRITE ! command. When reading, WRAP only determines whether $X remains within the range of zero to WIDTH.</p>
<p>Note that WRAP is enabled by default for SD, NULL, FIFO, PIPE and SOCKET. For TRM, WRAP is enabled by default if the terminfo variable auto_right_margin (capname “am”) is set.</p>
<p>NOWRAP causes YottaDB to require a WRITE ! to terminate the record. NOWRAP allows $X to become greater than the device WIDTH for terminals and null devices.</p>
<p>The combination of STREAM and NOWRAP on disk files allows you to write data of arbitrary length without truncation. Without the STREAM option, the WRAP option determines the action taken when the record length exceeds the device WIDTH. NOWRAP causes YottaDB to truncate the record, while WRAP causes YottaDB to insert a format control character except for FIXED format.</p>
<p>Example:</p>
<p>See <a class="reference external" href="ioproc.html#wrap">WRAP</a> in the OPEN deviceparameters section.</p>
</section>
<section id="id29">
<h4><a class="toc-backref" href="ioproc.html#id203">X</a><a class="headerlink" href="ioproc.html#id29" title="Permalink to this heading">¶</a></h4>
<p>X=intexpr Applies to: TRM</p>
<p>$X positions the cursor to a vertical column on the terminal. If NOWRAP is enabled or intexpr&lt;WIDTH, YottaDB sets $X=intexpr. If WRAP is enabled and intexpr&gt;WIDTH, YottaDB sets $X=intexpr#WIDTH, where # is the YottaDB modulo operator. The resulting $X determines the actual physical position.</p>
<p>To ensure that $Y and $X match what is occurring visually on the terminal, the YottaDB deviceparameters and the device characteristics must match at all times.</p>
<p>The terminal hardware may affect physical cursor positioning. The X deviceparameter does not change the cursor row or update $Y.</p>
</section>
<section id="id30">
<h4><a class="toc-backref" href="ioproc.html#id204">Y</a><a class="headerlink" href="ioproc.html#id30" title="Permalink to this heading">¶</a></h4>
<p>Y=intexpr Applies to: TRM</p>
<p>Positions the cursor to a horizontal row on the terminal.</p>
<p>YottaDB sets $Y=intexpr#LENGTH, where # is the YottaDB modulo operator. If intexpr&lt;LENGTH, the resulting $Y determines the physical position. If intexpr&gt;LENGTH, the cursor is positioned so that $Y=intexpr#LENGTH, where # is the YottaDB module operator. The terminal hardware may affect physical cursor positioning.</p>
<p>To ensure that $Y and $X match what is occurring visually on the terminal, the YottaDB deviceparameters and the device characteristics must match at all times. For example, if a process initiates a subprocess that changes the terminal wrap setting from NOWRAP, previously set with the YottaDB USE command to WRAP , YottaDB does not reflect the change when the subprocess completes. Therefore, wraps on the terminal do not reflect in the values of $X and $Y.</p>
<p>The Y deviceparameter does not change the cursor column or update $X.</p>
</section>
<section id="id31">
<h4><a class="toc-backref" href="ioproc.html#id205">ZBFSIZE</a><a class="headerlink" href="ioproc.html#id31" title="Permalink to this heading">¶</a></h4>
<p>ZBFSIZE Applies to: SOC</p>
<p>Allocates a buffer used by YottaDB when reading from a socket. The ZBFSIZE deviceparameter should be at least as big as the largest message expected.</p>
<p>By default, the size of ZBFSIZE is 1024 and the maximum it can be is 1048576.</p>
</section>
<section id="id32">
<h4><a class="toc-backref" href="ioproc.html#id206">ZDELAY</a><a class="headerlink" href="ioproc.html#id32" title="Permalink to this heading">¶</a></h4>
<p>Z[NO]DELAY Applies to: SOC</p>
<p>Controls buffering of data packets by the system TCP stack using the TCP_NODELAY option to the SETSOCKOPT system call. This behavior is sometimes known as the Nagle algorithm. The default is ZDELAY. This delays sending additional packets until either an acknowledgement of previous packets is received or an interval passes. If several packets are sent from one end of a connection before the other end responds, setting ZNODELAY may be desirable though at the cost of additional packets being transmitted over the network. ZNODELAY must be fully spelled out.</p>
</section>
<section id="id33">
<h4><a class="toc-backref" href="ioproc.html#id207">ZFF</a><a class="headerlink" href="ioproc.html#id33" title="Permalink to this heading">¶</a></h4>
<p>Z[NO]FF=expr Applies to: SOC</p>
<p>expr specifies a string of characters, typically in $CHAR() format to send to socket device, whenever a routine issues a WRITE #. When no string is specified or when ZFF=””, then no characters are sent. The default in YottaDB is ZNOFF.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>u tcpdev:(zwidth=80:zff=$char(13):zlength=24)
</pre></div>
</div>
<p>This example sends $char(13) to the current socket of device tcpdev on every WRITE #.</p>
</section>
<section id="id34">
<h4><a class="toc-backref" href="ioproc.html#id208">ZIBFSIZE</a><a class="headerlink" href="ioproc.html#id34" title="Permalink to this heading">¶</a></h4>
<p>ZIBFSIZE Applies to: SOC</p>
<p>Sets the buffer size used by the network software (setsockopt SO_RCVBUF).</p>
<p>The default and the maximum values depend on the platform and/or system parameters.</p>
<p>Note that LOCAL sockets ignore the ZIBFSIZE deviceparameter.</p>
<p><strong>USE Deviceparameters Summary</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 27%" />
<col style="width: 10%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 12%" />
<col style="width: 13%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>USE Deviceparameter</p></th>
<th class="head"><p>TRM</p></th>
<th class="head"><p>SD</p></th>
<th class="head"><p>FIFO</p></th>
<th class="head"><p>PIPE</p></th>
<th class="head"><p>NULL</p></th>
<th class="head"><p>SOC</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ATTACH</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>CANONICAL</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>[NO]CENABLE</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>[I|O]CHSET</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>CLEARSCREEN</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>CONNECT</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>[NO]CONVERT</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>CTRAP=expr</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>[NO]DELIMITER</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>DETACH=expr</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>DOWNSCROLL</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>[NO]ECHO</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>[NO]EMPTERM</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ERASELINE</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>[NO]ESCAPE</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>EXCEPTION=expr</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>[NO]FILTER[=expr]</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>FLUSH</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>[NO]FOLLOW</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>[NO]HOSTSYNC</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>IKEY</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>INREWIND</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>INSEEK</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>IOERROR</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>KEY</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>[Z]LENGTH=expr</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>LISTEN</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>OKEY</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>OUTREWIND</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>OUTSEEK</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>[NO]PASTHRU</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>REWIND</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>SEEK=strexpr</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>SOCKET</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>TERMINATOR[=expr]</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>[NO]TRUNCATE</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>[NO]TYPEAHEAD</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>UPSCROLL</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>[Z]WIDTH=intexpr</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>[NO]WRAP</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>X=intexpr</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Y=intexpr</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ZBFSIZE</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>Z[NO]DELAY</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>Z[NO]FF</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>ZIBFSIZE</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
</tbody>
</table>
<p>TRM: Valid for terminals and printers</p>
<p>SD: Valid for sequential files</p>
<p>FIFO: Valid for FIFOs</p>
<p>PIPE: Valid for PIPE devices</p>
<p>NULL: Valid for null devices</p>
<p>SOC: Valid for socket devices</p>
</section>
</section>
<section id="read">
<span id="read-ioproc"></span><h3><a class="toc-backref" href="ioproc.html#id209">READ</a><a class="headerlink" href="ioproc.html#read" title="Permalink to this heading">¶</a></h3>
<p>The READ command transfers input from the current device to a global or local variable specified as a READ argument. For convenience, READ also accepts arguments that perform limited output to the current device.</p>
<p>The format of the READ command is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>R[EAD][:tvexpr] glvn|*glvn|glvn#intexpr|strlit|fcc[,...]
</pre></div>
</div>
<ul class="simple">
<li><p>The optional truth-valued expression immediately following the command is a command postconditional that controls whether or not YottaDB executes the command.</p></li>
<li><p>A subscripted or unsubscripted global or local variable name specifies a variable into which to store the input; the variable does not have to exist prior to the READ; if the variable does exist prior to the READ, the READ replaces its old value.</p></li>
<li><p>For fixed format files, READ X always read WIDTH characters.</p></li>
<li><p>For VARIABLE or STREAM format files, READ X reads up to WIDTH characters, stopping if a line terminator or end of file is found first.</p></li>
<li><p>When an asterisk (*) immediately precedes the variable name, READ accepts one character of input and places the ASCII code for that character in the variable.</p></li>
<li><p>When a number sign (#) and a non-zero integer expression immediately follow the variable name, the integer expression determines the maximum number of characters accepted as input to the read; such reads terminate when YottaDB reads the number of characters specified by the integer expression or a terminator in the input stream, whichever occurs first.</p></li>
<li><p>To provide a concise means of issuing prompts, YottaDB sends string literal and format control character (!,?intexpr,#) arguments of a READ to the current device as if they were arguments of a WRITE.</p></li>
<li><p>An indirection operator and an expression atom evaluating to a list of one or more READ arguments form a legal argument for a READ.</p></li>
</ul>
<p>The maximum length of the input string is the smaller of the device buffer size limitation or the YottaDB maximum string size (1,048,576 bytes). If a record is longer than the maximum record length, YottaDB returns the record piece by piece during sequential reads, for devices that allow it.</p>
<p>When a string literal appears as an argument to a READ, M writes the literal to the current device. String literals appear as READ arguments to serve as prompts for input. YottaDB does not permit expression arguments on a READ to act as prompts. Variable prompts must appear as arguments to a WRITE. If a variable appears as an argument to a READ, YottaDB always interprets it as input, never as output. This facility is used mostly with terminal I/O.</p>
<p>The READ commands adjust $X and $Y, based on the length of the input read.</p>
<p>In UTF-8 mode, the READ command uses the character set value specified on the device OPEN as the character encoding of the input device. If character set “M” or “UTF-8” is specified, the data is read with no transformation. If character set is “UTF-16”, “UTF-16LE”, or “UTF-16BE”, the data is read with the specified encoding and transformed to UTF-8. If the READ command encounters an illegal character or a character outside the selected representation, it produces a run-time error. The READ command recognizes all Unicode® line terminators for non-FIXED devices. See <a class="reference internal" href="ioproc.html#line-terminators">Line Terminators</a> section for more details. In M mode, characters and bytes have a one-to-one relationship and therefore READ can be used to read bit-streams of non-character data.</p>
<section id="read-command">
<h4><a class="toc-backref" href="ioproc.html#id210">READ * Command</a><a class="headerlink" href="ioproc.html#read-command" title="Permalink to this heading">¶</a></h4>
<p>The READ * command reads one character from the current device and returns the decimal ASCII representation of that character into the variable specified for the READ * command. READ * appears most frequently in communication protocols, or in interactive programs where single character answers are appropriate.</p>
<p>In UTF-8 mode, the READ * command accepts one Unicode® character input and puts the numeric code-point value for that character into the variable. The READ * command reads one to four bytes, depending on the encoding and returns the numeric code-point value of the character. If ICHSET specifies “UTF-16”, “UTF-16LE” or “UTF-16BE”, the READ * command reads a byte pair or two byte pairs (if it is a surrogate pair) and returns the numeric code-point value. If ICHSET is M, the READ * command reads a single byte and returns the numeric byte value just like in M mode.</p>
<p>The following example reads the value “A”, and returns the decimal ASCII representation of “A” in the variable X.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt; READ *X
A
YDB&gt; WRITE X
<span class="m">65</span>
</pre></div>
</div>
<p>If a timeout occurs before YottaDB reads a character, the READ * returns a negative one (-1) in the variable.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;Set <span class="nv">filename</span><span class="o">=</span><span class="s2">&quot;mydata.out&quot;</span><span class="p">;</span> assume that mydata.out contains <span class="s2">&quot;主要雨在西班牙停留在平原&quot;</span>.
YDB&gt;Open filename:<span class="o">(</span>readonly:ichset<span class="o">=</span><span class="s2">&quot;UTF-16LE&quot;</span><span class="o">)</span>
YDB&gt;Use filename
YDB&gt;Read *x
YDB&gt;Close filename
YDB&gt;Write <span class="nv">$char</span><span class="o">(</span>x<span class="o">)</span>
主
</pre></div>
</div>
<p>In this example, the READ * command reads the first character of the file mydata.out according to the encoding specified by ICHSET.</p>
</section>
<section id="read-x-maxlen-command">
<h4><a class="toc-backref" href="ioproc.html#id211">Read X#maxlen command</a><a class="headerlink" href="ioproc.html#read-x-maxlen-command" title="Permalink to this heading">¶</a></h4>
<p>The READ X#maxlen command limits the maximum size of the input to a maximum of “maxlen” characters, where maxlen is an integer expression.</p>
<p>If a READ follows a READ X#maxlen command, the READ returns the remainder of the current record.</p>
<p>If a terminator arrives before maxlen characters are received the READ X#maxlen terminates.</p>
<p>For fixed format files, If WIDTH - $X is greater than len, READ X#maxlen reads maxlen characters otherwise READ reads WIDTH - $X characters. Fewer may be returned if end of file is reached.</p>
<p>For VARIABLE or STREAM format files, READ X#maxlen reads up to MIN(maxlen, WIDTH - $X) characters, stopping if it finds line terminator or end of file.</p>
</section>
</section>
<section id="write">
<span id="write-ioproc"></span><h3><a class="toc-backref" href="ioproc.html#id212">WRITE</a><a class="headerlink" href="ioproc.html#write" title="Permalink to this heading">¶</a></h3>
<p>The WRITE command transfers a character stream specified by its arguments to the current device.</p>
<p>The format of the WRITE command is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>W[RITE][:tvexpr] expr|*intexpr|fcc[,...]
</pre></div>
</div>
<ul class="simple">
<li><p>The optional truth-valued expression immediately following the command is a command postconditional that controls whether or not YottaDB executes the command.</p></li>
<li><p>An expression argument supplies the text of a WRITE.</p></li>
<li><p>When a WRITE argument consists of a leading asterisk (*) followed by an integer expression, WRITE outputs one character associated with the ASCII code specified by the integer evaluation of the expression.</p></li>
<li><p>WRITE also accepts format control characters as arguments; format control characters modify the position of a virtual cursor: an exclamation point (!) produces the device specific record terminator (for example, new line for a terminal), a number sign (#) produces device specific page terminator (for example, form feed for a terminal) and a question mark (?) followed by an expression moves the virtual cursor to the column specified by the integer evaluation of the expression if the virtual cursor is to the “left” of the specified column.</p></li>
<li><p>When directed to a device bound to a mnemonicspace, WRITE also accepts controlmnemonics, which are keywords specific to the binding – they are delimited by a slash (/) prefix and optionally followed by a parenthetical list of arguments. The parentheses “( )” are optional when there are no arguments, but must appear even if there is a single argument</p></li>
<li><p>An indirection operator and an expression atom evaluating to a list of one or more WRITE arguments form a legal argument for a WRITE.</p></li>
<li><p>In the UTF-8 mode, the WRITE command uses the character set specified on the device OPEN as the character encoding of the output device. If the character set specifies “M” or “UTF-8”, YottaDB WRITEs the data with no transformation. If the character set specifies “UTF-16”, “UTF-16LE” or “UTF-16BE”, the data is assumed to be encoded in UTF-8 and WRITE transforms it to the character encoding specified by character set device parameter.</p></li>
<li><p>If a WRITE command encounters an illegal character in UTF-8 mode, it produces a run-time error irrespective of the setting of VIEW “BADCHAR”.</p></li>
</ul>
<p>YottaDB can write up to 1,048,576 bytes (the YottaDB maximum string size) as a result of a single WRITE argument. YottaDB buffers output into a “logical record” for all devices except sockets without DELIMITERs and sequential devices with STREAM enabled. The WRITE command appends a string to the current record of the current device. YottaDB does not write to the output device until the buffer is full, a YottaDB format control character forces a write, a USE command, a CLOSE command, or, for terminals, the buffer becomes stale. The YottaDB compiler breaks a concatenated WRITE argument into a series of WRITE arguments to eliminate the overhead of the concatentation. If circumstances provide a reason for a single WRITE, perform the concatenation prior to the WRITE.</p>
<p>Each device has a WIDTH and a LENGTH that define the virtual “page”. The WIDTH determines the maximum size of a record for a device, while the LENGTH determines how many records fit on a page. When the current record size ($X) reaches the maximum WIDTH and the device has WRAP enabled, YottaDB starts a new record. When the current line ($Y) reaches the maximum LENGTH, YottaDB starts a new page.</p>
<p>For devices OPENed with a Unicode CHSET, WRITE * takes intexpr as a code-point and writes the associated Unicode® character in the encoding specified by CHSET. For devices OPENed in M mode, WRITE * takes intexpr as an ASCII value and writes the associated ASCII character.</p>
<p>The WRITE command also has several format control characters that allow the manipulation of the virtual cursor. For all I/O devices, the YottaDB format control characters do the following:</p>
<ul class="simple">
<li><p>WRITE !: Clears $X and increments $Y and terminates the logical record in progress. The definition of “logical record” varies from device to device, and is discussed in each device section.</p></li>
<li><p>WRITE #: Clears $X and $Y and terminates the logical record in progress.</p></li>
<li><p>WRITE ?n: If n is greater than $X, writes n-$X spaces to the device, bringing $X to n. If n is less than or equal to $X, WRITE ?n has no effect. When WRAP is enabled and n exceeds the LENGTH of the line, WRITE ?n increments $Y.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If $X is less than WIDTH, WRITE ! writes WIDTH - $X spaces.</p>
</div>
<p>For devices OPENed with a Unicode CHSET, WRITE * takes intexpr as a code-point and writes the associated Unicode character in the encoding specified by CHSET. For devices OPENed in M mode, WRITE * takes intexpr as an ASCII value and writes the associated ASCII character.</p>
<p>In UTF-8 mode, if a WRITE command encounters an illegal character, it produces a run-time error irrespective of the setting of VIEW “BADCHAR”.</p>
<p>For more information, see the sections on specific I/O devices.</p>
</section>
<section id="id35">
<h3><a class="toc-backref" href="ioproc.html#id213">WRITE *</a><a class="headerlink" href="ioproc.html#id35" title="Permalink to this heading">¶</a></h3>
<p>When the argument of a WRITE command consists of a leading asterisk (*) followed by an integer expression, the WRITE command outputs the character represented by the code-point value of that integer expression.</p>
<p>With character set M specified at device OPEN, the WRITE * command transfers the character (byte) associated with the numeric value of the integer expression. With character UTF-8 specified at device OPEN, the WRITE command outputs the character associated with the numeric code-point value. If character set “UTF-16”, “UTF-16LE” or “UTF-16BE” is specified, WRITE * transforms the character code to the mapping specified by that character set.</p>
</section>
<section id="close">
<h3><a class="toc-backref" href="ioproc.html#id214">CLOSE</a><a class="headerlink" href="ioproc.html#close" title="Permalink to this heading">¶</a></h3>
<p>The CLOSE command breaks the connection between a process and a device.</p>
<p>The format of the CLOSE command is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>C[LOSE][:tvexpr] expr[:(keyword[=expr][:...])][,...]
</pre></div>
</div>
<ul class="simple">
<li><p>The optional truth-valued expression immediately following the command is a command postconditional that controls whether or not YottaDB executes the command.</p></li>
<li><p>The required expression specifies the device to CLOSE.</p></li>
<li><p>The optional keywords specify deviceparameters that control device behavior; some deviceparameters take arguments delimited by an equal sign (=); if there is only one keyword, the surrounding parentheses are optional.</p></li>
<li><p>An indirection operator and an expression atom evaluating to a list of one or more CLOSE arguments form a legal argument for a CLOSE.</p></li>
</ul>
<p>When a CLOSE is issued, YottaDB flushes all pending output to the device, and processes any deviceparameters. CLOSEing a device not currently OPEN has no effect.</p>
<p>If a partial record has been output, a WRITE ! is done to complete it. To suppress this action, set $X to zero before the CLOSE.</p>
<p>YottaDB retains the characteristics of all device types, except a sequential file, for use in case of subsequent re-OPENs. If the device is a sequential file, characteristics controlled by deviceparameters are lost after the CLOSE.</p>
<p>If the device being CLOSEd is $IO, YottaDB implicitly USEs $PRINCIPAL. YottaDB ignores CLOSE $PRINCIPAL.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CLOSE SD:RENAME=SD_&quot;.SAV&quot;
</pre></div>
</div>
<p>This closes the device and, if it is a disk file, renames it to have the type .SAV.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>CLOSE SOCKDEV:(SOCKET=&quot;LOCALSOCK1&quot;:DELETE)
</pre></div>
</div>
<p>This deletes the socket file associated with LOCALSOCK1 if it is a listening socket and closes only the named socket on the socket device.</p>
<p><strong>CLOSE Deviceparameters</strong></p>
<section id="delete">
<h4><a class="toc-backref" href="ioproc.html#id215">DELETE</a><a class="headerlink" href="ioproc.html#delete" title="Permalink to this heading">¶</a></h4>
<p>DELETE Applies to: SD FIFO SOC(LOCAL)</p>
<p>Instructs YottaDB to delete the disk file after YottaDB closes it.</p>
</section>
<section id="destroy">
<h4><a class="toc-backref" href="ioproc.html#id216">DESTROY</a><a class="headerlink" href="ioproc.html#destroy" title="Permalink to this heading">¶</a></h4>
<p>[NO]DESTROY Applies to: SD, FIFO, SOC</p>
<p>Determines whether the process retains device characteristics after CLOSE. The default is DESTROY for sequential disk files and FIFO devices and NODESTROY for SOCKET devices. While NODESTROY allows the re-OPEN of previously CLOSE’d device with the same characteristics as when it was last CLOSE’d, as described by the M standard, every tracked device uses process memory. A device that has been DESTROYed on CLOSE cannot be re-opened with the previous characteristics, but reclaims memory used by the process for that device. [NO]DESTROY is ignored for CLOSE of a specific socket rather than the entire socket device.</p>
<p>Because it forms a communication link with a process it creates, CLOSE of a PIPE device always eliminates the device and hence ignores any [NO]DESTROY deviceparameter.</p>
</section>
<section id="id36">
<h4><a class="toc-backref" href="ioproc.html#id217">EXCEPTION</a><a class="headerlink" href="ioproc.html#id36" title="Permalink to this heading">¶</a></h4>
<p>EXCEPTION=expr Applies to: All devices</p>
<p>Defines an error handler for an I/O device. The expression must contain a fragment of YottaDB code (for example, GOTO ERRFILE) that YottaDB XECUTEs when the driver for the device detects an error, or an entryref to which YottaDB transfers control, as appropriate for the current ydb_ztrap_form.</p>
<p>The expression must contain a fragment of YottaDB code (for example, GOTO ERRFILE) that YottaDB XECUTEs when the driver for the device detects an error, or an entryref to which YottaDB transfers control, as appropriate for the current ydb_ztrap_form.</p>
<p>For more information on error handling, refer to <a class="reference external" href="errproc.html">Chapter 13: “Error Processing”</a>.</p>
</section>
<section id="id38">
<h4><a class="toc-backref" href="ioproc.html#id218">GROUP</a><a class="headerlink" href="ioproc.html#id38" title="Permalink to this heading">¶</a></h4>
<p>GROUP=expr Applies to: SOC(LOCAL), SD, FIFO</p>
<p>Specifies access permission on a UNIX file for other users in the file owner’s group. The expression is a character string evaluating to null or to any combination of the letters RWX, indicating respectively Read, Write, and eXecute access. When any one of these deviceparameters (OWNER, GROUP, WORLD) appear on a CLOSE of an existing file, any user category, that is not explicitly specified remains unchanged.</p>
<p>In order to modify file security, the user who issues the CLOSE must have ownership.</p>
<p>By default, CLOSE does not modify the permissions on an existing file.</p>
</section>
<section id="id39">
<h4><a class="toc-backref" href="ioproc.html#id219">OWNER</a><a class="headerlink" href="ioproc.html#id39" title="Permalink to this heading">¶</a></h4>
<p>OWNER=expr Applies to: SOC(LOCAL) SD FIFO</p>
<p>Specifies access permission on a UNIX file for the owner of the file. The expression is a character string evaluating to null or to any combination of the letters RWX, indicating respectively Read, Write, and eXecute access. When any one of these deviceparameters appear on a CLOSE of an existing file, any user category (GROUP, WORLD), that is not explicitly specified remains unchanged.</p>
<p>In order to modify file security, the user who issues the CLOSE must have ownership.</p>
<p>By default, CLOSE does not modify the permissions on an existing file.</p>
</section>
<section id="rename">
<h4><a class="toc-backref" href="ioproc.html#id220">RENAME</a><a class="headerlink" href="ioproc.html#rename" title="Permalink to this heading">¶</a></h4>
<p>RENAME=expr Applies to: SD</p>
<p>Changes the file name to the name contained in the argument string. When the expression omits part of the pathname, YottaDB constructs the full pathname by applying the defaults discussed in the section on device specifications.</p>
<p>If the process has sufficient access permissions, it may use RENAME to specify a different directory as well as file name. RENAME cannot move a file to a different filesystem.</p>
</section>
<section id="id40">
<h4><a class="toc-backref" href="ioproc.html#id221">SOCKET</a><a class="headerlink" href="ioproc.html#id40" title="Permalink to this heading">¶</a></h4>
<p>SOCKET=expr Applies to: SOC</p>
<p>The socket specified in expr is closed. Specifying a socket that has not been previously OPENed generates an error. If no SOCKET deviceparameter is specified on a CLOSE for a socket device, the socket device and all sockets associated with it are closed.</p>
</section>
<section id="timeout">
<h4><a class="toc-backref" href="ioproc.html#id222">TIMEOUT</a><a class="headerlink" href="ioproc.html#timeout" title="Permalink to this heading">¶</a></h4>
<p>TIMEOUT=expr Applies to: PIPE</p>
<p>Performs a timed check (in seconds) on the termination status of the PIPE co-process of a PIPE device that is not OPEN’d with the INDEPENDENT deviceparameter. intexpr specifies time in seconds. The default is 2 seconds if TIMEOUT is not specified.</p>
</section>
<section id="id41">
<h4><a class="toc-backref" href="ioproc.html#id223">UIC</a><a class="headerlink" href="ioproc.html#id41" title="Permalink to this heading">¶</a></h4>
<p>UIC=exprgroup number Applies to: SOC(LOCAL) SD FIFO</p>
<p>Specifies the group that has access to the file. The format of the string is “g,i” where g is a decimal number representing the group portion of the UIC and i is a decimal number representing the individual portion.</p>
<p>Specifies the owner and affects access to the file. The expression evaluates to the numeric identifier of the new owner.</p>
</section>
<section id="id42">
<h4><a class="toc-backref" href="ioproc.html#id224">WORLD</a><a class="headerlink" href="ioproc.html#id42" title="Permalink to this heading">¶</a></h4>
<p>WORLD=expr Applies to: SOC(LOCAL) SD FIFO</p>
<p>Specifies access permissions for users not in the owner’s group on a UNIX file. The expression is a character string evaluating to null or to any combination of the letters RWX, indicating respectively Read, Write, and eXecute access. When any one of these deviceparameters (OWNER, GROUP, WORLD) appears on a CLOSE of a new file, any user category that is not explicitly specified is given the default character string. When any one of these deviceparameters (OWNER, GROUP, WORLD) appears on a CLOSE of an existing file, any user category , that is not explicitly specified remains unchanged.</p>
<p>In order to modify file security, the user who issues the CLOSE must have ownership.</p>
<p>By default, CLOSE and CLOSE do not modify the permissions on an existing file. Unless otherwise specified, when CLOSE creates a new file, it establishes security using standard defaulting rules.</p>
<p>In order to modify file security, the user who issues the CLOSE must have ownership.</p>
<p><strong>CLOSE Deviceparameters Table</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 36%" />
<col style="width: 20%" />
<col style="width: 18%" />
<col style="width: 12%" />
<col style="width: 14%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>CLOSE Deviceparameter</p></th>
<th class="head"><p>TRM</p></th>
<th class="head"><p>SD</p></th>
<th class="head"><p>FIFO</p></th>
<th class="head"><p>SOC</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>“DELETE”</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>“DESTROY”</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>“EXCEPTION”</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>“GROUP”</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>“OWNER”</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>“RENAME”</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>“REWIND”</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>“SOCKET”</p></td>
<td></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>“UIC”</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>“WORLD”</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>SD: Valid for sequential disk files</p>
<p>TRM: Valid for terminals and printers</p>
<p>FIFO: Valid for FIFOs</p>
<p>NULL: Valid for NULL devices</p>
<p>SOC: Valid for Socket devices</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Since EXCEPTION is the only CLOSE deviceparameter that applies to NULL, the NULL device column is not shown in the table above.</p>
</div>
</section>
</section>
<section id="deviceparameter-summary-table">
<h3><a class="toc-backref" href="ioproc.html#id225">Deviceparameter Summary Table</a><a class="headerlink" href="ioproc.html#deviceparameter-summary-table" title="Permalink to this heading">¶</a></h3>
<p>The following table lists all of the deviceparameters and shows the commands to which they apply.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 34%" />
<col style="width: 22%" />
<col style="width: 22%" />
<col style="width: 22%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Deviceparameter</p></th>
<th class="head"><p>OPEN</p></th>
<th class="head"><p>USE</p></th>
<th class="head"><p>CLOSE</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>APPEND</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ATTACH</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>BLOCKSIZE=intexpr</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>[NO]CENABLE</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>CLEARSCREEN</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>CONNECT</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>[NO]CONVERT</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>CTRAP</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>DELETE</p></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>[NO]DELIMITER</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>[NO]DESTROY</p></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>DETACH</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>DOWNSCROLL</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>[NO]ECHO</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ERASELINE</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>[NO]ESCAPE</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>EXCEPTION=expr</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>[NO]FILTER[=expr]</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>[NO]FIXED</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>FLUSH</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>GROUP=expr</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>KEY</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>IKEY</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>IOERROR=expr</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>[NO]HOSTSYNC</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>[Z]LENGTH=intexpr</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>NEWVERSION</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>OKEY</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>OWNER=expr</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>[NO]PASTHRU</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>[NO]RCHK</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>[NO]READONLY</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>RECORDSIZE=intexpr</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>RENAME=expr</p></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>[NO]RETRY</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>REWIND</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>SKIPFILE=intexpr</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>SOCKET</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>SPACE=intexpr</p></td>
<td></td>
<td><p>X</p></td>
<td><p>X</p></td>
</tr>
<tr class="row-odd"><td><p>[NO]STREAM</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>TERMINATOR=expr</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>TIMEOUT=expr</p></td>
<td></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>[NO]TRUNCATE</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>[NO]TTSYNC</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>[NO]TYPEAHEAD</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>UIC=expr</p></td>
<td><p>X</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>UPSCROLL</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>VARIABLE</p></td>
<td><p>X</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>[Z]WIDTH=intexpr</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>WORLD=expr</p></td>
<td><p>X</p></td>
<td></td>
<td><p>X</p></td>
</tr>
<tr class="row-even"><td><p>[Z][NO]WRAP</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>WRITELB=expr</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>X=intexpr</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Y=intexpr</p></td>
<td></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>ZBFSIZE</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>Z[NO]DELAY</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Z[NO]FF</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>ZIBFSIZE</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>LISTEN=expr</p></td>
<td><p>X</p></td>
<td><p>X</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="isv.html" class="btn btn-neutral float-left" title="8. Intrinsic Special Variables" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="utility.html" class="btn btn-neutral float-right" title="10. Utility Routines" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2021, YottaDB LLC.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
<hr/>
<!-- DDG search widget,@author Juri Wornowitski,@version 2.0,@link https://www.plainlight.com/ddg --><div id="widdget" style="width:100%;margin:10px 0;"><style type="text/css">#widdget input {display:block;height:30px;padding:4px;outline:none;border:1px solid #8d8d8d;border-right:0;box-sizing:border-box;border-radius:3px 0 0 3px;width:calc(100% - 41px);font-size:15px;} #widdget button {float:left;cursor:pointer;width:43px;height:30px;color:#fff;background-image:linear-gradient(#7f72ca,#554492);border:0;border-radius:0 3px 3px 0;} #widdget button:active {background-image:linear-gradient(#002387,#002357);} #widdget button:focus {outline:none;}</style><form style="position:relative" onsubmit="this.elements[0].click();return false;"><div style="float:right;position:absolute;top:0;right:-2px;z-index:3"><button type="button" onclick="var v=this.parentElement.parentElement.elements[1].value;window.open('https://duckduckgo.com?q='+encodeURIComponent(v)+'+site%3Adocs.yottadb.com&kj=p');">&#128269;</button></div><input type="text" name="que" placeholder="Search documents with DuckDuckGo" /></form></div>
 


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>