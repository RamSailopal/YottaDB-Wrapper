<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>7. Functions &mdash; Programmer&#39;s Guide  documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="author" title="About these documents" href="about.html" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="8. Intrinsic Special Variables" href="isv.html" />
    <link rel="prev" title="6. Commands" href="commands.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
	  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
		      <input type="text" name="q" placeholder="Search" />
		          <input type="hidden" name="check_keywords" value="yes" />
			      <input type="hidden" name="area" value="default" />
			        </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference external" href="https://yottadb.com/resources/documentation">Main YottaDB Documentation Page</a></li>
<li class="toctree-l1"><a class="reference internal" href="man.html">About this Manual</a></li>
<li class="toctree-l1"><a class="reference internal" href="about.html">1. About YottaDB</a></li>
<li class="toctree-l1"><a class="reference internal" href="langext.html">2. YottaDB Language Extensions</a></li>
<li class="toctree-l1"><a class="reference internal" href="devcycle.html">3. Development Cycle</a></li>
<li class="toctree-l1"><a class="reference internal" href="opdebug.html">4. Operating and Debugging in Direct Mode</a></li>
<li class="toctree-l1"><a class="reference internal" href="langfeat.html">5. General Language Features of M</a></li>
<li class="toctree-l1"><a class="reference internal" href="commands.html">6. Commands</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="functions.html#">7. Functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="functions.html#ascii">$ASCII()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-ascii">Examples of $ASCII()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#char">$CHAR()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-char">Examples of $CHAR()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#data">$DATA()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#data-results">$DATA() Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-data">Examples of $DATA()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#extract">$EXTRACT()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-extract">Examples of $EXTRACT()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#find">$FIND()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-find">Examples of $FIND()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#fnumber">$FNUMBER()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-fnumber">Examples of $FNUMBER()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#get">$GET()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-get">Examples of $GET()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#increment">$INCREMENT()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-increment">Examples of $INCREMENT()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#justify">$JUSTIFY()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-justify">Examples of $JUSTIFY()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#length">$LENGTH()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-length">Examples of $LENGTH()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#name">$NAME()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-name">Examples of $NAME()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#next">$NEXT()</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#order">$ORDER()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-order">Examples of $ORDER()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#piece">$PIECE()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-piece">Examples of $PIECE()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#qlength">$QLENGTH()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-qlength">Examples of $QLENGTH()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#qsubscript">$QSUBSCRIPT()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-qsubscript">Examples of $QSUBSCRIPT()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#query">$QUERY()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-query">Examples of $QUERY()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#random">$RANDOM()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-random">Examples of $RANDOM()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#reverse">$REVERSE()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-reverse">Examples of $REVERSE()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#select">$SELECT()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-select">Examples of $SELECT()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#stack">$STACK()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-stack">Examples of $STACK()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#text">$TEXT()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-text">Examples of $TEXT()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#translate">$TRANSLATE()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-translate">Examples of $TRANSLATE()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#view">$VIEW()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#argument-keywords-of-view">Argument Keywords of $VIEW()</a></li>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-view">Examples of $VIEW()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zahandle">$ZAHANDLE()</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zascii">$ZASCII()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zascii">Examples of $ZASCII()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zatransform">$ZATRANSFORM()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zatransform">Examples of $ZATRANSFORM()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zbit-functions">$ZBIT Functions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#zbitand">$ZBITAND()</a></li>
<li class="toctree-l3"><a class="reference internal" href="functions.html#zbitcount">$ZBITCOUNT()</a></li>
<li class="toctree-l3"><a class="reference internal" href="functions.html#zbitfind">$ZBITFIND()</a></li>
<li class="toctree-l3"><a class="reference internal" href="functions.html#zbitget">$ZBITGET()</a></li>
<li class="toctree-l3"><a class="reference internal" href="functions.html#zbitlen">$ZBITLEN()</a></li>
<li class="toctree-l3"><a class="reference internal" href="functions.html#zbitnot">$ZBITNOT()</a></li>
<li class="toctree-l3"><a class="reference internal" href="functions.html#zbitor">$ZBITOR()</a></li>
<li class="toctree-l3"><a class="reference internal" href="functions.html#zbitset">$ZBITSET()</a></li>
<li class="toctree-l3"><a class="reference internal" href="functions.html#zbitstr">$ZBITSTR()</a></li>
<li class="toctree-l3"><a class="reference internal" href="functions.html#zbitxor">$ZBITXOR()</a></li>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zbit-functions">Examples of $ZBIT Functions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zchar">$ZCHAR()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#example-of-zchar">Example of $ZCHAR()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zcollate">$ZCOLLATE()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zcollate">Examples of $ZCOLLATE()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zconvert">$ZCONVERT()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zconvert">Examples of $ZCONVERT()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zdata">$ZDATA()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-for-zdata">Examples for $ZDATA()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zdate">$ZDATE()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#zdate-format-specification-elements">$ZDATE() Format Specification Elements</a></li>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zdate">Examples of $ZDATE()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zextract">$ZEXTRACT()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zextract">Examples of $ZEXTRACT()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zfind">$ZFIND()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zfind">Examples of $ZFIND()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zgetjpi">$ZGETJPI()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zgetjpi">Examples of $ZGETJPI()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zjobexam">$ZJOBEXAM()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zjobexam">Examples of $ZJOBEXAM()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zjustify">$ZJUSTIFY()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zjustify">Examples of $ZJUSTIFY()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zlength">$ZLENGTH()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zlength">Examples of $ZLENGTH()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zmessage">$ZMESSAGE()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zmessage">Examples of $ZMESSAGE()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zparse">$ZPARSE()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zparse">Examples of $ZPARSE()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zpeek">$ZPEEK()</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zpiece">$ZPIECE()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zpiece">Examples of $ZPIECE()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zprevious">$ZPREVIOUS()</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zqgblmod">$ZQGBLMOD()</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zsearch">$ZSEARCH()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zsearch">Examples of $ZSEARCH()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zsigproc">$ZSIGPROC()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zsigproc">Examples of $ZSIGPROC()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zsocket">$ZSOCKET()</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zsubstr">$ZSUBSTR()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zsubstr">Examples of $ZSUBSTR()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zsyslog">$ZSYSLOG()</a></li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#ztranslate">$ZTRANSLATE()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-ztranslate">Examples of $ZTRANSLATE()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#ztrigger">$ZTRIGGER()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-ztrigger">Examples of $ZTRIGGER()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#ztrnlnm">$ZTRNLNM()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-ztrnlnm">Examples of $ZTRNLNM()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zwidth">$ZWIDTH()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zwidth">Examples of $ZWIDTH()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zwrite">$ZWRITE()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zwrite">Examples of $ZWRITE()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zyhash">$ZYHASH()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zyhash">Examples of $ZYHASH()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zyissqlnull">$ZYISSQLNULL()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zyissqlnull">Examples of $ZYISSQLNULL()</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="functions.html#zysuffix">$ZYSUFFIX()</a><ul>
<li class="toctree-l3"><a class="reference internal" href="functions.html#examples-of-zysuffix">Examples of $ZYSUFFIX()</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="isv.html">8. Intrinsic Special Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="ioproc.html">9. Input/Output Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="utility.html">10. Utility Routines</a></li>
<li class="toctree-l1"><a class="reference internal" href="extrout.html">11. Integrating External Routines</a></li>
<li class="toctree-l1"><a class="reference internal" href="internatn.html">12. Internationalization</a></li>
<li class="toctree-l1"><a class="reference internal" href="errproc.html">13. Error Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="triggers.html">14. Triggers</a></li>
<li class="toctree-l1"><a class="reference internal" href="encrypt.html">15. Database Encryption Extensions to the YottaDB External Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix.html">Appendix A: M Coding Standards - Do’s and Don’ts</a></li>
<li class="toctree-l1"><a class="reference internal" href="LICENSE.html">LICENSE</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Programmer's Guide</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>7. Functions</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul><div class="rst-breadcrumbs-buttons" role="navigation" aria-label="Sequential page navigation">
        <a href="commands.html" class="btn btn-neutral float-left" title="6. Commands" accesskey="p"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="isv.html" class="btn btn-neutral float-right" title="8. Intrinsic Special Variables" accesskey="n">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
  </div>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="functions">
<span id="index-0"></span><h1><a class="toc-backref" href="functions.html#id10">7. Functions</a><a class="headerlink" href="functions.html#functions" title="Permalink to this heading">¶</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title">Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="functions.html#functions" id="id10">7. Functions</a></p>
<ul>
<li><p><a class="reference internal" href="functions.html#ascii" id="id11">$ASCII()</a></p></li>
<li><p><a class="reference internal" href="functions.html#char" id="id12">$CHAR()</a></p></li>
<li><p><a class="reference internal" href="functions.html#data" id="id13">$DATA()</a></p></li>
<li><p><a class="reference internal" href="functions.html#extract" id="id14">$EXTRACT()</a></p></li>
<li><p><a class="reference internal" href="functions.html#find" id="id15">$FIND()</a></p></li>
<li><p><a class="reference internal" href="functions.html#fnumber" id="id16">$FNUMBER()</a></p></li>
<li><p><a class="reference internal" href="functions.html#get" id="id17">$GET()</a></p></li>
<li><p><a class="reference internal" href="functions.html#increment" id="id18">$INCREMENT()</a></p></li>
<li><p><a class="reference internal" href="functions.html#justify" id="id19">$JUSTIFY()</a></p></li>
<li><p><a class="reference internal" href="functions.html#length" id="id20">$LENGTH()</a></p></li>
<li><p><a class="reference internal" href="functions.html#name" id="id21">$NAME()</a></p></li>
<li><p><a class="reference internal" href="functions.html#next" id="id22">$NEXT()</a></p></li>
<li><p><a class="reference internal" href="functions.html#order" id="id23">$ORDER()</a></p></li>
<li><p><a class="reference internal" href="functions.html#piece" id="id24">$PIECE()</a></p></li>
<li><p><a class="reference internal" href="functions.html#qlength" id="id25">$QLENGTH()</a></p></li>
<li><p><a class="reference internal" href="functions.html#qsubscript" id="id26">$QSUBSCRIPT()</a></p></li>
<li><p><a class="reference internal" href="functions.html#query" id="id27">$QUERY()</a></p></li>
<li><p><a class="reference internal" href="functions.html#random" id="id28">$RANDOM()</a></p></li>
<li><p><a class="reference internal" href="functions.html#reverse" id="id29">$REVERSE()</a></p></li>
<li><p><a class="reference internal" href="functions.html#select" id="id30">$SELECT()</a></p></li>
<li><p><a class="reference internal" href="functions.html#stack" id="id31">$STACK()</a></p></li>
<li><p><a class="reference internal" href="functions.html#text" id="id32">$TEXT()</a></p></li>
<li><p><a class="reference internal" href="functions.html#translate" id="id33">$TRANSLATE()</a></p></li>
<li><p><a class="reference internal" href="functions.html#view" id="id34">$VIEW()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zahandle" id="id35">$ZAHANDLE()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zascii" id="id36">$ZASCII()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zatransform" id="id37">$ZATRANSFORM()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zbit-functions" id="id38">$ZBIT Functions</a></p></li>
<li><p><a class="reference internal" href="functions.html#zchar" id="id39">$ZCHAR()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zcollate" id="id40">$ZCOLLATE()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zconvert" id="id41">$ZCONVERT()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zdata" id="id42">$ZDATA()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zdate" id="id43">$ZDATE()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zextract" id="id44">$ZEXTRACT()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zfind" id="id45">$ZFIND()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zgetjpi" id="id46">$ZGETJPI()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zjobexam" id="id47">$ZJOBEXAM()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zjustify" id="id48">$ZJUSTIFY()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zlength" id="id49">$ZLENGTH()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zmessage" id="id50">$ZMESSAGE()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zparse" id="id51">$ZPARSE()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zpeek" id="id52">$ZPEEK()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zpiece" id="id53">$ZPIECE()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zprevious" id="id54">$ZPREVIOUS()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zqgblmod" id="id55">$ZQGBLMOD()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zsearch" id="id56">$ZSEARCH()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zsigproc" id="id57">$ZSIGPROC()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zsocket" id="id58">$ZSOCKET()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zsubstr" id="id59">$ZSUBSTR()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zsyslog" id="id60">$ZSYSLOG()</a></p></li>
<li><p><a class="reference internal" href="functions.html#ztranslate" id="id61">$ZTRANSLATE()</a></p></li>
<li><p><a class="reference internal" href="functions.html#ztrigger" id="id62">$ZTRIGGER()</a></p></li>
<li><p><a class="reference internal" href="functions.html#ztrnlnm" id="id63">$ZTRNLNM()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zwidth" id="id64">$ZWIDTH()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zwrite" id="id65">$ZWRITE()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zyhash" id="id66">$ZYHASH()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zyissqlnull" id="id67">$ZYISSQLNULL()</a></p></li>
<li><p><a class="reference internal" href="functions.html#zysuffix" id="id68">$ZYSUFFIX()</a></p></li>
</ul>
</li>
</ul>
</div>
<p>This chapter describes M language Intrinsic Functions implemented in YottaDB. Traditional string processing functions have parallel functions that start with the letter “z”. The parallel functions extend the byte-oriented functionality of their counterparts to UTF-8 mode. They are helpful when applications need to process binary data including blobs, binary byte streams, bit-masks, and so on.</p>
<p>Other functions that start with the letter “z” and do not have counterparts implement new functionality and are YottaDB additions to the ANSI standard Intrinsic Functions. The M standard specifies standard abbreviations for Intrinsic Functions and rejects any non-standard abbreviations.</p>
<p>M Intrinsic Functions start with a single dollar sign ($) and have one or more arguments enclosed in parentheses () and separated by commas (,). These functions provide expression results by performing actions that are impossible or difficult to perform using M commands.</p>
<section id="ascii">
<span id="ascii-function"></span><h2><a class="toc-backref" href="functions.html#id11">$ASCII()</a><a class="headerlink" href="functions.html#ascii" title="Permalink to this heading">¶</a></h2>
<p>Returns the integer ASCII code for a character in the given string. For a yottadb process started in UTF-8 mode, $ASCII() returns the integer Unicode® UTF-8 code-point value of a character in the given string.</p>
<p>The format for the $ASCII function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$A[SCII](expr[,intexpr])
</pre></div>
</div>
<ul class="simple">
<li><p>The expression is the source string from which $ASCII() extracts the character it decodes.</p></li>
<li><p>intexpr contains the position within the expression of the character that $ASCII() decodes. If intexpr is missing, $ASCII() returns a result based on the first character position.</p></li>
<li><p>If intexpr evaluates to before the beginning or after the end of the expression, $ASCII() returns a value of -1.</p></li>
</ul>
<p>$ASCII() provides a means of examining non-graphic characters in a string. When used with $CHAR(), $ASCII() also provides a means to perform arithmetic operations on the codes associated with characters.</p>
<p>$ZASCII() is the parallel function of $ASCII(). $ZASCII() interprets the string argument as a sequence of bytes (rather than a sequence of characters) and can perform all byte-oriented $ASCII() operations. For more information, refer to <a class="reference internal" href="functions.html#zascii-function"><span class="std std-ref">$ZASCII()</span></a>.</p>
<section id="examples-of-ascii">
<h3>Examples of $ASCII()<a class="headerlink" href="functions.html#examples-of-ascii" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;For <span class="nv">i</span><span class="o">=</span><span class="m">0</span>:1:3 Write !,<span class="nv">$Ascii</span><span class="o">(</span><span class="s2">&quot;Hi&quot;</span>,i<span class="o">)</span>
-1
<span class="m">72</span>
<span class="m">73</span>
-1
YDB&gt;
</pre></div>
</div>
<p>This loop displays the result of $ASCII() specifying a character position before, first and second positions, and after the string.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;Write <span class="nv">$ZCHSET</span>
UTF-8
YDB&gt;Write <span class="nv">$Ascii</span><span class="o">(</span><span class="s2">&quot;主&quot;</span><span class="o">)</span>
<span class="m">20027</span>
YDB&gt;Write <span class="nv">$$</span>FUNC^%DH<span class="o">(</span><span class="s2">&quot;20027&quot;</span><span class="o">)</span>
00004E3B
</pre></div>
</div>
<p>In this example, 20027 is the integer equivalent of the hexadecimal value 4E3B. U+4E3B is a character in the CJK Ideograph block of the Unicode® Standard.</p>
</section>
</section>
<section id="char">
<span id="char-function"></span><h2><a class="toc-backref" href="functions.html#id12">$CHAR()</a><a class="headerlink" href="functions.html#char" title="Permalink to this heading">¶</a></h2>
<p>Returns a string of one or more characters corresponding to integer ASCII codes specified in its argument(s). For a process started in UTF-8 mode, $CHAR() returns a string composed of characters represented by the integer equivalents of the Unicode® code-points specified in its argument(s).</p>
<p>The format for the $CHAR function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$C[HAR](intexpr[,...])
</pre></div>
</div>
<ul class="simple">
<li><p>The integer expression(s) specify the codes of the character(s) $CHAR() returns.</p></li>
<li><p>The M standard does not restrict the number of arguments to $CHAR(). However, YottaDB does limit the number of arguments to a maximum of 254. $CHAR() provides a means of producing non-graphic characters, as such characters cannot appear directly within an M string literal. When used with $ASCII(), $CHAR() can also perform arithmetic operations on the codes associated with characters.</p></li>
<li><p>With VIEW “BADCHAR” enabled, $CHAR() produces a run-time error if any expression evaluates to a code-point value that is not a character in Unicode. YottaDB determines from ICU which characters are illegal.</p></li>
<li><p>$ZCHAR() is the parallel function of $CHAR(). $ZCHAR() returns a sequence of bytes (rather than a sequence of characters) and can perform all byte-oriented $CHAR() operations. For more information, refer to <a class="reference internal" href="functions.html#zchar-function"><span class="std std-ref">$ZCHAR()</span></a>.</p></li>
</ul>
<section id="examples-of-char">
<h3>Examples of $CHAR()<a class="headerlink" href="functions.html#examples-of-char" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$char</span><span class="o">(</span><span class="m">77</span>,7<span class="o">)</span>
M
YDB&gt;
</pre></div>
</div>
<p>This example uses $CHAR() to WRITE the letter M and signal the terminal “bell.”</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set nam=$extract(nam,1,$length(nam)-1)_$char($ascii(nam,$length(nam))-1)
</pre></div>
</div>
<p>This example uses $CHAR() and $ASCII() to set the variable nam to a value that immediately precedes its previous value in the set of strings of the same length as nam.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zchset</span>
UTF-8
YDB&gt;write <span class="nv">$char</span><span class="o">(</span><span class="m">20027</span><span class="o">)</span>
主
YDB&gt;write <span class="nv">$char</span><span class="o">(</span><span class="m">65</span><span class="o">)</span>
A
</pre></div>
</div>
<p>In the above example, the integer value 20027 is the Unicode® character “主” in the CJK Ideograph block of Unicode. Note that the output of the $CHAR() function for values of integer expression(s) from 0 through 127 does not vary with choice of the character encoding scheme. This is because 7-bit ASCII is a proper subset of UTF-8 character encoding scheme. The representation of characters returned by the $CHAR() function for values 128 through 255 differ for each character encoding scheme.</p>
</section>
</section>
<section id="data">
<h2><a class="toc-backref" href="functions.html#id13">$DATA()</a><a class="headerlink" href="functions.html#data" title="Permalink to this heading">¶</a></h2>
<p>Returns an integer code describing the value and descendent status of a local or global variable.</p>
<p>The format for the $DATA function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$D[ATA](glvn)
</pre></div>
</div>
<ul class="simple">
<li><p>The subscripted or unsubscripted global or local variable name specifies the target node.</p></li>
<li><p>If the variable is undefined, $DATA() returns 0.</p></li>
<li><p>If the variable has a value but no descendants, $DATA() returns 1.</p></li>
<li><p>If the variable has descendants but no value, $DATA() returns 10.</p></li>
<li><p>If the variable has a value and descendants, $DATA() returns 11.</p></li>
<li><p>$ZDATA() extends $DATA() to reflect the current alias state of the lvn or name argument to identify alias and alias container variables. For more information, refer to <a class="reference internal" href="functions.html#zdata-function"><span class="std std-ref">$ZDATA()</span></a>.</p></li>
</ul>
<p>The following table summarizes $DATA() return values.</p>
<section id="data-results">
<h3>$DATA() Results<a class="headerlink" href="functions.html#data-results" title="Permalink to this heading">¶</a></h3>
<table class="docutils align-default">
<colgroup>
<col style="width: 20%" />
<col style="width: 42%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Descendants (No)</p></th>
<th class="head"><p>Descendants (Yes)</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>NO</p></td>
<td><p>0</p></td>
<td><p>10</p></td>
</tr>
<tr class="row-odd"><td><p>YES</p></td>
<td><p>1</p></td>
<td><p>11</p></td>
</tr>
</tbody>
</table>
<p>$DATA() return values can also be understood as a pair of truth-values where the left describes descendants and the right describes data and where M suppresses any leading zero (representing no descendants).</p>
</section>
<section id="examples-of-data">
<h3>Examples of $DATA()<a class="headerlink" href="functions.html#examples-of-data" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;Kill  Write <span class="nv">$Data</span><span class="o">(</span>a<span class="o">)</span>
<span class="m">0</span>
YDB&gt;Set a<span class="o">(</span><span class="m">1</span><span class="o">)=</span><span class="m">1</span> Write <span class="nv">$Data</span><span class="o">(</span>a<span class="o">(</span><span class="m">1</span><span class="o">))</span>
<span class="m">1</span>
YDB&gt;Write <span class="nv">$Data</span><span class="o">(</span>a<span class="o">)</span>
<span class="m">10</span>
YDB&gt;Set <span class="nv">a</span><span class="o">=</span><span class="m">0</span> Write <span class="nv">$Data</span><span class="o">(</span>a<span class="o">)</span>
<span class="m">11</span>
YDB&gt;
</pre></div>
</div>
<p>This uses $DATA to display all possible $DATA() results.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>lock ^ACCT(0)
if &#39;$data(^ACCT(0)) set ^ACCT(0)=0
set (ACCT,^ACCT(0))=^ACCT(0)+1
lock
</pre></div>
</div>
<p>This uses $DATA() to determine whether a global node requires initialization.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>for  set cus=$O(^cus(cus)) quit:cus=&quot;&quot;  if $data(^(cus))&gt;1 do WORK
</pre></div>
</div>
<p>This uses $DATA() to determine whether a global node has descendants and requires additional processing.</p>
</section>
</section>
<section id="extract">
<span id="extract-function"></span><h2><a class="toc-backref" href="functions.html#id14">$EXTRACT()</a><a class="headerlink" href="functions.html#extract" title="Permalink to this heading">¶</a></h2>
<p>Returns a substring of a given string.</p>
<p>The format for the $EXTRACT function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$E[XTRACT](expr[,intexpr1[,intexpr2]])
</pre></div>
</div>
<ul class="simple">
<li><p>The expression specifies a string from which $EXTRACT() derives a substring.</p></li>
<li><p>The first optional integer expression (second argument) specifies the starting character position in the string. If the starting position is beyond the end of the expression, $EXTRACT() returns an empty string. If the starting position is zero (0) or negative, $EXTRACT() starts at the first character; if this argument is omitted, $EXTRACT() returns the first character of the expression. $EXTRACT() numbers character positions starting at one (1) (that is, the first character of a string is at position one (1)).</p></li>
<li><p>The second optional integer expression (third argument) specifies the ending character position for the result. If the ending position is beyond the end of the expression, $EXTRACT() stops with the last character of the expression. If the ending position precedes the starting position, $EXTRACT() returns an empty string. If this argument is omitted, $EXTRACT() returns one character at most.</p></li>
</ul>
<p>$EXTRACT() provides a tool for manipulating strings based on character positions.</p>
<p>For a yottadb process started in UTF-mode, $EXTRACT interprets the string arguments as UTF-8 encoded. With VIEW “BADCHAR” enabled, $EXTRACT() produces a run-time error when it encounters a character in the reserved range of the Unicode® Standard, but it does not process the characters that fall after the span specified by the arguments. The parallel function of $EXTRACT() is $ZEXTRACT(). Use $ZEXTRACT() for byte-oriented operations. For more information, refer to <a class="reference internal" href="functions.html#zextract-function"><span class="std std-ref">$ZEXTRACT()</span></a>.</p>
<p>$EXTRACT() can be used on the left-hand side of the equal sign (=) of a SET command to set a substring of a string. This construct permits easy maintenance of individual pieces within a string. It can also be used to right justify a value padded with blank characters. For more information on SET $EXTRACT(), refer to <a class="reference internal" href="commands.html#set-command"><span class="std std-ref">Set</span></a>.</p>
<section id="examples-of-extract">
<h3>Examples of $EXTRACT()<a class="headerlink" href="functions.html#examples-of-extract" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;for <span class="nv">i</span><span class="o">=</span><span class="m">0</span>:1:3 write !,<span class="nv">$extract</span><span class="o">(</span><span class="s2">&quot;HI&quot;</span>,i<span class="o">)</span>,<span class="s2">&quot;&lt;&quot;</span>
&lt;
H&lt;
I&lt;
&lt;
YDB&gt;
</pre></div>
</div>
<p>This loop displays the result of $EXTRACT(), specifying no ending character position and a beginning character position “before” first and second positions, and “after” the string.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;For <span class="nv">i</span><span class="o">=</span><span class="m">0</span>:1:3 write !,<span class="nv">$extract</span><span class="o">(</span><span class="s2">&quot;HI&quot;</span>,1,i<span class="o">)</span>,<span class="s2">&quot;&lt;&quot;</span>
&lt;
H&lt;
HI&lt;
HI&lt;
YDB&gt;
</pre></div>
</div>
<p>This loop displays the result of $EXTRACT() specifying a beginning character position of 1 and an ending character position “before, ” first and second positions, and “after” the string.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;zprint ^trim
trim<span class="o">(</span>x<span class="o">)</span>
    new i,j
    <span class="k">for</span> <span class="nv">i</span><span class="o">=</span><span class="m">1</span>:1:<span class="nv">$length</span><span class="o">(</span>x<span class="o">)</span> quit:<span class="s2">&quot; &quot;</span><span class="s1">&#39;=$extract(x,i)</span>
<span class="s1">    for j=$length(x):-1:1 quit:&quot; &quot;&#39;</span><span class="o">=</span><span class="nv">$extract</span><span class="o">(</span>x,j<span class="o">)</span>
    quit <span class="nv">$extract</span><span class="o">(</span>x,i,j<span class="o">)</span>
YDB&gt;set <span class="nv">str</span><span class="o">=</span><span class="s2">&quot; M &quot;</span>
YDB&gt;write <span class="nv">$length</span><span class="o">(</span>str<span class="o">)</span>
<span class="m">3</span>
YDB&gt;write <span class="nv">$length</span><span class="o">(</span><span class="nv">$$</span>^trim<span class="o">(</span>str<span class="o">))</span>
<span class="m">1</span>
YDB&gt;
</pre></div>
</div>
<p>This extrinsic function uses $EXTRACT() to remove extra leading and trailing spaces from its argument.</p>
</section>
</section>
<section id="find">
<span id="find-function"></span><h2><a class="toc-backref" href="functions.html#id15">$FIND()</a><a class="headerlink" href="functions.html#find" title="Permalink to this heading">¶</a></h2>
<p>Returns an integer character position that locates the occurrence of a substring within a string.</p>
<p>The format for the $FIND function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$F[IND](expr1,expr2[,intexpr])
</pre></div>
</div>
<ul class="simple">
<li><p>The first expression specifies the string within which $FIND() searches for the substring.</p></li>
<li><p>The second expression specifies the substring for which $FIND() searches.</p></li>
<li><p>The optional integer expression identifies the starting position for the $FIND() search. If this argument is missing, zero (0), or negative, $FIND() begins its search in the first position of the string.</p></li>
<li><p>If $FIND() locates the substring, it returns the position after the last character of the substring. If the end of the substring coincides with the end of the string (expr1), it returns an integer equal to the length of the string plus one ($L(expr1)+1).</p></li>
<li><p>If $FIND() does not locate the substring, it returns zero (0).</p></li>
<li><p>For a process started in UTF-8 mode, $FIND() interprets the string arguments as UTF-8 encoded. With VIEW “BADCHAR” enabled, $FIND() produces a run-time error when it encounters a malformed character, but it does not process the characters that fall after the span specified by the arguments.</p></li>
<li><p>$ZFIND() is the Z equivalent function $FIND(). Irrespective of the settings of VIEW “BADCHAR” and $ZCHSET, $ZFIND() interprets argument as a sequence of bytes (rather than a sequence of characters) and can perform byte-oriented $FIND() operations. For more information, refer to <a class="reference internal" href="functions.html#zfind-function"><span class="std std-ref">$ZFIND()</span></a>.</p></li>
</ul>
<p>$FIND() provides a tool to locate substrings. The ([) operator and the two-argument $LENGTH() are other tools that provide related functionality.</p>
<section id="examples-of-find">
<h3>Examples of $FIND()<a class="headerlink" href="functions.html#examples-of-find" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$find</span><span class="o">(</span><span class="s2">&quot;HIFI&quot;</span>,<span class="s2">&quot;I&quot;</span><span class="o">)</span>
<span class="m">3</span>
YDB&gt;
</pre></div>
</div>
<p>This example uses $FIND() to WRITE the position of the first occurrence of the character “I.” The return of 3 gives the position after the “found” substring.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$find</span><span class="o">(</span><span class="s2">&quot;HIFI&quot;</span>,<span class="s2">&quot;I&quot;</span>,3<span class="o">)</span>
<span class="m">5</span>
YDB&gt;
</pre></div>
</div>
<p>This example uses $FIND() to WRITE the position of the next occurrence of the character “I” starting in character position three.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>YDB&gt;set t=1 for  set t=$find(&quot;BANANA&quot;,&quot;AN&quot;,t) quit:&#39;t  write !,t
4
6
YDB&gt;
</pre></div>
</div>
<p>This example uses a loop with $FIND() to locate all occurrences of “AN” in “BANANA”. $FIND() returns 4 and 6 giving the positions after the two occurrences of “AN”.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">str</span><span class="o">=</span><span class="s2">&quot;M databases are hierarchical&quot;</span>
YDB&gt;Write <span class="nv">$find</span><span class="o">(</span>str,<span class="s2">&quot; &quot;</span><span class="o">)</span>
<span class="m">3</span>
YDB&gt;Write <span class="nv">$find</span><span class="o">(</span>str,<span class="s2">&quot;Z&quot;</span><span class="o">)</span>
<span class="m">0</span>
YDB&gt;Write <span class="nv">$find</span><span class="o">(</span>str,<span class="s2">&quot;d&quot;</span>,1<span class="o">)</span>
<span class="m">4</span>
YDB&gt;Write <span class="nv">$find</span><span class="o">(</span>str,<span class="s2">&quot;d&quot;</span>,10<span class="o">)</span>
<span class="m">0</span>
</pre></div>
</div>
<p>The above example searches a string for a sub string, and returns an integer value which corresponds to the next character position after locating the sub string.</p>
</section>
</section>
<section id="fnumber">
<h2><a class="toc-backref" href="functions.html#id16">$FNUMBER()</a><a class="headerlink" href="functions.html#fnumber" title="Permalink to this heading">¶</a></h2>
<p>Returns a string containing a formatted number.</p>
<p>The format for the $FNUMBER function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$FN[UMBER](numexpr,expr[,intexpr])
</pre></div>
</div>
<ul class="simple">
<li><p>The numeric expression specifies the number that $FNUMBER() formats.</p></li>
<li><p>The expression (second argument) specifies zero or more single character format control codes; if the expression contains any character other than the defined codes, $FNUMBER() generates a run-time error.</p></li>
<li><p>The optional integer expression (third argument) specifies the number of digits after the decimal point. If the numeric expression has more digits than specified by this argument, $FNUMBER() rounds to obtain the result. If the numeric expression has fewer digits than specified by this argument, $FNUMBER() zero-fills to obtain the result.</p></li>
<li><p>When the optional third argument is specified and the first argument evaluates to a fraction between -1 and 1, $FNUMBER() returns a number with a leading zero (0) before the decimal point (.).</p></li>
</ul>
<p>$FNUMBER() formats or edits numbers, usually for reporting. For more information on rounding performed by $FNUMBER(), refer to <a class="reference internal" href="functions.html#justify-function"><span class="std std-ref">$JUSTIFY()</span></a>.</p>
<p>The formatting codes are:</p>
<ul class="simple">
<li><p>+ : Forces a “+” on positive values.</p></li>
<li><p>- : Suppresses the “-” on negative values.</p></li>
<li><p>, : Inserts commas every third position to the left of the decimal within the number.</p></li>
<li><p>. : inserts periods (“.”) every third position to the left of the decimal within the number, and uses a comma (“,”) as the decimal separator.</p></li>
<li><p>T : Represents the number with a trailing, rather than a leading sign; positive numbers have a trailing space unless the expression includes a plus sign (+).</p></li>
<li><p>P : Represents negative values in parentheses, positive values with a space on either side; combining with any other code except a comma (,) or a period (.) causes a run-time error.</p></li>
</ul>
<section id="examples-of-fnumber">
<h3>Examples of $FNUMBER()<a class="headerlink" href="functions.html#examples-of-fnumber" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;do ^fnum
fnum<span class="p">;</span>
  zprint ^fnum
  <span class="nb">set</span> <span class="nv">X</span><span class="o">=</span>-100000,Y<span class="o">=</span><span class="m">2000</span>
  write <span class="s2">&quot;SUPPRESS NEGATIVE SIGN:&quot;</span>,?35,<span class="nv">$FNumber</span><span class="o">(</span>X,<span class="s2">&quot;-&quot;</span><span class="o">)</span>,!
  write <span class="s2">&quot;TRAILING SIGN:&quot;</span>,?35,<span class="nv">$FNumber</span><span class="o">(</span>X,<span class="s2">&quot;T&quot;</span><span class="o">)</span>,!
  write <span class="s2">&quot;NEGATIVE NUMBERS IN ():&quot;</span>,?35,<span class="nv">$FNumber</span><span class="o">(</span>X,<span class="s2">&quot;P&quot;</span><span class="o">)</span>,!
  write <span class="s2">&quot;COMMAS IN NUMBER:&quot;</span>,?35,<span class="nv">$FNumber</span><span class="o">(</span>X,<span class="s2">&quot;,&quot;</span><span class="o">)</span>,!
  write <span class="s2">&quot;NUMBER WITH FRACTION:&quot;</span>,?35,<span class="nv">$FNumber</span><span class="o">(</span>X,<span class="s2">&quot;&quot;</span>,2<span class="o">)</span>,!
  write <span class="s2">&quot;FORCE + SIGN IF POSITIVE:&quot;</span>,?35,<span class="nv">$FNumber</span><span class="o">(</span>Y,<span class="s2">&quot;+&quot;</span><span class="o">)</span>,!
SUPPRESS NEGATIVE SIGN:            <span class="m">100000</span>
TRAILING SIGN:                     <span class="m">100000</span>-
NEGATIVE NUMBERS IN <span class="o">()</span>:            <span class="o">(</span><span class="m">100000</span><span class="o">)</span>
COMMAS IN NUMBER:                  -100,000
NUMBER WITH FRACTION:              -100000.00
FORCE + SIGN IF POSITIVE:          +2000
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set x=$fnumber(x,&quot;-&quot;)
</pre></div>
</div>
<p>This example uses $FNUMBER() to SET x equal to its absolute value.</p>
</section>
</section>
<section id="get">
<h2><a class="toc-backref" href="functions.html#id17">$GET()</a><a class="headerlink" href="functions.html#get" title="Permalink to this heading">¶</a></h2>
<p>Returns the value of a local or global variable if the variable has a value. If the variable has no value, the function returns a value specified by an optional second argument, and otherwise returns an empty string.</p>
<p>The format for the $GET function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$G[ET](glvn[,expr])
</pre></div>
</div>
<ul class="simple">
<li><p>The subscripted or unsubscripted global or local variable name specifies the node for which $GET() returns a value.</p></li>
<li><p>If the global or local variable has a data value, $GET() returns the value of the variable.</p></li>
<li><p>If the global or local variable has no data value, $GET() returns the value of the optional expression (second argument), or an empty string if the expression is not specified.</p></li>
</ul>
<p>M defines $GET(x,y) as equivalent to:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$Select($Data(x)[0:y,1:x)
</pre></div>
</div>
<p>and $GET(x) as equivalent to:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$GET(x,&quot;&quot;)
</pre></div>
</div>
<p>$GET() provides a tool to eliminate separate initialization of variables. This technique may provide performance benefits when used to increase the density of a sparse global array by eliminating nodes that would otherwise hold absent optional information. On the other hand, some uses of one argument $GET() can mask logic problems.</p>
<p>YottaDB has a “NOUNDEF” mode of operation, which treats all variable references as if they were arguments to a one argument $GET(). The VIEW command controls “NOUNDEF” mode.</p>
<section id="examples-of-get">
<h3>Examples of $GET()<a class="headerlink" href="functions.html#examples-of-get" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>setstatus;
         if &#39;$data(^PNT(NAME,TSTR)) set STATUS=&quot;NEW TEST&quot;
         else  if ^PNT(NAME,TSTR)=&quot;&quot; set STATUS=&quot;WAITING FOR RESULT&quot;
         else  set STATUS=^PNT(NAME,TSTR)
</pre></div>
</div>
<p>This example can be reduced to two lines of code by using $GET(), shown in the following example. However, by using $GET() in its one-argument form, the distinction between an undefined variable and one with a null value is lost:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set STATUS=$get(^PNT(NAME,TSTR))
if STATUS=&quot;&quot; set STATUS=&quot;WAITING FOR RESULT&quot;
</pre></div>
</div>
<p>This is solved by using the two-argument form of $GET():</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set STATUS=$get(^PNT(NAME,TSTR),&quot;NEW TEST&quot;)
if STATUS=&quot;&quot; set STATUS=&quot;WAITING FOR RESULT&quot;
</pre></div>
</div>
</section>
</section>
<section id="increment">
<h2><a class="toc-backref" href="functions.html#id18">$INCREMENT()</a><a class="headerlink" href="functions.html#increment" title="Permalink to this heading">¶</a></h2>
<p>Atomically adds (increments) a global variable by a numeric value. Note that increment is atomic, but the evaluation of the expression is not, unless inside a transaction (TStart/TCommit). The function also works on local variables, but has less benefit for locals as it does not (need to) provide ACID behavior.</p>
<p>The format of the $INCREMENT function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$INCREMENT(glvn[,numexpr])
</pre></div>
</div>
<ul class="simple">
<li><p>$I, $INCR, $INCREMENT, $ZINCR, and $ZINCREMENT are considered as valid synonyms of the full function name.</p></li>
<li><p>$INCREMENT() returns the value of the glvn after the increment.</p></li>
<li><p>If not specified, numexpr defaults to 1. Otherwise, $INCREMENT() evaluates the “numexpr” argument before the “glvn” argument.</p></li>
<li><p>numexpr can be a negative value.</p></li>
<li><p>Since it performs an arithmetic operation, $INCREMENT() treats glvn as numeric value. $INCREMENT treats glvn as if it were the first argument of an implicit $GET() before the increment. If the value of glvn is undefined $INCREMENT treats it as having empty string , which means it treats it as a numeric zero (0) (even if glvn is a global variable that resides on a remote node and is accessed through a GT.CM GNP server).</p></li>
<li><p>If $INCREMENT() occurs inside a transaction ($TLevel is non-zero), or if glvn refers to a local variable, it is equivalent to SET glvn=$GET(glvn)+numexpr.</p></li>
<li><p>If $INCREMENT() occurs outside a transaction ($TLevel is zero) and glvn refers to a global variable, the function acts as a SET glvn=$GET(glvn)+numexpr performed as an Atomic, Consistent and Isolated operation. Note that $INCREMENT() performs the evaluation of numexpr before it starts the Atomic, Consistent, Isolated incrementing of the glvn. If the region containing the glvn is journaled, then the $INCREMENT() is also Durable. Only BG, MM and GT.CM GNP access methods are supported for the region containing the global variable (glvn). GT.CM OMI and GT.CM DDP access methods do not support this operation and there are no current plans to add such support.</p></li>
<li><p>$INCREMENT() does not support global variables that have NOISOLATION turned ON (through the VIEW “NOISOLATION” command), and a $INCREMENT() on such a variable, triggers at YDB-E-GVINCRISOLATION run-time error.</p></li>
<li><p>The naked reference is affected by the usage of global variables (with or without indirection) in the glvn and/or numexpr components. The evaluation of “numexpr” ahead of “glvn” determines the value of the naked reference after the $INCREMENT. If neither glvn or numexpr contain indirection, then $INCREMENT sets the naked reference as follows:</p>
<ul>
<li><p>glvn, if glvn is a global, or</p></li>
<li><p>the last global reference in “numexpr” if glvn is a local, or</p></li>
<li><p>unaffected if neither glvn nor numexpr has any global reference.</p></li>
</ul>
</li>
</ul>
<section id="examples-of-increment">
<h3>Examples of $INCREMENT()<a class="headerlink" href="functions.html#examples-of-increment" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">i</span><span class="o">=</span><span class="m">1</span>
YDB&gt;write <span class="nv">$increment</span><span class="o">(</span>i<span class="o">)</span>
<span class="m">2</span>
YDB&gt;write <span class="nv">$increment</span><span class="o">(</span>i<span class="o">)</span>
<span class="m">3</span>
YDB&gt;write <span class="nv">$increment</span><span class="o">(</span>i<span class="o">)</span>
<span class="m">4</span>
YDB&gt;write <span class="nv">$increment</span><span class="o">(</span>i<span class="o">)</span>
<span class="m">5</span>
YDB&gt;write i
<span class="m">5</span>
YDB&gt;write <span class="nv">$increment</span><span class="o">(</span>i,-2<span class="o">)</span>
<span class="m">3</span>
YDB&gt;write I
<span class="m">3</span>
YDB&gt;
</pre></div>
</div>
<p>This example increments the value of i by 1 and at the end decrements it by 2. Note that the default value for incrementing a variable is 1.</p>
</section>
</section>
<section id="justify">
<span id="justify-function"></span><h2><a class="toc-backref" href="functions.html#id19">$JUSTIFY()</a><a class="headerlink" href="functions.html#justify" title="Permalink to this heading">¶</a></h2>
<p>Returns a formatted string.</p>
<p>The format for the $JUSTIFY function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$J[USTIFY](expr,intexpr1[,intexpr2])
</pre></div>
</div>
<ul class="simple">
<li><p>The expression specifies the string to be formatted by $JUSTIFY().</p></li>
<li><p>The first integer expression (second argument) specifies the minimum size of the resulting string. If the first integer expression is larger than the length of the expression, $JUSTIFY() right justifies the expression to a string of the specified length by adding leading spaces. Otherwise, $JUSTIFY() returns the expression unmodified unless specified by the second integer argument.</p></li>
<li><p>The optional second integer expression (third argument) specifies the number of digits to follow the decimal point in the result, and forces $JUSTIFY() to evaluate the expression as numeric. If the numeric expression has more digits than this argument specifies, $JUSTIFY() rounds to obtain the result. If the expression had fewer digits than this argument specifies, $JUSTIFY() zero-fills to obtain the result.</p></li>
<li><p>When the second argument is specified and the first argument evaluates to a fraction between -1 and 1, $JUSTIFY() returns a number with a leading zero (0) before the decimal point (.).</p></li>
</ul>
<p>$JUSTIFY() fills expressions to create fixed length values. However, if the length of the specified expression exceeds the specified field size, $JUSTIFY() does not truncate the result (although it may still round based on the third argument). When required, use $EXTRACT() to perform truncation.</p>
<p>$JUSTIFY() optionally rounds the portion of the result after the decimal point. In the absence of the third argument, $JUSTIFY() does not restrict the evaluation of the expression. In the presence of the third (rounding) argument, $JUSTIFY() evaluates the expression as a numeric value. The rounding algorithm can be understood as follows:</p>
<ul class="simple">
<li><p>If necessary, the rounding algorithm extends the expression to the right with 0s (zeros) to have at least one more digit than specified by the rounding argument.</p></li>
<li><p>Then, it adds 5 (five) to the digit position after the digit specified by the rounding argument.</p></li>
<li><p>Finally, it truncates the result to the specified number of digits. The algorithm rounds up when excess digits specify a half or more of the last retained digit and rounds down when they specify less than a half.</p></li>
<li><p>For a process started in UTF-8 mode, $JUSTIFY() interprets the string argument as UTF-8 encoded. With VIEW “BADCHAR” enabled, $JUSTIFY() produces a run-time error when it encounters a malformed character.</p></li>
<li><p>$ZJUSTIFY() is the parallel function of $JUSTIFY(). Irrespective of the settings of VIEW “BADCHAR” and $ZCHSET, $ZJUSTIFY() interprets argument as a sequence of bytes (rather than a sequence of characters) and can perform all byte-oriented $JUSTIFY() operations. For more information, refer to <a class="reference internal" href="functions.html#zjustify-function"><span class="std std-ref">$ZJUSTIFY()</span></a>.</p></li>
</ul>
<section id="examples-of-justify">
<h3>Examples of $JUSTIFY()<a class="headerlink" href="functions.html#examples-of-justify" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="s2">&quot;:&quot;</span>,<span class="nv">$justify</span><span class="o">(</span><span class="s2">&quot;HELLO&quot;</span>,10<span class="o">)</span>,<span class="s2">&quot;:&quot;</span>,!,<span class="s2">&quot;:&quot;</span>,<span class="nv">$justify</span><span class="o">(</span><span class="s2">&quot;GOODBYE&quot;</span>,5<span class="o">)</span>,<span class="s2">&quot;:&quot;</span>
:     HELLO:
:GOODBYE:
YDB&gt;
</pre></div>
</div>
<p>This uses $JUSTIFY() to display “HELLO” in a field of 10 spaces and “GOODBYE” in a field of 5 spaces. Because the length of “GOODBYE” exceeds five spaces, the result overflows the specification.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="s2">&quot;1234567890&quot;</span>,!,<span class="nv">$justify</span><span class="o">(</span><span class="m">10</span>.545,10,2<span class="o">)</span>
<span class="m">1234567890</span>
     <span class="m">10</span>.55
YDB&gt;
</pre></div>
</div>
<p>This uses $JUSTIFY() to WRITE a rounded value right justified in a field of 10 spaces. Notice that the result has been rounded up.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="s2">&quot;1234567890&quot;</span>,!,<span class="nv">$justify</span><span class="o">(</span><span class="m">10</span>.544,10,2<span class="o">)</span>
<span class="m">1234567890</span>
     <span class="m">10</span>.54
YDB&gt;
</pre></div>
</div>
<p>Again, this uses $JUSTIFY() to WRITE a rounded value right justified in a field of 10 spaces. Notice that the result has been rounded down.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="s2">&quot;1234567890&quot;</span>,!,<span class="nv">$justify</span><span class="o">(</span><span class="m">10</span>.5,10,2<span class="o">)</span>
<span class="m">1234567890</span>
     <span class="m">10</span>.50
YDB&gt;
</pre></div>
</div>
<p>Once again, this uses $JUSTIFY() to WRITE a rounded value right justified in a field of 10 spaces. Notice that the result has been zero-filled to 2 places.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$justify</span><span class="o">(</span>.34,0,2<span class="o">)</span>
<span class="m">0</span>.34
YDB&gt;
</pre></div>
</div>
<p>This example uses $JUSTIFY to ensure that the fraction has a leading zero. Note the use of a second argument of zero in the case that rounding is the only function that $JUSTIFY is to perform.</p>
</section>
</section>
<section id="length">
<span id="length-function"></span><h2><a class="toc-backref" href="functions.html#id20">$LENGTH()</a><a class="headerlink" href="functions.html#length" title="Permalink to this heading">¶</a></h2>
<p>Returns the length of a string measured in characters, or in “pieces” separated by a delimiter specified by one of its arguments.</p>
<p>The format for the $LENGTH function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$L[ENGTH](expr1[,expr2])
</pre></div>
</div>
<ul class="simple">
<li><p>The first expression specifies the string that $LENGTH() “measures”.</p></li>
<li><p>The optional second expression specifies the delimiter that defines the measure; if this argument is missing, $LENGTH() returns the number of characters in the string.</p></li>
<li><p>If the second argument is present and not an empty string, $LENGTH returns one more than the count of the number of occurrences of the second string in the first string; if the second argument is an empty string, the M standard specifies that $LENGTH() returns a zero (0).</p></li>
<li><p>$LENGTH() provides a tool for determining the lengths of strings in two ways, characters and pieces. The two argument $LENGTH() returns the number of existing pieces, while the one argument returns the number of characters.</p></li>
<li><p>For a process started in UTF-8 mode, $LENGTH() interprets the string argument(s) as UTF-8 encoded. With VIEW “BADCHAR” enabled, $LENGTH() produces a run-time error when it encounters a malformed character.</p></li>
<li><p>$ZLENGTH() is the parallel function of $LENGTH(). Irrespective of the setting of VIEW “BADCHAR” and $ZCHSET, $ZLENGTH() interpets string arguments as a sequence of bytes (rather than characters) and can perform all byte-oriented $LENGTH() operations. For more information, refer to <a class="reference internal" href="functions.html#zlength-function"><span class="std std-ref">$ZLENGTH()</span></a>.</p></li>
</ul>
<section id="examples-of-length">
<h3>Examples of $LENGTH()<a class="headerlink" href="functions.html#examples-of-length" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;Write <span class="nv">$length</span><span class="o">(</span><span class="s2">&quot;KINGSTON&quot;</span><span class="o">)</span>
<span class="m">8</span>
YDB&gt;
</pre></div>
</div>
<p>This uses $LENGTH() to WRITE the length in characters of the string “KINGSTON”.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">x</span><span class="o">=</span><span class="s2">&quot;Smith/John/M/124 Main Street/Ourtown/KA/USA&quot;</span>
YDB&gt;write <span class="nv">$length</span><span class="o">(</span>x,<span class="s2">&quot;/&quot;</span><span class="o">)</span>
<span class="m">7</span>
YDB&gt;
</pre></div>
</div>
<p>This uses $LENGTH() to WRITE the number of pieces in a string, as delimited by /.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$length</span><span class="o">(</span><span class="s2">&quot;/2/3/&quot;</span>,<span class="s2">&quot;/&quot;</span><span class="o">)</span>
<span class="m">4</span>
YDB&gt;
</pre></div>
</div>
<p>This also uses $LENGTH() to WRITE the number of pieces in a string, as delimited by /. Notice that YottaDB adds one count to the count of delimiters (in this case 3), to get the number of pieces in the string (displays 4).</p>
</section>
</section>
<section id="name">
<span id="name-function"></span><h2><a class="toc-backref" href="functions.html#id21">$NAME()</a><a class="headerlink" href="functions.html#name" title="Permalink to this heading">¶</a></h2>
<p>Returns an evaluated representation of some or all of a local or global variable name.</p>
<p>The format for the $NAME function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$NA[ME](glvn[,intexpr])
</pre></div>
</div>
<ul class="simple">
<li><p>The subscripted or unsubscripted global or local variable name, including naked references, specifies the name for which $NAME() returns an evaluated representation.</p></li>
<li><p>When using NOUNDEF, $NAME() returns an empty string where appropriate for undefined variables.</p></li>
<li><p>The optional integer expression (second argument) specifies the maximum number of subscript levels in the representation. If the integer expression is not provided or exceeds the actual number of subscript levels, $NAME() returns a representation of the whole name. If the integer expression is zero (0), $NAME() returns only the name. A negative integer expression produces a run-time error.</p></li>
</ul>
<section id="examples-of-name">
<h3>Examples of $NAME()<a class="headerlink" href="functions.html#examples-of-name" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">X</span><span class="o">=</span><span class="s2">&quot;A&quot;&quot;B&quot;</span>,^Y<span class="o">(</span><span class="m">1</span>,X,<span class="s2">&quot;B&quot;</span>,4<span class="o">)=</span><span class="s2">&quot;&quot;</span>
YDB&gt;write <span class="nv">$name</span><span class="o">(</span>^<span class="o">(</span><span class="m">3</span><span class="o">)</span>,3<span class="o">)</span>
^Y<span class="o">(</span><span class="m">1</span>,<span class="s2">&quot;A&quot;&quot;B&quot;</span>,<span class="s2">&quot;B&quot;</span><span class="o">)</span>
YDB&gt;
</pre></div>
</div>
<p>This example sets up a naked reference and then uses $NAME() to display the first three levels of that four-level reference.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$name</span><span class="o">(</span>^<span class="o">(</span><span class="m">3</span><span class="o">)</span>,0<span class="o">)</span>
^Y
YDB&gt;
</pre></div>
</div>
<p>This example shows the name level for the same naked reference.</p>
</section>
</section>
<section id="next">
<h2><a class="toc-backref" href="functions.html#id22">$NEXT()</a><a class="headerlink" href="functions.html#next" title="Permalink to this heading">¶</a></h2>
<p>Returns the next subscripted local or global variable name in collation sequence within the array level specified by its argument.</p>
<p>$NEXT() has been replaced by $ORDER(). $NEXT has been retained in the current standard only for compatibility with earlier versions of the standard. $NEXT() is similar to $ORDER(). However, $NEXT() has the deficiency that when it encounters negative one (-1) as a subscript, it returns the same result as when it finds no other data at the level. This deficiency is particularly disruptive because it occurs in the middle of the M collating sequence.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As $NEXT() has been removed from the standard in the MDC, you should use $ORDER.</p>
</div>
<p>The format for the $NEXT function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$N[EXT](glvn)
</pre></div>
</div>
<ul class="simple">
<li><p>The subscripted global or local variable name specifies the node following which $NEXT() searches for the next node with data and/or descendants; the number of subscripts contained in the argument implicitly defines the array level.</p></li>
<li><p>If $NEXT() finds no node at the specified level after the specified global or local variable, it returns negative one (-1).</p></li>
<li><p>If the last subscript in the subscripted global or local variable name is null or negative one (-1), $NEXT() returns the first node at the specified level.</p></li>
</ul>
</section>
<section id="order">
<h2><a class="toc-backref" href="functions.html#id23">$ORDER()</a><a class="headerlink" href="functions.html#order" title="Permalink to this heading">¶</a></h2>
<p>Returns the subscript of the next or prior local or global variable name in collation sequence within the array level specified by its first argument. In doing so, it moves in the direction specified by the second argument. In YottaDB, when $ORDER() has an unsubscripted argument, it returns the next or previous unsubscripted local or global variable name in collating sequence.</p>
<p>The format for the $ORDER function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$O[RDER](glvn[,expr])
</pre></div>
</div>
<ul class="simple">
<li><p>The subscripted global or local variable name specifies the node from which $ORDER() searches for the next or previous node that has data and/or descendants. The number of subscripts contained in the argument implicitly defines the array level.</p></li>
<li><p>The optional expression (second argument) specifies the direction for the $ORDER(); 1 specifies forward operation and -1 specifies reverse operation. Any other values for the expression will cause an error.</p></li>
<li><p>YottaDB extends the M standard to allow unsubscripted names. In this case, $ORDER() returns the next or previous unsubscripted name.</p></li>
<li><p>If $ORDER() finds no node (or name) at the specified level after (or before) the specified global or local variable, it returns an empty string (” “).</p></li>
<li><p>If the last subscript in the subscripted global or local variable name is null and the corresponding subscripted global or local variable has a matching null subscript, $ORDER() returns the next node after that with the null subscript at the specified level.</p></li>
<li><p>If the last subscript in the subscripted global or local variable name is null and the corresponding subscripted global or local variable has no matching null subscript , $ORDER() returns first node at the specified level. If the last subscript in the subscripted global or local variable name is null and second argument is -1, $ORDER() always returns the last node at the specified level regardless of the existence of a null subscript at the specified level. However, when a global or local variable level includes a null subscript and $ORDER(glvn,-1) returns an empty string result, users must test separately for the existence of the node with the null subscript.</p></li>
<li><p>$ORDER() can be used as a tool for retrieving data from M sparse arrays in an ordered fashion, independent of the order in which it was entered. In M, routines generally sort by SETting data into an array with appropriate subscripts and then retrieving the information with $ORDER().</p></li>
<li><p>$ORDER() returns subscripts, not data values, and does not discriminate between nodes that have data values and nodes that have descendants. Once $ORDER() provides the subscript, the routine must use the subscript to access the data value, if appropriate. Using $ORDER() maintains the naked reference indicator, even if $ORDER() returns a null.</p></li>
<li><p>YottaDB optionally permits the use of null subscripts. This feature is enabled via the VIEW command for local variables and a REGION qualifier in GDE for global variables. When an application uses null subscripts, they are “invisible” in a $ORDER() loop so the application must test for them as a special case, perhaps using $DATA().</p></li>
<li><p>$ORDER() returns local array subscripts with values that are numeric, but non-canonical (over 18 digit), as strings.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Name-level $ORDER() always returns an empty string when used with extended references.</p>
</div>
<section id="examples-of-order">
<h3>Examples of $ORDER()<a class="headerlink" href="functions.html#examples-of-order" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;zwrite
lcl<span class="o">(</span><span class="m">1</span><span class="o">)=</span><span class="m">3</span>
lcl<span class="o">(</span><span class="s2">&quot;x&quot;</span><span class="o">)=</span><span class="m">4</span>
YDB&gt;write <span class="nv">$order</span><span class="o">(</span>lcl<span class="o">(</span><span class="s2">&quot;&quot;</span><span class="o">))</span>
<span class="m">1</span>
</pre></div>
</div>
<p>This example returns the first node, that is 1, because the specified last subscript of the argument is null and lcl has no null subscript.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$order</span><span class="o">(</span>lcl<span class="o">(</span><span class="m">1</span><span class="o">))</span>
x
</pre></div>
</div>
<p>This example returns the first node after lcl(1) that is x because lcl has no null subscript.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$order</span><span class="o">(</span>lcl<span class="o">(</span><span class="s2">&quot;&quot;</span><span class="o">)</span>,-1<span class="o">)</span>
x
</pre></div>
</div>
<p>This example returns the last node that is, x, because the last subscript of the first argument is null and second argument is -1.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set lcl<span class="o">(</span><span class="s2">&quot;&quot;</span><span class="o">)=</span><span class="m">2</span>
YDB&gt;zwrite
lcl<span class="o">(</span><span class="s2">&quot;&quot;</span><span class="o">)=</span><span class="m">2</span>
lcl<span class="o">(</span><span class="m">1</span><span class="o">)=</span><span class="m">3</span>
lcl<span class="o">(</span><span class="s2">&quot;x&quot;</span><span class="o">)=</span><span class="m">4</span>
YDB&gt;write <span class="nv">$order</span><span class="o">(</span>lcl<span class="o">(</span><span class="s2">&quot;&quot;</span><span class="o">))</span>
<span class="m">1</span>
</pre></div>
</div>
<p>This example returns the second node at the specified level because the null subscript at the end of the argument is ambiguous (does it specify starting at the beginning or starting at the real node with the null subscript?) and returning the subscript of the first node (an empty string) would tend to create an endless loop.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$order</span><span class="o">(</span>lcl<span class="o">(</span><span class="s2">&quot;&quot;</span><span class="o">)</span>,-1<span class="o">)</span>
x
YDB&gt;write <span class="nv">$order</span><span class="o">(</span>lcl<span class="o">(</span><span class="s2">&quot;x&quot;</span><span class="o">)</span>,-1<span class="o">)</span>
<span class="m">1</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;kill  <span class="nb">set</span> <span class="o">(</span>a<span class="o">(</span><span class="m">1</span><span class="o">)</span>,a<span class="o">(</span><span class="m">2000</span><span class="o">)</span>,a<span class="o">(</span><span class="s2">&quot;CAT&quot;</span><span class="o">)</span>,a<span class="o">(</span><span class="s2">&quot;cat&quot;</span><span class="o">)</span>,a<span class="o">(</span><span class="s2">&quot;ALF&quot;</span><span class="o">)</span>,a<span class="o">(</span><span class="m">12</span><span class="o">))=</span><span class="m">1</span>
YDB&gt;set <span class="nv">x</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="k">for</span>  <span class="nb">set</span> <span class="nv">x</span><span class="o">=</span><span class="nv">$order</span><span class="o">(</span>a<span class="o">(</span>x<span class="o">))</span> quit:x<span class="o">=</span><span class="s2">&quot;&quot;</span>  write !,x
<span class="m">1</span>
<span class="m">12</span>
<span class="m">2000</span>
ALF
CAT
cat
YDB&gt;kill a<span class="o">(</span><span class="s2">&quot;CAT&quot;</span><span class="o">)</span> <span class="nb">set</span> a<span class="o">(</span><span class="m">5</span>,10<span class="o">)=</span><span class="s2">&quot;woolworths&quot;</span>,a<span class="o">(</span><span class="s2">&quot;cat&quot;</span><span class="o">)=</span><span class="s2">&quot;last&quot;</span>
YDB&gt;set <span class="nv">x</span><span class="o">=</span><span class="s2">&quot;&quot;</span> <span class="k">for</span>  <span class="nb">set</span> <span class="nv">x</span><span class="o">=</span><span class="nv">$order</span><span class="o">(</span>a<span class="o">(</span>x<span class="o">)</span>,-1<span class="o">)</span> quit:x<span class="o">=</span><span class="s2">&quot;&quot;</span>  write !,x
cat
ALF
<span class="m">2000</span>
<span class="m">12</span>
<span class="m">5</span>
<span class="m">1</span>
YDB&gt;
</pre></div>
</div>
<p>This example uses a $ORDER() loop to display all the subscripts at the first level of local variable a, make some changes in a, and then display all the subscripts in reverse order. Notice that $ORDER() returns only the existing subscripts in the sparse array and returns them in M collation sequence, regardless of the order in which they were entered. Also, $ORDER() does not differentiate between node A(5), which has only descendants (no data value), and the other nodes, which have data values.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;kill <span class="nb">set</span> <span class="o">(</span>%<span class="o">(</span><span class="m">1</span><span class="o">)</span>,tiva<span class="o">(</span><span class="m">2</span><span class="o">)</span>,A<span class="o">(</span><span class="m">3</span><span class="o">)</span>,tiv<span class="o">(</span><span class="m">4</span><span class="o">)</span>,Q<span class="o">(</span><span class="m">5</span><span class="o">)</span>,%a<span class="o">(</span><span class="m">6</span><span class="o">))=</span><span class="s2">&quot;&quot;</span>
YDB&gt;set <span class="nv">x</span><span class="o">=</span><span class="s2">&quot;%&quot;</span>
YDB&gt;write:<span class="nv">$data</span><span class="o">(</span>@x<span class="o">)</span> !,x <span class="k">for</span>  <span class="nb">set</span> <span class="nv">x</span><span class="o">=</span><span class="nv">$order</span><span class="o">(</span>@x<span class="o">)</span> quit:x<span class="o">=</span><span class="s2">&quot;&quot;</span>  write !,x
%
%a
A
Q
tiv
tiva
x
YDB&gt;set <span class="nv">$piece</span><span class="o">(</span>x,<span class="s2">&quot;z&quot;</span>,32<span class="o">)=</span><span class="s2">&quot;&quot;</span>
YDB&gt;write:<span class="nv">$data</span><span class="o">(</span>@x<span class="o">)</span> !,x <span class="k">for</span>  <span class="nb">set</span> <span class="nv">x</span><span class="o">=</span><span class="nv">$order</span><span class="o">(</span>@x,-1<span class="o">)</span> quit:x<span class="o">=</span><span class="s2">&quot;&quot;</span>  write !,x
x
tiva
tiv
Q
A
%a
%
YDB&gt;
</pre></div>
</div>
<p>This example uses $ORDER() to display the current local variable names in both forward and reverse order. Notice that the first ([^]%) and last ([^]zzzzzzzz) names require handling as special cases and require a $DATA() function.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set acct=&quot;&quot;,cntt=&quot;&quot;
for  fet acct=$order(^acct(acct)) quit:acct=&quot;&quot;  do
. for  set cntt=$order(^acct(acct,cntt)) do WORK
quit
</pre></div>
</div>
<p>This uses two nested $ORDER() loops to cycle through the ^acct global array and perform some action for each second level node.</p>
</section>
</section>
<section id="piece">
<span id="piece-function"></span><h2><a class="toc-backref" href="functions.html#id24">$PIECE()</a><a class="headerlink" href="functions.html#piece" title="Permalink to this heading">¶</a></h2>
<p>Returns a substring delimited by a specified string delimiter made up of one or more characters. In M, $PIECE() returns a logical field from a logical record.</p>
<p>The format for the $PIECE function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$P[IECE](expr1,expr2[,intexpr1[,intexpr2]])
</pre></div>
</div>
<ul class="simple">
<li><p>The first expression specifies the string from which $PIECE() computes its result.</p></li>
<li><p>The second expression specifies the delimiting string that determines the piece “boundaries”; if this argument is an empty string, $PIECE() returns an empty string.</p></li>
<li><p>If the second expression does not appear anywhere in the first expression, $PIECE() returns the entire first expression (unless forced to return an empty string by the second integer expression).</p></li>
<li><p>The optional first integer expression (third argument) specifies the beginning piece to return; if this argument is missing, $PIECE() returns the first piece.</p></li>
<li><p>The optional second integer expression (fourth argument) specifies the last piece to return. If this argument is missing, $PIECE() returns only one piece unless the first integer expression is zero (0) or negative, in which case it returns a null string. If this argument is less than the first integer expression, $PIECE() returns an empty string.</p></li>
<li><p>If the second integer expression exceeds the actual number of pieces in the first expression, $PIECE() returns all of the expression after the delimiter selected by the first integer expression.</p></li>
<li><p>The $PIECE() result never includes the “outside” delimiters; however, when the second integer argument specifies multiple pieces, the result contains the “inside” occurrences of the delimiter.</p></li>
<li><p>$PIECE() can also be used as tool for efficiently using values that contain multiple elements or fields, each of which may be variable in length.</p></li>
<li><p>Applications typically use a single character for a $PIECE() delimiter (second argument) to minimize storage overhead, and increase efficiency at run-time. The delimiter must be chosen so the data values never contain the delimiter. Failure to enforce this convention with edit checks may result in unanticipated changes in the position of pieces within the data value. The caret symbol (^), backward slash (\), and asterisk (*) characters are examples of popular visible delimiters. Multiple character delimiters may reduce the likelihood of conflict with field contents. However, they decrease storage efficiency, and are processed with less efficiency than single character delimiters. Some applications use control characters, which reduce the chances of the delimiter appearing in the data but sacrifice the readability provided by visible delimiters.</p></li>
<li><p>A SET command argument can have something that has the format of a $PIECE() on the left-hand side of its equal sign (=). This construct permits easy maintenance of individual pieces within a string. It also can be used to generate a string of delimiters. For more information on SET $PIECE(), refer to <a class="reference internal" href="commands.html#set-command"><span class="std std-ref">Set</span></a>.</p></li>
<li><p>$PIECE() can also be used as target in a SET command to change part of the value of a node. Also, when SET arguments have multiple parenthesized (set-left) targets and a target is used as a subscript in more than one item in the list of targets that follow, all the targets use the before-SET value (not the after-SET value) in conformance to the M-standard. For more information on SET $PIECE(), refer to <a class="reference internal" href="commands.html#set-command"><span class="std std-ref">Set</span></a>.</p></li>
<li><p>For a process started in UTF-8 mode, $PIECE() interprets the string arguments as UTF-8 encoded. With VIEW “BADCHAR” enabled, $PIECE() produces a run-time error when it encounters a malformed character, but it does not process the characters that fall after the span specified by the arguments.</p></li>
<li><p>$ZPIECE() is the parallel function of $PIECE(). Irrespective of the settings of VIEW “BADCHAR” and $ZCHSET, $ZPIECE() interprets string arguments as a sequence of bytes (rather than a sequence of characters) and can perform all byte-oriented $PIECE() operations. For more information, refer to <a class="reference internal" href="functions.html#zpiece-function"><span class="std std-ref">$ZPIECE()</span></a>.</p></li>
</ul>
<section id="examples-of-piece">
<h3>Examples of $PIECE()<a class="headerlink" href="functions.html#examples-of-piece" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;for <span class="nv">i</span><span class="o">=</span><span class="m">0</span>:1:3 write !,<span class="nv">$piece</span><span class="o">(</span><span class="s2">&quot;1 2&quot;</span>,<span class="s2">&quot; &quot;</span>,i<span class="o">)</span>,<span class="s2">&quot;&lt;&quot;</span>
&lt;
<span class="m">1</span>&lt;
<span class="m">2</span>&lt;
&lt;
YDB&gt;
</pre></div>
</div>
<p>This loop displays the result of $PIECE(), specifying a space as a delimiter, a piece position “before,” first and second, and “after” the string.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;for <span class="nv">i</span><span class="o">=</span>-1:1:3 write !,<span class="nv">$piece</span><span class="o">(</span><span class="s2">&quot;1 2&quot;</span>,<span class="s2">&quot; &quot;</span>,i,i+1<span class="o">)</span>,<span class="s2">&quot;&lt;&quot;</span>
&lt;
<span class="m">1</span>&lt;
<span class="m">1</span> <span class="m">2</span>&lt;
<span class="m">2</span>&lt;
&lt;
YDB&gt;
</pre></div>
</div>
<p>This example is similar to the previous example except that it displays two pieces on each iteration. Notice the delimiter (a space) in the middle of the output for the third iteration, which displays both pieces.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>for p=1:1:$length(x,&quot;/&quot;) write ?p-1*10,$piece(x,&quot;/&quot;,p)
</pre></div>
</div>
<p>This example uses $LENGTH() and $PIECE() to display all the pieces of x in columnar format.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">$piece</span><span class="o">(</span>x,<span class="s2">&quot;.&quot;</span>,25<span class="o">)=</span><span class="s2">&quot;&quot;</span> write x
........................
</pre></div>
</div>
<p>This SETs the 25th piece of the variable x to null, with a delimiter of a period. This produces a string of 24 periods preceding the null.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set ^x<span class="o">=</span><span class="m">1</span>,<span class="nv">$piece</span><span class="o">(</span>^a,<span class="s2">&quot;;&quot;</span>,3,2<span class="o">)=</span>^b
</pre></div>
</div>
<p>This example leaves the naked indicator to pointing to the global ^b.</p>
</section>
</section>
<section id="qlength">
<h2><a class="toc-backref" href="functions.html#id25">$QLENGTH()</a><a class="headerlink" href="functions.html#qlength" title="Permalink to this heading">¶</a></h2>
<p>Returns the number of subscripts in a variable name. The format is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$QL[ENGTH](namevalue)
</pre></div>
</div>
<ul class="simple">
<li><p>The namevalue has the form of an evaluated subscripted or unsubscripted global variable.</p></li>
<li><p>$QLENGTH() returns a value which is derived from namevalue. If namevalue has the form NAME(s1, s2,…, sn), then the function returns n; if the name is unsubscripted, $QLENGTH() yields a length of zero (0).</p></li>
<li><p>$QLENGTH() only affects the naked indicator if the string in question is stored in a global variable.</p></li>
</ul>
<section id="examples-of-qlength">
<span id="id1"></span><h3>Examples of $QLENGTH()<a class="headerlink" href="functions.html#examples-of-qlength" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$data</span><span class="o">(</span>^<span class="p">|</span><span class="s2">&quot;XXX&quot;</span><span class="p">|</span>ABC<span class="o">(</span><span class="m">1</span>,2,3,4<span class="o">))</span>
<span class="m">0</span>
YDB&gt;set <span class="nv">X</span><span class="o">=</span><span class="nv">$name</span><span class="o">(</span>^<span class="o">(</span><span class="m">5</span>,6<span class="o">))</span>
YDB&gt;write <span class="nv">$qlength</span><span class="o">(</span>X<span class="o">)</span>
<span class="m">5</span>
</pre></div>
</div>
<p>The number of subscripts in x is 5. Notice that the name and the environment preceding it do not contribute to the count. Refer to <a class="reference internal" href="functions.html#name-function"><span class="std std-ref">$NAME()</span></a> section earlier in this chapter for an understanding of the $NAME function.</p>
</section>
</section>
<section id="qsubscript">
<h2><a class="toc-backref" href="functions.html#id26">$QSUBSCRIPT()</a><a class="headerlink" href="functions.html#qsubscript" title="Permalink to this heading">¶</a></h2>
<p>Returns a component of a variable name.</p>
<p>The format of the $QSUBSCRIPT function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$QS[UBSCRIPT](namevalue, intexpr)
</pre></div>
</div>
<ul class="simple">
<li><p>The namevalue has the form of an evaluated subscripted or unsubscripted global or local variable name.</p></li>
<li><p>The intexpr selects the component of the name as follows:</p>
<ul>
<li><p>-2 : is reserved but may be “error”,</p></li>
<li><p>-1 : for environment,</p></li>
<li><p>0 : for the unsubscripted name,</p></li>
<li><p>1 : for the first subscript,</p></li>
<li><p>2 : for the second subscript, and so on.</p></li>
</ul>
</li>
</ul>
<p>If the second argument selects a component that is not part of the specified name, $QSUBSCRIPT() returns an empty string (“”).</p>
<section id="examples-of-qsubscript">
<h3>Examples of $QSUBSCRIPT()<a class="headerlink" href="functions.html#examples-of-qsubscript" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<p>Assume that X is defined as in the <a class="reference internal" href="functions.html#examples-of-qlength"><span class="std std-ref">Examples of $QLENGTH()</span></a> earlier in this chapter;</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>write X
X=&quot;^|&quot;&quot;XXX&quot;&quot;|ABC(1,2,3,5,6)&quot;
YDB&gt;write $qsubscript(X,-2)
error
YDB&gt;WRITE $qsubscript(X,-1)
XXX
YDB&gt;WRITE $qsubscript(X,0)
^ABC
YDB&gt;WRITE $qsubscript(X,1)
1
YDB&gt;WRITE $qsubscript(X,4)
5
YDB&gt;WRITE $qsubscript(X,7)
&quot;&quot;
</pre></div>
</div>
</section>
</section>
<section id="query">
<span id="query-function"></span><h2><a class="toc-backref" href="functions.html#id27">$QUERY()</a><a class="headerlink" href="functions.html#query" title="Permalink to this heading">¶</a></h2>
<p>Returns the next or previous subscripted local or global variable node name, independent of level, which follows or precedes the node specified by its argument in M collating sequence and has a data value.</p>
<p>The format for the $QUERY function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$Q[UERY](glvn[,expr])
</pre></div>
</div>
<ul class="simple">
<li><p>The subscripted or unsubscripted global or local variable name specifies the starting node from which $QUERY() searches for the next or previous node with a data value.</p></li>
<li><p>The optional expression (second argument) specifies the direction for the $QUERY(); 1 specifies forward operation and -1 specifies reverse operation. Any other values for the expression will cause an error.</p></li>
<li><p>If $QUERY() finds no node after the specified global or local variable, it returns an empty string.</p></li>
<li><p>With stdnullcoll, if $DATA(glvn(“”))=1 (or 11), $QUERY(glvn(“”)) returns glvn(1) (assuming glvn(1) exists). Applications looking for a node with a “null” subscript must use $D(glvn(“”)) to test the existence of glvn(“”). $Q(glvn(”…”)) never returns the starting-point (glvn(“”)) even though glvn(“”) may exist.</p></li>
</ul>
<p>$QUERY() can be used as a tool for scanning an entire array for nodes that have data values. Because $QUERY() can return a result specifying a different level than its argument, the result provides a full variable name. This contrasts with $ORDER(), which returns a subscript value. To access the data value at a node, a $ORDER() return can be used as a subscript; however, a $QUERY() return must be used with indirection. Because arrays tend to have homogeneous values within a level but not between levels, $QUERY() is more useful as a tool in utility programs than in application programs. The $QUERY() can be useful in avoiding nested $ORDER loops.</p>
<p>Note that the standard does not unambiguously define the state of the naked reference indicator after a $QUERY(). While in YottaDB after $QUERY(), the naked reference indicator reflects the $QUERY() argument, NOT its result.</p>
<p>If the byte length of the string returned by $QUERY() exceeds 1,048,576 bytes, $QUERY() returns a <a class="reference external" href="../MessageRecovery/errors.html#maxstrlen-error">YDB-E-MAXSTRLEN</a> error.</p>
<section id="examples-of-query">
<h3>Examples of $QUERY()<a class="headerlink" href="functions.html#examples-of-query" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set ^X(1,2,3)=&quot;123&quot;
set ^X(1,2,3,7)=&quot;1237&quot;
set ^X(1,2,4)=&quot;124&quot;
set ^X(1,2,5,9)=&quot;1259&quot;
set ^X(1,6)=&quot;16&quot;
set ^X(&quot;B&quot;,1)=&quot;AB&quot;
</pre></div>
</div>
<p>The tree diagram below represents the structure produced by the preceding routine.</p>
<img alt="_images/querytree.svg" src="_images/querytree.svg" /><p>The following routine:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set y=&quot;^X&quot;
for  set y=$query(@y) quit:y=&quot;&quot;  write !,y,&quot;=&quot;,@y
</pre></div>
</div>
<p>produces the results:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>^X(1,2,3)=123
^X(1,2,3,7)=1237
^X(1,2,4)=124
^X(1,2,5,9)=1259
^X(1,6)=16
^X(&quot;B&quot;,1)=AB
</pre></div>
</div>
<p>And the following routine (reverse $QUERY):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set y=&quot;^X(&quot;&quot;B&quot;&quot;,1)&quot;
for  do  quit:y=&quot;&quot;  write !,y,&quot;=&quot;,@y set y=$query(@y,-1)
</pre></div>
</div>
<p>produces the following results:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>^X(&quot;B&quot;,1)=AB
^X(1,6)=16
^X(1,2,5,9)=1259
^X(1,2,4)=124
^X(1,2,3,7)=1237
^X(1,2,3)=123
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;zwrite lcl
lcl<span class="o">(</span><span class="s2">&quot;&quot;</span><span class="o">)=</span><span class="m">1</span>
lcl<span class="o">(</span><span class="m">1</span><span class="o">)=</span><span class="m">1</span>
lcl<span class="o">(</span><span class="m">1</span>,2<span class="o">)=</span><span class="m">2</span>
lcl<span class="o">(</span><span class="m">1</span>,2,<span class="s2">&quot;&quot;</span><span class="o">)=</span><span class="m">3</span>
lcl<span class="o">(</span><span class="m">1</span>,2,<span class="s2">&quot;&quot;</span>,<span class="s2">&quot;&quot;</span><span class="o">)=</span><span class="m">4</span>
lcl<span class="o">(</span><span class="m">1</span>,2,<span class="s2">&quot;&quot;</span>,<span class="s2">&quot;&quot;</span>,4<span class="o">)=</span><span class="m">5</span>
lcl<span class="o">(</span><span class="m">1</span>,2,0<span class="o">)=</span><span class="m">6</span>
lcl<span class="o">(</span><span class="m">1</span>,2,<span class="s2">&quot;abc&quot;</span>,5<span class="o">)=</span><span class="m">7</span>
lcl<span class="o">(</span><span class="s2">&quot;x&quot;</span><span class="o">)=</span><span class="m">1</span>
YDB&gt;set <span class="nv">y</span><span class="o">=</span><span class="s2">&quot;lcl&quot;</span>
YDB&gt;for  <span class="nb">set</span> <span class="nv">y</span><span class="o">=</span><span class="nv">$query</span><span class="o">(</span>@y<span class="o">)</span> quit:y<span class="o">=</span><span class="s2">&quot;&quot;</span>  write !,y,<span class="s2">&quot;=&quot;</span>,@y
</pre></div>
</div>
<p>This example produces the results:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>lcl(&quot;&quot;)=1
lcl(1)=1
lcl(1,2)=2
lcl(1,2,&quot;&quot;)=3
lcl(1,2,&quot;&quot;,&quot;&quot;)=4
lcl(1,2,&quot;&quot;,&quot;&quot;,4)=5
lcl(1,2,0)=6
lcl(1,2,&quot;abc&quot;,5)=7
lcl(&quot;x&quot;)=1
</pre></div>
</div>
<p>Note that the result is the same as the ZWRITE output.</p>
</section>
</section>
<section id="random">
<h2><a class="toc-backref" href="functions.html#id28">$RANDOM()</a><a class="headerlink" href="functions.html#random" title="Permalink to this heading">¶</a></h2>
<p>Returns a pseudo-random integer from a range specified by its argument.</p>
<p>The format for the $RANDOM function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$R[ANDOM](intexpr)
</pre></div>
</div>
<ul class="simple">
<li><p>The integer expression specifies the upper exclusive limit of a range of integers from which $RANDOM() may pick a result; $RANDOM() never returns a number less than zero (0).</p></li>
<li><p>If $RANDOM() has an argument less than one (1), it generates a run-time error.</p></li>
<li><p>$RANDOM can generate numbers up to 2147483646 (that is 2GB - 2).</p></li>
</ul>
<p>$RANDOM() returns an integer between zero (0) and one less than the argument. $RANDOM() provides a tool for generating pseudo-random patterns useful in testing or statistical calculations. You should ensure that the statistical properties of $RANDOM() are adequate for your application needs.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>$RANDOM() should never be used when cryptographic quality random numbers are needed.</p>
</div>
<section id="examples-of-random">
<h3>Examples of $RANDOM()<a class="headerlink" href="functions.html#examples-of-random" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;for <span class="nv">i</span><span class="o">=</span><span class="m">1</span>:1:10 write <span class="nv">$random</span><span class="o">(</span><span class="m">1</span><span class="o">)</span>
<span class="m">0000000000</span>
YDB&gt;
</pre></div>
</div>
<p>This shows that when $RANDOM() has an argument of one (1), the result is too confined to be random.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set x=$random(100)+1*.01
</pre></div>
</div>
<p>This $RANDOM() example produces a number between 0 and 99. The example then shifts with addition, and scales with multiplication to create a value between .01 and 1.</p>
</section>
</section>
<section id="reverse">
<h2><a class="toc-backref" href="functions.html#id29">$REVERSE()</a><a class="headerlink" href="functions.html#reverse" title="Permalink to this heading">¶</a></h2>
<p>Returns a string with the characters in the reverse order from that of its argument.</p>
<p>The format for the $REVERSE function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$RE[VERSE](expr)
</pre></div>
</div>
<ul class="simple">
<li><p>The expr in the syntax is the string to be reversed.</p></li>
</ul>
<section id="examples-of-reverse">
<h3>Examples of $REVERSE()<a class="headerlink" href="functions.html#examples-of-reverse" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$reverse</span><span class="o">(</span><span class="m">123</span><span class="o">)</span>
<span class="m">321</span>
YDB&gt;write <span class="nv">$reverse</span><span class="o">(</span><span class="s2">&quot;AbCDe&quot;</span><span class="o">)</span>
<span class="s2">&quot;eDCbA&quot;</span>
</pre></div>
</div>
</section>
</section>
<section id="select">
<h2><a class="toc-backref" href="functions.html#id30">$SELECT()</a><a class="headerlink" href="functions.html#select" title="Permalink to this heading">¶</a></h2>
<p>Returns a value associated with the first true truth-valued expression in a list of paired expression arguments.</p>
<p>The format for the $SELECT function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$S[ELECT](tvexpr:expr[,...])
</pre></div>
</div>
<ul class="simple">
<li><p>$SELECT() evaluates expressions from left to right.</p></li>
<li><p>If a truth-valued expression is TRUE (1), $SELECT() returns the corresponding expression after the colon (:) delimiter.</p></li>
<li><p>Once $SELECT() finds a TRUE, the function does not process any remaining arguments.</p></li>
<li><p>If $SELECT() finds no TRUE truth-value in its list of arguments, the function generates a run-time error.</p></li>
<li><p>$SELECT() does not have any effect on $TEST.</p></li>
</ul>
<p>$SELECT() is one of a limited set of functions that permit an indefinite number of arguments. $SELECT() provides a means of selecting from a list of alternatives.</p>
<p>Generally, the last $SELECT() argument has numeric literal one (1) for a truth-value to prevent run-time errors, and to provide a “default” value.</p>
<section id="examples-of-select">
<h3>Examples of $SELECT()<a class="headerlink" href="functions.html#examples-of-select" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;for <span class="nv">i</span><span class="o">=</span><span class="m">3</span>:-1:0 write !,<span class="nv">$select</span><span class="o">(</span><span class="nv">i</span><span class="o">=</span><span class="m">1</span>:<span class="s2">&quot;here&quot;</span>,i<span class="o">=</span><span class="m">2</span>:<span class="s2">&quot;come&quot;</span>,i<span class="o">=</span><span class="m">3</span>:<span class="s2">&quot;Watson&quot;</span><span class="o">)</span>
Watson
come
here
%YDB-E-SELECTFALSE, No argument to <span class="nv">$SELECT</span> was <span class="nb">true</span>
YDB&gt;
</pre></div>
</div>
<p>This loop uses $SELECT() to WRITE a series of strings. Because there is no true argument on the fourth iteration, when i=0, $SELECT() produces an error.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set name=$select(sex=&quot;M&quot;:&quot;Mr. &quot;,sex=&quot;F&quot;:&quot;Ms. &quot;,1:&quot;&quot;)_name
</pre></div>
</div>
<p>This example uses $SELECT() to add a prefix to the name based on a sex code held in the variable sex. Notice that the default handles the case of a missing or incorrect code.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>if $select(x=+x:x,x=&quot;&quot;:0,&quot;JANAPRJULOCT&quot;[x:1,1:0) do THING
</pre></div>
</div>
<p>This uses $SELECT() to perform complex logic as the truth-valued expression argument to an IF command.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When extrinsics are within a $SELECT expression, boolean short-circuiting does not prevent them from being evaluated during the execution of the statement.</p>
</div>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>echoAndRet(A,B)
 write A,!
 quit B

YDB&gt;write 1!$$^echoAndRet(&quot;Hello&quot;,0)!$S($$^echoAndRet(&quot;World&quot;,0):5)
    World
%YDB-E-SELECTFALSE, No argument to $SELECT was true

YDB&gt;
</pre></div>
</div>
</section>
</section>
<section id="stack">
<span id="stack-function"></span><h2><a class="toc-backref" href="functions.html#id31">$STACK()</a><a class="headerlink" href="functions.html#stack" title="Permalink to this heading">¶</a></h2>
<p>Returns strings describing aspects of the execution environment.</p>
<p>The format for the $STACK function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ST[ACK](intexpr[,expr])
</pre></div>
</div>
<ul>
<li><p>The intexpr identifies the M virtual machine stack level (as described by the standard), on which the function is to provide information.</p></li>
<li><p>The optional second argument is evaluated as a keyword that specifies a type of information to be returned as follows:</p>
<ul class="simple">
<li><p>“MCODE” the line of code that was executed.</p></li>
<li><p>“PLACE” the address of the above line of code or the symbol at (“&#64;”) to indicate code executed from a string value.</p></li>
<li><p>“ECODE” either an empty string, or the error code(s) that was added at this execution level.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For run-time errors, YottaDB does not provide a “PLACE” within a line (unlike it does for compilation errors), but it reports a label, offset, and routine.</p>
</div>
</li>
<li><p>When $STACK has only one argument, values corresponding to available stack levels specify a return value that indicates how the level was created, as follows:
* If intexpr is zero (0), the function returns information on how YottaDB was invoked.
* If intexpr is minus one (-1), the function returns the highest level for which $STACK can return information. Note that, if $ECODE=””, $STACK(-1) returns the same value as the $STACK ISV.
* If intexpr is greater than zero (0) and less than or equal to $STACK(-1), indicates how this level of process stack was created (“DO”, “TRIGGER” - for a stack level invoked by a trigger, “XECUTE”, or “$$” - for an extrinsic function).</p></li>
<li><p>$STACK(lvl) reports “ZINTR” for a stack level invoked by MUPIP INTRPT.</p></li>
<li><p>If intexpr is greater than $STACK (-1), the function returns an empty string.</p></li>
<li><p>During error handling, $STACK() return a snapshot of the state of the stack at the time of error. Even if subsequent actions add stack levels, $STACK() continues to report the same snapshot for the levels as of the time of the error. $STACK() reports the latest stack information only after the code clears $ECODE.</p></li>
<li><p>$STACK() assists in debugging programs.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>$STACK() returns similar information to ZSHOW “S” when “”=$ECODE, but when $ECODE contains error information, $STACK() returns information as of the time of a prior error, generally the first entry in $ECODE. For $STACK() to return current information, be sure that error handling code does a SET $ECODE=”” before restoring the normal flow of control.</p>
</div>
<section id="examples-of-stack">
<h3>Examples of $STACK()<a class="headerlink" href="functions.html#examples-of-stack" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>/usr/local/lib/yottadb/r120/ydb -run ^dstackex
dstackex<span class="p">;</span>
  zprint ^dstackex
  write !,<span class="nv">$STACK</span>
  xecute <span class="s2">&quot;WRITE !,</span><span class="nv">$STACK</span><span class="s2">&quot;</span>
  <span class="k">do</span> Label
  write !,<span class="nv">$$</span>ELabel
  write !,<span class="nv">$STACK</span>
  quit

Label
  write !,<span class="nv">$STACK</span>
  <span class="k">do</span> DLabel
  quit

ELabel<span class="o">()</span>
  quit <span class="nv">$STACK</span>

DLabel
  write !,<span class="nv">$STACK</span>
  quit
<span class="m">0</span>
<span class="m">1</span>
<span class="m">1</span>
<span class="m">2</span>
<span class="m">1</span>
</pre></div>
</div>
<p>Example for error processing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;zprint ^debugerr
debugerr<span class="p">;</span>
 <span class="nb">set</span> <span class="nv">dsm1</span><span class="o">=</span><span class="nv">$stack</span><span class="o">(</span>-1<span class="o">)</span>
 write !,<span class="s2">&quot;</span><span class="nv">$stack</span><span class="s2">(-1):&quot;</span>,dsm1
 <span class="k">for</span> <span class="nv">l</span><span class="o">=</span>dsm1:-1:0 <span class="k">do</span>
 . write !,l
 . <span class="k">for</span> <span class="nv">i</span><span class="o">=</span><span class="s2">&quot;ecode&quot;</span>,<span class="s2">&quot;place&quot;</span>,<span class="s2">&quot;mcode&quot;</span> write ?5,i,?15,<span class="nv">$stack</span><span class="o">(</span>l,i<span class="o">)</span>,!
YDB&gt;
</pre></div>
</div>
<p>The above example can be used to display a trace of the code path that led to an error.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;zprint ^dstacktst
dstacktst<span class="o">(</span>x<span class="o">)</span>       <span class="p">;</span> check <span class="nv">$stack</span><span class="o">()</span> returns with and without clearing <span class="nv">$ecode</span>
 <span class="nb">set</span> <span class="nv">$etrap</span><span class="o">=</span><span class="s2">&quot;do ^debugerr&quot;</span>
 label
  <span class="k">if</span> x&gt;0 <span class="nb">set</span> <span class="nv">$ecode</span><span class="o">=</span><span class="s2">&quot;,U1,&quot;</span> <span class="p">;</span> <span class="k">if</span> condition
  <span class="k">else</span>  <span class="nb">set</span> <span class="nv">$ecode</span><span class="o">=</span><span class="s2">&quot;,U2,&quot;</span> <span class="p">;</span>  <span class="k">else</span> condition
  quit
YDB&gt;do ^dstacktst<span class="o">(</span><span class="m">0</span><span class="o">)</span>
<span class="nv">$stack</span><span class="o">(</span>-1<span class="o">)</span>:2
<span class="m">2</span>    ecode
     place     debugerr+3^debugerr
     mcode      <span class="k">for</span> <span class="nv">l</span><span class="o">=</span>dsm1:-1:0 <span class="k">do</span>
<span class="m">1</span>    ecode     ,U2,
     place     label+2^dstacktst
     mcode      <span class="k">else</span>  <span class="nb">set</span> <span class="nv">$ecode</span><span class="o">=</span><span class="s2">&quot;,U2,&quot;</span> <span class="p">;</span>  <span class="k">else</span> condition
<span class="m">0</span>    ecode
     place     +1^GTM<span class="nv">$DMOD</span>
     mcode
%YDB-E-SETECODE, Non-empty value assigned to <span class="nv">$ECODE</span> <span class="o">(</span>user-defined error <span class="nb">trap</span><span class="o">)</span>
YDB&gt;do ^dstacktst<span class="o">(</span><span class="m">1</span><span class="o">)</span>
<span class="nv">$stack</span><span class="o">(</span>-1<span class="o">)</span>:1
<span class="m">1</span>    ecode     ,U2,
     place     label+2^dstacktst
     mcode      <span class="k">else</span>  <span class="nb">set</span> <span class="nv">$ecode</span><span class="o">=</span><span class="s2">&quot;,U2,&quot;</span> <span class="p">;</span>  <span class="k">else</span> condition
<span class="m">0</span>    ecode
     place     +1^GTM<span class="nv">$DMOD</span>
     mcode
%YDB-E-SETECODE, Non-empty value assigned to <span class="nv">$ECODE</span> <span class="o">(</span>user-defined error <span class="nb">trap</span><span class="o">)</span>
YDB&gt;set <span class="nv">$ecode</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
YDB&gt;do ^dstacktst<span class="o">(</span><span class="m">1</span><span class="o">)</span>
<span class="nv">$stack</span><span class="o">(</span>-1<span class="o">)</span>:2
<span class="m">2</span>    ecode
     place     debugerr+3^debugerr
     mcode      <span class="k">for</span> <span class="nv">l</span><span class="o">=</span>dsm1:-1:0 <span class="k">do</span>
<span class="m">1</span>    ecode     ,U1,
     place     label+1^dstacktst
     mcode      <span class="k">if</span> x&gt;0 <span class="nb">set</span> <span class="nv">$ecode</span><span class="o">=</span><span class="s2">&quot;,U1,&quot;</span> <span class="p">;</span> <span class="k">if</span> condition
<span class="m">0</span>    ecode
     place     +1^GTM<span class="nv">$DMOD</span>
     mcode
%YDB-E-SETECODE, Non-empty value assigned to <span class="nv">$ECODE</span> <span class="o">(</span>user-defined error <span class="nb">trap</span><span class="o">)</span>
YDB&gt;
</pre></div>
</div>
<p>This example shows how SETing $ECODE=.. makes $STACK() report current information. Notice how ^do dstacktst(0) and ^dostacktst(1) without clearing $ECODE in between displays information frozen at the time of the first error (else condition).</p>
</section>
</section>
<section id="text">
<h2><a class="toc-backref" href="functions.html#id32">$TEXT()</a><a class="headerlink" href="functions.html#text" title="Permalink to this heading">¶</a></h2>
<p>Returns source text for the line specified by its argument.</p>
<p>The format for the $TEXT function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$T[EXT](entryref)
</pre></div>
</div>
<ul class="simple">
<li><p>The entryref specifies the label, offset, and routine (or trigger name) of the source line that $TEXT() returns.</p></li>
<li><p>If the label+offset combination do not fall within the routine, $TEXT returns a null string.</p></li>
<li><p>If the entryref explicitly or implicitly specifies an offset of zero (0) from the beginning of the routine (or trigger name), $TEXT() returns the routine name or trigger name.</p></li>
<li><p>If the entryref does not specify a routine/trigger, YottaDB assumes the current routine/trigger, that is, the routine/trigger at the top of a ZSHOW “S.”</p></li>
<li><p>A YottaDB extension to $TEXT() permits negative offsets; however, every offset must still be preceded by a plus sign (+) delimiter, (for example, LABEL+-3). If a negative offset points to a line prior to the zero line, $TEXT() generates a run-time error.</p></li>
</ul>
<p>$TEXT() provides a tool for examining routine source code and the name of the current routine or trigger. $TEXT() assists, along with the ZPRINT command, in debugging programs. $TEXT() also allows the insertion of small tables of driver information into a routine. Because $TEXT() is not very efficient and the table-driven technique is generally best suited to minimal program changes, this approach is best used for prototyping and the tables should reside in global variables for production.</p>
<p>If $TEXT() cannot access the source file for the current object, either because it is not in the location from which it was compiled or because the process does not have access to some piece of the path to the source, or if the located source does not match the object currently in use by the process, $TEXT() returns an empty string.</p>
<section id="examples-of-text">
<h3>Examples of $TEXT()<a class="headerlink" href="functions.html#examples-of-text" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>for i=1:1 set x=$text(+i) quit:x=&quot;&quot;  write !,x
</pre></div>
</div>
<p>This loop uses $TEXT() to write out the entire source for the current routine.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$text</span><span class="o">(</span>+0<span class="o">)</span>
GTM<span class="nv">$DMOD</span>
YDB&gt;write <span class="nv">$text</span><span class="o">(</span>+1<span class="o">)</span>
YDB&gt;
</pre></div>
</div>
<p>This uses $TEXT() to WRITE the name of the current routine, then it tries to access the source and returns an empty string. This occurs because the default Direct Mode image is compiled by YottaDB and delivered without source. The exact failure message may vary.</p>
</section>
</section>
<section id="translate">
<span id="translate-function"></span><h2><a class="toc-backref" href="functions.html#id33">$TRANSLATE()</a><a class="headerlink" href="functions.html#translate" title="Permalink to this heading">¶</a></h2>
<p>Returns a string that results from replacing or dropping characters in the first of its arguments as specified by the patterns of its other arguments.</p>
<p>The format for the $TRANSLATE function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$TR[ANSLATE](expr1[,expr2[,expr3]])
</pre></div>
</div>
<ul class="simple">
<li><p>The first expression specifies the string on which $TRANSLATE() operates. If the other arguments are omitted, $TRANSLATE() returns this expression.</p></li>
<li><p>The optional second expression specifies the characters for $TRANSLATE() to replace. If a character occurs more than once in the second expression, the first occurrence controls the translation, and $TRANSLATE() ignores subsequent occurrences. If this argument is omitted, $TRANSLATE() returns the first expression without modification.</p></li>
<li><p>The optional third expression specifies the replacement characters for positionally corresponding characters in the second expression. If this argument is omitted or shorter than the second expression, $TRANSLATE() drops all occurrences of characters in the second expression that have no replacement in the corresponding position of the third expression.</p></li>
<li><p>For a process started in UTF-8 mode, the algorithm of $TRANSLATE() treats the string arguments as UTF-8 encoded. With VIEW “BADCHAR” enabled, $TRANSLATE() produces a run-time error when it encounters a malformed character.</p></li>
<li><p>Irrespective of the settings of VIEW “BADCHAR” and $ZCHSET, $ZTRANSLATE() interprets argument as a sequence of bytes (rather than a sequence of characters) and performs all byte-oriented $TRANSLATE() operations. For more information, refer to “$ZTRanslate()”.</p></li>
<li><p>$TRANSLATE() provides a tool for tasks such as changing case and doing encryption. For examples of case translation, refer to the ^%LCASE and ^%UCASE utility routines.</p></li>
</ul>
<p>The $TRANSLATE() algorithm can be understood as follows:</p>
<ul class="simple">
<li><p>$TRANSLATE() evaluates each character in the first expression, comparing it character by character to the second expression looking for a match. If there is no match in the second expression, the resulting expression contains the character without modification.</p></li>
<li><p>When it locates a character match, $TRANSLATE() uses the position of the match in the second expression to identify the appropriate replacement for the original expression. If the second expression has more characters than the third expression, $TRANSLATE() replaces the original character with a null, thereby deleting it from the result. By extension of this principle, if the third expression is missing, $TRANSLATE() deletes all characters from the first expression that occur in the second expression.</p></li>
</ul>
<section id="examples-of-translate">
<h3>Examples of $TRANSLATE()<a class="headerlink" href="functions.html#examples-of-translate" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$translate</span><span class="o">(</span><span class="s2">&quot;ABC&quot;</span>,<span class="s2">&quot;CB&quot;</span>,<span class="s2">&quot;1&quot;</span><span class="o">)</span>
A1
YDB&gt;
</pre></div>
</div>
<ul class="simple">
<li><p>First, $TRANSLATE() searches for “A” (the first character in the first expression, “ABC”) within the second expression (“CB”). Since “A” does not exist in the second expression, it appears unchanged in the result.</p></li>
<li><p>Next, $TRANSLATE() searches for “B” (the second character in the first expression) within the second expression (“CB”). Because “B” holds the second position in the second expression (“CB”), $TRANSLATE() searches for the character holding the second position in the third expression. Since there is no second character in the third expression, $TRANSLATE() replaces “B” with a null, effectively deleting it from the result.</p></li>
<li><p>Finally, $TRANSLATE() searches for “C” (the third character in the first expression) within the second expression (“CB”), finds it in the first position, and replaces it with the number 1, which is in the first position of the third expression. The translated result is “A1.”</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>While this example provides an explanation for the work done by $TRANSLATE(), it does not necessarily correspond to how YottaDB implements $TRANSLATE().</p>
</div>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$translate</span><span class="o">(</span><span class="s2">&quot;A&quot;</span>,<span class="s2">&quot;AA&quot;</span>,<span class="s2">&quot;BC&quot;</span><span class="o">)</span>
B
YDB&gt;
</pre></div>
</div>
<p>This $TRANSLATE() example finds the first occurrence of “A” in the second expression, which holds the first character position, and substitutes the character in the first position of the third expression.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$translate</span><span class="o">(</span><span class="s2">&quot;BACKUP&quot;</span>,<span class="s2">&quot;AEIOU&quot;</span><span class="o">)</span>
BCKP
YDB&gt;
</pre></div>
</div>
<p>Because the $TRANSLATE() has only two parameters in this example, it finds the characters in the first expression that also exist in the second expression and deletes them from the result.</p>
</section>
</section>
<section id="view">
<span id="view-function"></span><h2><a class="toc-backref" href="functions.html#id34">$VIEW()</a><a class="headerlink" href="functions.html#view" title="Permalink to this heading">¶</a></h2>
<p>Returns information about an environmental factor selected by the arguments. In YottaDB, the first argument contains a keyword identifying the environmental factor and, where appropriate, subsequent arguments select among multiple possible occurrences of that factor.</p>
<p>The format for the $VIEW function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$V[IEW](expr1[,expr2])
</pre></div>
</div>
<ul class="simple">
<li><p>The first expression specifies a keyword identifying the target factor for $VIEW() to examine.</p></li>
<li><p>The second expression differentiates between multiple possible targets for some keywords. $VIEW() requires the second expression for some keywords and does not permit it for others.</p></li>
</ul>
<section id="argument-keywords-of-view">
<span id="arg-kwrds-view"></span><h3>Argument Keywords of $VIEW()<a class="headerlink" href="functions.html#argument-keywords-of-view" title="Permalink to this heading">¶</a></h3>
<p>$VIEW() provides a means to access YottaDB environmental information. When YottaDB permits modification of the factors accessible with $VIEW(), the VIEW command generally provides the means for effecting the change.</p>
<p><strong>$VIEW() Argument Keywords</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 8%" />
<col style="width: 9%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Arg 1</p></th>
<th class="head"><p>Arg 2</p></th>
<th class="head"><p>Return Value</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>“BADCHAR”</p></td>
<td><p>none</p></td>
<td><p>In UTF-8 mode processes, enables or disable the generation of an error when character-oriented functions encounter malformed byte sequences (illegal characters).
The default is 1.</p></td>
</tr>
<tr class="row-odd"><td><p>“BREAKMSG”</p></td>
<td><p>none</p></td>
<td><p>Value of the break message mask; YottaDB defaults this to 31.</p></td>
</tr>
<tr class="row-even"><td><p>“FREEBLOCKS”</p></td>
<td><p>region</p></td>
<td><p>Number of free database blocks in a given region.</p></td>
</tr>
<tr class="row-odd"><td><p>“FREEZE”</p></td>
<td><p>region</p></td>
<td><p>Process-id of a process that has frozen the database associated with the region specified (using DSE or MUPIP). If the region is currently not frozen, returns zero.</p></td>
</tr>
<tr class="row-even"><td><p>“FULL_BOOLEAN”</p></td>
<td><p>none</p></td>
<td><p>Returns a string describing the current compiler setting. The default is “YottaDB Boolean short-circuit”. $VIEW(“FULL_BOOLEAN”) reports “Standard Boolean
evaluation side effects” when it is not explicitly set, but that mode of operation is required by the setting of ydb_side_effects, and “Standard Boolean side-effect
warning” when warnings have been specified.</p></td>
</tr>
<tr class="row-odd"><td><p>“GDSCERT”</p></td>
<td><p>none</p></td>
<td><p>Truth Value indicating whether Database block certification is currently enabled or disabled. To enable or disable Database block certification, use the VIEW
“GDSCERT” command.</p></td>
</tr>
<tr class="row-even"><td><p>“GVACCESS_METH
OD”</p></td>
<td><p>none</p></td>
<td><p>Access method of the region.</p></td>
</tr>
<tr class="row-odd"><td><p>“GVFILE”</p></td>
<td><p>region</p></td>
<td><p>Name of the database associated with the region.</p></td>
</tr>
<tr class="row-even"><td><p>“GVFIRST”</p></td>
<td><p>none</p></td>
<td><p>Name of the first database region in the current global directory; functionally equivalent to $VIEW(“GVNEXT”,””).</p></td>
</tr>
<tr class="row-odd"><td><p>“GVNEXT”</p></td>
<td><p>region</p></td>
<td><p>Name of the next database region after the given one in alphabetical order (or M collation sequence); “” for region starts with the first region. A return value of
“” means that the global directory defines no additional regions.</p></td>
</tr>
<tr class="row-even"><td><p>“GVSTAT”</p></td>
<td><p>region</p></td>
<td><p>A read-only process cannot update the database including the database file header where GVSTATS are stored. Another process with write access to a database, such as
MUPIP RUNDOWN, can flush its read statistics from the associated shared memory to GVSTATS.</p></td>
</tr>
<tr class="row-odd"><td><p>“ICHITS”</p></td>
<td><p>none</p></td>
<td><p>Number of indirection cache hits since YottaDB process startup. Indirection cache is a pool of compiled expressions that YottaDB maintains for indirection
and XECUTE.</p></td>
</tr>
<tr class="row-even"><td><p>“ICMISS”</p></td>
<td><p>none</p></td>
<td><p>Number of indirection cache misses since YottaDB process startup.</p></td>
</tr>
<tr class="row-odd"><td><p>“JNLACTIVE”</p></td>
<td><p>region</p></td>
<td><p>can return the following values:</p>
<ul class="simple">
<li><p>-1 (internal error)</p></li>
<li><p>0 journaling is disabled</p></li>
<li><p>1 journaling is enabled but closed (OFF)</p></li>
<li><p>2 journaling is enabled and open (ON)</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>“JNLFILE”</p></td>
<td><p>region</p></td>
<td><p>Journal file name associated with the region.</p></td>
</tr>
<tr class="row-odd"><td><p>“JNLTRANSACTI
ON”</p></td>
<td><p>none</p></td>
<td><p>Index showing how many ZTSTART transaction fences have been opened (and not closed).</p></td>
</tr>
<tr class="row-even"><td><p>“LABELS”</p></td>
<td><p>none</p></td>
<td><p>Truth value showing whether label case sensitivity is ON (1 for “LOWER”) or OFF (0 for “UPPER”); YottaDB defaults to 1.</p></td>
</tr>
<tr class="row-odd"><td><p>“LINK”</p></td>
<td><p>none</p></td>
<td><p>Returns the current relink recursive setting of ZLINK.</p></td>
</tr>
<tr class="row-even"><td><p>“LV_CREF”</p></td>
<td><p>local variable
name (lvn)</p></td>
<td><p>returns the total number of references to the data-space associated with an unsubscripted local variable name specified as a second expr (for example a quoted
string). it returns a zero for a variable without any associated alias container.</p></td>
</tr>
<tr class="row-odd"><td><p>“LV_GCOL”</p></td>
<td><p>none</p></td>
<td><p>returns the number of data-spaces recovered during a local variable data-space garbage collection it triggers; such collections normally happen automatically at
appropriate times.</p></td>
</tr>
<tr class="row-even"><td><p>“LV_REF”</p></td>
<td><p>local variable
name (lvn)</p></td>
<td><p>returns the total number of references to the data-space associated with an unsubscripted local variable name specified as a second expr (for example a quoted
string).</p></td>
</tr>
<tr class="row-odd"><td><p>“LVNULLSUBS”</p></td>
<td><p>none</p></td>
<td><p>Truth value showing whether null subscripts are permitted in local arrays (1 for “LVNULLSUBS”) or not (0 for “NOLVNULLSUBS”); YottaDB defaults to 1.</p></td>
</tr>
<tr class="row-even"><td><p>“NOISOLATION”</p></td>
<td><p>global</p></td>
<td><p>The current isolation-status of the specified global variable which must have a leading “^” in its specification.</p>
<p>This function returns 1 if YottaDB has been instructed to not enforce the ACID property of Isolation (i.e., “NOISOLATION” has been specified) and 0 otherwise.</p>
<p>By default, YottaDB ensures Isolation, that is, a $VIEW command will return 0. The isolation-status of a global variable can be turned on and off by the VIEW
“NOISOLATION” command.</p>
</td>
</tr>
<tr class="row-odd"><td><p>“PATCODE”</p></td>
<td><p>none</p></td>
<td><p>Name of the active patcode table; YottaDB defaults this to “M”.</p></td>
</tr>
<tr class="row-even"><td><p>“POOLLIMIT”</p></td>
<td><p>region</p></td>
<td><p>The current limit on global buffers for the region .</p></td>
</tr>
<tr class="row-odd"><td><p>“PROBECRIT”</p></td>
<td><p>region</p></td>
<td><p>Acquires and releases a critical section for the region (the “probe”), returning a string with the following field,
some of of which always have zero (0) values because they are no longer used:</p>
<ul class="simple">
<li><p>CPT - nanoseconds for the probe to get the critical section</p></li>
<li><p>CFN - 0</p></li>
<li><p>CQN - 0</p></li>
<li><p>CYN - 0</p></li>
<li><p>CQF - 0</p></li>
<li><p>CQE - 0</p></li>
<li><p>CAT - total of critical section acquisitions successes</p></li>
</ul>
</td>
</tr>
<tr class="row-even"><td><p>“REGION”</p></td>
<td><p>gvn</p></td>
<td><p>Name of the region(s) holding the specified gvn. The region names are case-insensitive. The specified region name is converted to upper case before processing.
If gvn is <code class="code docutils literal notranslate"><span class="pre">&quot;^*&quot;</span></code>, the name of the default region.</p>
<p>If gvn spans more than one region, this function returns region name in an order where the first region is the region to which the unsubscripted global variable
name maps; and other regions are in the order in which they would be encountered by traversing the subscripts of gvn in order (with duplicates removed).</p>
<p>gvn is a subscripted or unsubscripted global variable name in the same form as that generated by $NAME(). You can use $NAME() inside $VIEW() to ensure that
subscripts are in a correct form, for example, $VIEW(“REGION”,$NAME(^abcd(1,2E4))) instead of $VIEW(“REGION”,”^abcd(1,20000)”).</p>
</td>
</tr>
<tr class="row-odd"><td><p>“RTNCHECKSUM”</p></td>
<td><p>routine name</p></td>
<td><p>Source code check-sum for the most recently ZLINK’d version of the specified routine name (these check-sums use a 128 bit hash based on the MurmurHash3 algorithm).</p></td>
</tr>
<tr class="row-even"><td><p>“RTNNEXT”</p></td>
<td><p>routine name</p></td>
<td><p>Name of the next routine in the image after the given one; “” (empty string) for routinename starts with the first routine in ASCII collating sequence and a return
value of the empty string indicates the end of the list.</p></td>
</tr>
<tr class="row-odd"><td><p>“SPSIZE”</p></td>
<td><p>none</p></td>
<td><p>Returns a string with three comma separated values: Number of bytes currently allocated as process working storage: YottaDB manages this space as what is
commonly called a heap, and uses the term stringpool to refer to it. The YottaDB garbage collector reclaims unused space from the stringpool from time to time,
and YottaDB automatically expands the stringpool as needed by the application program; Number of bytes currently used by the process; Number of bytes reserved:
The reserved space is used to reduce the active memory usage, for example, when a process uses a large amount of memory then subsequently uses a significantly
reduced amount.</p></td>
</tr>
<tr class="row-even"><td><p>“STATSHARE”</p></td>
<td><p>region</p></td>
<td><p>Returns 0 when the process has sharing disabled, 1 when it has sharing enabled, and 2 when sharing is enabled selectively for regions. For a process to store
statistics in the stats db, the database must be enabled for sharing and the process must have opted in to share. VIEW “STATSHARE” with no region argument enables
sharing for all regions and VIEW “STATSHARE”:”REGION_NAME” enables sharing selectively for a region. $VIEW(“STATSHARE”,”REGION_NAME”) returns whether a process has
opted to share statistics for a region.</p></td>
</tr>
<tr class="row-odd"><td><p>“STKSIZ”</p></td>
<td><p>none</p></td>
<td><p>Returns the YottaDB stack size in bytes.</p></td>
</tr>
<tr class="row-even"><td><p>“TOTALBLOCKS”</p></td>
<td><p>region</p></td>
<td><p>Total number of database blocks in a given region.</p></td>
</tr>
<tr class="row-odd"><td><p>“TRANSACTIONI
D”</p></td>
<td><p>NULL or
transaction level</p></td>
<td><p>Transaction ID specified in the particular level (when the transaction level is specified). The first level TSTART is returned if the level is not specified as
second argument. A NULL string is returned if the specified level (explicitly or implicitly) is greater than the current value of $TLEVEL.</p></td>
</tr>
<tr class="row-even"><td><p>“UNDEF”</p></td>
<td><p>none</p></td>
<td><p>Truth value showing whether undefined variables should be treated as having a null value (1 for “UNDEF”; 0 for “NOUNDEF”); YottaDB defaults to 0.</p></td>
</tr>
<tr class="row-odd"><td><p>“YGVN2GDS”</p></td>
<td><p>string
[,&lt;collation&gt;]</p></td>
<td><p>When string is the name of a global variable node, e.g., “^ACN(“”NAME””,””TYPE””)”, returns the bytes in a database block that store the name,
e.g., “ACN”_$C(0,255)_”NAME”_$C(0,255)_”TYPE”_$C(0,0). An optional additional parameter is an alternative collation sequence number, which specifies the type of
collation desired. Refer to <a class="reference internal" href="internatn.html#colln-seq-defn"><span class="std std-ref">Collation Sequence Definitions</span></a> for more details on
specifying alternative collation.</p></td>
</tr>
<tr class="row-even"><td><p>“YGDS2GVN”</p></td>
<td><p>string
[,&lt;collation&gt;]</p></td>
<td><p>When string contains the subscript representation of a global variable, returns the name of the global. An optional additional parameter is an alternative
collation sequence number, which specifies the type of collation desired. Refer to
<a class="reference internal" href="internatn.html#colln-seq-defn"><span class="std std-ref">Collation Sequence Definitions</span></a>  for more details on specifying alternative collation.</p></td>
</tr>
<tr class="row-odd"><td><p>“ZDATE_FORM”</p></td>
<td><p>none</p></td>
<td><p>Integer value showing whether four digit year code is active for $ZDATE(); YottaDB defaults to 0 (for “YY” format). Use the environment variable ydb_zdate_form
to set the initial value of this factor. For usage examples, refer to “$ZDate()”.</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>YottaDB uses the LC_CREF, LV_GCOL, LV_REF keywords in testing and is documenting them to ensure completeness in product documentation. They may (or may not) be useful during application development for debugging or performance testing implementation alternatives.</p>
</div>
</section>
<section id="examples-of-view">
<h3>Examples of $VIEW()<a class="headerlink" href="functions.html#examples-of-view" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;Set <span class="nv">a</span><span class="o">=</span><span class="m">1</span>,*b<span class="o">(</span><span class="m">1</span><span class="o">)=</span>a
YDB&gt;write <span class="nv">$view</span><span class="o">(</span><span class="s2">&quot;LV_CREF&quot;</span>,<span class="s2">&quot;a&quot;</span><span class="o">)</span>,<span class="s2">&quot; &quot;</span>,<span class="nv">$view</span><span class="o">(</span><span class="s2">&quot;LV_CREF&quot;</span>,<span class="s2">&quot;b&quot;</span><span class="o">)</span>
<span class="m">1</span> <span class="m">0</span>
YDB&gt;write <span class="nv">$view</span><span class="o">(</span><span class="s2">&quot;LV_REF&quot;</span>,<span class="s2">&quot;a&quot;</span><span class="o">)</span>,<span class="s2">&quot; &quot;</span>,<span class="nv">$view</span><span class="o">(</span><span class="s2">&quot;LV_REF&quot;</span>,<span class="s2">&quot;b&quot;</span><span class="o">)</span>
<span class="m">2</span> <span class="m">1</span>
YDB&gt;
</pre></div>
</div>
<p>This example creates an alias variable and an alias container variable and checks the number of both container references and total references to the cells associated with both a and b.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;Set *a<span class="o">(</span><span class="m">1</span><span class="o">)=</span>b,*b<span class="o">(</span><span class="m">1</span><span class="o">)=</span>a
YDB&gt;kill *a,*b
YDB&gt;write <span class="nv">$view</span><span class="o">(</span><span class="s2">&quot;LV_GCOL&quot;</span><span class="o">)</span>
<span class="m">2</span>
YDB&gt;
</pre></div>
</div>
<p>This example creates two cross associated alias containers, destroys their ancestor nodes with KILL * and uses $VIEW(“LV_GCOL”) to force a clean-up of the abandoned data-spaces. In the absence of the $VIEW(“LV_GCOL”), YottaDB would do this automatically at some subsequent convenient time.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$view</span><span class="o">(</span><span class="s2">&quot;GVSTAT&quot;</span>,<span class="s2">&quot;DEFAULT&quot;</span><span class="o">)</span>
SET:203,KIL:12,GET:203,DTA:2,ORD:23,ZPR:21,QRY:0,LKS:0,LKF:0,CTN:44,DRD:103,DWT:59,
NTW:24,NTR:55,NBW:27,NBR:138,NR0:0,NR1:0,NR2:0,NR3:0,TTW:17,TTR:5,TRB:0,TBW:32,
TBR:80,TR0:0,TR1:0,TR2:0,TR3:0,TR4:0,TC0:0,TC1:0,TC2:0,TC3:0,TC4:0,ZTR:7,DFL:9,
DFS:0,JFL:0,JFS:0,JBB:0,JFB:0,JFW:0,JRL:0,JRP:0,JRE:0,JRI:0,JRO:0,JEX:0,DEX:0,
CAT:35,CFE:0,CFS:0,CFT:0,CQS:0,CQT:0,CYS:0,CYT:0,BTD:13
YDB&gt;
</pre></div>
</div>
<p>These are statistics associated with the DEFAULT region. Refer to <a class="reference internal" href="commands.html#zshow-info-codes"><span class="std std-ref">ZSHOW Information Codes</span></a> for information on the parameters.</p>
<p>Example:</p>
<p>Given the following global directory configuration:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>GDE&gt;add -name a<span class="o">(</span><span class="m">1</span>:10<span class="o">)</span>      -region<span class="o">=</span>a1
GDE&gt;add -name a<span class="o">(</span><span class="m">10</span>,1<span class="o">)</span>      -region<span class="o">=</span>a2
GDE&gt;add -name a<span class="o">(</span><span class="m">10</span>,2<span class="o">)</span>      -region<span class="o">=</span>a3
GDE&gt;add -name a<span class="o">(</span><span class="m">120</span>:300<span class="o">)</span>   -region<span class="o">=</span>a4
GDE&gt;add -name a<span class="o">(</span><span class="m">60</span>:325<span class="o">)</span>    -region<span class="o">=</span>a5
GDE&gt; show -name
 *** NAMES ***
Global        Region
------------------------------------------------------------------------------
*             DEFAULT
a<span class="o">(</span><span class="m">1</span>:10<span class="o">)</span>       A1
a<span class="o">(</span><span class="m">10</span>,1<span class="o">)</span>       A2
a<span class="o">(</span><span class="m">10</span>,2<span class="o">)</span>       A3
a<span class="o">(</span><span class="m">60</span>:120<span class="o">)</span>     A5
a<span class="o">(</span><span class="m">120</span>:300<span class="o">)</span>    A4
a<span class="o">(</span><span class="m">300</span>:325<span class="o">)</span>    A5
</pre></div>
</div>
<p>Here are some $VIEW(“REGION”,gvn) outputs:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$view</span><span class="o">(</span><span class="s2">&quot;REGION&quot;</span>,<span class="s2">&quot;^a(1)&quot;</span><span class="o">)</span>
A1
YDB&gt;write <span class="nv">$view</span><span class="o">(</span><span class="s2">&quot;REGION&quot;</span>,<span class="s2">&quot;^a(10)&quot;</span><span class="o">)</span>
DEFAULT,A2,A3
YDB&gt;w <span class="nv">$view</span><span class="o">(</span><span class="s2">&quot;REGION&quot;</span>,<span class="s2">&quot;^a(60)&quot;</span><span class="o">)</span>
A5
YDB&gt;w <span class="nv">$view</span><span class="o">(</span><span class="s2">&quot;REGION&quot;</span>,<span class="s2">&quot;^a&quot;</span><span class="o">)</span>
DEFAULT,A1,A2,A3,A5,A4
</pre></div>
</div>
<p>Support for $VIEW(“REGION”,”^*”), which returns the name of the region in the global directory mapped to by the * namespace, was added effective release <a class="reference external" href="https://gitlab.com/YottaDB/DB/YDB/-/tags/r1.30">r1.30</a>.</p>
</section>
</section>
<section id="zahandle">
<span id="zahandle-function"></span><h2><a class="toc-backref" href="functions.html#id35">$ZAHANDLE()</a><a class="headerlink" href="functions.html#zahandle" title="Permalink to this heading">¶</a></h2>
<p>$ZAHANDLE() returns a unique identifier (handle) for the array associated with a name or an alias container; for an subscripted lvn, it returns an empty string. To facilitate debugging, the handle is a printable string representation of a hexadecimal number. The only meaningful operation on the value returned by a call to $ZAHANDLE() is to compare it for equality with the value returned by another call. Changing nodes within the array doesn’t change its handle. $ZAHANDLE() returns different results for copies of an array.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">A</span><span class="o">=</span><span class="m">1</span>,*B<span class="o">(</span><span class="m">1</span><span class="o">)=</span>A
YDB&gt;write <span class="s2">&quot;</span><span class="nv">$zahandle</span><span class="s2">(A)=&quot;&quot;&quot;</span>,<span class="nv">$zahandle</span><span class="o">(</span>A<span class="o">)</span>,<span class="s2">&quot;&quot;&quot; </span><span class="nv">$zahandle</span><span class="s2">(B(1))=&quot;&quot;&quot;</span>,<span class="nv">$zahandle</span><span class="o">(</span>B<span class="o">(</span><span class="m">1</span><span class="o">))</span>,<span class="s2">&quot;&quot;&quot;&quot;</span>
<span class="nv">$zahandle</span><span class="o">(</span>A<span class="o">)=</span><span class="s2">&quot;17B8810&quot;</span> <span class="nv">$zahandle</span><span class="o">(</span>B<span class="o">(</span><span class="m">1</span><span class="o">))=</span><span class="s2">&quot;17B8810&quot;</span>
YDB&gt;set A<span class="o">(</span><span class="s2">&quot;Subscript&quot;</span><span class="o">)=</span><span class="s2">&quot;Value&quot;</span> <span class="p">;</span> Change array - but <span class="nv">$ZAHandle</span><span class="o">()</span> does not change
YDB&gt;write <span class="s2">&quot;</span><span class="nv">$zahandle</span><span class="s2">(A)=&quot;&quot;&quot;</span>,<span class="nv">$zahandle</span><span class="o">(</span>A<span class="o">)</span>,<span class="s2">&quot;&quot;&quot; </span><span class="nv">$zahandle</span><span class="s2">(B(1))=&quot;&quot;&quot;</span>,<span class="nv">$zahandle</span><span class="o">(</span>B<span class="o">(</span><span class="m">1</span><span class="o">))</span>,<span class="s2">&quot;&quot;&quot;&quot;</span>
<span class="nv">$zahandle</span><span class="o">(</span>A<span class="o">)=</span><span class="s2">&quot;17B8810&quot;</span> <span class="nv">$zahandle</span><span class="o">(</span>B<span class="o">(</span><span class="m">1</span><span class="o">))=</span><span class="s2">&quot;17B8810&quot;</span>
YDB&gt;merge <span class="nv">D</span><span class="o">=</span>A <span class="p">;</span> A copy of the data has a different <span class="nv">$zahandle</span><span class="o">()</span>
YDB&gt;Write <span class="s2">&quot;</span><span class="nv">$ZAHandle</span><span class="s2">(A)=&quot;&quot;&quot;</span>,<span class="nv">$ZAHandle</span><span class="o">(</span>A<span class="o">)</span>,<span class="s2">&quot;&quot;&quot; </span><span class="nv">$ZAHandle</span><span class="s2">(D)=&quot;&quot;&quot;</span>,<span class="nv">$ZAHandle</span><span class="o">(</span>D<span class="o">)</span>,<span class="s2">&quot;&quot;&quot;&quot;</span>
<span class="nv">$zahandle</span><span class="o">(</span>A<span class="o">)=</span><span class="s2">&quot;17B8810&quot;</span> <span class="nv">$zahandle</span><span class="o">(</span>D<span class="o">)=</span><span class="s2">&quot;17B8C10&quot;</span>
YDB&gt;
</pre></div>
</div>
<p>Since YottaDB does not provide a way for a function to return an array or alias variable as its result, the uniqueness of $ZAHandle() can be exploited to effect this capability, by placing the result in a local variable with an agreed prefix (e.g., “%”) and its $ZAHANDLE() as a suffix. The handle can be returned as the value.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ /usr/local/lib/yottadb/r120/ydb -run retval
retval        ; Return an array / object from a function
   ;;Data for the object array
   ;;Albert Einstein,14-March-1879
   ;;Arthur Eddington,28-December-1882
   ;;
   zprint    ; Print this program
   new tmp1,tmp2,tmp3
   for i=3:1 set tmp1=$text(+i),tmp2=$piece(tmp1,&quot;;;&quot;,2) quit:&#39;$length(tmp2)  do
   .set tmp3=&quot;%&quot;_$$NewPerson($piece(tmp2,&quot;,&quot;,1),$piece(tmp2,&quot;,&quot;,2))
   .set @(&quot;*Relativists(&quot;_(i-2)_&quot;)=&quot;_tmp3)
   .kill @(&quot;*&quot;_tmp3)
   kill tmp1,tmp2,tmp3
   write &quot;------------&quot;,!
   write &quot;Array of objects of relativists:&quot;,!
   zwrite
   quit
   ;
NewPerson(name,birthdate)    ; Create new person object
   new lname,fname,dob,tmp1,tmp2 ; New variables used by this function
   set lname=$Piece(name,&quot; &quot;,2),fname=$Piece(name,&quot; &quot;,1)
   set dob=$$FUNC^%DATE(birthdate)
   set tmp1(&quot;fname&quot;)=fname,tmp1(&quot;lname&quot;)=lname,tmp1(&quot;dob&quot;)=dob
   set tmp2=$ZAHandle(tmp1)
   set @(&quot;*%&quot;_tmp2_&quot;=tmp1&quot;)
   quit tmp2
------------
Array of objects of relativists:
$ZWRTAC=&quot;&quot;
*Relativists(1)=$ZWRTAC1
$ZWRTAC1(&quot;dob&quot;)=13952
$ZWRTAC1(&quot;fname&quot;)=&quot;Albert&quot;
$ZWRTAC1(&quot;lname&quot;)=&quot;Einstein&quot;
*Relativists(2)=$ZWRTAC2
$ZWRTAC2(&quot;dob&quot;)=15337
$ZWRTAC2(&quot;fname&quot;)=&quot;Arthur&quot;
$ZWRTAC2(&quot;lname&quot;)=&quot;Eddington&quot;
i=5
$ZWRTAC=&quot;&quot;
$
</pre></div>
</div>
</section>
<section id="zascii">
<span id="zascii-function"></span><h2><a class="toc-backref" href="functions.html#id36">$ZASCII()</a><a class="headerlink" href="functions.html#zascii" title="Permalink to this heading">¶</a></h2>
<p>Returns the numeric byte value (0 through 255) of a given sequence of octets (8-bit bytes).</p>
<p>The format for the $ZASCII function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZA[SCII](expr[,intexpr])
</pre></div>
</div>
<ul class="simple">
<li><p>The expression is the sequence of octets (8-bit bytes) from which $ZASCII() extracts the byte it decodes.</p></li>
<li><p>The optional integer expression contains the position within the expression of the byte that $ZASCII() decodes. If this argument is missing, $ZASCII() returns a result based on the first byte position. $ZASCII() starts numbering byte positions at one (1), (the first byte of a string is at position one (1)).</p></li>
<li><p>If the explicit or implicit position is before the beginning or after the end of the expression, $ZASCII() returns a value of negative one (-1).</p></li>
<li><p>$ZASCII() provides a means of examining bytes in a byte sequence. When used with $ZCHAR(), $ZASCII() also provides a means to perform arithmetic operations on the byte values associated with a sequence of octets (8-bit bytes).</p></li>
</ul>
<section id="examples-of-zascii">
<h3>Examples of $ZASCII()<a class="headerlink" href="functions.html#examples-of-zascii" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;for <span class="nv">i</span><span class="o">=</span><span class="m">0</span>:1:4 write !,<span class="nv">$zascii</span><span class="o">(</span><span class="s2">&quot;主&quot;</span>,i<span class="o">)</span>

-1
<span class="m">228</span>
<span class="m">184</span>
<span class="m">187</span>
-1
YDB&gt;
</pre></div>
</div>
<p>This UTF-8 mode example displays the result of $ZASCII() specifying a byte position before, first, second and third positions, and after the sequence of octets (8-bit bytes) represented by 主. In the above example, 228, 184, and 187 represents the numeric byte value of the three-byte in the sequence of octets (8-bit bytes) represented by 主.</p>
</section>
</section>
<section id="zatransform">
<h2><a class="toc-backref" href="functions.html#id37">$ZATRANSFORM()</a><a class="headerlink" href="functions.html#zatransform" title="Permalink to this heading">¶</a></h2>
<p>Returns the transformed representation of the first argument expr in a normalized form using the alternative transform specified by the second argument intexpr; the return can be used as an operand to the follows (]) or sorts-after (]]) operator such that, if both operands are in the normalized form, the result is independent of alternative collation. The format for the $ZATRANSFORM function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZATRANSFORM(expr,intexpr[,{0|1|2|-2}][,{0|1}])
</pre></div>
</div>
<ul>
<li><p>The expression specifies the string to transform.</p></li>
<li><p>The intexpr specifies the ID of the alternative transform to use.</p></li>
<li><p>The optional third argument specifies :</p>
<blockquote>
<div><ul class="simple">
<li><p>zero (0): the transform is to normalized form</p></li>
<li><p>one (1): the reverse transform from the normalized to the native form</p></li>
<li><p>two (2): the character which collates immediately after the first character of the first argument, or the empty string if no character does</p></li>
<li><p>minus two (-2): the character which collates immediately before the first character of the first argument, or the empty string if no character does</p></li>
</ul>
</div></blockquote>
</li>
<li><p>The optional fourth argument specifes whether to use standard M collation of numbers before strings, the default or zero (0), or to sort all values as strings (1).</p></li>
</ul>
<p>$ZATRANSFORM() options were modified in YottaDB effective release <a class="reference external" href="https://gitlab.com/YottaDB/DB/YDB/-/tags/r1.32">r1.32</a>.</p>
<p>Please see the section on $ZCOLLATE() for a similar alternative.</p>
<section id="examples-of-zatransform">
<h3>Examples of $ZATRANSFORM()<a class="headerlink" href="functions.html#examples-of-zatransform" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zatransform</span><span class="o">(</span><span class="s2">&quot;John Smythe&quot;</span>,1<span class="o">)]</span><span class="nv">$zatransform</span><span class="o">(</span><span class="s2">&quot;Jane Smith&quot;</span>,2<span class="o">)</span>
<span class="m">0</span>
YDB&gt;
</pre></div>
</div>
<p>This example uses $ZATRANSFORM() and two (here unspecified) collation definitions to compare the ordering of two (literal) expressions as YottaDB would collate them if there was a way to collate them together. The result indicates that the first would collate before the second.</p>
</section>
</section>
<section id="zbit-functions">
<h2><a class="toc-backref" href="functions.html#id38">$ZBIT Functions</a><a class="headerlink" href="functions.html#zbit-functions" title="Permalink to this heading">¶</a></h2>
<p>A series of functions beginning with $ZBIT lets you manipulate a bit stream. Internally, YottaDB stores a bit stream in the form of a bit string. A bit string embeds a bit stream in such a way that the first byte specifies the number of trailing bits in the last byte that are not part of the bit-stream. In this way, YottaDB is able to store bit-streams of lengths other than multiples of 8 bits in byte format. So for example, a first byte of value of zero (0) indicates that all of the bits in the last byte belong to the bit-stream, while a one (1) indicates the last bit is excluded and a seven (7) indicates that only the first bit in the last byte belongs to the bit-stream.</p>
<p>If you have to convert a character string into a bit string then add a leading byte to that character string so that all $ZBIT functions can recognize it. The most common and straightforward way of doing this is to concatenate a $CHAR(n) on the front of the character string, where the value of n is zero through seven (0-7) – most commonly zero (0). If you pass a bit string as an argument to a routine that is expecting a character string, then that caller routine must strip off the first (and possibly the last) byte so that it can recognize the character string.</p>
<p>This section contains the description of all $ZBIT function and an example of using $ZBIT functions to turn a character into a bit stream and return a coded value. However, the most appropriate use of these functions may include the formation of checksums, handling of bit-data (say pixels from a scan), or interfacing with a routine that requires bit-oriented arguments.</p>
<section id="zbitand">
<h3>$ZBITAND()<a class="headerlink" href="functions.html#zbitand" title="Permalink to this heading">¶</a></h3>
<p>Performs a logical AND function on two bit strings and returns a bit string equal in length to the shorter of the two arguments (containing set bits in those positions where both of the input strings have set bits). Positions corresponding to positions where either of the input strings have a cleared bit, also have cleared bits in the resulting string.</p>
<p>The format for the $ZBITAND function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZBITAND(expr1,expr2)
</pre></div>
</div>
<ul class="simple">
<li><p>The first expression specifies one of the bit strings that is input to the AND operation.</p></li>
<li><p>The second expression specifies the other bit string that is input to the AND operation.</p></li>
</ul>
<p><strong>Example of $ZBITAND()</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;
<span class="p">;</span> The binary representation of A is <span class="m">01000001</span>
YDB&gt;Set <span class="nv">BITSTRINGB</span><span class="o">=</span><span class="nv">$zbitset</span><span class="o">(</span><span class="nv">$zbitset</span><span class="o">(</span><span class="nv">$zbitstr</span><span class="o">(</span><span class="m">8</span>,0<span class="o">)</span>,2,1<span class="o">)</span>,7,1<span class="o">)</span>
<span class="p">;</span> The binary representation of B is <span class="m">01000010</span>
YDB&gt;set <span class="nv">BITSTRINGAB</span><span class="o">=</span><span class="nv">$zbitand</span><span class="o">(</span>BITSTRINGA,BITSTRINGB<span class="o">)</span>
YDB&gt;for <span class="nv">i</span><span class="o">=</span><span class="m">1</span>:1:8 write <span class="nv">$zbitget</span><span class="o">(</span>BITSTRINGAB,I<span class="o">)</span>
<span class="m">01000000</span>
</pre></div>
</div>
<p>This examples uses $ZBITAND to perform a bitwise AND operation on A and B.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>A= 01000001
B= 01000010
A bitwise AND B=0100000
</pre></div>
</div>
</section>
<section id="zbitcount">
<h3>$ZBITCOUNT()<a class="headerlink" href="functions.html#zbitcount" title="Permalink to this heading">¶</a></h3>
<p>Returns the number of ON bits in a bit string.</p>
<p>The format for the $ZBITCOUNT function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZBITCOUNT(expr)
</pre></div>
</div>
<p>The expression specifies the bit string to examine.</p>
<p><strong>Example of $ZBITCOUNT()</strong></p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">BITSTRINGA</span><span class="o">=</span><span class="nv">$ZBITSET</span><span class="o">(</span><span class="nv">$ZBITSET</span><span class="o">(</span><span class="nv">$ZBITSTR</span><span class="o">(</span><span class="m">8</span>,0<span class="o">)</span>,2,1<span class="o">)</span>,8,1<span class="o">)</span>
<span class="p">;</span> The binary representation of A is <span class="m">01000001</span>
YDB&gt;set <span class="nv">BITSTRINGB</span><span class="o">=</span><span class="nv">$zbitset</span><span class="o">(</span><span class="nv">$zbitset</span><span class="o">(</span><span class="nv">$zbitstr</span><span class="o">(</span><span class="m">8</span>,0<span class="o">)</span>,2,1<span class="o">)</span>,7,1<span class="o">)</span>
<span class="p">;</span> The binary representation of B is <span class="m">01000010</span>
YDB&gt;Set <span class="nv">BITSTRINGC</span><span class="o">=</span><span class="nv">$zbitor</span><span class="o">(</span>BITSTRINGA,BITSTRINGB<span class="o">)</span>
<span class="p">;</span> A OR <span class="nv">B</span><span class="o">=</span><span class="m">01000011</span>
YDB&gt;write <span class="nv">$zbitcount</span><span class="o">(</span>BITSTRINGA<span class="o">)</span>
<span class="m">2</span>
YDB&gt;write <span class="nv">$zbitcount</span><span class="o">(</span>BITSTRINGB<span class="o">)</span>
<span class="m">2</span>
YDB&gt;write <span class="nv">$zbitcount</span><span class="o">(</span>BITSTRINGC<span class="o">)</span>
<span class="m">3</span>
YDB&gt;
</pre></div>
</div>
<p>This example displays the number of ON bits in BITSTRINGA, BITSTRINGB, and BITSTRINGC.</p>
</section>
<section id="zbitfind">
<h3>$ZBITFIND()<a class="headerlink" href="functions.html#zbitfind" title="Permalink to this heading">¶</a></h3>
<p>Performs the analog of $FIND() on a bit string. It returns an integer that identifies the position after the first position equal to a truth-valued expression that occurs at, or after, the specified starting position.</p>
<p>The format for the $ZBITFIND function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZBITFIND(expr,tvexpr[,intexpr])
</pre></div>
</div>
<ul class="simple">
<li><p>The expression specifies the bit string to examine.</p></li>
<li><p>The truth-valued expression specifies the bit value for which $ZBITFIND() searches (1 or 0).</p></li>
<li><p>The optional integer argument specifies the starting position at which to begin the search. If this argument is missing, $ZBITFIND() begins searching at the first position of the string. $ZBIT functions count the first bit as position one (1).</p></li>
</ul>
<p>If the optional integer argument exceeds the length of the string, or if the function finds no further bits, $ZBITFIND() returns a zero value.</p>
<p><strong>Examples of $ZBITFIND()</strong></p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;Set <span class="nv">BITSTRINGA</span><span class="o">=</span><span class="nv">$ZBITSET</span><span class="o">(</span><span class="nv">$ZBITSET</span><span class="o">(</span><span class="nv">$ZBITSTR</span><span class="o">(</span><span class="m">8</span>,0<span class="o">)</span>,2,1<span class="o">)</span>,8,1<span class="o">)</span>
<span class="p">;</span> The binary representation of A is <span class="m">01000001</span>
YDB&gt;write <span class="nv">$zbitfind</span><span class="o">(</span>BITSTRINGA,1,3<span class="o">)</span>
<span class="m">9</span>
YDB&gt;
</pre></div>
</div>
<p>This example searches for bit value 1 starting from the 3rd bit of BITSTRINGA.</p>
</section>
<section id="zbitget">
<h3>$ZBITGET()<a class="headerlink" href="functions.html#zbitget" title="Permalink to this heading">¶</a></h3>
<p>Returns the value of a specified position in the bit string.</p>
<p>The format for the $ZBITGET function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZBITGET(expr,intexpr)
</pre></div>
</div>
<ul class="simple">
<li><p>The expression specifies the bit string to examine.</p></li>
<li><p>The integer argument specifies the position in the string for which the value is requested. If the integer argument is negative, zero, or exceeds the length of the bit string, it is rejected with a run-time error. $ZBIT functions count the first bit as position one (1).</p></li>
</ul>
<p><strong>Examples of $ZBITGET()</strong></p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">BITSTRINGA</span><span class="o">=</span><span class="nv">$zbitset</span><span class="o">(</span><span class="nv">$zbitset</span><span class="o">(</span><span class="nv">$zbitstr</span><span class="o">(</span><span class="m">8</span>,0<span class="o">)</span>,2,1<span class="o">)</span>,8,1<span class="o">)</span>
<span class="p">;</span> The binary representation of A is <span class="m">01000001</span>
YDB&gt;for <span class="nv">i</span><span class="o">=</span><span class="m">1</span>:1:8 write <span class="nv">$zbitget</span><span class="o">(</span>BITSTRINGA,I<span class="o">)</span>
<span class="m">01000001</span>
YDB&gt;
</pre></div>
</div>
<p>This examples uses $ZBITGET() to display the binary representation of A.</p>
</section>
<section id="zbitlen">
<h3>$ZBITLEN()<a class="headerlink" href="functions.html#zbitlen" title="Permalink to this heading">¶</a></h3>
<p>Returns the length of a bit string, in bits.</p>
<p>The format for the $ZBITLEN function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZBITLEN(expr)
</pre></div>
</div>
<p>The expression specifies the bit string to examine.</p>
<p><strong>Examples of $ZBITLEN()</strong></p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">BITSTR</span><span class="o">=</span><span class="nv">$zbitstr</span><span class="o">(</span><span class="m">6</span>,1<span class="o">)</span>

YDB&gt;write <span class="nv">$zbitlen</span><span class="o">(</span>BITSTR<span class="o">)</span>
<span class="m">6</span>
YDB&gt;
</pre></div>
</div>
<p>This example displays the length of a bit string of 6 bits.</p>
</section>
<section id="zbitnot">
<h3>$ZBITNOT()<a class="headerlink" href="functions.html#zbitnot" title="Permalink to this heading">¶</a></h3>
<p>Returns a copy of the bit string with each input bit position inverted.</p>
<p>The format for the $ZBITNOT function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZBITNOT(expr)
</pre></div>
</div>
<p>The expression specifies the bit string whose inverted bit pattern becomes the result of the function.</p>
<p><strong>Examples of $ZBITNOT()</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">BITSTRINGA</span><span class="o">=</span><span class="nv">$zbitset</span><span class="o">(</span><span class="nv">$zbitset</span><span class="o">(</span><span class="nv">$zbitstr</span><span class="o">(</span><span class="m">8</span>,0<span class="o">)</span>,2,1<span class="o">)</span>,8,1<span class="o">)</span>
<span class="p">;</span> The binary representation of A is <span class="m">01000001</span>
YDB&gt;for <span class="nv">i</span><span class="o">=</span><span class="m">1</span>:1:8 write <span class="nv">$zbitget</span><span class="o">(</span><span class="nv">$zbitnot</span><span class="o">(</span>BITSTRINGA<span class="o">)</span>,I<span class="o">)</span>
<span class="m">10111110</span>
YDB&gt;
</pre></div>
</div>
<p>This example displays inverted bits for all the bits in BITSTRINGA.</p>
</section>
<section id="zbitor">
<h3>$ZBITOR()<a class="headerlink" href="functions.html#zbitor" title="Permalink to this heading">¶</a></h3>
<p>Performs a bitwise logical OR on two bit strings, and returns a bit string equal in length to the longer of the two arguments (containing set bits in those positions where either or both of the input strings have set bits). Positions that correspond to positions where neither input string has a set bit have cleared bits in the resulting string.</p>
<p>The format for the $ZBITOR function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZBITOR(expr1,expr2)
</pre></div>
</div>
<ul class="simple">
<li><p>The first expression specifies one of the bit strings that is input to the OR operation.</p></li>
<li><p>The second expression specifies the other bit string that is input to the OR operation.</p></li>
</ul>
<p><strong>Examples of $ZBITOR()</strong></p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">BITSTRINGA</span><span class="o">=</span><span class="nv">$zbitset</span><span class="o">(</span><span class="nv">$zbitset</span><span class="o">(</span><span class="nv">$zbitstr</span><span class="o">(</span><span class="m">8</span>,0<span class="o">)</span>,2,1<span class="o">)</span>,8,1<span class="o">)</span>
<span class="p">;</span> The binary representation of A is <span class="m">01000001</span>
YDB&gt;set <span class="nv">BITSTRINGB</span><span class="o">=</span><span class="nv">$zbitset</span><span class="o">(</span><span class="nv">$zbitset</span><span class="o">(</span><span class="nv">$zbitstr</span><span class="o">(</span><span class="m">8</span>,0<span class="o">)</span>,2,1<span class="o">)</span>,7,1<span class="o">)</span>
<span class="p">;</span> The binary representation of B is <span class="m">01000010</span>
YDB&gt;set <span class="nv">BITSTRINGC</span><span class="o">=</span><span class="nv">$zbitor</span><span class="o">(</span>BITSTRINGA,BITSTRINGB<span class="o">)</span>
<span class="p">;</span> A OR <span class="nv">B</span><span class="o">=</span><span class="m">01000011</span>
YDB&gt;write BITSTRINGC
C
YDB&gt;
</pre></div>
</div>
<p>This example displays the result of BITSTRINGA bitwise ORed with BITSTRINGB.</p>
</section>
<section id="zbitset">
<h3>$ZBITSET()<a class="headerlink" href="functions.html#zbitset" title="Permalink to this heading">¶</a></h3>
<p>Returns an edited copy of the input bit string with a specified bit set to the value of the truth-valued expression.</p>
<p>The format for the $ZBITSET function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZBITSET(expr,intexpr,tvexpr)
</pre></div>
</div>
<ul class="simple">
<li><p>The expression specifies the input bit string.</p></li>
<li><p>The integer expression specifies the position of the bit to manipulate. Arguments that are negative, zero, or exceed the length of the bit string produce a run-time error. $ZBIT functions count the first bit as position one (1).</p></li>
<li><p>The truth-valued expression specifies the value to which to set the specified bit (0 or 1).</p></li>
</ul>
<p><strong>Examples of $ZBITSET()</strong></p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">X</span><span class="o">=</span><span class="s2">&quot;A&quot;</span>,Y<span class="o">=</span><span class="nv">$extract</span><span class="o">(</span><span class="nv">$zbitset</span><span class="o">(</span><span class="nv">$char</span><span class="o">(</span><span class="m">0</span><span class="o">)</span>_X,3,1<span class="o">)</span>,2<span class="o">)</span> zwrite
<span class="nv">X</span><span class="o">=</span><span class="s2">&quot;A&quot;</span>
<span class="nv">Y</span><span class="o">=</span><span class="s2">&quot;a&quot;</span>
</pre></div>
</div>
<p>This example changes the case of the ASCII letter A to the corresponding lowercase version.</p>
</section>
<section id="zbitstr">
<h3>$ZBITSTR()<a class="headerlink" href="functions.html#zbitstr" title="Permalink to this heading">¶</a></h3>
<p>Returns a bit string of a specified length with all bit positions initially set to either zero or one.</p>
<p>The format for the $ZBITSTR function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZBITSTR(intexpr[,tvexpr])
</pre></div>
</div>
<ul class="simple">
<li><p>The integer expression specifies the length of the bit string to return; arguments that exceed the maximum length of 253,952 produce a run-time error.</p></li>
<li><p>The optional truth-valued expression specifies the value to which all bit positions should initially be set (0 or 1). If this argument is missing, the bits are set to zero.</p></li>
</ul>
<p><strong>Examples of $ZBITSTR()</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">BITSTR</span><span class="o">=</span><span class="nv">$zbitstr</span><span class="o">(</span><span class="m">6</span>,1<span class="o">)</span>
</pre></div>
</div>
<p>This example sets the value of expression BITSTR to 6 bit with all bits set to 1.</p>
</section>
<section id="zbitxor">
<h3>$ZBITXOR()<a class="headerlink" href="functions.html#zbitxor" title="Permalink to this heading">¶</a></h3>
<p>Performs a bitwise exclusive OR on two bit strings, and returns a bit string equal in length to the shorter of the two arguments (containing set bits in those positions where either (but not both) of the input strings have set bits). Positions that correspond to positions where neither or both input strings have a set bit have cleared bits in the resulting string.</p>
<p>The format for the $ZBITXOR function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZBITXOR(expr1,expr2)
</pre></div>
</div>
<ul class="simple">
<li><p>The first expression specifies one of the bit strings that is input to the XOR operation.</p></li>
<li><p>The second expression specifies the other bit string that is input to the XOR operation.</p></li>
</ul>
<p><strong>Examples of $ZBITXOR()</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">BITSTRINGA</span><span class="o">=</span><span class="nv">$zbitset</span><span class="o">(</span><span class="nv">$zbitset</span><span class="o">(</span><span class="nv">$zbitstr</span><span class="o">(</span><span class="m">8</span>,0<span class="o">)</span>,2,1<span class="o">)</span>,8,1<span class="o">)</span> <span class="p">;</span> The binary representation of A is <span class="m">01000001</span>
YDB&gt;set <span class="nv">BITSTRINGB</span><span class="o">=</span><span class="nv">$zbitset</span><span class="o">(</span><span class="nv">$zbitset</span><span class="o">(</span><span class="nv">$zbitstr</span><span class="o">(</span><span class="m">8</span>,0<span class="o">)</span>,2,1<span class="o">)</span>,7,1<span class="o">)</span><span class="p">;</span> The binary representation of B is <span class="m">01000010</span>
YDB&gt;set <span class="nv">BITSTRINGC</span><span class="o">=</span><span class="nv">$zbitor</span><span class="o">(</span>BITSTRINGA,BITSTRINGB<span class="o">)</span> <span class="p">;</span> A XOR <span class="nv">B</span><span class="o">=</span><span class="m">00000011</span>
YDB&gt;for <span class="nv">I</span><span class="o">=</span><span class="m">1</span>:1:8 write <span class="nv">$zbitget</span><span class="o">(</span>BITSTRINGC,I<span class="o">)</span>
<span class="m">00000011</span>
YDB&gt;
</pre></div>
</div>
<p>This example displays the result of the bitwise XOR of A and B.</p>
</section>
<section id="examples-of-zbit-functions">
<h3>Examples of $ZBIT Functions<a class="headerlink" href="functions.html#examples-of-zbit-functions" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ZCRC(X)
 new R,I,J,B,X1,K
 set R=$zbitstr(8,0)
 for I=1:1:$length(X) Set R=$zbitxor(R,$$bitin($A(X,I)))
 quit $$bitout(R)

bitin(X) ;CONVERT A BYTE TO A BIT STRING
  set X1=$zbitstr(8,0)
  for J=1:1:8 set B=X#2,X=X\2 if B set X1=$zbitset(X1,J,1)
  quit X1

bitout(X) ; CONVERT A BITSTRING TO A NUMBER
  set X1=0
  for K=1:1:8 I $zbitget(X,K) set X1=X1+(2**(K-1))
  quit X1
</pre></div>
</div>
<p>This uses several $ZBIT functions to turn a character into a bit stream and return a coded value.</p>
<p>While this example illustrates the use of several of the $ZBIT functions, the following example produces identical results if you need to code the function illustrated above for production.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>ZCRC(X)
 new R,I,J,B,X1,K
 set R=$zbitstr(8,0)
 for I=1:1:$length(X) Set R=$zbitxor(R,$char(0)_$extract(X,I))
 quit $ascii(R,2)
</pre></div>
</div>
<p>This example illustrates the use of $Char() to specify the number of invalid bits that exist at the end of the character string. In this case there are zero invalid bits.</p>
</section>
</section>
<section id="zchar">
<span id="zchar-function"></span><h2><a class="toc-backref" href="functions.html#id39">$ZCHAR()</a><a class="headerlink" href="functions.html#zchar" title="Permalink to this heading">¶</a></h2>
<p>Returns a string composed of bytes represented by the integer octet values specified in its argument(s).</p>
<p>The format for the $ZCHAR function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZCH[AR](intexpr[,...])
</pre></div>
</div>
<ul class="simple">
<li><p>The integer expression(s) specify the numeric byte value of the byte(s) $ZCHAR() returns.</p></li>
<li><p>YottaDB limits the number of arguments to a maximum of 254. $ZCHAR() provides a means of producing byte sequences. In the UTF-8 mode, $ZCHAR() returns a malformed characters for numeric byte values 128 to 255. In the M mode, $ZCHAR() can create valid UTF-8 characters that includes bytes in the range 128-255.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The output of $ZCHAR() for values of integer expression(s) from 0 through 127 does not vary with choice of the character encoding scheme. This is because 7-bit ASCII is a proper subset of UTF-8 character encoding scheme. The representation of characters returned by $ZCHAR() for values 128 through 255 differ for each character encoding scheme.</p>
</div>
<ul class="simple">
<li><p>When used with $ZASCII(), $ZCHAR() can also perform arithmetic operations on the byte values of the bytes associated with a sequence of octets (8-bit bytes).</p></li>
</ul>
<section id="example-of-zchar">
<h3>Example of $ZCHAR()<a class="headerlink" href="functions.html#example-of-zchar" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zchar</span><span class="o">(</span><span class="m">228</span>,184,187,7<span class="o">)</span>
主
YDB&gt;
</pre></div>
</div>
<p>This example WRITEs the byte sequence represented by 主 and signals the terminal bell.</p>
</section>
</section>
<section id="zcollate">
<h2><a class="toc-backref" href="functions.html#id40">$ZCOLLATE()</a><a class="headerlink" href="functions.html#zcollate" title="Permalink to this heading">¶</a></h2>
<p>Returns the transformed representation of the first argument glvn in a normalized form using the alternative transform specified by the second argument intexpr; the return can be used as an operand to the follows (]) or sorts-after (]]) operator such that, if both operands are in the normalized form, the result is independent of alternative collation.</p>
<p>The format for the $ZCOLLATE function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZCO[LLATE](glvn,intexpr[,{0|1}])
</pre></div>
</div>
<ul class="simple">
<li><p>The subscripted or unsubscripted global or local variable name specifies the key to transform.</p></li>
<li><p>The integer expression specifies the ID of the alternative transform to use.</p></li>
<li><p>The optional third argument specifies whether the transform is to normalized form, by default or if zero (0), or, if one (1), the reverse transform from the normalized to the native form.</p></li>
</ul>
<p>Note that because the forward transform is to the GDS global storage format, the reverse transform always shows a global form. This is not material when the result is used for most comparisons, but for some uses the application might need to remove the leading up-arrow (^).</p>
<p>Please see the section on $ZATRANSFORM() for a similar alternative.</p>
<section id="examples-of-zcollate">
<h3>Examples of $ZCOLLATE()<a class="headerlink" href="functions.html#examples-of-zcollate" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zwrite</span><span class="o">(</span><span class="nv">$zcollate</span><span class="o">(</span><span class="s2">&quot;A(&quot;&quot;foo&quot;&quot;)&quot;</span>,0<span class="o">))</span>
<span class="s2">&quot;A&quot;</span>_<span class="nv">$C</span><span class="o">(</span><span class="m">0</span>,255<span class="o">)</span>_<span class="s2">&quot;foo&quot;</span>_<span class="nv">$C</span><span class="o">(</span><span class="m">0</span>,0<span class="o">)</span>
YDB&gt;write <span class="nv">$zcollate</span><span class="o">(</span><span class="nv">$zcollate</span><span class="o">(</span><span class="s2">&quot;A(&quot;&quot;foo&quot;&quot;)&quot;</span>,0<span class="o">)</span>,0,1<span class="o">)</span>
^A<span class="o">(</span><span class="s2">&quot;foo&quot;</span><span class="o">)</span>
YDB&gt;
</pre></div>
</div>
<p>The first WRITE in this example shows the readable form or the value produced by the $ZCOLLATE(), revealing the details of how YottaDB internally represents this key using default (M) collation. The second WRITE shows how the combination of the transform and reverse transform restores the value to the original representation.</p>
</section>
</section>
<section id="zconvert">
<span id="zconvert-function"></span><h2><a class="toc-backref" href="functions.html#id41">$ZCONVERT()</a><a class="headerlink" href="functions.html#zconvert" title="Permalink to this heading">¶</a></h2>
<p>Returns its first argument as a string or value converted to a different encoding or numeric base. The two argument form changes the encoding for case within the ASCII character set. The three argument form changes the encoding scheme or base. Supported bases are decimal (<code class="code docutils literal notranslate"><span class="pre">&quot;DEC&quot;</span></code> and <code class="code docutils literal notranslate"><span class="pre">&quot;HEX&quot;</span></code>, case insensitive).</p>
<p>The format for the $ZCONVERT function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZCO[NVERT](expr1, expr2,[expr3])
</pre></div>
</div>
<ul class="simple">
<li><p>The first expression is the string or value to convert. $ZCONVERT() generates a run-time error if for Unicode conversion if the string contains a code-point value that is not in the character set, or for base conversion if the value to be converted is out of range.</p></li>
<li><p>In the two argument form, the second expression specifies a code that determines the form of the result.</p></li>
<li><p>In the three-argument form
* The second expression is a code that specifies the character set or base of the first argument.
* The third expression is a code that specifies the character set or base of the result. If the expression does not evaluate to one of the defined codes, $ZCONVERT() generates a run-time argument. The three-argument form for character set conversion is supported only in UTF-8 mode.</p></li>
</ul>
<p>$ZCONVERT() generates a run-time error if the second or third expression is not a valid code or a supported base. Valid bases are case-insensitive <code class="code docutils literal notranslate"><span class="pre">&quot;DEC&quot;</span></code> and <code class="code docutils literal notranslate"><span class="pre">&quot;HEX&quot;</span></code>. The valid (case insensitive) character codes for expr2 in the two-argument form are:</p>
<ul class="simple">
<li><p>U converts the string to UPPER-CASE. “UPPER-CASE” refers to words where all the characters are converted to their “capital letter” equivalents. $ZCONVERT() retains characters already in UPPER-CASE “capital letter” form unchanged.</p></li>
<li><p>L converts the string to lower-case. “lower-case” refers to words where all the letters are converted to their “small letter” equivalents. $ZCONVERT() retains characters already in lower-case or having no lower-case equivalent unchanged.</p></li>
<li><p>T converts the string to title case. “Title case” refers to a string with the first character of each word in upper-case and the remaining characters in the lower-case. $ZCONVERT() retains characters already conforming to “Title case” unchanged. “T” (title case) is not supported in M mode.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When UTF-8 mode is enabled, YottaDB uses the ICU Library to perform case conversion. As mentioned in the Theory of Operation section, the case conversion of the strings occurs according to Unicode code-point values. This may not be the linguistically or culturally correct case conversion. Therefore, you must ensure that the actual case conversion is linguistically and culturally correct for your specific needs. The two-argument form of the $ZCONVERT() function in M mode does not use the ICU Library to perform operations related to the case conversion of the strings.</p>
</div>
<p>The valid (case insensitive) codes for character set encoding for expr2 and expr3 in the three-argument form are:</p>
<ul class="simple">
<li><p>“UTF-8”– a multi-byte variable length Unicode® encoding form.</p></li>
<li><p>“UTF-16LE”– a multi-byte 16-bit Unicode® encoding form in little-endian.</p></li>
<li><p>“UTF-16BE”– a multi-byte 16-bit Unicode® encoding form in big-endian.</p></li>
<li><p>“UTF-16”– a multi-byte 16-bit Unicode® encoding form which uses the same endian level as that of the current system.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As YottaDB Unicode support uses UTF-8, and not other encodings, invoking functions such as $LENGTH() on UTF-16 strings are likely to result in BADCHAR errors. Conversion to and from UTF-16 encodings exists primarily to support input and output of UTF-16 data.</p>
</div>
<p>For numeric conversion:</p>
<ul class="simple">
<li><p>Unsigned numbers in the range 0 through 0xFFFFFFFFFFFFFFFF (64-bit unsigned integers) can be converted. Decimal return values greater than 999999999999999999 (18 decimal digits, YottaDB’s maximum numeric size) are returned as strings.</p></li>
<li><p>Hexadecimal numbers are always converted to positive decimal numbers.</p></li>
<li><p>As conversion from hexadecimal numbers preceded by “-” to decimal is not considered meaningful, if the number to be converted is a “negative” hexadecimal number (e.g., “-F”), the result is 0.</p></li>
<li><p>Conversion from negative decimal numbers to hexadecimal returns the hexadecimal value of the 2’s complement of the number, e.g., the value of $ZCONVERT(-23,”DEC”,”HEX”) is “E9”</p></li>
</ul>
<section id="examples-of-zconvert">
<h3>Examples of $ZCONVERT()<a class="headerlink" href="functions.html#examples-of-zconvert" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zchset</span>
M
YDB&gt;write <span class="nv">$zconvert</span><span class="o">(</span><span class="s2">&quot;Happy New Year&quot;</span>,<span class="s2">&quot;U&quot;</span><span class="o">)</span>
HAPPY NEW YEAR
YDB&gt;
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zchset</span>
UTF-8
YDB&gt;write <span class="nv">$zconvert</span><span class="o">(</span><span class="s2">&quot;HAPPY NEW YEAR&quot;</span>,<span class="s2">&quot;T&quot;</span><span class="o">)</span>
Happy New Year
YDB&gt;
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">x</span><span class="o">=</span><span class="s2">&quot;FFFF&quot;</span> write <span class="nv">$zconvert</span><span class="o">(</span>x,<span class="s2">&quot;hex&quot;</span>,<span class="s2">&quot;dec&quot;</span><span class="o">)</span>
<span class="m">65535</span>
YDB&gt;kill x,y <span class="nb">set</span> <span class="nv">$piece</span><span class="o">(</span>x,<span class="s2">&quot;F&quot;</span>,17<span class="o">)=</span><span class="s2">&quot;&quot;</span> <span class="nb">set</span> <span class="nv">y</span><span class="o">=</span><span class="nv">$zconvert</span><span class="o">(</span>x,<span class="s2">&quot;hex&quot;</span>,<span class="s2">&quot;dec&quot;</span><span class="o">)</span> write x,<span class="s2">&quot; &quot;</span>,y
FFFFFFFFFFFFFFFF <span class="m">18446744073709551615</span>
YDB&gt;kill x,y <span class="nb">set</span> <span class="nv">$piece</span><span class="o">(</span>x,<span class="s2">&quot;9&quot;</span>,19<span class="o">)=</span><span class="s2">&quot;&quot;</span> <span class="nb">set</span> <span class="nv">y</span><span class="o">=</span><span class="nv">$zconvert</span><span class="o">(</span>x,<span class="s2">&quot;dec&quot;</span>,<span class="s2">&quot;hex&quot;</span><span class="o">)</span> write x,<span class="s2">&quot; &quot;</span>,y
<span class="m">999999999999999999</span> DE0B6B3A763FFFF
YDB&gt;
</pre></div>
</div>
<p>Base conversion was added to $ZCONVERT() effective release <a class="reference external" href="https://gitlab.com/YottaDB/DB/YDB/-/tags/r1.30">r1.30</a>.</p>
</section>
</section>
<section id="zdata">
<span id="zdata-function"></span><h2><a class="toc-backref" href="functions.html#id42">$ZDATA()</a><a class="headerlink" href="functions.html#zdata" title="Permalink to this heading">¶</a></h2>
<p>Extends $DATA() to reflect the current alias state of the lvn or name argument to identify alias and alias container variables. It treats variables joined through pass-by-reference as well as TP RESTART variables within a transaction as alias variables. However, it does not distinguish nodes having alias containers among their descendants.</p>
<p>In addition to the four standard M results from $DATA(), $ZDATA() returns:</p>
<ul class="simple">
<li><p>100 for an uninitialized alias or alias container</p></li>
<li><p>101 for an alias or alias container with no descendants</p></li>
<li><p>111 for an alias or alias container with descendants</p></li>
</ul>
<p>Existing $DATA() tests for data and descendants report on alias and alias container variables, as well as other variables in the standard fashion. When an application uses alias and alias container variables $ZDATA() supplies additional information when needed.</p>
<section id="examples-for-zdata">
<h3>Examples for $ZDATA()<a class="headerlink" href="functions.html#examples-for-zdata" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">a</span><span class="o">=</span><span class="m">1</span>,*b<span class="o">(</span><span class="m">1</span><span class="o">)=</span>a,*c<span class="o">=</span>d
YDB&gt;write <span class="nv">$data</span><span class="o">(</span>a<span class="o">)</span>,<span class="s2">&quot; &quot;</span>,<span class="nv">$zdata</span><span class="o">(</span>a<span class="o">)</span>
<span class="m">1</span> <span class="m">101</span>
YDB&gt;write <span class="nv">$data</span><span class="o">(</span>b<span class="o">)</span>,<span class="s2">&quot; &quot;</span>,<span class="nv">$zdata</span><span class="o">(</span>b<span class="o">)</span>
<span class="m">10</span> <span class="m">10</span>
YDB&gt;write <span class="nv">$data</span><span class="o">(</span>c<span class="o">)</span>,<span class="s2">&quot; &quot;</span>,<span class="nv">$zdata</span><span class="o">(</span>c<span class="o">)</span>
<span class="m">0</span> <span class="m">100</span>
YDB&gt;write <span class="nv">$data</span><span class="o">(</span>d<span class="o">)</span>,<span class="s2">&quot; &quot;</span>,<span class="nv">$zdata</span><span class="o">(</span>d<span class="o">)</span>
<span class="m">0</span> <span class="m">100</span>
YDB&gt;write <span class="nv">$data</span><span class="o">(</span>b<span class="o">(</span><span class="m">1</span><span class="o">))</span>,<span class="s2">&quot; &quot;</span>,<span class="nv">$zdata</span><span class="o">(</span>b<span class="o">(</span><span class="m">1</span><span class="o">))</span>
<span class="m">1</span> <span class="m">101</span>
YDB&gt;set b<span class="o">(</span><span class="m">1</span>,2<span class="o">)=</span><span class="m">2</span>
YDB&gt;write <span class="nv">$data</span><span class="o">(</span>b<span class="o">(</span><span class="m">1</span><span class="o">))</span>,<span class="s2">&quot; &quot;</span>,<span class="nv">$zdata</span><span class="o">(</span>b<span class="o">(</span><span class="m">1</span><span class="o">))</span>
<span class="m">11</span> <span class="m">111</span>
YDB&gt;write <span class="nv">$data</span><span class="o">(</span>b<span class="o">(</span><span class="m">1</span>,2<span class="o">))</span>,<span class="s2">&quot; &quot;</span>,<span class="nv">$zdata</span><span class="o">(</span>b<span class="o">(</span><span class="m">1</span>,2<span class="o">))</span>
<span class="m">1</span> <span class="m">1</span>
YDB&gt;
</pre></div>
</div>
</section>
</section>
<section id="zdate">
<span id="zdate-function"></span><h2><a class="toc-backref" href="functions.html#id43">$ZDATE()</a><a class="headerlink" href="functions.html#zdate" title="Permalink to this heading">¶</a></h2>
<p>Returns a date and/or time formatted as text based on an argument formatted in the manner of $HOROLOG. For information on the format of $HOROLOG, refer to <a class="reference external" href="isv.html">Chapter 8: “Intrinsic Special Variables”</a>.</p>
<p>The format for the $ZDATE function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZD[ATE](expr1[,expr2[,expr3[,expr4]]]])
</pre></div>
</div>
<ul class="simple">
<li><p>The first expression specifies in $HOROLOG format the date and/or time that $ZDATE() returns in text format. If the output requires only the date or the time, the other piece of the argument that is delimited by a comma (,) may be null.</p></li>
<li><p>The optional second expression specifies a string providing $ZDATE() with a “picture” of the desired output format. If this argument is missing or null, $ZDATE() uses the default format string “MM/DD/YY”. If the optional second expression exceeds 64 characters, $ZDATE() generates a run-time error.</p></li>
<li><p>The optional third expression specifies a list of 12 month codes, separated by commas (,), that $ZDATE() uses in formatting text months called for by the “MON” picture, (that is, $ZDATE() outputs $PIECE(expr3,”,”,month-number) when “MON” appears in the second expression). If this argument is missing or null, $ZDATE() uses three-character English abbreviations for months.</p></li>
<li><p>The optional fourth expression specifies a list of seven day codes, separated by commas (,), which $ZDATE() uses in formatting text days of the week called for by the “DAY” picture, $ZDATE() outputs $PIECE (expr4,”,”,day-of-week-number) when “DAY” appears in the second expression; if this argument is missing or null, $ZDATE() uses three-character English abbreviations for days of the week.</p></li>
<li><p>$ZDATE() returns 31-Dec-1840 as a date representation of day 0.</p></li>
</ul>
<p>$ZDATE() provides an easy and flexible tool for putting M internal date/time ($HOROLOG) formats into more user-friendly formats.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>$ZDATE() generates an error for input date values greater than 31-Dec-999999 (364570088) or less than 01-JAN-1840 (-365) and for time values greater than a second before midnight (86399) or less than 0 (zero).</p>
</div>
<p>The Intrinsic Special Variable $ZDATEFORM determines the output format for years. The default value is zero (0), in which case $ZDATE() with one argument (no format specification) uses a “YY” (two digit) format for all years. If $ZDATEFORM is one (1), a “YYYY” (four digit) format is used for years later than 1999. For all other values of $ZDATEFORM, “YYYY” (four digit) format is used for all years. $ZDATEFORM does not affect $ZDATE() when the format argument is specified.</p>
<p>The following table summarizes the usage of $ZDATE() when only first argument is specified.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 41%" />
<col style="width: 59%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Value of $DATEFORM</p></th>
<th class="head"><p>$ZDATE() Output Format</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>2 digits</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>4 digits for years 2000 and after</p>
<p>2 digits otherwise (for years ranging between 1840, 1999)</p>
</td>
</tr>
<tr class="row-even"><td><p>other</p></td>
<td><p>4 digits</p></td>
</tr>
</tbody>
</table>
<section id="zdate-format-specification-elements">
<h3>$ZDATE() Format Specification Elements<a class="headerlink" href="functions.html#zdate-format-specification-elements" title="Permalink to this heading">¶</a></h3>
<p>This section lists the $ZDATE format specification elements. $ZDATE() format specifications must appear in upper case. When any alphabetic characters in format specifications are in lower case, $ZDATE() generates a run-time error.</p>
<p>YY: Outputs the rightmost two digits of the year.</p>
<p>YEAR: Outputs the year as a four-digit number.</p>
<p>YYYYYY: Outputs the year as a six-digit number.</p>
<p>MM: Outputs the month as a two-digit zero-filled number between 01 and 12.</p>
<p>MON: Outputs the month as a three-letter abbreviation. (You can modify the output further using expr3).</p>
<p>DD: Outputs the day of the month as a two-digit zero-filled number between 01 and 31.</p>
<p>DAY: Outputs the day of the week as a three-letter abbreviation. (You can modify the output further using expr4).</p>
<p>24: Outputs the hour of the day as a zero-filled number between 00 and 23.</p>
<p>12: Outputs the hour of the day as a zero-filled number between 01 and 12.</p>
<p>60: Outputs the minute of the hour as a zero-filled number between 00 and 59.</p>
<p>SS: Outputs the second of the minute as a zero-filled number between 00 and 59.</p>
<p>AM: Outputs the letters AM and PM depending on the time.</p>
<p>+: Inserts a plus sign (+) in the output string</p>
<p>-: Inserts a minus sign (-) in the output string.</p>
<p>.: Inserts a period (.) in the output string.</p>
<p>,: Inserts a comma (,)in the output string.</p>
<p>/: Inserts a slash (/) in the output string.</p>
<p>:: Inserts a colon (:) in the output string.</p>
<p>;: Inserts a semi-colon (;) in the output string.</p>
<p>*: Inserts an asterisk (*) in the output string.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A blank space inserts a blank space in the output string.</p>
</div>
</section>
<section id="examples-of-zdate">
<h3>Examples of $ZDATE()<a class="headerlink" href="functions.html#examples-of-zdate" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$horolog</span>,!,<span class="nv">$zdate</span><span class="o">(</span><span class="nv">$H</span><span class="o">)</span>
<span class="m">62109</span>,60946
<span class="m">01</span>/18/18
YDB&gt;
</pre></div>
</div>
<p>This displays $HOROLOG and then uses $ZDATE() to display today’s date. The output shown would appear if today were the eighteenth day of January, 2018.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zdate</span><span class="o">(</span><span class="nv">$H</span>,<span class="s2">&quot;DD-MON-YEAR&quot;</span><span class="o">)</span>
<span class="m">18</span>-JAN-2018
YDB&gt;
</pre></div>
</div>
<p>This uses the second argument to specify a text format different from the default.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">m</span><span class="o">=</span><span class="s2">&quot;Januar,Februar,Marz,April,Mai,Juni,Juli,August,&quot;</span>
YDB&gt;set <span class="nv">m</span><span class="o">=</span>m_<span class="s2">&quot;September,October,November,Dezember&quot;</span>
YDB&gt;write <span class="nv">$zdate</span><span class="o">(</span><span class="nv">$horolog</span>,<span class="s2">&quot;DD-MON-YEAR&quot;</span>,m<span class="o">)</span>
<span class="m">18</span>-Januar-2018
YDB&gt;
</pre></div>
</div>
<p>This is similar to the prior example, however it uses the third argument to specify the months in German.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">d</span><span class="o">=</span><span class="s2">&quot;Dimanche,Lundi,Mardi,Mercredi,Jeudi,Vendredi,Samedi&quot;</span>
YDB&gt;write <span class="nv">$zdate</span><span class="o">(</span><span class="nv">$H</span>,<span class="s2">&quot;DAY, DD/MM/YY&quot;</span>,<span class="s2">&quot;&quot;</span>,d<span class="o">)</span>
Mardi, <span class="m">18</span>/01/2018
YDB&gt;
</pre></div>
</div>
<p>This example displays the eighteenth of January, however it uses the fourth argument to specify the days of the week in French.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write !,<span class="nv">$zdate</span><span class="o">(</span><span class="nv">$H</span>,<span class="s2">&quot;12:60:SS AM&quot;</span><span class="o">)</span>
<span class="m">10</span>:35:51 PM
YDB&gt;
</pre></div>
</div>
<p>This example shows hours, minutes, and seconds in a 12 hour clock with an AM/PM indicator.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write !,<span class="nv">$zdate</span><span class="o">(</span><span class="s2">&quot;,36524&quot;</span>,<span class="s2">&quot;24-60&quot;</span><span class="o">)</span>
<span class="m">10</span>-08
YDB&gt;
</pre></div>
</div>
<p>This example shows hours and minutes on a 24 hour clock. Notice that the first argument must provide the time in the second comma delimiter piece to match $HOROLOG format.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zdateform</span>
<span class="m">0</span>
YDB&gt;write <span class="nv">$zdate</span><span class="o">(</span><span class="nv">$H</span><span class="o">)</span>
<span class="m">01</span>/18/18
YDB&gt;set <span class="nv">$zdateform</span><span class="o">=</span><span class="m">1</span>
YDB&gt;write <span class="nv">$zdate</span><span class="o">(</span><span class="nv">$horolog</span><span class="o">)</span>
<span class="m">01</span>/18/2018
YDB&gt;write <span class="nv">$zdate</span><span class="o">(</span><span class="nv">$horolog</span>,<span class="s2">&quot;MM/DD/YY&quot;</span><span class="o">)</span>
<span class="m">01</span>/18/18
</pre></div>
</div>
<p>This example converts the output format for years from the default (“YY”) format to the four digit format (“YYYY”) using the Intrinsic Special Variable $ZDATEFORM.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zdate</span><span class="o">(</span><span class="m">123456789</span>,<span class="s2">&quot;DAY MON DD, YYYYYY&quot;</span><span class="o">)</span>
FRI MAR <span class="m">17</span>, <span class="m">339854</span>
YDB&gt;
</pre></div>
</div>
<p>This example displays year as a six-digit number.</p>
</section>
</section>
<section id="zextract">
<span id="zextract-function"></span><h2><a class="toc-backref" href="functions.html#id44">$ZEXTRACT()</a><a class="headerlink" href="functions.html#zextract" title="Permalink to this heading">¶</a></h2>
<p>Returns a byte sequence from a given sequence of octets (8-bit bytes).</p>
<p>The format for the $ZEXTRACT function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZE[XTRACT](expr[,intexpr1[,intexpr2]])
</pre></div>
</div>
<ul class="simple">
<li><p>The expression specifies a sequence of octets (8-bit bytes) from which $ZEXTRACT() derives a byte sequence.</p></li>
<li><p>The first optional integer expression (second argument) specifies the starting byte position in the byte string. If the starting position is beyond the end of the expression, $ZEXTRACT() returns an empty string. If the starting position is zero (0) or negative, $ZEXTRACT() starts at the first byte position in the expression; if this argument is omitted, $ZEXTRACT() returns the first byte. $ZEXTRACT() numbers byte positions starting at one (1) (the first byte of a sequence of octets (8-bit bytes) is at position one (1)).</p></li>
<li><p>The second optional integer expression (third argument) specifies the ending byte position for the result. If the ending position is beyond the end of the expression, $ZEXTRACT() stops with the last byte of the expression. If the ending position precedes the starting position, $ZEXTRACT() returns null. If this argument is omitted, $ZEXTRACT() returns one byte.</p></li>
<li><p>$ZEXTRACT() provides a tool for manipulating strings based on byte positions.</p></li>
<li><p>As $ZEXTRACT() operates on bytes, it can produce a string that is not well-formed according to the UTF-8 character set.</p></li>
</ul>
<section id="examples-of-zextract">
<h3>Examples of $ZEXTRACT()<a class="headerlink" href="functions.html#examples-of-zextract" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;Set <span class="nv">A</span><span class="o">=</span><span class="s2">&quot;主要雨在西班牙停留在平原&quot;</span>

YDB&gt;For <span class="nv">i</span><span class="o">=</span><span class="m">0</span>:1:<span class="nv">$zlength</span><span class="o">(</span>A<span class="o">)</span>
YDB&gt;write !,<span class="nv">$zascii</span><span class="o">(</span><span class="nv">$zextract</span><span class="o">(</span>A,i<span class="o">))</span>,<span class="s2">&quot;|&quot;</span>
YDB&gt;
</pre></div>
</div>
<p>This example displays the numeric byte sequence of the sequence of octets (“主要雨在西班牙停留在平原”).</p>
</section>
</section>
<section id="zfind">
<span id="zfind-function"></span><h2><a class="toc-backref" href="functions.html#id45">$ZFIND()</a><a class="headerlink" href="functions.html#zfind" title="Permalink to this heading">¶</a></h2>
<p>Returns an integer byte position that locates the occurrence of a byte sequence within a sequence of octets(8-bit bytes).</p>
<p>The format of the $ZFIND function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZF[IND](expr1,expr2[,intexpr])
</pre></div>
</div>
<ul class="simple">
<li><p>The first expression specifies the sequence of octets (8-bit bytes) in which $ZFIND() searches for the byte sequence.</p></li>
<li><p>The second expression specifies the byte sequence for which $ZFIND() searches.</p></li>
<li><p>The optional integer expression identifies the starting byte position for the $ZFIND() search. If this argument is missing, zero (0), or negative, $ZFIND() begins to search from the first position of the sequence of octets (8-bite bytes).</p></li>
<li><p>If $ZFIND() locates the byte sequence, it returns the position after its last byte. If the end of the byte sequence coincides with the end of the the sequence of octets (expr1), it returns an integer equal to the byte length of the expr1 plus one ($L(expr1)+1).</p></li>
<li><p>If $ZFIND() does not locate the byte sequence, it returns zero (0).</p></li>
<li><p>$ZFIND() provides a tool to locate byte sequences. The ([) operator and the two-argument $ZLENGTH() are other tools that provide related functionality.</p></li>
</ul>
<section id="examples-of-zfind">
<h3>Examples of $ZFIND()<a class="headerlink" href="functions.html#examples-of-zfind" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zfind</span><span class="o">(</span><span class="s2">&quot;主要雨&quot;</span>,<span class="nv">$zchar</span><span class="o">(</span><span class="m">187</span><span class="o">))</span>
<span class="m">4</span>
YDB&gt;
</pre></div>
</div>
<p>This example uses $ZFIND() to WRITE the position of the first occurrence of the numeric byte code 150. The return of 3 gives the position after the “found” byte.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zfind</span><span class="o">(</span><span class="s2">&quot;新年好&quot;</span>,<span class="nv">$zchar</span><span class="o">(</span><span class="m">229</span><span class="o">)</span>,5<span class="o">)</span>
<span class="m">8</span>
YDB&gt;
</pre></div>
</div>
<p>This example uses $ZFIND() to WRITE the position of the next occurrence of the byte code 229 starting in byte position five.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>YDB&gt;set t=1 for  set t=$zfind(&quot;新年好&quot;,$zchar(230,150,176),t) quit:&#39;t  write !,t
4
YDB&gt;
</pre></div>
</div>
<p>This example uses a loop with $ZFIND() to locate all the occurrences of the byte sequence $ZCHAR(230,150,176) in the sequence of octets (“新年好”). The $ZFIND() returns 4 giving the position after the occurrence of byte sequence $ZCHAR(230,150,176).</p>
</section>
</section>
<section id="zgetjpi">
<h2><a class="toc-backref" href="functions.html#id46">$ZGETJPI()</a><a class="headerlink" href="functions.html#zgetjpi" title="Permalink to this heading">¶</a></h2>
<p>Returns job or process information of the specified process. The format for the $ZGETJPI function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZGETJPI(expr1,expr2)
</pre></div>
</div>
<ul class="simple">
<li><p>expr1 identifies the PID of the target job. If expr1 is an empty string (“”), $ZGETJPI() returns information about the current process.</p></li>
<li><p>expr2 specifies the item keyword identifying the type of information returned; keywords may be upper, lower, or mixed-case. The keywords are as follows:</p></li>
</ul>
<p><strong>ZGETJPI()</strong></p>
<table class="docutils align-default">
<colgroup>
<col style="width: 17%" />
<col style="width: 83%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keywords</p></th>
<th class="head"><p>Data Returned</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ISPROCALIVE</p></td>
<td><p>Determines whether the specified process is alive.</p></td>
</tr>
<tr class="row-odd"><td><p>CPUTIM</p></td>
<td><p>Total process and child CPU time used in hundredths of a second.</p></td>
</tr>
<tr class="row-even"><td><p>CSTIME</p></td>
<td><p>System time of child processes</p></td>
</tr>
<tr class="row-odd"><td><p>CUTIME</p></td>
<td><p>User time of child processes</p></td>
</tr>
<tr class="row-even"><td><p>STIME</p></td>
<td><p>Process system time</p></td>
</tr>
<tr class="row-odd"><td><p>UTIME</p></td>
<td><p>Process user time</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>Note that the $ZGETJPI() retrieves process time measurements (CPUTIM, CSTIME, CUTIME, STIME, and UTIME) only of the current process ($JOB). The “child” process time includes ZSYSTEM and PIPE device sub-processes (only after the PIPE CLOSEs), but excludes processes created by JOB commands.</p></li>
<li><p>$ZGETJPI() provides a tool for examining the characteristics of a UNIX process. Accessing information about processes belonging to other users requires certain UNIX privileges. Consult your system manager if you require additional privileges.</p></li>
</ul>
<section id="examples-of-zgetjpi">
<h3>Examples of $ZGETJPI()<a class="headerlink" href="functions.html#examples-of-zgetjpi" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zgetjpi</span><span class="o">(</span><span class="m">1975</span>,<span class="s2">&quot;isprocalive&quot;</span><span class="o">)</span>
<span class="m">1</span>
YDB&gt;
</pre></div>
</div>
<p>This uses $ZGETJPI() to determine whether process 1975 is alive.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">t</span><span class="o">=</span><span class="nv">$zgetjpi</span><span class="o">(</span><span class="s2">&quot;&quot;</span>,<span class="s2">&quot;cputim&quot;</span><span class="o">)</span>
YDB&gt;do ^bench write <span class="nv">$zgetjpi</span><span class="o">(</span><span class="s2">&quot;&quot;</span>,<span class="s2">&quot;cputim&quot;</span><span class="o">)</span>-t
<span class="m">1738</span>
YDB&gt;
</pre></div>
</div>
<p>This uses $ZGETJPI() to measure the actual CPU time, measured in hundredths of a second, consumed by performing the BENCH routine.</p>
</section>
</section>
<section id="zjobexam">
<h2><a class="toc-backref" href="functions.html#id47">$ZJOBEXAM()</a><a class="headerlink" href="functions.html#zjobexam" title="Permalink to this heading">¶</a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZJOBEXAM([expr1[,expr2]])
</pre></div>
</div>
<p>Returns the full specification of the file specified by the optional expr1 argument into which the function places a ZSHOW output specified by expr2. The return value is the name of the file. YottaDB reports each $ZJOBEXAM() to the operator log facility, along with its file specification.</p>
<p>The optional expr1 argument is a template output device specification. It can be a device, a file directory, or a file name. The template is an expression that is pre-processed to create a file specification as the target for the ZSHOW. The preprocessing is equivalent to $ZPARSE(), as illustrated by the following M code:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set deffn=&quot;YDB_JOBEXAM.ZSHOW_DMP\_&quot;_$JOB\_&quot;_&quot;_&lt;cntr&gt;
set filespec=$zparse(expr1,&quot;&quot;,deffn)
</pre></div>
</div>
<p>The $ZJOBEXAM() does not trigger error processing except when there is a problem storing its return value, so no error is reported to the process until after any dump is complete. In the event of any error encountered during the $ZJOBEXAM(), YottaDB sends an appropriate message to operator log facility and returns control to the caller. Note that this special error handling applies only to the $ZJOBEXAM(), and is not a property of the $ZINTERRUPT interrupt handler, which uses $ZJOBEXAM() by default.</p>
<p>Defaulting to <code class="code docutils literal notranslate"><span class="pre">&quot;*&quot;</span></code>, expr2 specifies the <a class="reference internal" href="commands.html#zshow-info-codes"><span class="std std-ref">ZSHOW Information Codes</span></a> of data to be included in the output. To specify expr2 while allowing expr1 to default, specify <code class="code docutils literal notranslate"><span class="pre">&quot;&quot;</span></code> as the value of expr1. Invalid codes in expr2 are ignored, and can result in empty dump files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As ZSHOW output files contain process-internal data that may include confidential information, e.g., in local variables, ensure that output files have access protection appropriate to their content.</p>
</div>
<section id="examples-of-zjobexam">
<h3>Examples of $ZJOBEXAM()<a class="headerlink" href="functions.html#examples-of-zjobexam" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">x</span><span class="o">=</span><span class="nv">$zjobexam</span><span class="o">()</span>
YDB&gt;write x
/home/ydbuser1/YDB_JOBEXAM.ZSHOW_DMP_28760_1
YDB&gt;set <span class="nv">x</span><span class="o">=</span><span class="nv">$zjobexam</span><span class="o">(</span><span class="s2">&quot;isvonly.txt&quot;</span>,<span class="s2">&quot;I&quot;</span><span class="o">)</span>
YDB&gt;write x
/home/ydbuser1/isvonly.txt
YDB&gt;
</pre></div>
</div>
<p>Shows default file name and type of the files created containing the zshow dump information and the difference when the name and type are specified.</p>
<p>The second parameter was added to $ZJOBEXAM() effective release <a class="reference external" href="https://gitlab.com/YottaDB/DB/YDB/-/tags/r1.30">r1.30</a>.</p>
</section>
</section>
<section id="zjustify">
<span id="zjustify-function"></span><h2><a class="toc-backref" href="functions.html#id48">$ZJUSTIFY()</a><a class="headerlink" href="functions.html#zjustify" title="Permalink to this heading">¶</a></h2>
<p>Returns a formatted and fixed length byte sequence.</p>
<p>The format for the $ZJUSTIFY function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZJ[USTIFY](expr,intexpr1[,intexpr2])
</pre></div>
</div>
<ul class="simple">
<li><p>The expression specifies the sequence of octets formatted by $ZJUSTIFY().</p></li>
<li><p>The first integer expression (second argument) specifies the minimum size of the resulting byte sequence.</p></li>
<li><p>If the first integer expression is larger than the length of the expression, $ZJUSTIFY() right-justifies the expression to a byte sequence of the specified length by adding leading spaces. Otherwise, $ZJUSTIFY() returns the expression unmodified unless specified by the second integer argument.</p></li>
<li><p>The behavior of the optional second expression (third argument) for $ZJUSTIFY() is the same at $JUSTIFY(). For more information, refer to “$Justify()”.</p></li>
<li><p>When the second argument is specified and the first argument evaluates to a fraction between -1 and 1, $ZJUSTIFY() returns a number with a leading zero (0) before the decimal point (.).</p></li>
<li><p>$ZJUSTIFY() fills a sequence of octets to create a fixed length byte sequence. However, if the length of the specified expression exceeds the specified byte size, $ZJUSTIFY() does not truncate the result (although it may still round based on the third argument). When required, $ZEXTRACT() performs truncation.</p></li>
</ul>
<p>$ZJUSTIFY() optionally rounds the portion of the result after the decimal point. In the absence of the third argument, $ZJUSTIFY() does not restrict the evaluation of the expression. In the presence of the third (rounding) argument, $JUSTIFY() evaluates the expression as a numeric value. The rounding algorithm can be understood as follows:</p>
<ul class="simple">
<li><p>If necessary, the rounding algorithm extends the expression to the right with 0s (zeros) to have at least one more digit than specified by the rounding argument.</p></li>
<li><p>Then, it adds 5 (five) to the digit position after the digit specified by the rounding argument.</p></li>
<li><p>Finally, it truncates the result to the specified number of digits. The algorithm rounds up when excess digits specify a half or more of the last retained digit and rounds down when they specify less than a half.</p></li>
</ul>
<section id="examples-of-zjustify">
<h3>Examples of $ZJUSTIFY()<a class="headerlink" href="functions.html#examples-of-zjustify" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="s2">&quot;123456789012345&quot;</span>,! write <span class="nv">$zjustify</span><span class="o">(</span><span class="s2">&quot;新年好&quot;</span>,15<span class="o">)</span>,!,<span class="nv">$zjustify</span><span class="o">(</span><span class="s2">&quot;新年好&quot;</span>,5<span class="o">)</span>
<span class="m">123456789012345</span>
     新年好
新年好
YDB&gt;
</pre></div>
</div>
<p>This example uses $ZJUSTIFY() to display the sequence of octets represented by “新年好” in fields of 15 space octets and 5 space octets. Because the byte length of “新年好” is 9, it exceeds 5 spaces, the result overflows the specification.</p>
</section>
</section>
<section id="zlength">
<span id="zlength-function"></span><h2><a class="toc-backref" href="functions.html#id49">$ZLENGTH()</a><a class="headerlink" href="functions.html#zlength" title="Permalink to this heading">¶</a></h2>
<p>Returns the length of a sequence of octets measured in bytes, or in “pieces” separated by a delimiter specified by one of its arguments.</p>
<p>The format for the $ZLENGTH function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZL[ENGTH](expr1[,expr2])
</pre></div>
</div>
<ul class="simple">
<li><p>The first expression specifies the sequence of octets that $ZLENGTH() “measures”.</p></li>
<li><p>The optional second expression specifies the delimiter that defines the measure; if this argument is missing, $ZLENGTH() returns the number of bytes in the sequence of octets.</p></li>
<li><p>If the second argument is present and not null, $ZLENGTH() returns one more than the count of the number of occurrences of the second byte sequence in the first byte sequence; if the second argument is null, the M standard for the analogous $LENGTH() dictates that $ZLENGTH() returns a zero (0).</p></li>
<li><p>$ZLENGTH() provides a tool for determining the lengths of a sequence of octets in two ways - characters and delimited substrings(pieces). The two argument $ZLENGTH() returns the number of existing pieces, while the one argument returns the number of characters.</p></li>
</ul>
<section id="examples-of-zlength">
<h3>Examples of $ZLENGTH()<a class="headerlink" href="functions.html#examples-of-zlength" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zlength</span><span class="o">(</span><span class="s2">&quot;主要雨在西班牙停留在平原&quot;</span><span class="o">)</span>
<span class="m">36</span>
YDB&gt;
</pre></div>
</div>
<p>This uses $ZLENGTH() to WRITE the length in bytes of the sequence of octets “主要雨在西班牙停留在平原”.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">x</span><span class="o">=</span><span class="s2">&quot;主&quot;</span>_<span class="nv">$zchar</span><span class="o">(</span><span class="m">63</span><span class="o">)</span>_<span class="s2">&quot;要&quot;</span>_<span class="nv">$zchar</span><span class="o">(</span><span class="m">63</span><span class="o">)</span>_<span class="s2">&quot;雨&quot;</span>
YDB&gt;write <span class="nv">$zlength</span><span class="o">(</span>x,<span class="nv">$zchar</span><span class="o">(</span><span class="m">63</span><span class="o">))</span>
<span class="m">3</span>
YDB&gt;
</pre></div>
</div>
<p>This uses $ZLENGTH() to WRITE the number of pieces in a sequence of octets, as delimited by the byte code $ZCHAR(63).</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">x</span><span class="o">=</span><span class="nv">$zchar</span><span class="o">(</span><span class="m">63</span><span class="o">)</span>_<span class="s2">&quot;主&quot;</span>_<span class="nv">$zchar</span><span class="o">(</span><span class="m">63</span><span class="o">)</span>_<span class="s2">&quot;要&quot;</span>_<span class="nv">$zchar</span><span class="o">(</span><span class="m">63</span><span class="o">)</span>_<span class="s2">&quot;雨&quot;</span>_<span class="nv">$zchar</span><span class="o">(</span><span class="m">63</span><span class="o">)</span><span class="s2">&quot;</span>
<span class="s2">YDB&gt;write </span><span class="nv">$zlength</span><span class="s2">(x,</span><span class="nv">$zchar</span><span class="s2">(63))</span>
<span class="s2">5</span>
<span class="s2">YDB&gt;</span>
</pre></div>
</div>
<p>This also uses $ZLENGTH() to WRITE the number of pieces in a sequence of octets, as delimited by byte code $ZCHAR(63). Notice that YottaDB counts both the empty beginning and ending pieces in the string because they are both delimited.</p>
</section>
</section>
<section id="zmessage">
<span id="zmessage-function"></span><h2><a class="toc-backref" href="functions.html#id50">$ZMESSAGE()</a><a class="headerlink" href="functions.html#zmessage" title="Permalink to this heading">¶</a></h2>
<p>Returns a message string associated with a specified status code .</p>
<p>The format for the $ZMESSAGE function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZM[ESSAGE](intexpr)
</pre></div>
</div>
<p>The integer expression specifies the status code for which $ZMESSAGE() returns error message text .</p>
<p>$ZMESSAGE() provides a tool for examining the message and/or mnemonic associated with a particular message code as reported in $ZSTATUS.</p>
<p>The <a class="reference internal" href="isv.html#zstatus-isv"><span class="std std-ref">$ZSTATUS</span></a> Intrinsic Special Variable holds the message code and the message of the last non-Direct Mode YottaDB error.</p>
<section id="examples-of-zmessage">
<h3>Examples of $ZMESSAGE()<a class="headerlink" href="functions.html#examples-of-zmessage" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zmessage</span><span class="o">(</span><span class="m">150373210</span><span class="o">)</span>
%YDB-E-DIVZERO, Attempt to divide by zero
YDB&gt;
</pre></div>
</div>
<p>This uses $ZMESSAGE() to display the message string corresponding to code 150373210.</p>
</section>
</section>
<section id="zparse">
<span id="zparse-function"></span><h2><a class="toc-backref" href="functions.html#id51">$ZPARSE()</a><a class="headerlink" href="functions.html#zparse" title="Permalink to this heading">¶</a></h2>
<p>Expands a file name to a full pathname and then returns the full pathname or one of its fields (directory, name, or extension).</p>
<p>The format for the $ZPARSE function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZPARSE(expr1[,expr2[,expr3[,expr4[,expr5]]]])
</pre></div>
</div>
<ul class="simple">
<li><p>The first expression specifies the file name; if the file name is not valid, $ZPARSE() returns a null string; if the file name contains a wildcard (* and/or ?), $ZPARSE() returns a file name containing the wildcard(s).</p></li>
<li><p>The optional second expression specifies the field of the pathname that $ZPARSE() returns; if this argument is missing or null, $ZPARSE() returns a full pathname constructed using default values in place of any fields missing for directory, file and extension.</p></li>
<li><p>The optional third and fourth expressions specify default values to use during file name expansion for missing fields (directory, name, or extension), if any, in the original file name. For any field missing in the original file name specified in expr1, $ZPARSE() will attempt to substitute the corresponding field from expr3; if that field is not present in expr3, $ZPARSE() will attempt to use the corresponding field from expr4.</p></li>
<li><p>If the file extension is missing from all three of expr1, expr3, and expr4, $ZPARSE() will return a null string for the corresponding field. If the file or directory is missing from all three of expr1, expr3, and expr4, $ZPARSE() will substitute the information from your current working directory.</p></li>
<li><p>The optional fifth expression specifies the mode or type of parse that $ZPARSE() performs.</p></li>
</ul>
<p>$ZPARSE() provides a tool for verifying that a file name is syntactically correct, for examining specific fields of a file name, and for filling in missing pieces in a partial specification based on a hierarchy of defaults. For information about determining whether a file exists, see <a class="reference internal" href="functions.html#zsearch-function"><span class="std std-ref">$ZSEARCH()</span></a>.</p>
<p>$ZPARSE() arguments, after the first, are optional. If you use no other arguments, a single argument is sufficient. However, if you use selected arguments $ZPARSE() requires that null strings (“”) be filled in for the unspecified arguments.</p>
<p>The acceptable keywords for the second argument are:</p>
<p>“DIRECTORY”: Directory name</p>
<p>“NAME”: File name (excluding file extension)</p>
<p>“TYPE”: File type extension</p>
<p>The keywords may be entered in either upper or lower case. Variables that evaluate to these strings and indirection are acceptable for argument two. When the keywords themselves appear as string literals, they must be enclosed in quotation marks (” “).</p>
<p>The following guidelines must be followed in constructing arguments one, three and four:</p>
<ul class="simple">
<li><p>Directory specifications must end in a slash; anything after the final slash in the directory specification is assumed to be part of the name specification.</p></li>
<li><p>A file name with an extension must include at least one character to the left of the period (.). Thus, “/user/.login” refers to the file named “.login”, while “/usr/taxes.c” refers to a file named “taxes” with the extension “c”. If a file name includes more than one period, the extension includes all letters to the right of the rightmost period.</p></li>
</ul>
<p>The keywords for the fifth argument $ZPARSE() are:</p>
<p>NULL (“”): Returns a full file-specification or device</p>
<p>“SYNTAX_ONLY”: Disables checking for the existence of the directory or device.</p>
<p>“SYMLINK”: Returns the file name of the actual file rather than the symbolic link, with $ZPARSE() following the link or chain of links.</p>
<p>The SYMLINK keyword was added to YottaDB effective release <a class="reference external" href="https://gitlab.com/YottaDB/DB/YDB/-/tags/r1.32">r1.32</a>.</p>
<section id="examples-of-zparse">
<h3>Examples of $ZPARSE()<a class="headerlink" href="functions.html#examples-of-zparse" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zparse</span><span class="o">(</span><span class="s2">&quot;test&quot;</span>,<span class="s2">&quot;&quot;</span>,<span class="s2">&quot;/usr/work/&quot;</span>,<span class="s2">&quot;dust.lis&quot;</span><span class="o">)</span>
/usr/work/test.lis
YDB&gt;
</pre></div>
</div>
<p>This uses $ZPARSE() to demonstrate defaulting using the third and fourth arguments. The result gets the directory field from the third expression, the name from the first expression, and the type from the fourth expression.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;r!,<span class="s2">&quot;file :&quot;</span>,f w ?20,<span class="nv">$zparse</span><span class="o">(</span>f,<span class="s2">&quot;directory&quot;</span><span class="o">)</span>
file: test.list /usr/work/
YDB&gt;
</pre></div>
</div>
<p>This uses $ZPARSE() to display the directory for the file name entered as input at the prompt file: , in this case, the current working directory.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> /usr/work/me
$ ydb
YDB&gt;write <span class="nv">$zparse</span><span class="o">(</span><span class="s2">&quot;test&quot;</span>,<span class="s2">&quot;&quot;</span>,<span class="s2">&quot;x.list&quot;</span>,<span class="s2">&quot;y.c&quot;</span><span class="o">)</span>/usr/work/me/test.lis
YDB&gt;write <span class="nv">$zparse</span><span class="o">(</span><span class="s2">&quot;test&quot;</span>,<span class="s2">&quot;&quot;</span>,<span class="s2">&quot;/usr/work/&quot;</span>,<span class="s2">&quot;/dev/y.c&quot;</span><span class="o">)</span>/usr/work/test.c
YDB&gt;write <span class="nv">$zparse</span><span class="o">(</span><span class="s2">&quot;test&quot;</span>,<span class="s2">&quot;&quot;</span>,<span class="s2">&quot;/usr/work&quot;</span>,<span class="s2">&quot;/dev/y.c&quot;</span><span class="o">)</span>/usr/test.c
YDB&gt;
</pre></div>
</div>
<p>This example illustrates the use of the third and fourth arguments to $ZPARSE(). In the first statement, the first argument has no directory or extension field, so $ZPARSE() substitutes the extension field from the third argument. Since neither the third nor fourth argument specifies a directory, and because the fourth argument does not contain any fields that are not present in the third argument, the fourth argument is not used.</p>
<p>In the second statement, the first argument to $ZPARSE() is again missing both the directory and extension. In this instance, $ZPARSE() uses the directory specified in the third argument and, because neither the first nor third argument specifies a file extension, $ZPARSE() uses the file extension from the fourth argument.</p>
<p>In the third statement, because “/usr/work” does not end with a backward slash (/), $ZPARSE() interprets the substring “work” as a file name. Then, $ZPARSE() substitutes “/usr/” for the directory missing in the first argument and substitutes “.c” from the fourth argument for the extension missing from both the first and third arguments.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> /usr/work/me
$ /usr/local/lib/yottadb/r120/ydb
YDB&gt;For <span class="nv">i</span><span class="o">=</span><span class="s2">&quot;DIRECTORY&quot;</span>,<span class="s2">&quot;NAME&quot;</span>,<span class="s2">&quot;TYPE&quot;</span>,<span class="s2">&quot;&quot;</span> Write <span class="nv">$ZPARSE</span><span class="o">(</span><span class="s2">&quot;test.m&quot;</span>,i<span class="o">)</span>,!
/usr/work/me/
<span class="nb">test</span>
.m
/usr/work/me/test.m
YDB&gt;
</pre></div>
</div>
<p>This example illustrates the output produced for each of the possible values for the second argument.</p>
</section>
</section>
<section id="zpeek">
<span id="zpeek-function"></span><h2><a class="toc-backref" href="functions.html#id52">$ZPEEK()</a><a class="headerlink" href="functions.html#zpeek" title="Permalink to this heading">¶</a></h2>
<p>Provides a way to examine memory in the current process address space. Use of this function requires information about YottaDB internals, which may change from release to release. Contact YottaDB support for information on techniques for using $ZPEEK() in largely release independent ways.</p>
<p>The $ZPEEK() function returns the contents of the memory requested as a string depending on the requested (or defaulted) formatting.</p>
<p>The format of the $ZPEEK() function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZPEEK(&quot;mnemonic[:argument]&quot;,offset,length[,format])
</pre></div>
</div>
<p>mnemonic specifies the memory area $ZPEEK() is to access. Some mnemonics have arguments separated from the mnemonic by a colon (“:”). The mnemonics are case independent. Possible mnemonics, their possible abbreviations and their arguments are:</p>
<ul class="simple">
<li><p>CSA[REG]:region - returns a value from the sgmnt_addrs (process private) control block. Takes a case independent region name as an argument.</p></li>
<li><p>FH[REG]:region - returns a value from the sgmnt_data (shared file header) control block. Takes a case independent region name as an argument.</p></li>
<li><p>GDR[REG]:region - returns a value from the gd_region (process private) control block. Takes a case independent region name as an argument.</p></li>
<li><p>GDS[SEG]:region - returns a value from the gd_segment (process private) control block. Takes a case independent region name as an argument.</p></li>
<li><p>GLF[REPL]:n - returns a value from the jnlpool.gtmsrc_lcl_array[n] control block. Takes a numeric index (n) as an argument.</p></li>
<li><p>GRL[REPL] - returns a value from the recvpool.gtmrecv_local control block. No argument allowed. Only available when run on a non-primary instance.</p></li>
<li><p>GSL[REPL]:n - returns a value from the jnlpool.gtmsource_local_array[n] control block. Takes a numeric index (n) as an argument.</p></li>
<li><p>JBF[REG]:region - obtains fields in shared jnl_buffer structure. Takes a case independent region name as an argument.</p></li>
<li><p>JNL[REG]:region - obtains fields in the jnl_private_control structure. Takes a case independent region name as an argument.</p></li>
<li><p>JPC[REPL] - returns a value from the jnlpool.jnlpool_ctl control block. No argument allowed.</p></li>
<li><p>NL[REG]:region - returns a value from the node_local (shared) control block. Takes a case independent region name as an argument.</p></li>
<li><p>NLREPL - returns a value from the node_local (shared) control block associated with replication. No argument allowed.</p></li>
<li><p>PEEK:baseaddr - returns a value based on the supplied argument. Argument is the base address of the value to obtain in 0xhhhhhhh format where the h’s are hex digits.</p></li>
<li><p>RIH[REPL] - returns a value from the jnlpool.repl_inst_filehdr control block. No argument allowed.</p></li>
<li><p>RPC[REPL] - returns a value from the recvpool.recvpool_ctl control block. No argument allowed. Only available when run on a non-primary instance.</p></li>
<li><p>UHC[REPL] - returns a value from the recvpool.upd_helper_ctl control block. No argument allowed. Only available when run on a non-primary instance.</p></li>
<li><p>UPL[REPL] - returns a value from the recvpool.upd_proc_local control block. No argument allowed. Only available when run on a non-primary instance.</p></li>
</ul>
<p>offset (first integer expression) is a numeric value that specifies the offset from the address supplied or implied by the the mnemonic and argument. Specifying a negative offset results in a BADZPEEKARG error. Specifying too large an offset such that unavailable memory is specified results in a BADZPEEKRANGE error.</p>
<p>length (second integer expression) is a numeric value that specifies the length of the field to obtain.</p>
<ul class="simple">
<li><p>Specifying a negative length results in a BADZPEEKARG error.</p></li>
<li><p>Specifying a length that exceeds the maximum string length (1048576) results in a MAXSTRLEN error.</p></li>
<li><p>All mnemonics except PEEK correspond to an underlying control block. Specifying a length that exceeds the maximum allowed size of the corresponding control block results in a BADZPEEKARG error. For example, the GDRREG mnemonic corresponds to the gd_region control block and so specifying the GDRREG mnemonic and a length exceeding the byte length of the gd_region control block results in a BADZPEEKARG error.</p></li>
<li><p>Specifying too large a length such that unavailable memory is specified results in a BADZPEEKRANGE error.</p></li>
</ul>
<p>format is an optional single case independent character formatting code for the retrieved data. The formatting codes are:</p>
<ul class="simple">
<li><p>C : returns a character representation of the memory locations; this is the DEFAULT if the fourth argument is not specified.</p></li>
<li><p>I : returns a signed integer value - negative values have a preceding minus sign (-); the length can be 1, 2, 4, or 8 bytes.</p></li>
<li><p>U : returns an unsigned integer value - all bits are part of the numeric value; the length can be 1, 2, 4, or 8 bytes.</p></li>
<li><p>S : returns a character representation of the memory locations and the first NULL character found terminates the returned string; that is: the specified length is a maximum.</p></li>
<li><p>T: Selects a $HOROLOG format for a field of 4 or 8 bytes which is intended for use on fields in UNIX time format (seconds since 01/01/1970)</p></li>
<li><p>X : returns a hexadecimal value as 0xXXXXXX where XXXXXX is twice the specified length in bytes, so requested length 1 returns 0xXX and length 4 returns 0xXXXXXXXX; the length can be 1, 2, 4, or 8 bytes.</p></li>
<li><p>Z : returns a hexadecimal representation of the memory locations as ‘X’ does, without regard to endianness, and with no length restriction other than max string length.</p></li>
<li><p>$ZPEEK() function generates an UNDEF error when VIEW UNDEF is not set and a format parameter is specified but is undefined.</p></li>
</ul>
<p>$ZPEEK() has no UTF-8 checking. It is possible for values returned by the ‘C’ and ‘S’ codes to have invalid UTF-8 values in them. Take care when processing values obtained by these codes to either use “VIEW NOBADCHAR” when dealing with such values and/or use the $Zxxx() flavors of functions like $ZPIECE(), $ZEXTRACT(),etc which also do not raise BADCHAR errors when encountering invalid UTF-8 encoded strings.</p>
<p>Note that $ZPEEK() with 8 byte numeric formatting can return numeric string values that exceed YottaDB’s current limit of 18 digits of precision. If the values are used as strings, the extra digits are preserved, but if used arithmetically, the lower precision digits can be lost.</p>
<p>When values from replication structures are requested and the structures are not available due to replication not running or, in the case of the gtmrecv.* control block base options, if not running on a non-primary instance where the gtmrecv.* control are available, a ZPEEKNOREPLINFO error is raised.</p>
<p>The JNL[REG] and JBL[REG] mnemonics and characteristics are defined by the running the GTMDefinedTypesInit.m utility, which produces a cross-index in the form:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>gtmtypfldindx(&lt;structure-name&gt;.&lt;field-mnemonic&gt;)=&lt;n&gt;
</pre></div>
</div>
<p>where gtmtypes(&lt;structure-name&gt;,&lt;n&gt;,*) nodes contain the field characteristics.</p>
</section>
<section id="zpiece">
<span id="zpiece-function"></span><h2><a class="toc-backref" href="functions.html#id53">$ZPIECE()</a><a class="headerlink" href="functions.html#zpiece" title="Permalink to this heading">¶</a></h2>
<p>Return a sequence of bytes delimited by a specified byte sequence made up of one or more bytes.</p>
<p>The format for the $ZPIECE function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZPI[ECE](expr1,expr2[,intexpr1[,intexpr2]])
</pre></div>
</div>
<ul class="simple">
<li><p>The first expression specifies the sequence of octets from which $ZPIECE() takes its result.</p></li>
<li><p>The second expression specifies the delimiting byte sequence that determines the piece “boundaries”; if this argument is a null string, $ZPIECE() returns a null string.</p></li>
<li><p>If the second expression does not appear anywhere in the first expression, $ZPIECE() returns the entire first expression (unless forced to return null by the second integer expression).</p></li>
<li><p>The optional first integer expression (third argument) specifies the beginning piece to return; if this argument is missing, $ZPIECE() returns the first piece.</p></li>
<li><p>The optional second integer expression (fourth argument) specifies the last piece to return. If this argument is missing, $ZPIECE() returns only one piece unless the first integer expression is zero (0) or negative, in which case it returns a null string. If this argument is less than the first integer expression, $ZPIECE() returns null.</p></li>
<li><p>If the second integer expression exceeds the actual number of pieces in the first expression, $ZPIECE() returns all of the expression after the delimiter selected by the first integer expression.</p></li>
<li><p>The $ZPIECE() result never includes the “outside” delimiters; however, when the second integer argument specifies multiple pieces, the result contains the “inside” occurrences of the delimiter.</p></li>
<li><p>$ZPIECE() provides a tool for efficiently using values that contain multiple elements or fields, each of which may be variable in length.</p></li>
<li><p>Applications typically use a single byte for a $ZPIECE() delimiter (second argument) to minimize storage overhead, and increase efficiency at run-time. The delimiter must be chosen so the data values never contain the delimiter. Failure to enforce this convention with edit checks may result in unanticipated changes in the position of pieces within the data value. The caret symbol (^), backward slash (\), and asterisk (*) characters are examples of popular visible delimiters. Multiple byte delimiters may reduce the likelihood of conflict with field contents. However, they decrease storage efficiency, and are processed with less efficiency than single byte delimiters. Some applications use control characters, which reduce the chances of the delimiter appearing in the data but sacrifice the readability provided by visible delimiters.</p></li>
<li><p>A SET command argument can have something that has the format of a $ZPIECE() on the left-hand side of its equal sign (=). This construct permits easy maintenance of individual pieces within a sequence of octets. It also can be used to generate a byte sequence of delimiters. For more information on SET $ZPIECE(), refer to <a class="reference internal" href="commands.html#set-command"><span class="std std-ref">Set</span></a>.</p></li>
</ul>
<section id="examples-of-zpiece">
<h3>Examples of $ZPIECE()<a class="headerlink" href="functions.html#examples-of-zpiece" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;for <span class="nv">i</span><span class="o">=</span><span class="m">0</span>:1:3 write !,<span class="nv">$zpiece</span><span class="o">(</span><span class="s2">&quot;主&quot;</span>_<span class="nv">$zchar</span><span class="o">(</span><span class="m">64</span><span class="o">)</span>_<span class="s2">&quot;要&quot;</span>,<span class="nv">$zchar</span><span class="o">(</span><span class="m">64</span><span class="o">)</span>,i<span class="o">)</span>,<span class="s2">&quot;|&quot;</span>
<span class="p">|</span>
主<span class="p">|</span>
要<span class="p">|</span>
<span class="p">|</span>
YDB&gt;
</pre></div>
</div>
<p>This loop displays the result of $ZPIECE(), specifying $ZCHAR(64) as a delimiter, a piece position “before,” first and second, and “after” the sequence of octets.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;for <span class="nv">i</span><span class="o">=</span>-1:1:3 write !,<span class="nv">$zpiece</span><span class="o">(</span><span class="s2">&quot;主&quot;</span>_<span class="nv">$zchar</span><span class="o">(</span><span class="m">64</span><span class="o">)</span>_<span class="s2">&quot;要&quot;</span>,<span class="nv">$zchar</span><span class="o">(</span><span class="m">64</span><span class="o">)</span>,i,i+1<span class="o">)</span>,<span class="s2">&quot;|&quot;</span>
<span class="p">|</span>
主<span class="p">|</span>
主@要<span class="p">|</span>
要<span class="p">|</span>
<span class="p">|</span>
YDB&gt;
</pre></div>
</div>
<p>This example is similar to the previous example except that it displays two pieces on each iteration. Notice the delimiter () in the middle of the output for the third iteration, which displays both pieces.</p>
<p>Example:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>For p=1:1:$ZLength(x,&quot;/&quot;) Write ?p-1*10,$ZPIece(x,&quot;/&quot;,p)
</pre></div>
</div>
<p>This loop uses $ZLENGTH() and $ZPIECE() to display all the pieces of x in columnar format.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;Set <span class="nv">$piece</span><span class="o">(</span>x,<span class="nv">$zchar</span><span class="o">(</span><span class="m">64</span><span class="o">)</span>,25<span class="o">)=</span><span class="s2">&quot;&quot;</span> write x
@@@@@@@@@@@@@@@@@@@@@@@@
</pre></div>
</div>
<p>This SETs the 25th piece of the variable x to null, with delimiter $ZCHAR(64). This produces a byte sequence of 24 at-signs (&#64;) preceding the null.</p>
</section>
</section>
<section id="zprevious">
<h2><a class="toc-backref" href="functions.html#id54">$ZPREVIOUS()</a><a class="headerlink" href="functions.html#zprevious" title="Permalink to this heading">¶</a></h2>
<p>The $ZPREVIOUS function returns the subscript of the previous local or global variable name in collation sequence within the array level specified by its argument. When $ZPREVIOUS() has an unsubscripted argument, it returns the previous unsubscripted local or global variable name in collating sequence.</p>
<p>The $ZPREVIOUS function provides compatibility with some other M implementations. The M Development Committee chose to implement this functionality with the optional second -1 argument of $ORDER(). Therefore, when a design requires this functionality $ORDER() has the advantage over $ZPREVIOUS of being part of the M standard.</p>
<p>The format for the $ZPREVIOUS function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZP[REVIOUS](glvn)
</pre></div>
</div>
<ul class="simple">
<li><p>The subscripted or unsubscripted global or local variable name specifies the node prior to which $ZPREVIOUS() searches backwards for a defined node with data and/or descendants. The number of subscripts contained in the argument implicitly defines the array level.</p></li>
<li><p>If $ZPREVIOUS() finds no node at the specified level before the specified global or local variable, it returns a null string.</p></li>
<li><p>If the last subscript in the subscripted global or local variable name is null, $ZPREVIOUS() returns the last node at the specified level.</p></li>
</ul>
<p>$ZPREVIOUS() is equivalent to $ORDER() with a second argument of -1.</p>
</section>
<section id="zqgblmod">
<span id="zqgblmod-function"></span><h2><a class="toc-backref" href="functions.html#id55">$ZQGBLMOD()</a><a class="headerlink" href="functions.html#zqgblmod" title="Permalink to this heading">¶</a></h2>
<p>The $ZQGBLMOD function enables an application to determine whether it can safely apply a lost transaction to the database. A lost transaction is a transaction that must be rolled off a database to maintain logical multisite consistency. $ZQGBLMOD() always applies to data-level (level-0) nodes.</p>
<p>The format for the $ZQGBLMOD function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZQGBLMOD(gvn)
</pre></div>
</div>
<ul class="simple">
<li><p>The subscripted or non-subscripted global variable name (gvn) specifies the target node.</p></li>
<li><p>A return value of zero (0) means the value of the global variable has not changed since the last synchronization of the originating and replicating instances.</p></li>
<li><p>A return value of one (1) means the value of the global variable may have changed since the last synchronization of the originating and replicating instance.</p></li>
</ul>
<p>$ZQGBLMOD function produces an error if you submit an argument that is not a global variable name.</p>
<p>Internally, $ZQGBLMOD (gvn) compares the YottaDB transaction number in the database block in which the global variable name is (or would be) stored with the value in the Zqgblmod_Trans field stored in the database file header.</p>
<p>For example, if x is the transaction number of the level-0 database block in which gvn resides, and y is the value of Zqgblmod_Trans of region reg containing gvn, then the following is true:</p>
<ul class="simple">
<li><p>If x &lt;= y, no transaction modified the level-0 database block z in which gvn resides since the originating and replicating instances synchronized with each other. $ZQGBLMOD() returns a zero (0).</p></li>
<li><p>If x &gt; y, some transaction modified z, but not necessarily gvn, after the originating and replicating instances synchronized with each other. $ZQGBLMOD() returns a one (1).</p></li>
</ul>
<p>If a transaction is a lost transaction that has been rolled back and it is determined that for all the M globals set and killed in the transaction $ZQGBLMOD() is zero (0), it is probably safe to apply the updates automatically. However, this determination of safety can only be made by the application designer and not by YottaDB. If the $ZQGBLMOD() is one (1) for any set or kill in the transaction, it is not safe to apply the update.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The test of $ZQGBLMOD() and applying the updates must be encapsulated inside a YottaDB transaction.</p>
</div>
<p>Another approach to handling lost transactions would be to store in the database the initial message sent by a client, as well as the outcome and the response, and to reprocess the message with normal business logic. If the outcome is the same, the transaction can be safely applied.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If restartable batch operations are implemented, lost batch transactions can be ignored since a subsequent batch restart will process them correctly.</p>
</div>
</section>
<section id="zsearch">
<span id="zsearch-function"></span><h2><a class="toc-backref" href="functions.html#id56">$ZSEARCH()</a><a class="headerlink" href="functions.html#zsearch" title="Permalink to this heading">¶</a></h2>
<p>The $ZSEARCH function attempts to locate a file matching the specified file name. If the file exists, it returns the file name; if the file does not exist, it returns the null string.</p>
<p>The format for the $ZSEARCH function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZSEARCH(expr[,intexpr])
</pre></div>
</div>
<ul class="simple">
<li><p>The first parameter <code class="code docutils literal notranslate"><span class="pre">expr</span></code> contains a file name, with or without wildcards, for which $ZSEARCH() attempts to locate a matching file. Repeating $ZSEARCH with the same filename uses the same context and return a sequence of matching files when they exist; when the sequence is exhausted, $ZSEARCH() returns an empty string (“”). Any change to the file name starts a new context.</p></li>
<li><p>$ZSEARCH() uses the process current working directory, if <code class="code docutils literal notranslate"><span class="pre">expr</span></code> does not specify a directory.</p></li>
<li><p>The optional <code class="code docutils literal notranslate"><span class="pre">intexpr</span></code> specifies an integer expression that is a <code class="code docutils literal notranslate"><span class="pre">stream</span></code> number. It can be any value from <code class="code docutils literal notranslate"><span class="pre">0</span></code> to <code class="code docutils literal notranslate"><span class="pre">255</span></code> for each search; streams provide a means of having up to 256 $ZSEARCH() contexts simultaneously in progress. If no <code class="code docutils literal notranslate"><span class="pre">intexpr</span></code> is specified, a default value of 0 is assumed.</p></li>
<li><p>If a $ZSEARCH() stream has never been used or if the expression differs from the argument to the last $ZSEARCH() of the stream, the function resets the context and returns the first pathname matching the expression; otherwise, it returns the next matching file in collating sequence; if the last prior pathname returned for the same expression and same stream was the last one matching the argument, $ZSEARCH() returns a null string.</p></li>
<li><p>The special <code class="code docutils literal notranslate"><span class="pre">stream</span></code> number of <code class="code docutils literal notranslate"><span class="pre">-1</span></code> always resets the context and returns the first pathname matching the expression. That is, it starts a fresh sequence of matching files even if the same file name is used in repeated calls.</p></li>
</ul>
<p>$ZSEARCH() provides a tool for verifying that a file exists. For information to help determine the validity of a file name, see <a class="reference internal" href="functions.html#zparse-function"><span class="std std-ref">$ZPARSE()</span></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can call the POSIX stat() function to access metadata. The optional YottaDB POSIX plug-in packages the stat() function for easy access from M application code.</p>
</div>
<section id="examples-of-zsearch">
<h3>Examples of $ZSEARCH()<a class="headerlink" href="functions.html#examples-of-zsearch" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zsearch</span><span class="o">(</span><span class="s2">&quot;data.dat&quot;</span><span class="o">)</span>
/usr/staff/ccc/data.dat
YDB&gt;
</pre></div>
</div>
<p>This uses $ZSEARCH() to display the full file path name of “data.dat” in the process current default directory.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">x</span><span class="o">=</span><span class="nv">$zsearch</span><span class="o">(</span><span class="s2">&quot;*.c&quot;</span><span class="o">)</span>
YDB&gt;for  <span class="nb">set</span> <span class="nv">x</span><span class="o">=</span><span class="nv">$zsearch</span><span class="o">(</span><span class="s2">&quot;*.m&quot;</span><span class="o">)</span> quit:x<span class="o">=</span><span class="s2">&quot;&quot;</span>  write !,<span class="nv">$zparse</span><span class="o">(</span>x,<span class="s2">&quot;NAME&quot;</span><span class="o">)</span>
</pre></div>
</div>
<p>This FOR loop uses $ZSEARCH() and $ZPARSE() to display M source file names in the process current working directory. To ensure that the search starts at the beginning, the example resets the context by first searching with a different argument.</p>
</section>
</section>
<section id="zsigproc">
<span id="zsigproc-function"></span><h2><a class="toc-backref" href="functions.html#id57">$ZSIGPROC()</a><a class="headerlink" href="functions.html#zsigproc" title="Permalink to this heading">¶</a></h2>
<p>Sends a signal to a process. The format for the $ZSIGPROC function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZSIGPROC(expr1,expr2)
</pre></div>
</div>
<ul class="simple">
<li><p>The first expression is the pid of the process to which the signal is to be sent.</p></li>
<li><p>The second expression is the system signal name (e.g., <code class="code docutils literal notranslate"><span class="pre">&quot;SIGUSR1&quot;</span></code> or just <code class="code docutils literal notranslate"><span class="pre">&quot;USR1&quot;</span></code> - YottaDB accepts either) or number (e.g., 10 for SIGUSR1). YottaDB recommends using signal names to maintain code portability across different platforms.</p></li>
</ul>
<p>If the second expression is 0, $ZSIGPROC() checks the validity of the pid specified in the first expression.</p>
<p>There are four possible return values from $ZSIGPROC():</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 28%" />
<col style="width: 72%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Return Codes/ POSIX Error Definitions</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0</p></td>
<td><p>The specified signal number was successfully sent to the specified pid. Any return value other than 0 indicates an error.</p></td>
</tr>
<tr class="row-odd"><td><p>EPERM</p></td>
<td><p>The process has insufficient permissions to send the signal to the specified pid.</p></td>
</tr>
<tr class="row-even"><td><p>ESRCH</p></td>
<td><p>The specified pid does not exist.</p></td>
</tr>
<tr class="row-odd"><td><p>EINVAL</p></td>
<td><p>Invalid expression(s).</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Although $ZSIGPROC() works today as a way to invoke the asynchronous interrupt mechanism of YottaDB processes to XECUTE $ZINTERRUPT because the underlying mechanism uses the USR1 signal, YottaDB reserves the right to change the underlying mechanism to suit its convenience and sending a SIGUSR1 may cease to work as a way to invoke the asynchronous interrupt mechanism. Use MUPIP INTRPT as the supported and stable API to invoke the asynchronous interrupt mechanism.</p>
</div>
<p>In release <a class="reference external" href="https://gitlab.com/YottaDB/DB/YDB/-/tags/r1.30">r1.30</a> $ZSIGPROC() was enhanced to allow signals to be specified by name.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>$ZSIGPROC() is implemented using <a class="reference external" href="https://man7.org/linux/man-pages/man2/kill.2.html">kill(2)</a>. If the pid of the process is zero or negative, $ZSIGPROC() may behave unexpectedly.</p>
</div>
<section id="examples-of-zsigproc">
<h3>Examples of $ZSIGPROC()<a class="headerlink" href="functions.html#examples-of-zsigproc" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;job ^Somejob
YDB&gt;set <span class="nv">ret</span><span class="o">=</span>$<span class="p">&amp;</span>ydbposix.signalval<span class="o">(</span><span class="s2">&quot;SIGUSR1&quot;</span>,.sigusr1<span class="o">)</span> zwrite
    <span class="nv">ret</span><span class="o">=</span><span class="m">0</span>
    <span class="nv">sigusr1</span><span class="o">=</span><span class="m">10</span>
YDB&gt;write <span class="nv">$zsigproc</span><span class="o">(</span><span class="nv">$zjob</span>,sigusr1<span class="o">)</span>
    <span class="m">0</span>
YDB&gt;
</pre></div>
</div>
<p>This example sends the SIGUSR1 signal to the pid specified by $zjob.</p>
</section>
</section>
<section id="zsocket">
<span id="zsocket-function"></span><h2><a class="toc-backref" href="functions.html#id58">$ZSOCKET()</a><a class="headerlink" href="functions.html#zsocket" title="Permalink to this heading">¶</a></h2>
<p>Returns information about a SOCKET device and its attached sockets. The format of the $ZSOCKET() function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZSOCKET(expr1,expr2[,[expr3][,expr4]])
</pre></div>
</div>
<p>The first expression specifies the SOCKET device name; an empty string returns the same result as the current device ($IO). If the first expression is not specified, $ZSOCKET() returns information about sockets in the socketpool. Specifying a device other than a SOCKET device for the $ZSOCKET() function produces a ZSOCKETNOTSOCK error. When a YottaDB process starts with different sockets for input and output on $PRINCIPAL, $ZSOCKET() accepts $ZPIN or $ZPOUT as its first argument and supplies information on the input or output side, respectively. The following is an example of getting the handles for the $PRINCIPAL input and output socket devices.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set handlein=$ZSOCKET($ZPIN,&quot;SOCKETHANDLE&quot;,0)
set handleout=$ZSOCKET($ZPOUT,&quot;SOCKETHANDLE&quot;,0)
</pre></div>
</div>
<p>For more information, refer to <a class="reference internal" href="isv.html#zpin-isv"><span class="std std-ref">$ZPIN</span></a> and <a class="reference internal" href="isv.html#zpout-isv"><span class="std std-ref">$ZPOUT</span></a>.</p>
<p>The second expression specifies a keyword identifying the type of information returned and the optional third expression usually specifies the index (starting at zero) of a socket attached to the device; if the index is outside the range of attached sockets, $ZSOCKET() returns an empty string. If the third expression is not specified, $ZSOCKET() returns information about the current socket. Using an invalid keyword produces a ZSOCKETATTR error. The fourth expression specifies an individual delimiter when the second expression specifies DELIMITER. For more information, see the following table. Note that changes to the socket collection for a SOCKET device using OPEN, CLOSE, USE :ATTACH, or USE :DETACH may change the index for a socket.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 15%" />
<col style="width: 18%" />
<col style="width: 68%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Keyword</p></th>
<th class="head"><p>Arguments</p></th>
<th class="head"><p>Returns</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>CURRENTINDEX</p></td>
<td></td>
<td><p>The index (starting at zero) of the current socket for the SOCKET device.</p></td>
</tr>
<tr class="row-odd"><td><p>DELIMITER</p></td>
<td><p>index[, delimiter]</p></td>
<td><p>If only index is specified, the number of delimiters. If delimiter is also specified, selects which delimiter to return. The first
delimiter is zero.</p></td>
</tr>
<tr class="row-even"><td><p>DESCRIPTOR</p></td>
<td><p>index</p></td>
<td><p>The OS socket descriptor for the socket.</p></td>
</tr>
<tr class="row-odd"><td><p>HOWCREATED</p></td>
<td><p>index</p></td>
<td><p>LISTEN, CONNECT, ACCEPTED, PRINCIPAL, or PASSED</p>
<p>ACCEPTED indicates a connection created from a LISTENing socket.</p>
<p>PRINCIPAL indicates that the socket is the $PRINCIPAL of the process.</p>
<p>PASSED indicates a socket passed by WRITE /ACCEPT.</p>
</td>
</tr>
<tr class="row-even"><td><p>INDEX</p></td>
<td><p>handle</p></td>
<td><p>The current index of the socket named by handle.</p></td>
</tr>
<tr class="row-odd"><td><p>IOERROR</p></td>
<td><p>handle</p></td>
<td><p>1 (TRUE) if IOERROR=TRAP otherwise 0 (FALSE).</p></td>
</tr>
<tr class="row-even"><td><p>LOCALADDRESS</p></td>
<td><p>index</p></td>
<td><p>The address of the local side of the socket. For TCP sockets: the IPv6 or IPv4 numeric address. For LOCAL sockets: the path.</p></td>
</tr>
<tr class="row-odd"><td><p>LOCALPORT</p></td>
<td><p>index</p></td>
<td><p>The numeric port of the local side of a TCP socket.</p></td>
</tr>
<tr class="row-even"><td><p>MOREREADTIME</p></td>
<td><p>index</p></td>
<td><p>The value of the MOREREADTIME device parameter if it was specified, otherwise an empty string.</p></td>
</tr>
<tr class="row-odd"><td><p>NUMBER</p></td>
<td></td>
<td><p>The number of sockets in the SOCKET device.</p></td>
</tr>
<tr class="row-even"><td><p>PARENT</p></td>
<td><p>index</p></td>
<td><p>If the socket was created from a LISTENing socket: the handle of the LISTENing socket.</p></td>
</tr>
<tr class="row-odd"><td><p>PROTOCOL</p></td>
<td><p>index</p></td>
<td><p>TCP, TCP6, or LOCAL</p></td>
</tr>
<tr class="row-even"><td><p>REMOTEADDRESS</p></td>
<td><p>index</p></td>
<td><p>The address of the remote side of the socket. For TCP sockets: the IPv6 or IPv4 numeric address. For LOCAL sockets: the path.</p></td>
</tr>
<tr class="row-odd"><td><p>REMOTEPORT</p></td>
<td><p>index</p></td>
<td><p>The numeric port of the remote side of a TCP socket.</p></td>
</tr>
<tr class="row-even"><td><p>SOCKETHANDLE</p></td>
<td><p>index</p></td>
<td><p>The handle for the selected socket.</p></td>
</tr>
<tr class="row-odd"><td><p>STATE</p></td>
<td><p>index</p></td>
<td><p>One of LISTENING, CONNECTED, BOUND, or CONNECTINPROGRESS</p></td>
</tr>
<tr class="row-even"><td><p>TLS</p></td>
<td><p>index[,expr4]</p></td>
<td><p>If the selected socket is using TLS, a string of the form: 1,{SERVER|CLIENT}[,tlsid], where the optional tlsid comes from the
WRITE /TLS which enabled TLS on the socket; otherwise an empty string. See the following table for a description of all options
for the fourth expression for the TLS keyword.</p></td>
</tr>
<tr class="row-odd"><td><p>ZBFSIZE</p></td>
<td><p>index</p></td>
<td><p>Size of the YottaDB buffer in bytes.</p></td>
</tr>
<tr class="row-even"><td><p>ZFF</p></td>
<td><p>index</p></td>
<td><p>The value of the ZFF device parameter.</p></td>
</tr>
<tr class="row-odd"><td><p>ZIBFSIZE</p></td>
<td><p>index</p></td>
<td><p>Size of the OS buffer in bytes (SO_RCVBUF).</p></td>
</tr>
<tr class="row-even"><td><p>ZDELAY</p></td>
<td><p>index</p></td>
<td><p>1 if Nagle algorithm enabled, otherwise 0.</p></td>
</tr>
</tbody>
</table>
<p>The following table describes the values for the fourth expression for the TLS keyword.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 11%" />
<col style="width: 89%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>expr4 (TLS)</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>SESSION</p></td>
<td><p>Returns information related to SSL sessions including information about renegotiations. Here is an example:</p>
<p>|S:RENSEC:1,RENTOT:1,SESSID:&lt;SESSID&gt;, SESEXP:Thu Jun 4 21:07:11 2015</p>
<p>“|S:” denotes this piece contains session information, “RENSEC:” indicates whether secure renegotiation is available (1) or not (0),
“RENTOT:” gives the current total number of renegotiations done on this socket, “SESSID:” shows the session id in hexadecimal, and “SESEXP:”
indicates when the session expires respresented as time in the local time zone.</p>
</td>
</tr>
<tr class="row-odd"><td><p>OPTIONS</p></td>
<td><p>the hexadecimal representation of the ssl-options selected by the combination of the OpenSSL defaults, options set by the YottaDB TLS
plugin, and options specified in the gtmcrypt_config configuration file prefixed by “O:”, a comma, and the verify mode as two hexadecimal
digits. Here is an example:</p>
<p>|O:0000000001520004,01</p>
<p>The values for the SSL_OP options and verify modes are defined in the include/openssl/ssl.h file provided by the OpenSSL development package.</p>
<p>Note: the TLS reference implementation plug-in disables SSLv3 by default.</p>
</td>
</tr>
<tr class="row-even"><td><p>CIPHER</p></td>
<td><p>The SSL protocol version prefixed by “P:” and the algorithm negotiated between the server and client prefixed by “C:”. Here is an example:</p>
<p>|P:TLSv1.2|C:DHE-RSA-AES256-SHA</p>
</td>
</tr>
<tr class="row-odd"><td><p>ALL</p></td>
<td><p>returns all available information. Here is an example:</p>
<p>|P:TLSv1.2|C:AES256-GCM-SHA384|O:0000000001020004,01|S:RENSEC:1,RENTOT:0,SESEXP:Mon Jun 22 23:58:09 2015</p>
</td>
</tr>
</tbody>
</table>
</section>
<section id="zsubstr">
<span id="zsubstr-function"></span><h2><a class="toc-backref" href="functions.html#id59">$ZSUBSTR()</a><a class="headerlink" href="functions.html#zsubstr" title="Permalink to this heading">¶</a></h2>
<p>Returns a properly encoded string from a sequence of bytes.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZSUB[STR] (expr ,intexpr1 [,intexpr2])
</pre></div>
</div>
<ul class="simple">
<li><p>The first expression is an expression of the byte string from which $ZSUBSTR() derives the character sequence.</p></li>
<li><p>The second expression is the starting byte position (counting from 1 for the first position) in the first expression from where $ZSUBSTR() begins to derive the character sequence.</p></li>
<li><p>The optional third expression specifies the number of bytes from the starting byte position specified by the second expression that contribute to the result. If the third expression is not specified, the $ZSUBSTR() function returns the sequence of characters starting from the byte position specified by the second expression up to the end of the byte string.</p></li>
<li><p>The $ZSUBSTR() function never returns a string with illegal or invalid characters. With VIEW “NOBADCHAR”, the $ZSUBSTR() function ignores all byte sequences within the specified range that do not correspond to valid UTF-8 code-points, With VIEW “BADCHAR”, the $ZSUBSTR() function triggers a run-time error if the specified byte sequence contains a code-point value that is not in the character set.</p></li>
<li><p>The $ZSUBSTR() is similar to the $ZEXTRACT() byte equivalent function but differs from that function in restricting its result to conform to the valid characters in the current encoding.</p></li>
</ul>
<section id="examples-of-zsubstr">
<h3>Examples of $ZSUBSTR()<a class="headerlink" href="functions.html#examples-of-zsubstr" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$ZCHSET</span>
M
YDB&gt;set <span class="nv">char1</span><span class="o">=</span><span class="s2">&quot;a&quot;</span> <span class="p">;</span> one byte character
YDB&gt;set <span class="nv">char2</span><span class="o">=</span><span class="s2">&quot;ç&quot;</span><span class="p">;</span> two-byte character
YDB&gt;set <span class="nv">char3</span><span class="o">=</span><span class="s2">&quot;新&quot;</span><span class="p">;</span> three-byte character
YDB&gt;set <span class="nv">y</span><span class="o">=</span>char1_char2_char3
YDB&gt;write <span class="nv">$zsubstr</span><span class="o">(</span>y,1,3<span class="o">)=</span><span class="nv">$zsubstr</span><span class="o">(</span>y,1,5<span class="o">)</span>
<span class="m">0</span>
</pre></div>
</div>
<p>With character set M specified, the expression $ZSUBSTR(y,1,3)=$ZSUBSTR(y,1,5) evaluates to 0 or “false” because the expression $ZSUBSTR(y,1,5) returns more characters than $ZSUBSTR(y,1,3).</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zchset</span>
UTF-8
YDB&gt;set <span class="nv">char1</span><span class="o">=</span><span class="s2">&quot;a&quot;</span> <span class="p">;</span> one byte character
YDB&gt;set <span class="nv">char2</span><span class="o">=</span><span class="s2">&quot;ç&quot;</span><span class="p">;</span> two-byte character
YDB&gt;set <span class="nv">char3</span><span class="o">=</span><span class="s2">&quot;新&quot;</span><span class="p">;</span> three-byte character
YDB&gt;set <span class="nv">y</span><span class="o">=</span>char1_char2_char3
YDB&gt;write <span class="nv">$zsubstr</span><span class="o">(</span>y,1,3<span class="o">)=</span><span class="nv">$zsubstr</span><span class="o">(</span>y,1,5<span class="o">)</span>
<span class="m">1</span>
</pre></div>
</div>
<p>For a process started in UTF-8 mode, the expression $ZSUBSTR(y,1,3)=$ZSUBSTR(y,1,5) evaluates to 1 or “true” because the expression $ZSUBSTR(y,1,5) returns a string made up of char1 and char2 excluding the three-byte char3 because it was not completely included in the specified byte-length.</p>
<p>In many ways, the $ZSUBSTR() function is similar to the $ZEXTRACT() function. For example, $ZSUBSTR(expr,intexpr1) is equivalent to $ZEXTRACT(expr,intexpr1,$L(expr)). Note that this means when using the M character set, $ZSUBSTR() behaves identically to $EXTRACT() and $ZEXTRACT(). The differences are as follows:</p>
<ul class="simple">
<li><p>$ZSUBSTR() cannot appear on the left of the equal sign in the SET command where as $ZEXTRACT() can.</p></li>
<li><p>In both the modes, the third expression of $ZSUBSTR() is a byte, rather than character, position within the first expression.</p></li>
<li><p>$EXTRACT() operates on characters, irrespective of byte length.</p></li>
<li><p>$ZEXTRACT() operates on bytes, irrespective of multi-byte character boundaries.</p></li>
<li><p>$ZSUBSTR() is the only way to extract as valid UTF-8 encoded characters from a byte string containing mixed UTF-8 and non UTF-8 data. It operates on Unicode® characters so that its result does not exceed the given byte length.</p></li>
</ul>
</section>
</section>
<section id="zsyslog">
<h2><a class="toc-backref" href="functions.html#id60">$ZSYSLOG()</a><a class="headerlink" href="functions.html#zsyslog" title="Permalink to this heading">¶</a></h2>
<p>Sends its string parameter to the system log and always returns TRUE (1). Syslog entries logged by $ZSYSLOG() show <code class="code docutils literal notranslate"><span class="pre">&quot;YDB-&quot;</span></code> followed by the process executable <code class="code docutils literal notranslate"><span class="pre">proc/&lt;pid&gt;/comm</span></code> converted to upper case as the SYSLOG_IDENTIFIER field (along with instance information where appropriate). The $ZSYSLOG() function sends the argument to syslog facility. The format of the $ZSYSLOG() function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZSYSLOG(expr)
</pre></div>
</div>
</section>
<section id="ztranslate">
<span id="ztranslate-function"></span><h2><a class="toc-backref" href="functions.html#id61">$ZTRANSLATE()</a><a class="headerlink" href="functions.html#ztranslate" title="Permalink to this heading">¶</a></h2>
<p>Returns a byte sequence that results from replacing or dropping bytes in the first of its arguments as specified by the patterns of its other arguments.</p>
<p>The format for the $ZTRANSLATE function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZTR[ANSLATE](expr1[,expr2[,expr3]])
</pre></div>
</div>
<ul class="simple">
<li><p>The first expression specifies the sequence of octets on which $ZTRANSLATE() operates. If the other arguments are omitted, $ZTRANSLATE() returns this expression.</p></li>
<li><p>The optional second expression specifies the byte for $TRANSLATE() to replace. If a byte occurs more than once in the second expression, the first occurrence controls the translation, and $ZTRANSLATE() ignores subsequent occurrences. If this argument is omitted, $ZTRANSLATE() returns the first expression without modification.</p></li>
<li><p>The optional third expression specifies the replacement bytes for the positionally corresponding bytes in the second expression. If this argument is omitted or shorter than the second expression, $ZTRANSLATE() drops all occurrences of the bytes in the second expression that have no replacement in the corresponding position of the third expression.</p></li>
<li><p>A first call to $ZTRANSLATE where the first argument is defined but the second and third are undefined results in an error.</p></li>
<li><p>$ZTRANSLATE() provides a tool for tasks such as encryption.</p></li>
</ul>
<p>The $ZTRANSLATE() algorithm can be understood as follows:</p>
<ul class="simple">
<li><p>$ZTRANSLATE() evaluates each byte in the first expression, comparing it byte by byte to the second expression looking for a match. If there is no match in the second expression, the resulting expression contains the byte without modification.</p></li>
<li><p>When it locates a byte match, $ZTRANSLATE() uses the position of the match in the second expression to identify the appropriate replacement for the original expression. If the second expression has more bytes than the third expression, $ZTRANSLATE() replaces the original byte with a null, thereby deleting it from the result. By extension of this principle, if the third expression is missing, $ZTRANSLATE() deletes all bytes from the first expression that occur in the second expression.</p></li>
</ul>
<section id="examples-of-ztranslate">
<h3>Examples of $ZTRANSLATE()<a class="headerlink" href="functions.html#examples-of-ztranslate" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">hiraganaA</span><span class="o">=</span><span class="nv">$char</span><span class="o">(</span><span class="m">12354</span><span class="o">)</span> <span class="p">;</span> <span class="nv">$zchar</span><span class="o">(</span><span class="m">227</span>,129,130<span class="o">)</span>
YDB&gt;set <span class="nv">temp1</span><span class="o">=</span><span class="nv">$zchar</span><span class="o">(</span><span class="m">130</span><span class="o">)</span>
YDB&gt;set <span class="nv">temp2</span><span class="o">=</span><span class="nv">$zchar</span><span class="o">(</span><span class="m">140</span><span class="o">)</span>
YDB&gt;set <span class="nv">tr</span><span class="o">=</span><span class="nv">$ztranslate</span><span class="o">(</span>hiraganaA,temp1,temp2<span class="o">)</span>
YDB&gt;w <span class="nv">$ascii</span><span class="o">(</span>tr<span class="o">)</span>
<span class="m">12364</span>
YDB&gt;
</pre></div>
</div>
<p>In the above example, $ZTRANSLATE() replaces byte $ZCHAR(130) in first expression and matching the first (and only) byte in the second expression with byte $ZCHAR(140) - the corresponding byte in the third expression.</p>
</section>
</section>
<section id="ztrigger">
<span id="ztrigger-function"></span><h2><a class="toc-backref" href="functions.html#id62">$ZTRIGGER()</a><a class="headerlink" href="functions.html#ztrigger" title="Permalink to this heading">¶</a></h2>
<p>Examine or load trigger definition. The format of the $ZTRIGGER() function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZTRIgger(expr1[,expr2])
</pre></div>
</div>
<ul class="simple">
<li><p>$ZTRIGGER() returns a truth value (1 or 0) depending on the success of the specified action.</p></li>
<li><p>$ZTRIGGER() performs trigger maintenance actions similar those performed by MUPIP TRIGGER.</p></li>
<li><p>If expr1 evaluates to case-insensitive “FILE”, $ZTRIGGER() evaluates expr2 as the location of the trigger definition file. Then, it applies the trigger definitions in the file specified by expr2. If a file contains a delete all (-*), that action produces no user confirmation.</p></li>
<li><p>If expr1 evaluates to case-insensitive “ITEM”, $ZTRIGGER() evaluates expr2 as a single line or multi-line trigger definition entry. A multi-line trigger definition or a multi-line XECUTE string starts with &lt;&lt; and uses $char(10) to denote the newline separator. expr2 with ITEM does not permit a multi-line XECUTE string to end with the &gt;&gt; terminator. It does not require trigger logic to appear immediately after the -xecute=&lt;&lt;, but a $char(10) must prefix the logic as shown in the following examples:</p></li>
</ul>
<blockquote>
<div><div class="highlight-none notranslate"><div class="highlight"><pre><span></span>set trigstr=&quot;+^a -xecute=&lt;&lt; -commands=S&quot;_$char(10)_&quot; do ^twork1&quot;_$char(10)_&quot; do ^twork2&quot;_$char(10) write $ztrigger(&quot;item&quot;,trigstr)
set trigstr=&quot;+^a -xecute=&lt;&lt; -commands=S &quot;_$c(10)_&quot; do ^twork1&quot;_$c(10)_&quot; do ^twork2&quot;_$c(10) write $ztrigger(&quot;item&quot;,trigstr)
</pre></div>
</div>
</div></blockquote>
<ul class="simple">
<li><p>If expr1 evaluates to case-insensitive “SELECT”, $ZTRIGGER() evaluates the optional expr2 as a trigger name or name wildcard, and directs its output to $IO. A FALSE result (0) indicates there are no matching triggers.</p></li>
<li><p>$ZTRIGGER() always operates within a TP transaction even if it needs to implicitly create one to encapsulate its work. Trigger maintenance operations reserve their output until the transaction commits (TCOMMIT where $TLEVEL goes to zero), at which time they deliver their entire output to the current $IO containing consistent information for all $ZTRIGGER() invocations within the successful processing of a larger transaction at that ultimate TCOMMIT. If an explicit transaction ends with a TROLLBACK, it does not produce any $ZTRIGGER() output.</p></li>
<li><p>$ZTRIGGER() can appear within a transaction as long as it does not update any triggers for globals which have had triggers invoked earlier in the same transaction.</p></li>
<li><p>An attempt by a $ZTRIGGER() within a transaction to remove or replace a trigger on a global after the transaction has activated any trigger defined within the named global generates a TRIGMODINTP error.</p></li>
<li><p>$ZTRIGGER() treats the deletion of a non-existent trigger as a success; if that is the only operation, or one of a set of successful operations, it return success (TRUE/1) to the YottaDB process. $ZTRIGGER() returns failure in case of trigger selection using trigger names where the number after the pound-sign (#) starts with a 0 (which is an impossible auto-generated trigger name).</p></li>
<li><p>YottaDB maps trigger definitions to the region to which they apply.</p></li>
<li><p>YottaDB allows defining triggers with the same name and signature in different regions, but does not allow defining triggers with the same name, but different signatures, in different regions within the same global directory. When loading a trigger definition, if a user-defined name conflicts with a name in any region to which the trigger applies, $ZTRIGGER() reports an error. However, when the name is auto-generated, it generates a name in every region, so if there are multiple (spanning) regions, the same trigger might have a differing auto-generated name in each region.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A $ZTRIGGER() action (delete or select) applies to all triggers in all regions matching the specified signature. If the argument specifies an incomplete trigger signature, for example, only the name, the specification may match multiple triggers and apply the delete or select to all of them. YottaDB recommends you run a select and analyze the scope of the signature before any signature limited delete.</p>
</div>
<section id="examples-of-ztrigger">
<h3>Examples of $ZTRIGGER()<a class="headerlink" href="functions.html#examples-of-ztrigger" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">X</span><span class="o">=</span><span class="nv">$ztrigger</span><span class="o">(</span><span class="s2">&quot;S&quot;</span><span class="o">)</span>
YDB&gt;
</pre></div>
</div>
<p>This example displays the current trigger definitions stored in the database.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">X</span><span class="o">=</span><span class="nv">$ztrigger</span><span class="o">(</span><span class="s2">&quot;i&quot;</span>,<span class="s2">&quot;+^Acct(sub=:) -command=set -xecute=&quot;&quot;set ^X(</span><span class="nv">$ztvalue</span><span class="s2">)=sub&quot;&quot;&quot;</span><span class="o">)</span>
YDB&gt;
</pre></div>
</div>
<p>This example adds a trigger definition for the first level node of ^Acct.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">trigstr</span><span class="o">=</span><span class="s2">&quot;+^a -commands=S -xecute=&lt;&lt;&quot;</span>_<span class="nv">$c</span><span class="o">(</span><span class="m">10</span><span class="o">)</span>_<span class="s2">&quot; do ^twork1&quot;</span>_<span class="nv">$c</span><span class="o">(</span><span class="m">10</span><span class="o">)</span>_<span class="s2">&quot; do ^twork2&quot;</span>_<span class="nv">$c</span><span class="o">(</span><span class="m">10</span><span class="o">)</span> write <span class="nv">$ztrigger</span><span class="o">(</span><span class="s2">&quot;item&quot;</span>,trigstr<span class="o">)</span>
</pre></div>
</div>
<p>This example demonstrates the usage of the $ztrigger(“ITEM”,&lt;multi-line-trigger-definition&gt;&gt; where &lt;&lt;denotes the definition of a multi-line -XECUTE string and $c(10) to denote the newline separator. Unlike the $ztrigger(“FILE”) form, $ztrigger(“ITEM”,&lt;multi-line-trigger-definition&gt;&gt; does not require the trigger definition to terminate with &gt;&gt;.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$ztrigger</span><span class="o">(</span><span class="s2">&quot;file&quot;</span>,<span class="s2">&quot;agbl.trg&quot;</span><span class="o">)</span>
<span class="m">1</span>
YDB&gt;
</pre></div>
</div>
<p>This example is equivalent to the previous $ztrigger(“ITEM”) example. In this example, agbl.trg contains the following multi-line trigger definition:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>+^a -commands=S -xecute=&lt;&lt;
do ^twork1
do ^twork2
&gt;&gt;
</pre></div>
</div>
<p>Unlike $ztrigger(“ITEM”), $ztrigger(“FILE”) usages require the trigger definition to terminate with &gt;&gt;</p>
</section>
</section>
<section id="ztrnlnm">
<h2><a class="toc-backref" href="functions.html#id63">$ZTRNLNM()</a><a class="headerlink" href="functions.html#ztrnlnm" title="Permalink to this heading">¶</a></h2>
<p>The $ZTRNLNM function returns the value of an environment variable.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>$ZTRNLNM() does not perform iterative translation.</p>
</div>
<p>The format for the $ZTRNLNM function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZTRNLNM(expr1[,expr2[,expr3[,expr4[,expr5[,expr6]]]]])
</pre></div>
</div>
<p>expr1 specifies the environment variable whose value needs to be returned.</p>
<p>expr2 to expr5 are OpenVMS-related expressions that specify logical name table(s), index (numbered from 0), initial mode of the look-up, and a value indicating whether the look-up is case sensitive. To ensure interoperability between UNIX and OpenVMS versions, $ZTRNLNM() on UNIX accepts these expressions and ignores them.</p>
<p>The optional expr6 specifies any one of the following keywords:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 40%" />
<col style="width: 60%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Item Keyword</p></th>
<th class="head"><p>Data Returned</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FULL</p></td>
<td><p>Return the translation</p></td>
</tr>
<tr class="row-odd"><td><p>LENGTH</p></td>
<td><p>Length of the return value in bytes.</p></td>
</tr>
<tr class="row-even"><td><p>VALUE</p></td>
<td><p>Returns the translation.</p></td>
</tr>
</tbody>
</table>
<section id="examples-of-ztrnlnm">
<h3>Examples of $ZTRNLNM()<a class="headerlink" href="functions.html#examples-of-ztrnlnm" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$ztrnlnm</span><span class="o">(</span><span class="s2">&quot;ydb_dist&quot;</span>,<span class="s2">&quot;&quot;</span>,<span class="s2">&quot;&quot;</span>,<span class="s2">&quot;&quot;</span>,<span class="s2">&quot;&quot;</span>,<span class="s2">&quot;VALUE&quot;</span><span class="o">)</span>
/usr/local/lib/yottadb/r120/utf8
YDB&gt;write <span class="nv">$ztrnlnm</span><span class="o">(</span><span class="s2">&quot;ydb_dist&quot;</span><span class="o">)</span>
/usr/local/lib/yottadb/r120
YDB&gt;
</pre></div>
</div>
<p>This uses $ZTRNLNM() to display the translation value for ydb_dist.</p>
</section>
</section>
<section id="zwidth">
<span id="zwidth-function"></span><h2><a class="toc-backref" href="functions.html#id64">$ZWIDTH()</a><a class="headerlink" href="functions.html#zwidth" title="Permalink to this heading">¶</a></h2>
<p>Returns the numbers of columns required to display a given string on the screen or printer. The format of the $ZWIDTH() function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZW[IDTH] (expr)
</pre></div>
</div>
<ul class="simple">
<li><p>The expression is the string which $ZWIDTH() evaluates for display length. If the expression contains a code-point value that is not a valid UTF-8 character, $ZWIDTH() generates a run-time error.</p></li>
<li><p>If the expression contains any non-graphic characters, the $ZWIDTH() function does not count those characters.</p></li>
<li><p>If the string contains any escape sequences containing graphical characters (which they typically do), $ZWIDTH() includes those characters in calculating its result, as it does not do escape processing. In such a case, the result may be larger than the actual display width.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When in “NOBADCHAR” mode, $ZWIDTH() returns give any bad characters a length of zero (0), which may or may not match the behavior of any device used to display the string.</p>
</div>
<p>With character set UTF-8 specified, the $ZWIDTH() function uses the ICU’s glyph-related conventions to calculate the number of columns required to represent the expression.</p>
<section id="examples-of-zwidth">
<h3>Examples of $ZWIDTH()<a class="headerlink" href="functions.html#examples-of-zwidth" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">NG</span><span class="o">=</span><span class="nv">$char</span><span class="o">(</span><span class="nv">$$</span>FUNC^%HD<span class="o">(</span><span class="s2">&quot;200B&quot;</span><span class="o">))</span>
YDB&gt;set <span class="nv">S</span><span class="o">=</span><span class="nv">$char</span><span class="o">(</span><span class="m">26032</span><span class="o">)</span>_NG_<span class="nv">$CHAR</span><span class="o">(</span><span class="m">26033</span><span class="o">)</span>
YDB&gt;W <span class="nv">$ZWidth</span><span class="o">(</span>STR<span class="o">)</span>
<span class="m">4</span>
YDB&gt;
</pre></div>
</div>
<p>In the above example, the local variable NG contains a non-graphic character which does not display between two double-width UTF-8 characters.</p>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zwidth</span><span class="o">(</span><span class="s2">&quot;The rain in Spain stays mainly in the plain.&quot;</span><span class="o">)</span>
<span class="m">44</span>
YDB&gt;set <span class="nv">A</span><span class="o">=</span><span class="s2">&quot;主要雨在西班牙停留在平原&quot;</span>
YDB&gt;write <span class="nv">$length</span><span class="o">(</span>A<span class="o">)</span>
<span class="m">12</span>
YDB&gt;write <span class="nv">$zwidth</span><span class="o">(</span>A<span class="o">)</span>
<span class="m">24</span>
</pre></div>
</div>
<p>In the above example, the $ZWIDTH() function returns 24 because each character in A occupies 2 columns when they are displayed on the screen or printer.</p>
</section>
</section>
<section id="zwrite">
<h2><a class="toc-backref" href="functions.html#id65">$ZWRITE()</a><a class="headerlink" href="functions.html#zwrite" title="Permalink to this heading">¶</a></h2>
<p>Converts its first string argument to or from ZWRITE format (quoted graphics characters concatenated with $CHAR() representations of any non-graphic characters). The second integer expression controls the direction of conversion. The format of the $ZWRITE() function is:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZWRITE(expr[,intexpr])
</pre></div>
</div>
<ul class="simple">
<li><p>The first argument specifies the string to convert to or from the ZWRITE format.</p></li>
<li><p>The second argument specifies the direction of conversion. When intexpr is not specified or evaluates to zero, $zwrite() converts the first argument to the ZWRITE format. When intexpr evaluates to a non-zero value, $ZWRITE() treats the first argument as being in ZWRITE format and attempts to convert it to a string with embedded non-graphic characters; if it is not in ZWRITE format, it returns an empty string.</p></li>
<li><p>Converting to zwrite format tends to produce a string that is longer than the input and therefore a $ZWRITE() result may exceed the maximum string length - the maximum input length that is guaranteed not to do so is a 116,510 byte string.</p></li>
<li><p>If all its arguments are literals, $ZWRITE() evaluates to a literal constant at compile time.</p></li>
<li><p>Note that non-graphic characters differ between M mode and UTF-8 mode.</p></li>
</ul>
<section id="examples-of-zwrite">
<h3>Examples of $ZWRITE()<a class="headerlink" href="functions.html#examples-of-zwrite" title="Permalink to this heading">¶</a></h3>
<p>Example:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">temp</span><span class="o">=</span><span class="s2">&quot;X&quot;</span>_<span class="nv">$char</span><span class="o">(</span><span class="m">10</span><span class="o">)</span>_<span class="s2">&quot;X&quot;</span> <span class="p">;</span> <span class="nv">$CHAR</span><span class="o">(</span><span class="m">10</span><span class="o">)</span> is the linefeed character
YDB&gt;write temp
X
X
YDB&gt;write <span class="nv">$zwrite</span><span class="o">(</span>temp<span class="o">)</span>
<span class="s2">&quot;X&quot;</span>_<span class="nv">$C</span><span class="o">(</span><span class="m">10</span><span class="o">)</span>_<span class="s2">&quot;X&quot;</span>
YDB&gt;write <span class="nv">$zwrite</span><span class="o">(</span><span class="nv">$zwrite</span><span class="o">(</span>temp<span class="o">)</span>,1<span class="o">)</span>
X
X
YDB&gt;
</pre></div>
</div>
</section>
</section>
<section id="zyhash">
<h2><a class="toc-backref" href="functions.html#id66">$ZYHASH()</a><a class="headerlink" href="functions.html#zyhash" title="Permalink to this heading">¶</a></h2>
<p>Returns the 128-bit <a class="reference external" href="https://en.wikipedia.org/wiki/MurmurHash#MurmurHash3">MurmurHash3</a> of a string as a hexadecimal string prefixed with <code class="code docutils literal notranslate"><span class="pre">&quot;0x&quot;</span></code>. This is equivalent to calling the C API function <a class="reference external" href="../MultiLangProgGuide/cprogram.html#ydb-mmrhash-128-fn">ydb_mmrhash_128()</a> and passing its return value to <a class="reference external" href="../MultiLangProgGuide/cprogram.html#ydb-mmrhash-128-hex-fn">ydb_mmrhash_128_hex()</a></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZYHASH(string[,salt])
</pre></div>
</div>
<ul class="simple">
<li><p>The first argument is the string to be hashed.</p></li>
<li><p>The second argument (salt) is an integer 0 through 4,294,967,295, and defaulting to zero to be used as a salt for the hash.</p></li>
</ul>
<section id="examples-of-zyhash">
<h3>Examples of $ZYHASH()<a class="headerlink" href="functions.html#examples-of-zyhash" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zyhash</span><span class="o">(</span><span class="s2">&quot;YottaDB Rocks!&quot;</span><span class="o">)</span>
0xa91a6a91c8d3afa118ae643d7c08c007
YDB&gt;write <span class="nv">$zyhash</span><span class="o">(</span><span class="s2">&quot;YottaDB Rocks!&quot;</span>,0<span class="o">)</span>
0xa91a6a91c8d3afa118ae643d7c08c007
YDB&gt;write <span class="nv">$zyhash</span><span class="o">(</span><span class="s2">&quot;YottaDB Rocks!&quot;</span>,123456789<span class="o">)</span>
0xb931c7fa5746e15dc9fdaecfb29b8626
YDB&gt;
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>$ZYHASH() should never be used when cryptographic quality hashes are needed.</p>
</div>
<p>$ZYHASH() is in YottaDB effective release <a class="reference external" href="https://gitlab.com/YottaDB/DB/YDB/-/tags/r1.30">r1.30</a>.</p>
</section>
</section>
<section id="zyissqlnull">
<h2><a class="toc-backref" href="functions.html#id67">$ZYISSQLNULL()</a><a class="headerlink" href="functions.html#zyissqlnull" title="Permalink to this heading">¶</a></h2>
<p>Returns 1 if its sole argument has a value <a class="reference internal" href="isv.html#zysqlnull-isv"><span class="std std-ref">$ZYSQLNULL</span></a>, and 0 otherwise.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZYISSQLNULL(expr)
</pre></div>
</div>
<section id="examples-of-zyissqlnull">
<h3>Examples of $ZYISSQLNULL()<a class="headerlink" href="functions.html#examples-of-zyissqlnull" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;set <span class="nv">x</span><span class="o">=</span><span class="nv">$ZYSQLNULL</span> write <span class="nv">$ZYISSQLNULL</span><span class="o">(</span>x<span class="o">)</span>
<span class="m">1</span>
YDB&gt;set <span class="nv">x</span><span class="o">=</span><span class="s2">&quot;Something else&quot;</span> write <span class="nv">$ZYISSQLNULL</span><span class="o">(</span>x<span class="o">)</span>
<span class="m">0</span>
YDB&gt;
</pre></div>
</div>
<p>$ZYISSQLNULL() is in YottaDB effective release <a class="reference external" href="https://gitlab.com/YottaDB/DB/YDB/-/tags/r1.30">r1.30</a>.</p>
</section>
</section>
<section id="zysuffix">
<h2><a class="toc-backref" href="functions.html#id68">$ZYSUFFIX()</a><a class="headerlink" href="functions.html#zysuffix" title="Permalink to this heading">¶</a></h2>
<p>Returns a 128-bit <a class="reference external" href="https://en.wikipedia.org/wiki/MurmurHash#MurmurHash3">MurmurHash3</a> of its string argument rendered as a 22 character alphanumeric (i.e., 0-9, a-z, A-Z) sequence suitable for concatenation to an application identifier (e.g., <code class="code docutils literal notranslate"><span class="pre">&quot;^%MyApp&quot;</span></code>) to generate names for global variables, local variables, and routines that are unique for all practical purposes.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>$ZYSU[FFIX](string)
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul class="simple">
<li><p>YottaDB supports names that are unique in the first 31 characters, and</p></li>
<li><p>The function may return different sequences for the same <code class="code docutils literal notranslate"><span class="pre">string</span></code> on different platforms</p></li>
</ul>
</div>
<section id="examples-of-zysuffix">
<h3>Examples of $ZYSUFFIX()<a class="headerlink" href="functions.html#examples-of-zysuffix" title="Permalink to this heading">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>YDB&gt;write <span class="nv">$zysuffix</span><span class="o">(</span><span class="s2">&quot;abc&quot;</span><span class="o">)</span>
jKHjZ0MZwBJAqO6sGQV7F5
YDB&gt;
</pre></div>
</div>
<p>$ZYSUFFIX() was added in YottaDB effective release <a class="reference external" href="https://gitlab.com/YottaDB/DB/YDB/-/tags/r1.32">r1.32</a>.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="commands.html" class="btn btn-neutral float-left" title="6. Commands" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="isv.html" class="btn btn-neutral float-right" title="8. Intrinsic Special Variables" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2017-2021, YottaDB LLC.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
  
<hr/>
<!-- DDG search widget,@author Juri Wornowitski,@version 2.0,@link https://www.plainlight.com/ddg --><div id="widdget" style="width:100%;margin:10px 0;"><style type="text/css">#widdget input {display:block;height:30px;padding:4px;outline:none;border:1px solid #8d8d8d;border-right:0;box-sizing:border-box;border-radius:3px 0 0 3px;width:calc(100% - 41px);font-size:15px;} #widdget button {float:left;cursor:pointer;width:43px;height:30px;color:#fff;background-image:linear-gradient(#7f72ca,#554492);border:0;border-radius:0 3px 3px 0;} #widdget button:active {background-image:linear-gradient(#002387,#002357);} #widdget button:focus {outline:none;}</style><form style="position:relative" onsubmit="this.elements[0].click();return false;"><div style="float:right;position:absolute;top:0;right:-2px;z-index:3"><button type="button" onclick="var v=this.parentElement.parentElement.elements[1].value;window.open('https://duckduckgo.com?q='+encodeURIComponent(v)+'+site%3Adocs.yottadb.com&kj=p');">&#128269;</button></div><input type="text" name="que" placeholder="Search documents with DuckDuckGo" /></form></div>
 


</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>